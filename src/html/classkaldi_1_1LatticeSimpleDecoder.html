<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Kaldi: LatticeSimpleDecoder Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" /> 
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
 <td id="projectlogo"><a href="http://kaldi-asr.org/"><img alt="Logo" src="KaldiTextAndLogoSmall.png"/ style="padding: 3px 5px 1px 5px"></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname" style="display:none">Kaldi
   </div>
  </td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief" style="display:none"></div>
    </td>
   <!--END PROJECT_BRIEF-->
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classkaldi_1_1LatticeSimpleDecoder.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classkaldi_1_1LatticeSimpleDecoder-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">LatticeSimpleDecoder Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Simplest possible decoder, included largely for didactic purposes and as a means to debug more highly optimized decoders.  
 <a href="classkaldi_1_1LatticeSimpleDecoder.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="lattice-simple-decoder_8h_source.html">lattice-simple-decoder.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for LatticeSimpleDecoder:</div>
<div class="dyncontent">
<div class="center"><img src="classkaldi_1_1LatticeSimpleDecoder__coll__graph.png" border="0" usemap="#LatticeSimpleDecoder_coll__map" alt="Collaboration graph"/></div>
<map name="LatticeSimpleDecoder_coll__map" id="LatticeSimpleDecoder_coll__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1LatticeSimpleDecoder_1_1ForwardLink.html">ForwardLink</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1LatticeSimpleDecoder_1_1Token.html">Token</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1LatticeSimpleDecoder_1_1TokenList.html">TokenList</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:aa1fd1346f06a44e4384da90d48ef5cd0"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">fst::StdArc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#aa1fd1346f06a44e4384da90d48ef5cd0">Arc</a></td></tr>
<tr class="separator:aa1fd1346f06a44e4384da90d48ef5cd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b4305fe971ea965a741395013fd9c49"><td class="memItemLeft" align="right" valign="top">typedef Arc::Label&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a8b4305fe971ea965a741395013fd9c49">Label</a></td></tr>
<tr class="separator:a8b4305fe971ea965a741395013fd9c49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ace4c191c83fe28b57d4d080ae967b0"><td class="memItemLeft" align="right" valign="top">typedef Arc::StateId&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a4ace4c191c83fe28b57d4d080ae967b0">StateId</a></td></tr>
<tr class="separator:a4ace4c191c83fe28b57d4d080ae967b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20d097b045b23dd618a3067dd4e3f915"><td class="memItemLeft" align="right" valign="top">typedef Arc::Weight&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a20d097b045b23dd618a3067dd4e3f915">Weight</a></td></tr>
<tr class="separator:a20d097b045b23dd618a3067dd4e3f915"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a394a70a6b36b563e0515e31168d2949c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a394a70a6b36b563e0515e31168d2949c">LatticeSimpleDecoder</a> (const fst::Fst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">fst::StdArc</a> &gt; &amp;fst, const <a class="el" href="structkaldi_1_1LatticeSimpleDecoderConfig.html">LatticeSimpleDecoderConfig</a> &amp;config)</td></tr>
<tr class="separator:a394a70a6b36b563e0515e31168d2949c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca2df3aae18b4951cdee43ec028d864e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#aca2df3aae18b4951cdee43ec028d864e">~LatticeSimpleDecoder</a> ()</td></tr>
<tr class="separator:aca2df3aae18b4951cdee43ec028d864e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27b0bb5e9d5fc0e799c5a62f25e7b47b"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structkaldi_1_1LatticeSimpleDecoderConfig.html">LatticeSimpleDecoderConfig</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a27b0bb5e9d5fc0e799c5a62f25e7b47b">GetOptions</a> () const</td></tr>
<tr class="separator:a27b0bb5e9d5fc0e799c5a62f25e7b47b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac78620c576a40d3bdb14dc87b2a754a5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#ac78620c576a40d3bdb14dc87b2a754a5">Decode</a> (<a class="el" href="classkaldi_1_1DecodableInterface.html">DecodableInterface</a> *decodable)</td></tr>
<tr class="separator:ac78620c576a40d3bdb14dc87b2a754a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad50a1511ad065870482b9af71818b4ef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#ad50a1511ad065870482b9af71818b4ef">ReachedFinal</a> () const</td></tr>
<tr class="memdesc:ad50a1511ad065870482b9af71818b4ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">says whether a final-state was active on the last frame.  <a href="#ad50a1511ad065870482b9af71818b4ef">More...</a><br /></td></tr>
<tr class="separator:ad50a1511ad065870482b9af71818b4ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad43c69eb4374e3a67d4cd91696a5d6e9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#ad43c69eb4374e3a67d4cd91696a5d6e9">InitDecoding</a> ()</td></tr>
<tr class="memdesc:ad43c69eb4374e3a67d4cd91696a5d6e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">InitDecoding initializes the decoding, and should only be used if you intend to call AdvanceDecoding().  <a href="#ad43c69eb4374e3a67d4cd91696a5d6e9">More...</a><br /></td></tr>
<tr class="separator:ad43c69eb4374e3a67d4cd91696a5d6e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a363a350323c7c881be0a0fc089d2b555"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a363a350323c7c881be0a0fc089d2b555">FinalizeDecoding</a> ()</td></tr>
<tr class="memdesc:a363a350323c7c881be0a0fc089d2b555"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function may be optionally called after AdvanceDecoding(), when you do not plan to decode any further.  <a href="#a363a350323c7c881be0a0fc089d2b555">More...</a><br /></td></tr>
<tr class="separator:a363a350323c7c881be0a0fc089d2b555"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab79c2c25990723951176c948ba1adc3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#aab79c2c25990723951176c948ba1adc3">FinalRelativeCost</a> () const</td></tr>
<tr class="memdesc:aab79c2c25990723951176c948ba1adc3"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#aab79c2c25990723951176c948ba1adc3" title="FinalRelativeCost() serves the same purpose as ReachedFinal(), but gives more information. ">FinalRelativeCost()</a> serves the same purpose as <a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#ad50a1511ad065870482b9af71818b4ef" title="says whether a final-state was active on the last frame. ">ReachedFinal()</a>, but gives more information.  <a href="#aab79c2c25990723951176c948ba1adc3">More...</a><br /></td></tr>
<tr class="separator:aab79c2c25990723951176c948ba1adc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90a79129dcfec6fad60c17b053736c0e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a90a79129dcfec6fad60c17b053736c0e">GetBestPath</a> (<a class="el" href="namespacekaldi.html#a4c9e4132556649881ca6f29dd13e2742">Lattice</a> *lat, <a class="el" href="classbool.html">bool</a> use_final_probs=true) const</td></tr>
<tr class="separator:a90a79129dcfec6fad60c17b053736c0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4f0b104b3e655bb003325f901651599"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#aa4f0b104b3e655bb003325f901651599">GetRawLattice</a> (<a class="el" href="namespacekaldi.html#a4c9e4132556649881ca6f29dd13e2742">Lattice</a> *lat, <a class="el" href="classbool.html">bool</a> use_final_probs=true) const</td></tr>
<tr class="separator:aa4f0b104b3e655bb003325f901651599"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a873116b8637b3d23998b37cca6333c08"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a873116b8637b3d23998b37cca6333c08">GetLattice</a> (<a class="el" href="namespacekaldi.html#aeba2c05d999bd2f794db8919ac816bb3">CompactLattice</a> *clat, <a class="el" href="classbool.html">bool</a> use_final_probs=true) const</td></tr>
<tr class="separator:a873116b8637b3d23998b37cca6333c08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa030f3b26871bfec31b5e59cac3ba76d"><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#aa030f3b26871bfec31b5e59cac3ba76d">NumFramesDecoded</a> () const</td></tr>
<tr class="separator:aa030f3b26871bfec31b5e59cac3ba76d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a209afa3e1ac1c6a456f0169b239a0e73"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structkaldi_1_1LatticeSimpleDecoder_1_1Token.html">Token</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a209afa3e1ac1c6a456f0169b239a0e73">FindOrAddToken</a> (<a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a4ace4c191c83fe28b57d4d080ae967b0">StateId</a> state, int32 frame_plus_one, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> tot_cost, <a class="el" href="classbool.html">bool</a> emitting, <a class="el" href="classbool.html">bool</a> *changed)</td></tr>
<tr class="separator:a209afa3e1ac1c6a456f0169b239a0e73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84cb8fb599f84db72b10ac60769ba98e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a84cb8fb599f84db72b10ac60769ba98e">PruneForwardLinks</a> (int32 frame, <a class="el" href="classbool.html">bool</a> *extra_costs_changed, <a class="el" href="classbool.html">bool</a> *links_pruned, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> delta)</td></tr>
<tr class="separator:a84cb8fb599f84db72b10ac60769ba98e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a860ae70828a0cd0382b81cc3558a2a02"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a860ae70828a0cd0382b81cc3558a2a02">PruneForwardLinksFinal</a> ()</td></tr>
<tr class="separator:a860ae70828a0cd0382b81cc3558a2a02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d76d21bba5c61771c8020a111e4f354"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a9d76d21bba5c61771c8020a111e4f354">PruneTokensForFrame</a> (int32 frame)</td></tr>
<tr class="separator:a9d76d21bba5c61771c8020a111e4f354"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93dce8f102ac41f19dc657dd9026a811"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a93dce8f102ac41f19dc657dd9026a811">PruneActiveTokens</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> delta)</td></tr>
<tr class="separator:a93dce8f102ac41f19dc657dd9026a811"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a615f332fd931b36ceca4f2e7a885463e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a615f332fd931b36ceca4f2e7a885463e">ProcessEmitting</a> (<a class="el" href="classkaldi_1_1DecodableInterface.html">DecodableInterface</a> *decodable)</td></tr>
<tr class="separator:a615f332fd931b36ceca4f2e7a885463e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e5f04593aaee518bf37687a05cb29cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a3e5f04593aaee518bf37687a05cb29cf">ProcessNonemitting</a> ()</td></tr>
<tr class="separator:a3e5f04593aaee518bf37687a05cb29cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae09bece0bb8eb98a4bf14a74351f2558"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#ae09bece0bb8eb98a4bf14a74351f2558">ClearActiveTokens</a> ()</td></tr>
<tr class="separator:ae09bece0bb8eb98a4bf14a74351f2558"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abac1d9b6331d75273f079182a8995d19"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#abac1d9b6331d75273f079182a8995d19">ComputeFinalCosts</a> (unordered_map&lt; <a class="el" href="structkaldi_1_1LatticeSimpleDecoder_1_1Token.html">Token</a> *, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *final_costs, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> *final_relative_cost, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> *final_best_cost) const</td></tr>
<tr class="separator:abac1d9b6331d75273f079182a8995d19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b3797990c03b5e69bcc4beff13482eb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a3b3797990c03b5e69bcc4beff13482eb">PruneCurrentTokens</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> beam, unordered_map&lt; <a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a4ace4c191c83fe28b57d4d080ae967b0">StateId</a>, <a class="el" href="structkaldi_1_1LatticeSimpleDecoder_1_1Token.html">Token</a> *&gt; *toks)</td></tr>
<tr class="separator:a3b3797990c03b5e69bcc4beff13482eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aa7220626d9ea4e8aff1315ef5c68bd81"><td class="memItemLeft" align="right" valign="top">unordered_map&lt; <a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a4ace4c191c83fe28b57d4d080ae967b0">StateId</a>, <a class="el" href="structkaldi_1_1LatticeSimpleDecoder_1_1Token.html">Token</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#aa7220626d9ea4e8aff1315ef5c68bd81">cur_toks_</a></td></tr>
<tr class="separator:aa7220626d9ea4e8aff1315ef5c68bd81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f20aebe7a2cacd960afb828145c1a68"><td class="memItemLeft" align="right" valign="top">unordered_map&lt; <a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a4ace4c191c83fe28b57d4d080ae967b0">StateId</a>, <a class="el" href="structkaldi_1_1LatticeSimpleDecoder_1_1Token.html">Token</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a5f20aebe7a2cacd960afb828145c1a68">prev_toks_</a></td></tr>
<tr class="separator:a5f20aebe7a2cacd960afb828145c1a68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a559a7c781b217933b6b2aaf9c15be0d0"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structkaldi_1_1LatticeSimpleDecoder_1_1TokenList.html">TokenList</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a></td></tr>
<tr class="separator:a559a7c781b217933b6b2aaf9c15be0d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6a9be3017661463c1d83b3dd1933cfb"><td class="memItemLeft" align="right" valign="top">const fst::Fst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">fst::StdArc</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#ae6a9be3017661463c1d83b3dd1933cfb">fst_</a></td></tr>
<tr class="separator:ae6a9be3017661463c1d83b3dd1933cfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7511a7d279476b9b6f5c758b293b53f8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structkaldi_1_1LatticeSimpleDecoderConfig.html">LatticeSimpleDecoderConfig</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a7511a7d279476b9b6f5c758b293b53f8">config_</a></td></tr>
<tr class="separator:a7511a7d279476b9b6f5c758b293b53f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21115816f8d2258f49f4934d2d9d83a7"><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a21115816f8d2258f49f4934d2d9d83a7">num_toks_</a></td></tr>
<tr class="separator:a21115816f8d2258f49f4934d2d9d83a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd4660a81d0a829a6920416d202a7041"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#abd4660a81d0a829a6920416d202a7041">warned_</a></td></tr>
<tr class="separator:abd4660a81d0a829a6920416d202a7041"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad15b222ead591bfc30e26feb230484bf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#ad15b222ead591bfc30e26feb230484bf">decoding_finalized_</a></td></tr>
<tr class="memdesc:ad15b222ead591bfc30e26feb230484bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">decoding_finalized_ is true if someone called <a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a363a350323c7c881be0a0fc089d2b555" title="This function may be optionally called after AdvanceDecoding(), when you do not plan to decode any fu...">FinalizeDecoding()</a>.  <a href="#ad15b222ead591bfc30e26feb230484bf">More...</a><br /></td></tr>
<tr class="separator:ad15b222ead591bfc30e26feb230484bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40bc4ede3f47b67f9c1920c5c7de4370"><td class="memItemLeft" align="right" valign="top">unordered_map&lt; <a class="el" href="structkaldi_1_1LatticeSimpleDecoder_1_1Token.html">Token</a> *, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a40bc4ede3f47b67f9c1920c5c7de4370">final_costs_</a></td></tr>
<tr class="memdesc:a40bc4ede3f47b67f9c1920c5c7de4370"><td class="mdescLeft">&#160;</td><td class="mdescRight">For the meaning of the next 3 variables, see the comment for decoding_finalized_ above., and <a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#abac1d9b6331d75273f079182a8995d19">ComputeFinalCosts()</a>.  <a href="#a40bc4ede3f47b67f9c1920c5c7de4370">More...</a><br /></td></tr>
<tr class="separator:a40bc4ede3f47b67f9c1920c5c7de4370"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac89f0cc0de0da3c074f79341f3611b30"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#ac89f0cc0de0da3c074f79341f3611b30">final_relative_cost_</a></td></tr>
<tr class="separator:ac89f0cc0de0da3c074f79341f3611b30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49eb722260aa57b473caac342187b63c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a49eb722260aa57b473caac342187b63c">final_best_cost_</a></td></tr>
<tr class="separator:a49eb722260aa57b473caac342187b63c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Simplest possible decoder, included largely for didactic purposes and as a means to debug more highly optimized decoders. </p>
<p>See <a class="el" href="decoders.html#decoders_simple">SimpleDecoder: the simplest possible decoder</a> for more information. </p>

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8h_source.html#l00076">76</a> of file <a class="el" href="lattice-simple-decoder_8h_source.html">lattice-simple-decoder.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="aa1fd1346f06a44e4384da90d48ef5cd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1fd1346f06a44e4384da90d48ef5cd0">&#9670;&nbsp;</a></span>Arc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">fst::StdArc</a> <a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#aa1fd1346f06a44e4384da90d48ef5cd0">Arc</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8h_source.html#l00078">78</a> of file <a class="el" href="lattice-simple-decoder_8h_source.html">lattice-simple-decoder.h</a>.</p>

</div>
</div>
<a id="a8b4305fe971ea965a741395013fd9c49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b4305fe971ea965a741395013fd9c49">&#9670;&nbsp;</a></span>Label</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef Arc::Label <a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a8b4305fe971ea965a741395013fd9c49">Label</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8h_source.html#l00079">79</a> of file <a class="el" href="lattice-simple-decoder_8h_source.html">lattice-simple-decoder.h</a>.</p>

</div>
</div>
<a id="a4ace4c191c83fe28b57d4d080ae967b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ace4c191c83fe28b57d4d080ae967b0">&#9670;&nbsp;</a></span>StateId</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef Arc::StateId <a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a4ace4c191c83fe28b57d4d080ae967b0">StateId</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8h_source.html#l00080">80</a> of file <a class="el" href="lattice-simple-decoder_8h_source.html">lattice-simple-decoder.h</a>.</p>

</div>
</div>
<a id="a20d097b045b23dd618a3067dd4e3f915"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20d097b045b23dd618a3067dd4e3f915">&#9670;&nbsp;</a></span>Weight</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef Arc::Weight <a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a20d097b045b23dd618a3067dd4e3f915">Weight</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8h_source.html#l00081">81</a> of file <a class="el" href="lattice-simple-decoder_8h_source.html">lattice-simple-decoder.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a394a70a6b36b563e0515e31168d2949c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a394a70a6b36b563e0515e31168d2949c">&#9670;&nbsp;</a></span>LatticeSimpleDecoder()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html">LatticeSimpleDecoder</a> </td>
          <td>(</td>
          <td class="paramtype">const fst::Fst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">fst::StdArc</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structkaldi_1_1LatticeSimpleDecoderConfig.html">LatticeSimpleDecoderConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8h_source.html#l00083">83</a> of file <a class="el" href="lattice-simple-decoder_8h_source.html">lattice-simple-decoder.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-simple-decoder_8h_source.html#l00066">LatticeSimpleDecoderConfig::Check()</a>.</p>
<div class="fragment"><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                                                                :</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#ae6a9be3017661463c1d83b3dd1933cfb">fst_</a>(<a class="code" href="namespacefst.html">fst</a>), <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a7511a7d279476b9b6f5c758b293b53f8">config_</a>(config), <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a21115816f8d2258f49f4934d2d9d83a7">num_toks_</a>(0) { config.Check(); }</div><div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a7511a7d279476b9b6f5c758b293b53f8"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a7511a7d279476b9b6f5c758b293b53f8">kaldi::LatticeSimpleDecoder::config_</a></div><div class="ttdeci">LatticeSimpleDecoderConfig config_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00294">lattice-simple-decoder.h:294</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a21115816f8d2258f49f4934d2d9d83a7"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a21115816f8d2258f49f4934d2d9d83a7">kaldi::LatticeSimpleDecoder::num_toks_</a></div><div class="ttdeci">int32 num_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00295">lattice-simple-decoder.h:295</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_ae6a9be3017661463c1d83b3dd1933cfb"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#ae6a9be3017661463c1d83b3dd1933cfb">kaldi::LatticeSimpleDecoder::fst_</a></div><div class="ttdeci">const fst::Fst&lt; fst::StdArc &gt; &amp; fst_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00293">lattice-simple-decoder.h:293</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aca2df3aae18b4951cdee43ec028d864e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca2df3aae18b4951cdee43ec028d864e">&#9670;&nbsp;</a></span>~LatticeSimpleDecoder()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html">LatticeSimpleDecoder</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8h_source.html#l00087">87</a> of file <a class="el" href="lattice-simple-decoder_8h_source.html">lattice-simple-decoder.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;{ <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#ae09bece0bb8eb98a4bf14a74351f2558">ClearActiveTokens</a>(); }</div><div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_ae09bece0bb8eb98a4bf14a74351f2558"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#ae09bece0bb8eb98a4bf14a74351f2558">kaldi::LatticeSimpleDecoder::ClearActiveTokens</a></div><div class="ttdeci">void ClearActiveTokens()</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8cc_source.html#l00617">lattice-simple-decoder.cc:617</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ae09bece0bb8eb98a4bf14a74351f2558"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae09bece0bb8eb98a4bf14a74351f2558">&#9670;&nbsp;</a></span>ClearActiveTokens()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ClearActiveTokens </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8cc_source.html#l00617">617</a> of file <a class="el" href="lattice-simple-decoder_8cc_source.html">lattice-simple-decoder.cc</a>.</p>

<p class="reference">References <a class="el" href="lattice-simple-decoder_8h_source.html#l00291">LatticeSimpleDecoder::active_toks_</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00196">LatticeSimpleDecoder::Token::next</a>, and <a class="el" href="lattice-simple-decoder_8h_source.html#l00295">LatticeSimpleDecoder::num_toks_</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-simple-decoder_8cc_source.html#l00027">LatticeSimpleDecoder::InitDecoding()</a>.</p>
<div class="fragment"><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                                             { <span class="comment">// a cleanup routine, at utt end/begin</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="comment">// Delete all tokens alive on this frame, and any forward</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="comment">// links they may have.</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="keywordflow">for</span> (Token *tok = <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].toks; tok != NULL; ) {</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      tok-&gt;DeleteForwardLinks();</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      Token *next_tok = tok-&gt;next;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <span class="keyword">delete</span> tok;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a21115816f8d2258f49f4934d2d9d83a7">num_toks_</a>--;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      tok = next_tok;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    }</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  }</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.clear();</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a21115816f8d2258f49f4934d2d9d83a7">num_toks_</a> == 0);</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a559a7c781b217933b6b2aaf9c15be0d0"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">kaldi::LatticeSimpleDecoder::active_toks_</a></div><div class="ttdeci">std::vector&lt; TokenList &gt; active_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00291">lattice-simple-decoder.h:291</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a21115816f8d2258f49f4934d2d9d83a7"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a21115816f8d2258f49f4934d2d9d83a7">kaldi::LatticeSimpleDecoder::num_toks_</a></div><div class="ttdeci">int32 num_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00295">lattice-simple-decoder.h:295</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abac1d9b6331d75273f079182a8995d19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abac1d9b6331d75273f079182a8995d19">&#9670;&nbsp;</a></span>ComputeFinalCosts()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ComputeFinalCosts </td>
          <td>(</td>
          <td class="paramtype">unordered_map&lt; <a class="el" href="structkaldi_1_1LatticeSimpleDecoder_1_1Token.html">Token</a> *, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *&#160;</td>
          <td class="paramname"><em>final_costs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> *&#160;</td>
          <td class="paramname"><em>final_relative_cost</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> *&#160;</td>
          <td class="paramname"><em>final_best_cost</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8cc_source.html#l00292">292</a> of file <a class="el" href="lattice-simple-decoder_8cc_source.html">lattice-simple-decoder.cc</a>.</p>

<p class="reference">References <a class="el" href="lattice-simple-decoder_8h_source.html#l00289">LatticeSimpleDecoder::cur_toks_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00306">LatticeSimpleDecoder::decoding_finalized_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00293">LatticeSimpleDecoder::fst_</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, and <a class="el" href="lattice-simple-decoder_8h_source.html#l00186">LatticeSimpleDecoder::Token::tot_cost</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-simple-decoder_8cc_source.html#l00421">LatticeSimpleDecoder::FinalRelativeCost()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00078">LatticeSimpleDecoder::GetRawLattice()</a>, and <a class="el" href="lattice-simple-decoder_8cc_source.html#l00338">LatticeSimpleDecoder::PruneForwardLinksFinal()</a>.</p>
<div class="fragment"><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                                      {</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(!<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#ad15b222ead591bfc30e26feb230484bf">decoding_finalized_</a>);</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="keywordflow">if</span> (final_costs != NULL)</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    final_costs-&gt;clear();</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> infinity = std::numeric_limits&lt;BaseFloat&gt;::infinity();</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> best_cost = infinity,</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      best_cost_with_final = infinity;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  </div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="keywordflow">for</span> (unordered_map&lt;StateId, Token*&gt;::const_iterator iter = <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#aa7220626d9ea4e8aff1315ef5c68bd81">cur_toks_</a>.begin();</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;       iter != <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#aa7220626d9ea4e8aff1315ef5c68bd81">cur_toks_</a>.end(); ++iter) {</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a4ace4c191c83fe28b57d4d080ae967b0">StateId</a> state = iter-&gt;first;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    Token *tok = iter-&gt;second;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> final_cost = <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#ae6a9be3017661463c1d83b3dd1933cfb">fst_</a>.Final(state).Value();</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> cost = tok-&gt;tot_cost,</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        cost_with_final = cost + final_cost;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    best_cost = std::min(cost, best_cost);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    best_cost_with_final = std::min(cost_with_final, best_cost_with_final);</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">if</span> (final_costs != NULL &amp;&amp; final_cost != infinity)</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      (*final_costs)[tok] = final_cost;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  }</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keywordflow">if</span> (final_relative_cost != NULL) {</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">if</span> (best_cost == infinity &amp;&amp; best_cost_with_final == infinity) {</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <span class="comment">// Likely this will only happen if there are no tokens surviving.</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <span class="comment">// This seems the least bad way to handle it.</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      *final_relative_cost = infinity;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      *final_relative_cost = best_cost_with_final - best_cost;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    }</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  }</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="keywordflow">if</span> (final_best_cost != NULL) {</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordflow">if</span> (best_cost_with_final != infinity) { <span class="comment">// final-state exists.</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      *final_best_cost = best_cost_with_final;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    } <span class="keywordflow">else</span> { <span class="comment">// no final-state exists.</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      *final_best_cost = best_cost;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    }</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  }</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a4ace4c191c83fe28b57d4d080ae967b0"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a4ace4c191c83fe28b57d4d080ae967b0">kaldi::LatticeSimpleDecoder::StateId</a></div><div class="ttdeci">Arc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00080">lattice-simple-decoder.h:80</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_ad15b222ead591bfc30e26feb230484bf"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#ad15b222ead591bfc30e26feb230484bf">kaldi::LatticeSimpleDecoder::decoding_finalized_</a></div><div class="ttdeci">bool decoding_finalized_</div><div class="ttdoc">decoding_finalized_ is true if someone called FinalizeDecoding(). </div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00306">lattice-simple-decoder.h:306</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_ae6a9be3017661463c1d83b3dd1933cfb"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#ae6a9be3017661463c1d83b3dd1933cfb">kaldi::LatticeSimpleDecoder::fst_</a></div><div class="ttdeci">const fst::Fst&lt; fst::StdArc &gt; &amp; fst_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00293">lattice-simple-decoder.h:293</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_aa7220626d9ea4e8aff1315ef5c68bd81"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#aa7220626d9ea4e8aff1315ef5c68bd81">kaldi::LatticeSimpleDecoder::cur_toks_</a></div><div class="ttdeci">unordered_map&lt; StateId, Token * &gt; cur_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00289">lattice-simple-decoder.h:289</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac78620c576a40d3bdb14dc87b2a754a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac78620c576a40d3bdb14dc87b2a754a5">&#9670;&nbsp;</a></span>Decode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> Decode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1DecodableInterface.html">DecodableInterface</a> *&#160;</td>
          <td class="paramname"><em>decodable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8cc_source.html#l00046">46</a> of file <a class="el" href="lattice-simple-decoder_8cc_source.html">lattice-simple-decoder.cc</a>.</p>

<p class="reference">References <a class="el" href="lattice-simple-decoder_8h_source.html#l00038">LatticeSimpleDecoderConfig::beam</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00294">LatticeSimpleDecoder::config_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00289">LatticeSimpleDecoder::cur_toks_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00309">LatticeSimpleDecoder::final_costs_</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00495">LatticeSimpleDecoder::FinalizeDecoding()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00027">LatticeSimpleDecoder::InitDecoding()</a>, <a class="el" href="classkaldi_1_1DecodableInterface.html#a9e2dede1c20fce727f2666fe45a06ab3">DecodableInterface::IsLastFrame()</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00039">LatticeSimpleDecoderConfig::lattice_beam</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00160">LatticeSimpleDecoder::NumFramesDecoded()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00510">LatticeSimpleDecoder::ProcessEmitting()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00550">LatticeSimpleDecoder::ProcessNonemitting()</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00040">LatticeSimpleDecoderConfig::prune_interval</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00045">LatticeSimpleDecoderConfig::prune_scale</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00462">LatticeSimpleDecoder::PruneActiveTokens()</a>, and <a class="el" href="lattice-simple-decoder_8cc_source.html#l00636">LatticeSimpleDecoder::PruneCurrentTokens()</a>.</p>

<p class="reference">Referenced by <a class="el" href="decoder-wrappers_8cc_source.html#l00331">kaldi::DecodeUtteranceLatticeSimple()</a>.</p>
<div class="fragment"><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                                                               {</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#ad43c69eb4374e3a67d4cd91696a5d6e9">InitDecoding</a>();</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  </div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="keywordflow">while</span> (!decodable-&gt;IsLastFrame(<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#aa030f3b26871bfec31b5e59cac3ba76d">NumFramesDecoded</a>() - 1)) {  </div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#aa030f3b26871bfec31b5e59cac3ba76d">NumFramesDecoded</a>() % <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a7511a7d279476b9b6f5c758b293b53f8">config_</a>.<a class="code" href="structkaldi_1_1LatticeSimpleDecoderConfig.html#adc7cb2df42057c368ac36be78f4f57dd">prune_interval</a> == 0)</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;      <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a93dce8f102ac41f19dc657dd9026a811">PruneActiveTokens</a>(<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a7511a7d279476b9b6f5c758b293b53f8">config_</a>.<a class="code" href="structkaldi_1_1LatticeSimpleDecoderConfig.html#abf32d733b7437195b42a4d867fd5784b">lattice_beam</a> * <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a7511a7d279476b9b6f5c758b293b53f8">config_</a>.<a class="code" href="structkaldi_1_1LatticeSimpleDecoderConfig.html#abaa74d02c4779b36819d3ec6c91385c9">prune_scale</a>);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a615f332fd931b36ceca4f2e7a885463e">ProcessEmitting</a>(decodable);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="comment">// Important to call PruneCurrentTokens before ProcessNonemitting, or we</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="comment">// would get dangling forward pointers.  Anyway, ProcessNonemitting uses the</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="comment">// beam.</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a3b3797990c03b5e69bcc4beff13482eb">PruneCurrentTokens</a>(<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a7511a7d279476b9b6f5c758b293b53f8">config_</a>.<a class="code" href="structkaldi_1_1LatticeSimpleDecoderConfig.html#aac27eaf00599707440629f2f6a274e02">beam</a>, &amp;<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#aa7220626d9ea4e8aff1315ef5c68bd81">cur_toks_</a>);</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a3e5f04593aaee518bf37687a05cb29cf">ProcessNonemitting</a>();</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  }</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a363a350323c7c881be0a0fc089d2b555">FinalizeDecoding</a>();</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  </div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="comment">// Returns true if we have any kind of traceback available (not necessarily</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="comment">// to the end state; query ReachedFinal() for that).</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordflow">return</span> !<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a40bc4ede3f47b67f9c1920c5c7de4370">final_costs_</a>.empty();</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_ad43c69eb4374e3a67d4cd91696a5d6e9"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#ad43c69eb4374e3a67d4cd91696a5d6e9">kaldi::LatticeSimpleDecoder::InitDecoding</a></div><div class="ttdeci">void InitDecoding()</div><div class="ttdoc">InitDecoding initializes the decoding, and should only be used if you intend to call AdvanceDecoding(...</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8cc_source.html#l00027">lattice-simple-decoder.cc:27</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a7511a7d279476b9b6f5c758b293b53f8"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a7511a7d279476b9b6f5c758b293b53f8">kaldi::LatticeSimpleDecoder::config_</a></div><div class="ttdeci">LatticeSimpleDecoderConfig config_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00294">lattice-simple-decoder.h:294</a></div></div>
<div class="ttc" id="structkaldi_1_1LatticeSimpleDecoderConfig_html_abf32d733b7437195b42a4d867fd5784b"><div class="ttname"><a href="structkaldi_1_1LatticeSimpleDecoderConfig.html#abf32d733b7437195b42a4d867fd5784b">kaldi::LatticeSimpleDecoderConfig::lattice_beam</a></div><div class="ttdeci">BaseFloat lattice_beam</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00039">lattice-simple-decoder.h:39</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_aa030f3b26871bfec31b5e59cac3ba76d"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#aa030f3b26871bfec31b5e59cac3ba76d">kaldi::LatticeSimpleDecoder::NumFramesDecoded</a></div><div class="ttdeci">int32 NumFramesDecoded() const</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00160">lattice-simple-decoder.h:160</a></div></div>
<div class="ttc" id="structkaldi_1_1LatticeSimpleDecoderConfig_html_abaa74d02c4779b36819d3ec6c91385c9"><div class="ttname"><a href="structkaldi_1_1LatticeSimpleDecoderConfig.html#abaa74d02c4779b36819d3ec6c91385c9">kaldi::LatticeSimpleDecoderConfig::prune_scale</a></div><div class="ttdeci">BaseFloat prune_scale</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00045">lattice-simple-decoder.h:45</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a40bc4ede3f47b67f9c1920c5c7de4370"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a40bc4ede3f47b67f9c1920c5c7de4370">kaldi::LatticeSimpleDecoder::final_costs_</a></div><div class="ttdeci">unordered_map&lt; Token *, BaseFloat &gt; final_costs_</div><div class="ttdoc">For the meaning of the next 3 variables, see the comment for decoding_finalized_ above., and ComputeFinalCosts(). </div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00309">lattice-simple-decoder.h:309</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a363a350323c7c881be0a0fc089d2b555"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a363a350323c7c881be0a0fc089d2b555">kaldi::LatticeSimpleDecoder::FinalizeDecoding</a></div><div class="ttdeci">void FinalizeDecoding()</div><div class="ttdoc">This function may be optionally called after AdvanceDecoding(), when you do not plan to decode any fu...</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8cc_source.html#l00495">lattice-simple-decoder.cc:495</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a3b3797990c03b5e69bcc4beff13482eb"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a3b3797990c03b5e69bcc4beff13482eb">kaldi::LatticeSimpleDecoder::PruneCurrentTokens</a></div><div class="ttdeci">void PruneCurrentTokens(BaseFloat beam, unordered_map&lt; StateId, Token *&gt; *toks)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8cc_source.html#l00636">lattice-simple-decoder.cc:636</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a93dce8f102ac41f19dc657dd9026a811"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a93dce8f102ac41f19dc657dd9026a811">kaldi::LatticeSimpleDecoder::PruneActiveTokens</a></div><div class="ttdeci">void PruneActiveTokens(BaseFloat delta)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8cc_source.html#l00462">lattice-simple-decoder.cc:462</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a3e5f04593aaee518bf37687a05cb29cf"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a3e5f04593aaee518bf37687a05cb29cf">kaldi::LatticeSimpleDecoder::ProcessNonemitting</a></div><div class="ttdeci">void ProcessNonemitting()</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8cc_source.html#l00550">lattice-simple-decoder.cc:550</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a615f332fd931b36ceca4f2e7a885463e"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a615f332fd931b36ceca4f2e7a885463e">kaldi::LatticeSimpleDecoder::ProcessEmitting</a></div><div class="ttdeci">void ProcessEmitting(DecodableInterface *decodable)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8cc_source.html#l00510">lattice-simple-decoder.cc:510</a></div></div>
<div class="ttc" id="structkaldi_1_1LatticeSimpleDecoderConfig_html_aac27eaf00599707440629f2f6a274e02"><div class="ttname"><a href="structkaldi_1_1LatticeSimpleDecoderConfig.html#aac27eaf00599707440629f2f6a274e02">kaldi::LatticeSimpleDecoderConfig::beam</a></div><div class="ttdeci">BaseFloat beam</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00038">lattice-simple-decoder.h:38</a></div></div>
<div class="ttc" id="structkaldi_1_1LatticeSimpleDecoderConfig_html_adc7cb2df42057c368ac36be78f4f57dd"><div class="ttname"><a href="structkaldi_1_1LatticeSimpleDecoderConfig.html#adc7cb2df42057c368ac36be78f4f57dd">kaldi::LatticeSimpleDecoderConfig::prune_interval</a></div><div class="ttdeci">int32 prune_interval</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00040">lattice-simple-decoder.h:40</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_aa7220626d9ea4e8aff1315ef5c68bd81"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#aa7220626d9ea4e8aff1315ef5c68bd81">kaldi::LatticeSimpleDecoder::cur_toks_</a></div><div class="ttdeci">unordered_map&lt; StateId, Token * &gt; cur_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00289">lattice-simple-decoder.h:289</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a363a350323c7c881be0a0fc089d2b555"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a363a350323c7c881be0a0fc089d2b555">&#9670;&nbsp;</a></span>FinalizeDecoding()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FinalizeDecoding </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function may be optionally called after AdvanceDecoding(), when you do not plan to decode any further. </p>
<p>It does an extra pruning step that will help to prune the lattices output by GetLattice and (particularly) GetRawLattice more accurately, particularly toward the end of the utterance. It does this by using the final-probs in pruning (if any final-state survived); it also does a final pruning step that visits all states (the pruning that is done during decoding may fail to prune states that are within kPruningScale = 0.1 outside of the beam). If you call this, you cannot call AdvanceDecoding again (it will fail), and you cannot call <a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a873116b8637b3d23998b37cca6333c08">GetLattice()</a> and related functions with use_final_probs = false. Used to be called PruneActiveTokensFinal(). </p>

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8cc_source.html#l00495">495</a> of file <a class="el" href="lattice-simple-decoder_8cc_source.html">lattice-simple-decoder.cc</a>.</p>

<p class="reference">References <a class="el" href="kaldi-error_8h_source.html#l00135">KALDI_VLOG</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00295">LatticeSimpleDecoder::num_toks_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00160">LatticeSimpleDecoder::NumFramesDecoded()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00228">LatticeSimpleDecoder::PruneForwardLinks()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00338">LatticeSimpleDecoder::PruneForwardLinksFinal()</a>, and <a class="el" href="lattice-simple-decoder_8cc_source.html#l00436">LatticeSimpleDecoder::PruneTokensForFrame()</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-simple-decoder_8cc_source.html#l00046">LatticeSimpleDecoder::Decode()</a>.</p>
<div class="fragment"><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                                            {</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  int32 final_frame_plus_one = <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#aa030f3b26871bfec31b5e59cac3ba76d">NumFramesDecoded</a>();  </div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  int32 num_toks_begin = <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a21115816f8d2258f49f4934d2d9d83a7">num_toks_</a>;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a860ae70828a0cd0382b81cc3558a2a02">PruneForwardLinksFinal</a>();</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  <span class="keywordflow">for</span> (int32 f = final_frame_plus_one - 1; f &gt;= 0; f--) {  </div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordtype">bool</span> b1, b2; <span class="comment">// values not used.</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> dontcare = 0.0;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a84cb8fb599f84db72b10ac60769ba98e">PruneForwardLinks</a>(f, &amp;b1, &amp;b2, dontcare);</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a9d76d21bba5c61771c8020a111e4f354">PruneTokensForFrame</a>(f + 1);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  }</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a9d76d21bba5c61771c8020a111e4f354">PruneTokensForFrame</a>(0); </div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <a class="code" href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a>(3) &lt;&lt; <span class="stringliteral">&quot;pruned tokens from &quot;</span> &lt;&lt; num_toks_begin</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                &lt;&lt; <span class="stringliteral">&quot; to &quot;</span> &lt;&lt; <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a21115816f8d2258f49f4934d2d9d83a7">num_toks_</a>;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_aa030f3b26871bfec31b5e59cac3ba76d"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#aa030f3b26871bfec31b5e59cac3ba76d">kaldi::LatticeSimpleDecoder::NumFramesDecoded</a></div><div class="ttdeci">int32 NumFramesDecoded() const</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00160">lattice-simple-decoder.h:160</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a21115816f8d2258f49f4934d2d9d83a7"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a21115816f8d2258f49f4934d2d9d83a7">kaldi::LatticeSimpleDecoder::num_toks_</a></div><div class="ttdeci">int32 num_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00295">lattice-simple-decoder.h:295</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a84cb8fb599f84db72b10ac60769ba98e"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a84cb8fb599f84db72b10ac60769ba98e">kaldi::LatticeSimpleDecoder::PruneForwardLinks</a></div><div class="ttdeci">void PruneForwardLinks(int32 frame, bool *extra_costs_changed, bool *links_pruned, BaseFloat delta)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8cc_source.html#l00228">lattice-simple-decoder.cc:228</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a860ae70828a0cd0382b81cc3558a2a02"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a860ae70828a0cd0382b81cc3558a2a02">kaldi::LatticeSimpleDecoder::PruneForwardLinksFinal</a></div><div class="ttdeci">void PruneForwardLinksFinal()</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8cc_source.html#l00338">lattice-simple-decoder.cc:338</a></div></div>
<div class="ttc" id="group__error__group_html_ga16c81ec6ff3ba04c6ff96fdaed9d854e"><div class="ttname"><a href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a></div><div class="ttdeci">#define KALDI_VLOG(v)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00135">kaldi-error.h:135</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a9d76d21bba5c61771c8020a111e4f354"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a9d76d21bba5c61771c8020a111e4f354">kaldi::LatticeSimpleDecoder::PruneTokensForFrame</a></div><div class="ttdeci">void PruneTokensForFrame(int32 frame)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8cc_source.html#l00436">lattice-simple-decoder.cc:436</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aab79c2c25990723951176c948ba1adc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab79c2c25990723951176c948ba1adc3">&#9670;&nbsp;</a></span>FinalRelativeCost()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> FinalRelativeCost </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#aab79c2c25990723951176c948ba1adc3" title="FinalRelativeCost() serves the same purpose as ReachedFinal(), but gives more information. ">FinalRelativeCost()</a> serves the same purpose as <a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#ad50a1511ad065870482b9af71818b4ef" title="says whether a final-state was active on the last frame. ">ReachedFinal()</a>, but gives more information. </p>
<p>It returns the difference between the best (final-cost plus cost) of any token on the final frame, and the best cost of any token on the final frame. If it is infinity it means no final-states were present on the final frame. It will usually be nonnegative. If it not too positive (e.g. &lt; 5 is my first guess, but this is not tested) you can take it as a good indication that we reached the final-state with reasonable likelihood. </p>

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8cc_source.html#l00421">421</a> of file <a class="el" href="lattice-simple-decoder_8cc_source.html">lattice-simple-decoder.cc</a>.</p>

<p class="reference">References <a class="el" href="lattice-simple-decoder_8cc_source.html#l00292">LatticeSimpleDecoder::ComputeFinalCosts()</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00306">LatticeSimpleDecoder::decoding_finalized_</a>, and <a class="el" href="lattice-simple-decoder_8h_source.html#l00310">LatticeSimpleDecoder::final_relative_cost_</a>.</p>
<div class="fragment"><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                                                        {</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#ad15b222ead591bfc30e26feb230484bf">decoding_finalized_</a>) {</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> relative_cost;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#abac1d9b6331d75273f079182a8995d19">ComputeFinalCosts</a>(NULL, &amp;relative_cost, NULL);</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordflow">return</span> relative_cost;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="comment">// we&#39;re not allowed to call that function if FinalizeDecoding() has</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="comment">// been called; return a cached value.</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#ac89f0cc0de0da3c074f79341f3611b30">final_relative_cost_</a>;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  }</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_ac89f0cc0de0da3c074f79341f3611b30"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#ac89f0cc0de0da3c074f79341f3611b30">kaldi::LatticeSimpleDecoder::final_relative_cost_</a></div><div class="ttdeci">BaseFloat final_relative_cost_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00310">lattice-simple-decoder.h:310</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_ad15b222ead591bfc30e26feb230484bf"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#ad15b222ead591bfc30e26feb230484bf">kaldi::LatticeSimpleDecoder::decoding_finalized_</a></div><div class="ttdeci">bool decoding_finalized_</div><div class="ttdoc">decoding_finalized_ is true if someone called FinalizeDecoding(). </div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00306">lattice-simple-decoder.h:306</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_abac1d9b6331d75273f079182a8995d19"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#abac1d9b6331d75273f079182a8995d19">kaldi::LatticeSimpleDecoder::ComputeFinalCosts</a></div><div class="ttdeci">void ComputeFinalCosts(unordered_map&lt; Token *, BaseFloat &gt; *final_costs, BaseFloat *final_relative_cost, BaseFloat *final_best_cost) const</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8cc_source.html#l00292">lattice-simple-decoder.cc:292</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a209afa3e1ac1c6a456f0169b239a0e73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a209afa3e1ac1c6a456f0169b239a0e73">&#9670;&nbsp;</a></span>FindOrAddToken()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structkaldi_1_1LatticeSimpleDecoder_1_1Token.html">LatticeSimpleDecoder::Token</a> * FindOrAddToken </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a4ace4c191c83fe28b57d4d080ae967b0">StateId</a>&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>frame_plus_one</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>tot_cost</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>emitting</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a> *&#160;</td>
          <td class="paramname"><em>changed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8cc_source.html#l00194">194</a> of file <a class="el" href="lattice-simple-decoder_8cc_source.html">lattice-simple-decoder.cc</a>.</p>

<p class="reference">References <a class="el" href="lattice-simple-decoder_8h_source.html#l00291">LatticeSimpleDecoder::active_toks_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00289">LatticeSimpleDecoder::cur_toks_</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00295">LatticeSimpleDecoder::num_toks_</a>, and <a class="el" href="lattice-simple-decoder_8h_source.html#l00186">LatticeSimpleDecoder::Token::tot_cost</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-simple-decoder_8cc_source.html#l00510">LatticeSimpleDecoder::ProcessEmitting()</a>, and <a class="el" href="lattice-simple-decoder_8cc_source.html#l00550">LatticeSimpleDecoder::ProcessNonemitting()</a>.</p>
<div class="fragment"><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                                  {</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(frame &lt; <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.size());</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  Token *&amp;toks = <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[frame].toks;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    </div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  unordered_map&lt;StateId, Token*&gt;::iterator find_iter = <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#aa7220626d9ea4e8aff1315ef5c68bd81">cur_toks_</a>.find(state);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="keywordflow">if</span> (find_iter == <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#aa7220626d9ea4e8aff1315ef5c68bd81">cur_toks_</a>.end()) { <span class="comment">// no such token presently.</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="comment">// Create one.</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> extra_cost = 0.0;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="comment">// tokens on the currently final frame have zero extra_cost</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="comment">// as any of them could end up</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="comment">// on the winning path.</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    Token *new_tok = <span class="keyword">new</span> Token (tot_cost, extra_cost, NULL, toks);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    toks = new_tok;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a21115816f8d2258f49f4934d2d9d83a7">num_toks_</a>++;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#aa7220626d9ea4e8aff1315ef5c68bd81">cur_toks_</a>[state] = new_tok;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">if</span> (changed) *changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordflow">return</span> new_tok;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    Token *tok = find_iter-&gt;second; <span class="comment">// There is an existing Token for this state.</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">if</span> (tok-&gt;tot_cost &gt; tot_cost) {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      tok-&gt;tot_cost = tot_cost;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <span class="keywordflow">if</span> (changed) *changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      <span class="keywordflow">if</span> (changed) *changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    }</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">return</span> tok;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  }</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a559a7c781b217933b6b2aaf9c15be0d0"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">kaldi::LatticeSimpleDecoder::active_toks_</a></div><div class="ttdeci">std::vector&lt; TokenList &gt; active_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00291">lattice-simple-decoder.h:291</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a21115816f8d2258f49f4934d2d9d83a7"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a21115816f8d2258f49f4934d2d9d83a7">kaldi::LatticeSimpleDecoder::num_toks_</a></div><div class="ttdeci">int32 num_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00295">lattice-simple-decoder.h:295</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_aa7220626d9ea4e8aff1315ef5c68bd81"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#aa7220626d9ea4e8aff1315ef5c68bd81">kaldi::LatticeSimpleDecoder::cur_toks_</a></div><div class="ttdeci">unordered_map&lt; StateId, Token * &gt; cur_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00289">lattice-simple-decoder.h:289</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a90a79129dcfec6fad60c17b053736c0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90a79129dcfec6fad60c17b053736c0e">&#9670;&nbsp;</a></span>GetBestPath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> GetBestPath </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#a4c9e4132556649881ca6f29dd13e2742">Lattice</a> *&#160;</td>
          <td class="paramname"><em>lat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>use_final_probs</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8cc_source.html#l00068">68</a> of file <a class="el" href="lattice-simple-decoder_8cc_source.html">lattice-simple-decoder.cc</a>.</p>

<p class="reference">References <a class="el" href="lattice-simple-decoder_8cc_source.html#l00078">LatticeSimpleDecoder::GetRawLattice()</a>.</p>

<p class="reference">Referenced by <a class="el" href="decoder-wrappers_8cc_source.html#l00331">kaldi::DecodeUtteranceLatticeSimple()</a>.</p>
<div class="fragment"><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                                                                   {</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  fst::VectorFst&lt;LatticeArc&gt; <a class="code" href="namespacefst.html">fst</a>;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#aa4f0b104b3e655bb003325f901651599">GetRawLattice</a>(&amp;fst, use_final_probs);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  ShortestPath(fst, ofst);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="keywordflow">return</span> (ofst-&gt;NumStates() &gt; 0);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_aa4f0b104b3e655bb003325f901651599"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#aa4f0b104b3e655bb003325f901651599">kaldi::LatticeSimpleDecoder::GetRawLattice</a></div><div class="ttdeci">bool GetRawLattice(Lattice *lat, bool use_final_probs=true) const</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8cc_source.html#l00078">lattice-simple-decoder.cc:78</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a873116b8637b3d23998b37cca6333c08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a873116b8637b3d23998b37cca6333c08">&#9670;&nbsp;</a></span>GetLattice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> GetLattice </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aeba2c05d999bd2f794db8919ac816bb3">CompactLattice</a> *&#160;</td>
          <td class="paramname"><em>clat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>use_final_probs</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8cc_source.html#l00158">158</a> of file <a class="el" href="lattice-simple-decoder_8cc_source.html">lattice-simple-decoder.cc</a>.</p>

<p class="reference">References <a class="el" href="lattice-simple-decoder_8h_source.html#l00294">LatticeSimpleDecoder::config_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00048">LatticeSimpleDecoderConfig::det_opts</a>, <a class="el" href="determinize-lattice-pruned_8cc_source.html#l01193">fst::DeterminizeLatticePruned()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00078">LatticeSimpleDecoder::GetRawLattice()</a>, <a class="el" href="kaldi-error_8h_source.html#l00129">KALDI_WARN</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00039">LatticeSimpleDecoderConfig::lattice_beam</a>, <a class="el" href="determinize-lattice-pruned_8h_source.html#l00114">DeterminizeLatticePrunedOptions::max_mem</a>, and <a class="el" href="determinize-lattice-pruned_8h_source.html#l00150">DeterminizeLatticePhonePrunedOptions::max_mem</a>.</p>
<div class="fragment"><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                                {</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <a class="code" href="namespacekaldi.html#a4c9e4132556649881ca6f29dd13e2742">Lattice</a> raw_fst;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#aa4f0b104b3e655bb003325f901651599">GetRawLattice</a>(&amp;raw_fst, use_final_probs);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  Invert(&amp;raw_fst); <span class="comment">// make it so word labels are on the input.</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordflow">if</span> (!TopSort(&amp;raw_fst)) <span class="comment">// topological sort makes lattice-determinization more efficient</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;Topological sorting of state-level lattice failed &quot;</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="stringliteral">&quot;(probably your lexicon has empty words or your LM has epsilon cycles; this &quot;</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="stringliteral">&quot; is a bad idea.)&quot;</span>;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="comment">// (in phase where we get backward-costs).</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  fst::ILabelCompare&lt;LatticeArc&gt; ilabel_comp;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  ArcSort(&amp;raw_fst, ilabel_comp); <span class="comment">// sort on ilabel; makes</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="comment">// lattice-determinization more efficient.</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    </div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <a class="code" href="structfst_1_1DeterminizeLatticePrunedOptions.html">fst::DeterminizeLatticePrunedOptions</a> lat_opts;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  lat_opts.<a class="code" href="structfst_1_1DeterminizeLatticePrunedOptions.html#a7b483d0949bb8cb9cfd932aa3b06485f">max_mem</a> = <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a7511a7d279476b9b6f5c758b293b53f8">config_</a>.<a class="code" href="structkaldi_1_1LatticeSimpleDecoderConfig.html#a9314f648d808c374edbc3c2c3b6156a1">det_opts</a>.<a class="code" href="structfst_1_1DeterminizeLatticePhonePrunedOptions.html#a7b483d0949bb8cb9cfd932aa3b06485f">max_mem</a>;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    </div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <a class="code" href="group__fst__extensions.html#gae37d77a64fdc7c92ad2c44ece0b74f9a">DeterminizeLatticePruned</a>(raw_fst, <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a7511a7d279476b9b6f5c758b293b53f8">config_</a>.<a class="code" href="structkaldi_1_1LatticeSimpleDecoderConfig.html#abf32d733b7437195b42a4d867fd5784b">lattice_beam</a>, ofst, lat_opts);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  raw_fst.DeleteStates(); <span class="comment">// Free memory-- raw_fst no longer needed.</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  Connect(ofst); <span class="comment">// Remove unreachable states... there might be</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="comment">// a small number of these, in some cases.</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="comment">// Note: if something went wrong and the raw lattice was empty,</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="comment">// we should still get to this point in the code without warnings or failures.</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="keywordflow">return</span> (ofst-&gt;NumStates() != 0);</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a7511a7d279476b9b6f5c758b293b53f8"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a7511a7d279476b9b6f5c758b293b53f8">kaldi::LatticeSimpleDecoder::config_</a></div><div class="ttdeci">LatticeSimpleDecoderConfig config_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00294">lattice-simple-decoder.h:294</a></div></div>
<div class="ttc" id="structkaldi_1_1LatticeSimpleDecoderConfig_html_abf32d733b7437195b42a4d867fd5784b"><div class="ttname"><a href="structkaldi_1_1LatticeSimpleDecoderConfig.html#abf32d733b7437195b42a4d867fd5784b">kaldi::LatticeSimpleDecoderConfig::lattice_beam</a></div><div class="ttdeci">BaseFloat lattice_beam</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00039">lattice-simple-decoder.h:39</a></div></div>
<div class="ttc" id="group__fst__extensions_html_gae37d77a64fdc7c92ad2c44ece0b74f9a"><div class="ttname"><a href="group__fst__extensions.html#gae37d77a64fdc7c92ad2c44ece0b74f9a">fst::DeterminizeLatticePruned</a></div><div class="ttdeci">bool DeterminizeLatticePruned(const ExpandedFst&lt; ArcTpl&lt; Weight &gt; &gt; &amp;ifst, double beam, MutableFst&lt; ArcTpl&lt; CompactLatticeWeightTpl&lt; Weight, IntType &gt; &gt; &gt; *ofst, DeterminizeLatticePrunedOptions opts)</div><div class="ttdef"><b>Definition:</b> <a href="determinize-lattice-pruned_8cc_source.html#l01193">determinize-lattice-pruned.cc:1193</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_aa4f0b104b3e655bb003325f901651599"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#aa4f0b104b3e655bb003325f901651599">kaldi::LatticeSimpleDecoder::GetRawLattice</a></div><div class="ttdeci">bool GetRawLattice(Lattice *lat, bool use_final_probs=true) const</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8cc_source.html#l00078">lattice-simple-decoder.cc:78</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4c9e4132556649881ca6f29dd13e2742"><div class="ttname"><a href="namespacekaldi.html#a4c9e4132556649881ca6f29dd13e2742">kaldi::Lattice</a></div><div class="ttdeci">fst::VectorFst&lt; LatticeArc &gt; Lattice</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-lattice_8h_source.html#l00044">kaldi-lattice.h:44</a></div></div>
<div class="ttc" id="group__error__group_html_ga994be213ddf127b5d6f20a43a02b513a"><div class="ttname"><a href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a></div><div class="ttdeci">#define KALDI_WARN</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00129">kaldi-error.h:129</a></div></div>
<div class="ttc" id="structfst_1_1DeterminizeLatticePhonePrunedOptions_html_a7b483d0949bb8cb9cfd932aa3b06485f"><div class="ttname"><a href="structfst_1_1DeterminizeLatticePhonePrunedOptions.html#a7b483d0949bb8cb9cfd932aa3b06485f">fst::DeterminizeLatticePhonePrunedOptions::max_mem</a></div><div class="ttdeci">int max_mem</div><div class="ttdef"><b>Definition:</b> <a href="determinize-lattice-pruned_8h_source.html#l00150">determinize-lattice-pruned.h:150</a></div></div>
<div class="ttc" id="structfst_1_1DeterminizeLatticePrunedOptions_html_a7b483d0949bb8cb9cfd932aa3b06485f"><div class="ttname"><a href="structfst_1_1DeterminizeLatticePrunedOptions.html#a7b483d0949bb8cb9cfd932aa3b06485f">fst::DeterminizeLatticePrunedOptions::max_mem</a></div><div class="ttdeci">int max_mem</div><div class="ttdef"><b>Definition:</b> <a href="determinize-lattice-pruned_8h_source.html#l00114">determinize-lattice-pruned.h:114</a></div></div>
<div class="ttc" id="structfst_1_1DeterminizeLatticePrunedOptions_html"><div class="ttname"><a href="structfst_1_1DeterminizeLatticePrunedOptions.html">fst::DeterminizeLatticePrunedOptions</a></div><div class="ttdef"><b>Definition:</b> <a href="determinize-lattice-pruned_8h_source.html#l00112">determinize-lattice-pruned.h:112</a></div></div>
<div class="ttc" id="structkaldi_1_1LatticeSimpleDecoderConfig_html_a9314f648d808c374edbc3c2c3b6156a1"><div class="ttname"><a href="structkaldi_1_1LatticeSimpleDecoderConfig.html#a9314f648d808c374edbc3c2c3b6156a1">kaldi::LatticeSimpleDecoderConfig::det_opts</a></div><div class="ttdeci">fst::DeterminizeLatticePhonePrunedOptions det_opts</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00048">lattice-simple-decoder.h:48</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a27b0bb5e9d5fc0e799c5a62f25e7b47b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27b0bb5e9d5fc0e799c5a62f25e7b47b">&#9670;&nbsp;</a></span>GetOptions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structkaldi_1_1LatticeSimpleDecoderConfig.html">LatticeSimpleDecoderConfig</a>&amp; GetOptions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8h_source.html#l00089">89</a> of file <a class="el" href="lattice-simple-decoder_8h_source.html">lattice-simple-decoder.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="decoder-wrappers_8cc_source.html#l00331">kaldi::DecodeUtteranceLatticeSimple()</a>.</p>
<div class="fragment"><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                                                       {</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a7511a7d279476b9b6f5c758b293b53f8">config_</a>;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  }</div><div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a7511a7d279476b9b6f5c758b293b53f8"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a7511a7d279476b9b6f5c758b293b53f8">kaldi::LatticeSimpleDecoder::config_</a></div><div class="ttdeci">LatticeSimpleDecoderConfig config_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00294">lattice-simple-decoder.h:294</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa4f0b104b3e655bb003325f901651599"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4f0b104b3e655bb003325f901651599">&#9670;&nbsp;</a></span>GetRawLattice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> GetRawLattice </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#a4c9e4132556649881ca6f29dd13e2742">Lattice</a> *&#160;</td>
          <td class="paramname"><em>lat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>use_final_probs</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8cc_source.html#l00078">78</a> of file <a class="el" href="lattice-simple-decoder_8cc_source.html">lattice-simple-decoder.cc</a>.</p>

<p class="reference">References <a class="el" href="lattice-simple-decoder_8h_source.html#l00291">LatticeSimpleDecoder::active_toks_</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00292">LatticeSimpleDecoder::ComputeFinalCosts()</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00306">LatticeSimpleDecoder::decoding_finalized_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00309">LatticeSimpleDecoder::final_costs_</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>, <a class="el" href="kaldi-error_8h_source.html#l00129">KALDI_WARN</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00171">LatticeSimpleDecoder::ForwardLink::next</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00295">LatticeSimpleDecoder::num_toks_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00160">LatticeSimpleDecoder::NumFramesDecoded()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00081">LatticeWeightTpl&lt; BaseFloat &gt;::One()</a>.</p>

<p class="reference">Referenced by <a class="el" href="decoder-wrappers_8cc_source.html#l00331">kaldi::DecodeUtteranceLatticeSimple()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00068">LatticeSimpleDecoder::GetBestPath()</a>, and <a class="el" href="lattice-simple-decoder_8cc_source.html#l00158">LatticeSimpleDecoder::GetLattice()</a>.</p>
<div class="fragment"><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                                                                     {</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacekaldi.html#a417e37822095c5adb9680fa07dffea8d">LatticeArc</a> <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#aa1fd1346f06a44e4384da90d48ef5cd0">Arc</a>;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a4ace4c191c83fe28b57d4d080ae967b0">StateId</a>;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a20d097b045b23dd618a3067dd4e3f915">Weight</a>;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a8b4305fe971ea965a741395013fd9c49">Label</a>;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="comment">// Note: you can&#39;t use the old interface (Decode()) if you want to</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="comment">// get the lattice with use_final_probs = false.  You&#39;d have to do</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="comment">// InitDecoding() and then AdvanceDecoding().</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#ad15b222ead591bfc30e26feb230484bf">decoding_finalized_</a> &amp;&amp; !use_final_probs)</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;You cannot call FinalizeDecoding() and then call &quot;</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;GetRawLattice() with use_final_probs == false&quot;</span>;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  </div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  unordered_map&lt;Token*, BaseFloat&gt; final_costs_local;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  </div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="keyword">const</span> unordered_map&lt;Token*, BaseFloat&gt; &amp;final_costs =</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      (<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#ad15b222ead591bfc30e26feb230484bf">decoding_finalized_</a> ? <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a40bc4ede3f47b67f9c1920c5c7de4370">final_costs_</a> : final_costs_local);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#ad15b222ead591bfc30e26feb230484bf">decoding_finalized_</a> &amp;&amp; use_final_probs)</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#abac1d9b6331d75273f079182a8995d19">ComputeFinalCosts</a>(&amp;final_costs_local, NULL, NULL);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  ofst-&gt;DeleteStates();</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  int32 num_frames = <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#aa030f3b26871bfec31b5e59cac3ba76d">NumFramesDecoded</a>();</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(num_frames &gt; 0);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keyword">const</span> int32 bucket_count = <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a21115816f8d2258f49f4934d2d9d83a7">num_toks_</a>/2 + 3;  </div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  unordered_map&lt;Token*, StateId&gt; tok_map(bucket_count);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="comment">// First create all states.</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keywordflow">for</span> (int32 f = 0; f &lt;= num_frames; f++) {</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[f].toks == NULL) {</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;GetRawLattice: no tokens active on frame &quot;</span> &lt;&lt; f</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot;: not producing lattice.\n&quot;</span>;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    }</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordflow">for</span> (Token *tok = <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[f].toks; tok != NULL; tok = tok-&gt;next)</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      tok_map[tok] = ofst-&gt;AddState();</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="comment">// The next statement sets the start state of the output FST.</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="comment">// Because we always add new states to the head of the list</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="comment">// active_toks_[f].toks, and the start state was the first one</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">// added, it will be the last one added to ofst.</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">if</span> (f == 0 &amp;&amp; ofst-&gt;NumStates() &gt; 0)</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      ofst-&gt;SetStart(ofst-&gt;NumStates()-1);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  }</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  StateId cur_state = 0; <span class="comment">// we rely on the fact that we numbered these</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="comment">// consecutively (AddState() returns the numbers in order..)</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="keywordflow">for</span> (int32 f = 0; f &lt;= num_frames; f++) {</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">for</span> (Token *tok = <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[f].toks; tok != NULL; tok = tok-&gt;next,</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;             cur_state++) {</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <span class="keywordflow">for</span> (ForwardLink *l = tok-&gt;links;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;           l != NULL;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;           l = l-&gt;next) {</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        unordered_map&lt;Token*, StateId&gt;::const_iterator iter =</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            tok_map.find(l-&gt;next_tok);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        StateId nextstate = iter-&gt;second;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(iter != tok_map.end());</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        Arc arc(l-&gt;ilabel, l-&gt;olabel,</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                Weight(l-&gt;graph_cost, l-&gt;acoustic_cost),</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                nextstate);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        ofst-&gt;AddArc(cur_state, arc);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <span class="keywordflow">if</span> (f == num_frames) {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keywordflow">if</span> (use_final_probs &amp;&amp; !final_costs.empty()) {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;          unordered_map&lt;Token*, BaseFloat&gt;::const_iterator iter =</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;              final_costs.find(tok);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;          <span class="keywordflow">if</span> (iter != final_costs.end())</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            ofst-&gt;SetFinal(cur_state, <a class="code" href="namespacekaldi.html#abaecf581813bcc7e2738d8de233061aa">LatticeWeight</a>(iter-&gt;second, 0));</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;          ofst-&gt;SetFinal(cur_state, <a class="code" href="classfst_1_1LatticeWeightTpl.html#a5421f358cae61e1da1ebab7b0a1294c6">LatticeWeight::One</a>());</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        }</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      }</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    }</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  }</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(cur_state == ofst-&gt;NumStates());</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="keywordflow">return</span> (cur_state != 0);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacekaldi_html_a417e37822095c5adb9680fa07dffea8d"><div class="ttname"><a href="namespacekaldi.html#a417e37822095c5adb9680fa07dffea8d">kaldi::LatticeArc</a></div><div class="ttdeci">fst::ArcTpl&lt; LatticeWeight &gt; LatticeArc</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-lattice_8h_source.html#l00040">kaldi-lattice.h:40</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a559a7c781b217933b6b2aaf9c15be0d0"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">kaldi::LatticeSimpleDecoder::active_toks_</a></div><div class="ttdeci">std::vector&lt; TokenList &gt; active_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00291">lattice-simple-decoder.h:291</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a4ace4c191c83fe28b57d4d080ae967b0"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a4ace4c191c83fe28b57d4d080ae967b0">kaldi::LatticeSimpleDecoder::StateId</a></div><div class="ttdeci">Arc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00080">lattice-simple-decoder.h:80</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_aa030f3b26871bfec31b5e59cac3ba76d"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#aa030f3b26871bfec31b5e59cac3ba76d">kaldi::LatticeSimpleDecoder::NumFramesDecoded</a></div><div class="ttdeci">int32 NumFramesDecoded() const</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00160">lattice-simple-decoder.h:160</a></div></div>
<div class="ttc" id="classfst_1_1LatticeWeightTpl_html_a5421f358cae61e1da1ebab7b0a1294c6"><div class="ttname"><a href="classfst_1_1LatticeWeightTpl.html#a5421f358cae61e1da1ebab7b0a1294c6">fst::LatticeWeightTpl&lt; BaseFloat &gt;::One</a></div><div class="ttdeci">static const LatticeWeightTpl One()</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00081">lattice-weight.h:81</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a21115816f8d2258f49f4934d2d9d83a7"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a21115816f8d2258f49f4934d2d9d83a7">kaldi::LatticeSimpleDecoder::num_toks_</a></div><div class="ttdeci">int32 num_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00295">lattice-simple-decoder.h:295</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_ad15b222ead591bfc30e26feb230484bf"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#ad15b222ead591bfc30e26feb230484bf">kaldi::LatticeSimpleDecoder::decoding_finalized_</a></div><div class="ttdeci">bool decoding_finalized_</div><div class="ttdoc">decoding_finalized_ is true if someone called FinalizeDecoding(). </div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00306">lattice-simple-decoder.h:306</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a40bc4ede3f47b67f9c1920c5c7de4370"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a40bc4ede3f47b67f9c1920c5c7de4370">kaldi::LatticeSimpleDecoder::final_costs_</a></div><div class="ttdeci">unordered_map&lt; Token *, BaseFloat &gt; final_costs_</div><div class="ttdoc">For the meaning of the next 3 variables, see the comment for decoding_finalized_ above., and ComputeFinalCosts(). </div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00309">lattice-simple-decoder.h:309</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a20d097b045b23dd618a3067dd4e3f915"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a20d097b045b23dd618a3067dd4e3f915">kaldi::LatticeSimpleDecoder::Weight</a></div><div class="ttdeci">Arc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00081">lattice-simple-decoder.h:81</a></div></div>
<div class="ttc" id="namespacekaldi_html_abaecf581813bcc7e2738d8de233061aa"><div class="ttname"><a href="namespacekaldi.html#abaecf581813bcc7e2738d8de233061aa">kaldi::LatticeWeight</a></div><div class="ttdeci">fst::LatticeWeightTpl&lt; BaseFloat &gt; LatticeWeight</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-lattice_8h_source.html#l00032">kaldi-lattice.h:32</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_abac1d9b6331d75273f079182a8995d19"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#abac1d9b6331d75273f079182a8995d19">kaldi::LatticeSimpleDecoder::ComputeFinalCosts</a></div><div class="ttdeci">void ComputeFinalCosts(unordered_map&lt; Token *, BaseFloat &gt; *final_costs, BaseFloat *final_relative_cost, BaseFloat *final_best_cost) const</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8cc_source.html#l00292">lattice-simple-decoder.cc:292</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
<div class="ttc" id="group__error__group_html_ga994be213ddf127b5d6f20a43a02b513a"><div class="ttname"><a href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a></div><div class="ttdeci">#define KALDI_WARN</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00129">kaldi-error.h:129</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a8b4305fe971ea965a741395013fd9c49"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a8b4305fe971ea965a741395013fd9c49">kaldi::LatticeSimpleDecoder::Label</a></div><div class="ttdeci">Arc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00079">lattice-simple-decoder.h:79</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_aa1fd1346f06a44e4384da90d48ef5cd0"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#aa1fd1346f06a44e4384da90d48ef5cd0">kaldi::LatticeSimpleDecoder::Arc</a></div><div class="ttdeci">fst::StdArc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00078">lattice-simple-decoder.h:78</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad43c69eb4374e3a67d4cd91696a5d6e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad43c69eb4374e3a67d4cd91696a5d6e9">&#9670;&nbsp;</a></span>InitDecoding()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void InitDecoding </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>InitDecoding initializes the decoding, and should only be used if you intend to call AdvanceDecoding(). </p>
<p>If you call <a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#ac78620c576a40d3bdb14dc87b2a754a5">Decode()</a>, you don't need to call this. You can call InitDecoding if you have already decoded an utterance and want to start with a new utterance. </p>

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8cc_source.html#l00027">27</a> of file <a class="el" href="lattice-simple-decoder_8cc_source.html">lattice-simple-decoder.cc</a>.</p>

<p class="reference">References <a class="el" href="lattice-simple-decoder_8h_source.html#l00291">LatticeSimpleDecoder::active_toks_</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00617">LatticeSimpleDecoder::ClearActiveTokens()</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00289">LatticeSimpleDecoder::cur_toks_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00306">LatticeSimpleDecoder::decoding_finalized_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00309">LatticeSimpleDecoder::final_costs_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00293">LatticeSimpleDecoder::fst_</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00295">LatticeSimpleDecoder::num_toks_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00290">LatticeSimpleDecoder::prev_toks_</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00550">LatticeSimpleDecoder::ProcessNonemitting()</a>, and <a class="el" href="lattice-simple-decoder_8h_source.html#l00296">LatticeSimpleDecoder::warned_</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-simple-decoder_8cc_source.html#l00046">LatticeSimpleDecoder::Decode()</a>.</p>
<div class="fragment"><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;                                        {</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  <span class="comment">// clean up from last time:</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#aa7220626d9ea4e8aff1315ef5c68bd81">cur_toks_</a>.clear();</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a5f20aebe7a2cacd960afb828145c1a68">prev_toks_</a>.clear();</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#ae09bece0bb8eb98a4bf14a74351f2558">ClearActiveTokens</a>();</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#abd4660a81d0a829a6920416d202a7041">warned_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#ad15b222ead591bfc30e26feb230484bf">decoding_finalized_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a40bc4ede3f47b67f9c1920c5c7de4370">final_costs_</a>.clear();</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a21115816f8d2258f49f4934d2d9d83a7">num_toks_</a> = 0;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a4ace4c191c83fe28b57d4d080ae967b0">StateId</a> start_state = <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#ae6a9be3017661463c1d83b3dd1933cfb">fst_</a>.Start();</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(start_state != fst::kNoStateId);</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.resize(1);</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  Token *start_tok = <span class="keyword">new</span> Token(0.0, 0.0, NULL, NULL);</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[0].toks = start_tok;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#aa7220626d9ea4e8aff1315ef5c68bd81">cur_toks_</a>[start_state] = start_tok;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a21115816f8d2258f49f4934d2d9d83a7">num_toks_</a>++;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a3e5f04593aaee518bf37687a05cb29cf">ProcessNonemitting</a>();</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a559a7c781b217933b6b2aaf9c15be0d0"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">kaldi::LatticeSimpleDecoder::active_toks_</a></div><div class="ttdeci">std::vector&lt; TokenList &gt; active_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00291">lattice-simple-decoder.h:291</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a4ace4c191c83fe28b57d4d080ae967b0"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a4ace4c191c83fe28b57d4d080ae967b0">kaldi::LatticeSimpleDecoder::StateId</a></div><div class="ttdeci">Arc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00080">lattice-simple-decoder.h:80</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a21115816f8d2258f49f4934d2d9d83a7"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a21115816f8d2258f49f4934d2d9d83a7">kaldi::LatticeSimpleDecoder::num_toks_</a></div><div class="ttdeci">int32 num_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00295">lattice-simple-decoder.h:295</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_ae09bece0bb8eb98a4bf14a74351f2558"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#ae09bece0bb8eb98a4bf14a74351f2558">kaldi::LatticeSimpleDecoder::ClearActiveTokens</a></div><div class="ttdeci">void ClearActiveTokens()</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8cc_source.html#l00617">lattice-simple-decoder.cc:617</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_ad15b222ead591bfc30e26feb230484bf"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#ad15b222ead591bfc30e26feb230484bf">kaldi::LatticeSimpleDecoder::decoding_finalized_</a></div><div class="ttdeci">bool decoding_finalized_</div><div class="ttdoc">decoding_finalized_ is true if someone called FinalizeDecoding(). </div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00306">lattice-simple-decoder.h:306</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a40bc4ede3f47b67f9c1920c5c7de4370"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a40bc4ede3f47b67f9c1920c5c7de4370">kaldi::LatticeSimpleDecoder::final_costs_</a></div><div class="ttdeci">unordered_map&lt; Token *, BaseFloat &gt; final_costs_</div><div class="ttdoc">For the meaning of the next 3 variables, see the comment for decoding_finalized_ above., and ComputeFinalCosts(). </div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00309">lattice-simple-decoder.h:309</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a5f20aebe7a2cacd960afb828145c1a68"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a5f20aebe7a2cacd960afb828145c1a68">kaldi::LatticeSimpleDecoder::prev_toks_</a></div><div class="ttdeci">unordered_map&lt; StateId, Token * &gt; prev_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00290">lattice-simple-decoder.h:290</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a3e5f04593aaee518bf37687a05cb29cf"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a3e5f04593aaee518bf37687a05cb29cf">kaldi::LatticeSimpleDecoder::ProcessNonemitting</a></div><div class="ttdeci">void ProcessNonemitting()</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8cc_source.html#l00550">lattice-simple-decoder.cc:550</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_ae6a9be3017661463c1d83b3dd1933cfb"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#ae6a9be3017661463c1d83b3dd1933cfb">kaldi::LatticeSimpleDecoder::fst_</a></div><div class="ttdeci">const fst::Fst&lt; fst::StdArc &gt; &amp; fst_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00293">lattice-simple-decoder.h:293</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_aa7220626d9ea4e8aff1315ef5c68bd81"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#aa7220626d9ea4e8aff1315ef5c68bd81">kaldi::LatticeSimpleDecoder::cur_toks_</a></div><div class="ttdeci">unordered_map&lt; StateId, Token * &gt; cur_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00289">lattice-simple-decoder.h:289</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_abd4660a81d0a829a6920416d202a7041"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#abd4660a81d0a829a6920416d202a7041">kaldi::LatticeSimpleDecoder::warned_</a></div><div class="ttdeci">bool warned_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00296">lattice-simple-decoder.h:296</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa030f3b26871bfec31b5e59cac3ba76d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa030f3b26871bfec31b5e59cac3ba76d">&#9670;&nbsp;</a></span>NumFramesDecoded()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 NumFramesDecoded </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8h_source.html#l00160">160</a> of file <a class="el" href="lattice-simple-decoder_8h_source.html">lattice-simple-decoder.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-simple-decoder_8cc_source.html#l00046">LatticeSimpleDecoder::Decode()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00495">LatticeSimpleDecoder::FinalizeDecoding()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00078">LatticeSimpleDecoder::GetRawLattice()</a>, and <a class="el" href="lattice-simple-decoder_8cc_source.html#l00462">LatticeSimpleDecoder::PruneActiveTokens()</a>.</p>
<div class="fragment"><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.size() - 1; }  </div><div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a559a7c781b217933b6b2aaf9c15be0d0"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">kaldi::LatticeSimpleDecoder::active_toks_</a></div><div class="ttdeci">std::vector&lt; TokenList &gt; active_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00291">lattice-simple-decoder.h:291</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a615f332fd931b36ceca4f2e7a885463e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a615f332fd931b36ceca4f2e7a885463e">&#9670;&nbsp;</a></span>ProcessEmitting()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ProcessEmitting </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1DecodableInterface.html">DecodableInterface</a> *&#160;</td>
          <td class="paramname"><em>decodable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8cc_source.html#l00510">510</a> of file <a class="el" href="lattice-simple-decoder_8cc_source.html">lattice-simple-decoder.cc</a>.</p>

<p class="reference">References <a class="el" href="lattice-simple-decoder_8h_source.html#l00291">LatticeSimpleDecoder::active_toks_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00038">LatticeSimpleDecoderConfig::beam</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00294">LatticeSimpleDecoder::config_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00289">LatticeSimpleDecoder::cur_toks_</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00194">LatticeSimpleDecoder::FindOrAddToken()</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00293">LatticeSimpleDecoder::fst_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00194">LatticeSimpleDecoder::Token::links</a>, <a class="el" href="classkaldi_1_1DecodableInterface.html#a0fea536380fa24a5ffe6a7ca08633a03">DecodableInterface::LogLikelihood()</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00290">LatticeSimpleDecoder::prev_toks_</a>, and <a class="el" href="lattice-simple-decoder_8h_source.html#l00186">LatticeSimpleDecoder::Token::tot_cost</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-simple-decoder_8cc_source.html#l00046">LatticeSimpleDecoder::Decode()</a>.</p>
<div class="fragment"><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                                                                        {</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  int32 frame = <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.size() - 1; <span class="comment">// frame is the frame-index</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                                         <span class="comment">// (zero-based) used to get likelihoods</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                                         <span class="comment">// from the decodable object.</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.resize(<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.size() + 1);</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a5f20aebe7a2cacd960afb828145c1a68">prev_toks_</a>.clear();</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#aa7220626d9ea4e8aff1315ef5c68bd81">cur_toks_</a>.swap(<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a5f20aebe7a2cacd960afb828145c1a68">prev_toks_</a>);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="comment">// Processes emitting arcs for one frame.  Propagates from</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="comment">// prev_toks_ to cur_toks_.</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> cutoff = std::numeric_limits&lt;BaseFloat&gt;::infinity();</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="keywordflow">for</span> (unordered_map&lt;StateId, Token*&gt;::iterator iter = <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a5f20aebe7a2cacd960afb828145c1a68">prev_toks_</a>.begin();</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;       iter != <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a5f20aebe7a2cacd960afb828145c1a68">prev_toks_</a>.end();</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;       ++iter) {</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a4ace4c191c83fe28b57d4d080ae967b0">StateId</a> state = iter-&gt;first;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    Token *tok = iter-&gt;second;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">for</span> (fst::ArcIterator&lt;fst::Fst&lt;Arc&gt; &gt; aiter(<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#ae6a9be3017661463c1d83b3dd1933cfb">fst_</a>, state);</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;         !aiter.Done();</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;         aiter.Next()) {</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      <span class="keyword">const</span> <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#aa1fd1346f06a44e4384da90d48ef5cd0">Arc</a> &amp;arc = aiter.Value();</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      <span class="keywordflow">if</span> (arc.ilabel != 0) {  <span class="comment">// propagate..</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> ac_cost = -decodable-&gt;LogLikelihood(frame, arc.ilabel),</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            graph_cost = arc.weight.Value(),</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            cur_cost = tok-&gt;tot_cost,</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            tot_cost = cur_cost + ac_cost + graph_cost;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="keywordflow">if</span> (tot_cost &gt; cutoff) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tot_cost + <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a7511a7d279476b9b6f5c758b293b53f8">config_</a>.<a class="code" href="structkaldi_1_1LatticeSimpleDecoderConfig.html#aac27eaf00599707440629f2f6a274e02">beam</a> &lt; cutoff)</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;          cutoff = tot_cost + <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a7511a7d279476b9b6f5c758b293b53f8">config_</a>.<a class="code" href="structkaldi_1_1LatticeSimpleDecoderConfig.html#aac27eaf00599707440629f2f6a274e02">beam</a>;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <span class="comment">// AddToken adds the next_tok to cur_toks_ (if not already present).</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        Token *next_tok = <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a209afa3e1ac1c6a456f0169b239a0e73">FindOrAddToken</a>(arc.nextstate, frame + 1, tot_cost,</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                                         <span class="keyword">true</span>, NULL);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;          </div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="comment">// Add ForwardLink from tok to next_tok (put on head of list tok-&gt;links)</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        tok-&gt;links = <span class="keyword">new</span> ForwardLink(next_tok, arc.ilabel, arc.olabel, </div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                                     graph_cost, ac_cost, tok-&gt;links);</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      }</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    }</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  }</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a559a7c781b217933b6b2aaf9c15be0d0"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">kaldi::LatticeSimpleDecoder::active_toks_</a></div><div class="ttdeci">std::vector&lt; TokenList &gt; active_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00291">lattice-simple-decoder.h:291</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a7511a7d279476b9b6f5c758b293b53f8"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a7511a7d279476b9b6f5c758b293b53f8">kaldi::LatticeSimpleDecoder::config_</a></div><div class="ttdeci">LatticeSimpleDecoderConfig config_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00294">lattice-simple-decoder.h:294</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a4ace4c191c83fe28b57d4d080ae967b0"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a4ace4c191c83fe28b57d4d080ae967b0">kaldi::LatticeSimpleDecoder::StateId</a></div><div class="ttdeci">Arc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00080">lattice-simple-decoder.h:80</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a209afa3e1ac1c6a456f0169b239a0e73"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a209afa3e1ac1c6a456f0169b239a0e73">kaldi::LatticeSimpleDecoder::FindOrAddToken</a></div><div class="ttdeci">Token * FindOrAddToken(StateId state, int32 frame_plus_one, BaseFloat tot_cost, bool emitting, bool *changed)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8cc_source.html#l00194">lattice-simple-decoder.cc:194</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a5f20aebe7a2cacd960afb828145c1a68"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a5f20aebe7a2cacd960afb828145c1a68">kaldi::LatticeSimpleDecoder::prev_toks_</a></div><div class="ttdeci">unordered_map&lt; StateId, Token * &gt; prev_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00290">lattice-simple-decoder.h:290</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_ae6a9be3017661463c1d83b3dd1933cfb"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#ae6a9be3017661463c1d83b3dd1933cfb">kaldi::LatticeSimpleDecoder::fst_</a></div><div class="ttdeci">const fst::Fst&lt; fst::StdArc &gt; &amp; fst_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00293">lattice-simple-decoder.h:293</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_aa1fd1346f06a44e4384da90d48ef5cd0"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#aa1fd1346f06a44e4384da90d48ef5cd0">kaldi::LatticeSimpleDecoder::Arc</a></div><div class="ttdeci">fst::StdArc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00078">lattice-simple-decoder.h:78</a></div></div>
<div class="ttc" id="structkaldi_1_1LatticeSimpleDecoderConfig_html_aac27eaf00599707440629f2f6a274e02"><div class="ttname"><a href="structkaldi_1_1LatticeSimpleDecoderConfig.html#aac27eaf00599707440629f2f6a274e02">kaldi::LatticeSimpleDecoderConfig::beam</a></div><div class="ttdeci">BaseFloat beam</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00038">lattice-simple-decoder.h:38</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_aa7220626d9ea4e8aff1315ef5c68bd81"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#aa7220626d9ea4e8aff1315ef5c68bd81">kaldi::LatticeSimpleDecoder::cur_toks_</a></div><div class="ttdeci">unordered_map&lt; StateId, Token * &gt; cur_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00289">lattice-simple-decoder.h:289</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3e5f04593aaee518bf37687a05cb29cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e5f04593aaee518bf37687a05cb29cf">&#9670;&nbsp;</a></span>ProcessNonemitting()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ProcessNonemitting </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8cc_source.html#l00550">550</a> of file <a class="el" href="lattice-simple-decoder_8cc_source.html">lattice-simple-decoder.cc</a>.</p>

<p class="reference">References <a class="el" href="lattice-simple-decoder_8h_source.html#l00291">LatticeSimpleDecoder::active_toks_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00038">LatticeSimpleDecoderConfig::beam</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00294">LatticeSimpleDecoder::config_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00289">LatticeSimpleDecoder::cur_toks_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00202">LatticeSimpleDecoder::Token::DeleteForwardLinks()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00194">LatticeSimpleDecoder::FindOrAddToken()</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00293">LatticeSimpleDecoder::fst_</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00194">LatticeSimpleDecoder::Token::links</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00186">LatticeSimpleDecoder::Token::tot_cost</a>, and <a class="el" href="lattice-simple-decoder_8h_source.html#l00296">LatticeSimpleDecoder::warned_</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-simple-decoder_8cc_source.html#l00046">LatticeSimpleDecoder::Decode()</a>, and <a class="el" href="lattice-simple-decoder_8cc_source.html#l00027">LatticeSimpleDecoder::InitDecoding()</a>.</p>
<div class="fragment"><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                                              {</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(!<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.empty());</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  int32 frame = <span class="keyword">static_cast&lt;</span>int32<span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.size()) - 2;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="comment">// Note: &quot;frame&quot; is the time-index we just processed, or -1 if</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="comment">// we are processing the nonemitting transitions before the</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <span class="comment">// first frame (called from InitDecoding()).</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    </div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <span class="comment">// Processes nonemitting arcs for one frame.  Propagates within</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="comment">// cur_toks_.  Note-- this queue structure is is not very optimal as</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="comment">// it may cause us to process states unnecessarily (e.g. more than once),</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <span class="comment">// but in the baseline code, turning this vector into a set to fix this</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <span class="comment">// problem did not improve overall speed.</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  std::vector&lt;StateId&gt; queue;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> best_cost = std::numeric_limits&lt;BaseFloat&gt;::infinity();</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="keywordflow">for</span> (unordered_map&lt;StateId, Token*&gt;::iterator iter = <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#aa7220626d9ea4e8aff1315ef5c68bd81">cur_toks_</a>.begin();</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;       iter != <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#aa7220626d9ea4e8aff1315ef5c68bd81">cur_toks_</a>.end();</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;       ++iter) {</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a4ace4c191c83fe28b57d4d080ae967b0">StateId</a> state = iter-&gt;first;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#ae6a9be3017661463c1d83b3dd1933cfb">fst_</a>.NumInputEpsilons(state) != 0)</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      queue.push_back(state);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    best_cost = std::min(best_cost, iter-&gt;second-&gt;tot_cost);</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  }</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="keywordflow">if</span> (queue.empty()) {</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#abd4660a81d0a829a6920416d202a7041">warned_</a>) {</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Error in ProcessEmitting: no surviving tokens: frame is &quot;</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                &lt;&lt; frame;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#abd4660a81d0a829a6920416d202a7041">warned_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    }</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  }</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> cutoff = best_cost + <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a7511a7d279476b9b6f5c758b293b53f8">config_</a>.<a class="code" href="structkaldi_1_1LatticeSimpleDecoderConfig.html#aac27eaf00599707440629f2f6a274e02">beam</a>;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    </div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="keywordflow">while</span> (!queue.empty()) {</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a4ace4c191c83fe28b57d4d080ae967b0">StateId</a> state = queue.back();</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    queue.pop_back();</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    Token *tok = <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#aa7220626d9ea4e8aff1315ef5c68bd81">cur_toks_</a>[state];</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="comment">// If &quot;tok&quot; has any existing forward links, delete them,</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="comment">// because we&#39;re about to regenerate them.  This is a kind</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="comment">// of non-optimality (remember, this is the simple decoder),</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="comment">// but since most states are emitting it&#39;s not a huge issue.</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    tok-&gt;DeleteForwardLinks();</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    tok-&gt;links = NULL;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="keywordflow">for</span> (fst::ArcIterator&lt;fst::Fst&lt;Arc&gt; &gt; aiter(<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#ae6a9be3017661463c1d83b3dd1933cfb">fst_</a>, state);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;         !aiter.Done();</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;         aiter.Next()) {</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      <span class="keyword">const</span> <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#aa1fd1346f06a44e4384da90d48ef5cd0">Arc</a> &amp;arc = aiter.Value();</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      <span class="keywordflow">if</span> (arc.ilabel == 0) {  <span class="comment">// propagate nonemitting only...</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> graph_cost = arc.weight.Value(),</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            cur_cost = tok-&gt;tot_cost,</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            tot_cost = cur_cost + graph_cost;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <span class="keywordflow">if</span> (tot_cost &lt; cutoff) {</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;          <span class="keywordtype">bool</span> changed;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;          Token *new_tok = <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a209afa3e1ac1c6a456f0169b239a0e73">FindOrAddToken</a>(arc.nextstate, frame + 1, tot_cost,</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                                          <span class="keyword">false</span>, &amp;changed);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;          </div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;          tok-&gt;links = <span class="keyword">new</span> ForwardLink(new_tok, 0, arc.olabel,</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                                       graph_cost, 0, tok-&gt;links);</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            </div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;          <span class="comment">// &quot;changed&quot; tells us whether the new token has a different</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;          <span class="comment">// cost from before, or is new [if so, add into queue].</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;          <span class="keywordflow">if</span> (changed &amp;&amp; <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#ae6a9be3017661463c1d83b3dd1933cfb">fst_</a>.NumInputEpsilons(arc.nextstate) != 0)</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            queue.push_back(arc.nextstate);</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        }</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      }</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    }</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  }</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a559a7c781b217933b6b2aaf9c15be0d0"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">kaldi::LatticeSimpleDecoder::active_toks_</a></div><div class="ttdeci">std::vector&lt; TokenList &gt; active_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00291">lattice-simple-decoder.h:291</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a7511a7d279476b9b6f5c758b293b53f8"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a7511a7d279476b9b6f5c758b293b53f8">kaldi::LatticeSimpleDecoder::config_</a></div><div class="ttdeci">LatticeSimpleDecoderConfig config_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00294">lattice-simple-decoder.h:294</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a4ace4c191c83fe28b57d4d080ae967b0"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a4ace4c191c83fe28b57d4d080ae967b0">kaldi::LatticeSimpleDecoder::StateId</a></div><div class="ttdeci">Arc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00080">lattice-simple-decoder.h:80</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a209afa3e1ac1c6a456f0169b239a0e73"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a209afa3e1ac1c6a456f0169b239a0e73">kaldi::LatticeSimpleDecoder::FindOrAddToken</a></div><div class="ttdeci">Token * FindOrAddToken(StateId state, int32 frame_plus_one, BaseFloat tot_cost, bool emitting, bool *changed)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8cc_source.html#l00194">lattice-simple-decoder.cc:194</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_ae6a9be3017661463c1d83b3dd1933cfb"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#ae6a9be3017661463c1d83b3dd1933cfb">kaldi::LatticeSimpleDecoder::fst_</a></div><div class="ttdeci">const fst::Fst&lt; fst::StdArc &gt; &amp; fst_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00293">lattice-simple-decoder.h:293</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_aa1fd1346f06a44e4384da90d48ef5cd0"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#aa1fd1346f06a44e4384da90d48ef5cd0">kaldi::LatticeSimpleDecoder::Arc</a></div><div class="ttdeci">fst::StdArc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00078">lattice-simple-decoder.h:78</a></div></div>
<div class="ttc" id="structkaldi_1_1LatticeSimpleDecoderConfig_html_aac27eaf00599707440629f2f6a274e02"><div class="ttname"><a href="structkaldi_1_1LatticeSimpleDecoderConfig.html#aac27eaf00599707440629f2f6a274e02">kaldi::LatticeSimpleDecoderConfig::beam</a></div><div class="ttdeci">BaseFloat beam</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00038">lattice-simple-decoder.h:38</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_aa7220626d9ea4e8aff1315ef5c68bd81"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#aa7220626d9ea4e8aff1315ef5c68bd81">kaldi::LatticeSimpleDecoder::cur_toks_</a></div><div class="ttdeci">unordered_map&lt; StateId, Token * &gt; cur_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00289">lattice-simple-decoder.h:289</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_abd4660a81d0a829a6920416d202a7041"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#abd4660a81d0a829a6920416d202a7041">kaldi::LatticeSimpleDecoder::warned_</a></div><div class="ttdeci">bool warned_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00296">lattice-simple-decoder.h:296</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a93dce8f102ac41f19dc657dd9026a811"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93dce8f102ac41f19dc657dd9026a811">&#9670;&nbsp;</a></span>PruneActiveTokens()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PruneActiveTokens </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>delta</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8cc_source.html#l00462">462</a> of file <a class="el" href="lattice-simple-decoder_8cc_source.html">lattice-simple-decoder.cc</a>.</p>

<p class="reference">References <a class="el" href="lattice-simple-decoder_8h_source.html#l00291">LatticeSimpleDecoder::active_toks_</a>, <a class="el" href="kaldi-error_8h_source.html#l00135">KALDI_VLOG</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00295">LatticeSimpleDecoder::num_toks_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00160">LatticeSimpleDecoder::NumFramesDecoded()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00228">LatticeSimpleDecoder::PruneForwardLinks()</a>, and <a class="el" href="lattice-simple-decoder_8cc_source.html#l00436">LatticeSimpleDecoder::PruneTokensForFrame()</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-simple-decoder_8cc_source.html#l00046">LatticeSimpleDecoder::Decode()</a>.</p>
<div class="fragment"><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                                                            {</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  int32 cur_frame_plus_one = <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#aa030f3b26871bfec31b5e59cac3ba76d">NumFramesDecoded</a>();  </div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  int32 num_toks_begin = <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a21115816f8d2258f49f4934d2d9d83a7">num_toks_</a>;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="comment">// The index &quot;f&quot; below represents a &quot;frame plus one&quot;, i.e. you&#39;d have to subtract</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="comment">// one to get the corresponding index for the decodable object.</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="keywordflow">for</span> (int32 f = cur_frame_plus_one - 1; f &gt;= 0; f--) {</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="comment">// Reason why we need to prune forward links in this situation:</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="comment">// (1) we have never pruned them</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="comment">// (2) we never pruned the forward links on the next frame, which</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="comment">//     </span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[f].must_prune_forward_links) {</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      <span class="keywordtype">bool</span> extra_costs_changed = <span class="keyword">false</span>, links_pruned = <span class="keyword">false</span>;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a84cb8fb599f84db72b10ac60769ba98e">PruneForwardLinks</a>(f, &amp;extra_costs_changed, &amp;links_pruned, delta);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <span class="keywordflow">if</span> (extra_costs_changed &amp;&amp; f &gt; 0)</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[f-1].must_prune_forward_links = <span class="keyword">true</span>;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      <span class="keywordflow">if</span> (links_pruned)</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[f].must_prune_tokens = <span class="keyword">true</span>;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[f].must_prune_forward_links = <span class="keyword">false</span>;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    }</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="keywordflow">if</span> (f+1 &lt; cur_frame_plus_one &amp;&amp; </div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[f+1].must_prune_tokens) {</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a9d76d21bba5c61771c8020a111e4f354">PruneTokensForFrame</a>(f+1);</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[f+1].must_prune_tokens = <span class="keyword">false</span>;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    }</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  }</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <a class="code" href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a>(3) &lt;&lt; <span class="stringliteral">&quot;PruneActiveTokens: pruned tokens from &quot;</span> &lt;&lt; num_toks_begin</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                &lt;&lt; <span class="stringliteral">&quot; to &quot;</span> &lt;&lt; <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a21115816f8d2258f49f4934d2d9d83a7">num_toks_</a>;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a559a7c781b217933b6b2aaf9c15be0d0"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">kaldi::LatticeSimpleDecoder::active_toks_</a></div><div class="ttdeci">std::vector&lt; TokenList &gt; active_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00291">lattice-simple-decoder.h:291</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_aa030f3b26871bfec31b5e59cac3ba76d"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#aa030f3b26871bfec31b5e59cac3ba76d">kaldi::LatticeSimpleDecoder::NumFramesDecoded</a></div><div class="ttdeci">int32 NumFramesDecoded() const</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00160">lattice-simple-decoder.h:160</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a21115816f8d2258f49f4934d2d9d83a7"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a21115816f8d2258f49f4934d2d9d83a7">kaldi::LatticeSimpleDecoder::num_toks_</a></div><div class="ttdeci">int32 num_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00295">lattice-simple-decoder.h:295</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a84cb8fb599f84db72b10ac60769ba98e"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a84cb8fb599f84db72b10ac60769ba98e">kaldi::LatticeSimpleDecoder::PruneForwardLinks</a></div><div class="ttdeci">void PruneForwardLinks(int32 frame, bool *extra_costs_changed, bool *links_pruned, BaseFloat delta)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8cc_source.html#l00228">lattice-simple-decoder.cc:228</a></div></div>
<div class="ttc" id="group__error__group_html_ga16c81ec6ff3ba04c6ff96fdaed9d854e"><div class="ttname"><a href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a></div><div class="ttdeci">#define KALDI_VLOG(v)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00135">kaldi-error.h:135</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a9d76d21bba5c61771c8020a111e4f354"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a9d76d21bba5c61771c8020a111e4f354">kaldi::LatticeSimpleDecoder::PruneTokensForFrame</a></div><div class="ttdeci">void PruneTokensForFrame(int32 frame)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8cc_source.html#l00436">lattice-simple-decoder.cc:436</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3b3797990c03b5e69bcc4beff13482eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b3797990c03b5e69bcc4beff13482eb">&#9670;&nbsp;</a></span>PruneCurrentTokens()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PruneCurrentTokens </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>beam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unordered_map&lt; <a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a4ace4c191c83fe28b57d4d080ae967b0">StateId</a>, <a class="el" href="structkaldi_1_1LatticeSimpleDecoder_1_1Token.html">Token</a> *&gt; *&#160;</td>
          <td class="paramname"><em>toks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8cc_source.html#l00636">636</a> of file <a class="el" href="lattice-simple-decoder_8cc_source.html">lattice-simple-decoder.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="kaldi-error_8h_source.html#l00135">KALDI_VLOG</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-simple-decoder_8cc_source.html#l00046">LatticeSimpleDecoder::Decode()</a>.</p>
<div class="fragment"><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                                                                                                  {</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <span class="keywordflow">if</span> (toks-&gt;empty()) {</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <a class="code" href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a>(2) &lt;&lt;  <span class="stringliteral">&quot;No tokens to prune.\n&quot;</span>;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  }</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> best_cost = 1.0e+10;  <span class="comment">// positive == high cost == bad.</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <span class="keywordflow">for</span> (unordered_map&lt;StateId, Token*&gt;::iterator iter = toks-&gt;begin();</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;       iter != toks-&gt;end(); ++iter) {</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    best_cost =</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        std::min(best_cost,</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                 static_cast&lt;BaseFloat&gt;(iter-&gt;second-&gt;tot_cost));</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  }</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  std::vector&lt;StateId&gt; retained;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> cutoff = best_cost + beam;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="keywordflow">for</span> (unordered_map&lt;StateId, Token*&gt;::iterator iter = toks-&gt;begin();</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;       iter != toks-&gt;end(); ++iter) {</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">if</span> (iter-&gt;second-&gt;tot_cost &lt; cutoff)</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      retained.push_back(iter-&gt;first);</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  }</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  unordered_map&lt;StateId, Token*&gt; tmp;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; retained.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    tmp[retained[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]] = (*toks)[retained[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]];</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  }</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  <a class="code" href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a>(2) &lt;&lt;  <span class="stringliteral">&quot;Pruned to &quot;</span>&lt;&lt;(retained.size())&lt;&lt;<span class="stringliteral">&quot; toks.\n&quot;</span>;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  tmp.swap(*toks);</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;}</div><div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_ga16c81ec6ff3ba04c6ff96fdaed9d854e"><div class="ttname"><a href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a></div><div class="ttdeci">#define KALDI_VLOG(v)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00135">kaldi-error.h:135</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a84cb8fb599f84db72b10ac60769ba98e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84cb8fb599f84db72b10ac60769ba98e">&#9670;&nbsp;</a></span>PruneForwardLinks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PruneForwardLinks </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a> *&#160;</td>
          <td class="paramname"><em>extra_costs_changed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a> *&#160;</td>
          <td class="paramname"><em>links_pruned</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>delta</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8cc_source.html#l00228">228</a> of file <a class="el" href="lattice-simple-decoder_8cc_source.html">lattice-simple-decoder.cc</a>.</p>

<p class="reference">References <a class="el" href="lattice-simple-decoder_8h_source.html#l00170">LatticeSimpleDecoder::ForwardLink::acoustic_cost</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00291">LatticeSimpleDecoder::active_toks_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00294">LatticeSimpleDecoder::config_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00187">LatticeSimpleDecoder::Token::extra_cost</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00169">LatticeSimpleDecoder::ForwardLink::graph_cost</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00129">KALDI_WARN</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00039">LatticeSimpleDecoderConfig::lattice_beam</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00171">LatticeSimpleDecoder::ForwardLink::next</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00166">LatticeSimpleDecoder::ForwardLink::next_tok</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00186">LatticeSimpleDecoder::Token::tot_cost</a>, and <a class="el" href="lattice-simple-decoder_8h_source.html#l00296">LatticeSimpleDecoder::warned_</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-simple-decoder_8cc_source.html#l00495">LatticeSimpleDecoder::FinalizeDecoding()</a>, and <a class="el" href="lattice-simple-decoder_8cc_source.html#l00462">LatticeSimpleDecoder::PruneActiveTokens()</a>.</p>
<div class="fragment"><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                                         {</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="comment">// We have to iterate until there is no more change, because the links</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="comment">// are not guaranteed to be in topological order.</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  *extra_costs_changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  *links_pruned = <span class="keyword">false</span>;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(frame &gt;= 0 &amp;&amp; frame &lt; <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.size());</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[frame].toks == NULL ) { <span class="comment">// empty list; this should</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="comment">// not happen.</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#abd4660a81d0a829a6920416d202a7041">warned_</a>) {</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;No tokens alive [doing pruning].. warning first &quot;</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;          <span class="stringliteral">&quot;time only for each utterance\n&quot;</span>;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#abd4660a81d0a829a6920416d202a7041">warned_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    }</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  }</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    </div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordtype">bool</span> changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keywordflow">while</span> (changed) {</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">for</span> (Token *tok = <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[frame].toks; tok != NULL; tok = tok-&gt;next) {</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      ForwardLink *link, *prev_link = NULL;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <span class="comment">// will recompute tok_extra_cost.</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> tok_extra_cost = std::numeric_limits&lt;BaseFloat&gt;::infinity();</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <span class="keywordflow">for</span> (link = tok-&gt;links; link != NULL; ) {</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="comment">// See if we need to excise this link...</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        Token *next_tok = link-&gt;next_tok;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> link_extra_cost = next_tok-&gt;extra_cost +</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            ((tok-&gt;tot_cost + link-&gt;acoustic_cost + link-&gt;graph_cost)</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;             - next_tok-&gt;tot_cost);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(link_extra_cost == link_extra_cost); <span class="comment">// check for NaN</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keywordflow">if</span> (link_extra_cost &gt; <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a7511a7d279476b9b6f5c758b293b53f8">config_</a>.<a class="code" href="structkaldi_1_1LatticeSimpleDecoderConfig.html#abf32d733b7437195b42a4d867fd5784b">lattice_beam</a>) {  <span class="comment">// excise link</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;          ForwardLink *next_link = link-&gt;next;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;          <span class="keywordflow">if</span> (prev_link != NULL) prev_link-&gt;next = next_link;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;          <span class="keywordflow">else</span> tok-&gt;links = next_link;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;          <span class="keyword">delete</span> link;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;          link = next_link; <span class="comment">// advance link but leave prev_link the same.</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;          *links_pruned = <span class="keyword">true</span>;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        } <span class="keywordflow">else</span> { <span class="comment">// keep the link and update the tok_extra_cost if needed.</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;          <span class="keywordflow">if</span> (link_extra_cost &lt; 0.0) { <span class="comment">// this is just a precaution.</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <span class="keywordflow">if</span> (link_extra_cost &lt; -0.01)</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;              <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;Negative extra_cost: &quot;</span> &lt;&lt; link_extra_cost;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            link_extra_cost = 0.0;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;          }</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;          <span class="keywordflow">if</span> (link_extra_cost &lt; tok_extra_cost)</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            tok_extra_cost = link_extra_cost;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;          prev_link = link;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;          link = link-&gt;next;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        }</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      }</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      <span class="keywordflow">if</span> (fabs(tok_extra_cost - tok-&gt;extra_cost) &gt; delta)</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      tok-&gt;extra_cost = tok_extra_cost; <span class="comment">// will be +infinity or &lt;= lattice_beam_.</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    }</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">if</span> (changed) *extra_costs_changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="comment">// Note: it&#39;s theoretically possible that aggressive compiler</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="comment">// optimizations could cause an infinite loop here for small delta and</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="comment">// high-dynamic-range scores.</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  }</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a559a7c781b217933b6b2aaf9c15be0d0"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">kaldi::LatticeSimpleDecoder::active_toks_</a></div><div class="ttdeci">std::vector&lt; TokenList &gt; active_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00291">lattice-simple-decoder.h:291</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a7511a7d279476b9b6f5c758b293b53f8"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a7511a7d279476b9b6f5c758b293b53f8">kaldi::LatticeSimpleDecoder::config_</a></div><div class="ttdeci">LatticeSimpleDecoderConfig config_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00294">lattice-simple-decoder.h:294</a></div></div>
<div class="ttc" id="structkaldi_1_1LatticeSimpleDecoderConfig_html_abf32d733b7437195b42a4d867fd5784b"><div class="ttname"><a href="structkaldi_1_1LatticeSimpleDecoderConfig.html#abf32d733b7437195b42a4d867fd5784b">kaldi::LatticeSimpleDecoderConfig::lattice_beam</a></div><div class="ttdeci">BaseFloat lattice_beam</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00039">lattice-simple-decoder.h:39</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="group__error__group_html_ga994be213ddf127b5d6f20a43a02b513a"><div class="ttname"><a href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a></div><div class="ttdeci">#define KALDI_WARN</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00129">kaldi-error.h:129</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_abd4660a81d0a829a6920416d202a7041"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#abd4660a81d0a829a6920416d202a7041">kaldi::LatticeSimpleDecoder::warned_</a></div><div class="ttdeci">bool warned_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00296">lattice-simple-decoder.h:296</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a860ae70828a0cd0382b81cc3558a2a02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a860ae70828a0cd0382b81cc3558a2a02">&#9670;&nbsp;</a></span>PruneForwardLinksFinal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PruneForwardLinksFinal </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8cc_source.html#l00338">338</a> of file <a class="el" href="lattice-simple-decoder_8cc_source.html">lattice-simple-decoder.cc</a>.</p>

<p class="reference">References <a class="el" href="lattice-simple-decoder_8h_source.html#l00170">LatticeSimpleDecoder::ForwardLink::acoustic_cost</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00291">LatticeSimpleDecoder::active_toks_</a>, <a class="el" href="kaldi-math_8h_source.html#l00264">kaldi::ApproxEqual()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00292">LatticeSimpleDecoder::ComputeFinalCosts()</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00294">LatticeSimpleDecoder::config_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00289">LatticeSimpleDecoder::cur_toks_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00306">LatticeSimpleDecoder::decoding_finalized_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00187">LatticeSimpleDecoder::Token::extra_cost</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00311">LatticeSimpleDecoder::final_best_cost_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00309">LatticeSimpleDecoder::final_costs_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00310">LatticeSimpleDecoder::final_relative_cost_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00169">LatticeSimpleDecoder::ForwardLink::graph_cost</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00129">KALDI_WARN</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00039">LatticeSimpleDecoderConfig::lattice_beam</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00171">LatticeSimpleDecoder::ForwardLink::next</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00166">LatticeSimpleDecoder::ForwardLink::next_tok</a>, and <a class="el" href="lattice-simple-decoder_8h_source.html#l00186">LatticeSimpleDecoder::Token::tot_cost</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-simple-decoder_8cc_source.html#l00495">LatticeSimpleDecoder::FinalizeDecoding()</a>.</p>
<div class="fragment"><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                                                  {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(!<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.empty());  </div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  int32 frame_plus_one = <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.size() - 1;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[frame_plus_one].toks == NULL) <span class="comment">// empty list; should not happen.</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;No tokens alive at end of file\n&quot;</span>;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="keyword">typedef</span> unordered_map&lt;Token*, BaseFloat&gt;::const_iterator IterType;  </div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#abac1d9b6331d75273f079182a8995d19">ComputeFinalCosts</a>(&amp;<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a40bc4ede3f47b67f9c1920c5c7de4370">final_costs_</a>, &amp;<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#ac89f0cc0de0da3c074f79341f3611b30">final_relative_cost_</a>, &amp;<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a49eb722260aa57b473caac342187b63c">final_best_cost_</a>);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#ad15b222ead591bfc30e26feb230484bf">decoding_finalized_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="comment">// We&#39;re about to delete some of the tokens active on the final frame, so we</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="comment">// clear cur_toks_ because otherwise it would then contain dangling pointers.</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#aa7220626d9ea4e8aff1315ef5c68bd81">cur_toks_</a>.clear();</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  </div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="comment">// Now go through tokens on this frame, pruning forward links...  may have to</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="comment">// iterate a few times until there is no more change, because the list is not</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="comment">// in topological order.  This is a modified version of the code in</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="comment">// PruneForwardLinks, but here we also take account of the final-probs.</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keywordtype">bool</span> changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> delta = 1.0e-05;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="keywordflow">while</span> (changed) {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">for</span> (Token *tok = <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[frame_plus_one].toks;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;         tok != NULL; tok = tok-&gt;next) {</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      ForwardLink *link, *prev_link=NULL;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      <span class="comment">// will recompute tok_extra_cost.  It has a term in it that corresponds</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      <span class="comment">// to the &quot;final-prob&quot;, so instead of initializing tok_extra_cost to infinity</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <span class="comment">// below we set it to the difference between the (score+final_prob) of this token,</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      <span class="comment">// and the best such (score+final_prob).</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> final_cost;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a40bc4ede3f47b67f9c1920c5c7de4370">final_costs_</a>.empty()) {</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        final_cost = 0.0;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        IterType iter = <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a40bc4ede3f47b67f9c1920c5c7de4370">final_costs_</a>.find(tok);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="keywordflow">if</span> (iter != <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a40bc4ede3f47b67f9c1920c5c7de4370">final_costs_</a>.end())</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;          final_cost = iter-&gt;second;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;          final_cost = std::numeric_limits&lt;BaseFloat&gt;::infinity();</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      }</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> tok_extra_cost = tok-&gt;tot_cost + final_cost - <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a49eb722260aa57b473caac342187b63c">final_best_cost_</a>;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      <span class="comment">// tok_extra_cost will be a &quot;min&quot; over either directly being final, or</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <span class="comment">// being indirectly final through other links, and the loop below may</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      <span class="comment">// decrease its value:</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      <span class="keywordflow">for</span> (link = tok-&gt;links; link != NULL; ) {</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="comment">// See if we need to excise this link...</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        Token *next_tok = link-&gt;next_tok;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> link_extra_cost = next_tok-&gt;extra_cost +</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            ((tok-&gt;tot_cost + link-&gt;acoustic_cost + link-&gt;graph_cost)</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;             - next_tok-&gt;tot_cost);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <span class="keywordflow">if</span> (link_extra_cost &gt; <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a7511a7d279476b9b6f5c758b293b53f8">config_</a>.<a class="code" href="structkaldi_1_1LatticeSimpleDecoderConfig.html#abf32d733b7437195b42a4d867fd5784b">lattice_beam</a>) { <span class="comment">// excise link</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;          ForwardLink *next_link = link-&gt;next;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;          <span class="keywordflow">if</span> (prev_link != NULL) prev_link-&gt;next = next_link;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;          <span class="keywordflow">else</span> tok-&gt;links = next_link;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;          <span class="keyword">delete</span> link;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;          link = next_link; <span class="comment">// advance link but leave prev_link the same.</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        } <span class="keywordflow">else</span> { <span class="comment">// keep the link and update the tok_extra_cost if needed.</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;          <span class="keywordflow">if</span> (link_extra_cost &lt; 0.0) { <span class="comment">// this is just a precaution.</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            <span class="keywordflow">if</span> (link_extra_cost &lt; -0.01)</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;              <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;Negative extra_cost: &quot;</span> &lt;&lt; link_extra_cost;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            link_extra_cost = 0.0;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;          }</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;          <span class="keywordflow">if</span> (link_extra_cost &lt; tok_extra_cost)</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            tok_extra_cost = link_extra_cost;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;          prev_link = link;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;          link = link-&gt;next;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        }</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      }</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      <span class="comment">// prune away tokens worse than lattice_beam above best path.  This step</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      <span class="comment">// was not necessary in the non-final case because then, this case</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      <span class="comment">// showed up as having no forward links.  Here, the tok_extra_cost has</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <span class="comment">// an extra component relating to the final-prob.</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      <span class="keywordflow">if</span> (tok_extra_cost &gt; <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a7511a7d279476b9b6f5c758b293b53f8">config_</a>.<a class="code" href="structkaldi_1_1LatticeSimpleDecoderConfig.html#abf32d733b7437195b42a4d867fd5784b">lattice_beam</a>)</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        tok_extra_cost = std::numeric_limits&lt;BaseFloat&gt;::infinity();</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <span class="comment">// to be pruned in PruneTokensForFrame</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">ApproxEqual</a>(tok-&gt;extra_cost, tok_extra_cost, delta))</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      tok-&gt;extra_cost = tok_extra_cost; <span class="comment">// will be +infinity or &lt;= lattice_beam_.</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    }</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  } <span class="comment">// while changed</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a559a7c781b217933b6b2aaf9c15be0d0"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">kaldi::LatticeSimpleDecoder::active_toks_</a></div><div class="ttdeci">std::vector&lt; TokenList &gt; active_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00291">lattice-simple-decoder.h:291</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a7511a7d279476b9b6f5c758b293b53f8"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a7511a7d279476b9b6f5c758b293b53f8">kaldi::LatticeSimpleDecoder::config_</a></div><div class="ttdeci">LatticeSimpleDecoderConfig config_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00294">lattice-simple-decoder.h:294</a></div></div>
<div class="ttc" id="structkaldi_1_1LatticeSimpleDecoderConfig_html_abf32d733b7437195b42a4d867fd5784b"><div class="ttname"><a href="structkaldi_1_1LatticeSimpleDecoderConfig.html#abf32d733b7437195b42a4d867fd5784b">kaldi::LatticeSimpleDecoderConfig::lattice_beam</a></div><div class="ttdeci">BaseFloat lattice_beam</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00039">lattice-simple-decoder.h:39</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_ac89f0cc0de0da3c074f79341f3611b30"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#ac89f0cc0de0da3c074f79341f3611b30">kaldi::LatticeSimpleDecoder::final_relative_cost_</a></div><div class="ttdeci">BaseFloat final_relative_cost_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00310">lattice-simple-decoder.h:310</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a49eb722260aa57b473caac342187b63c"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a49eb722260aa57b473caac342187b63c">kaldi::LatticeSimpleDecoder::final_best_cost_</a></div><div class="ttdeci">BaseFloat final_best_cost_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00311">lattice-simple-decoder.h:311</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_ad15b222ead591bfc30e26feb230484bf"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#ad15b222ead591bfc30e26feb230484bf">kaldi::LatticeSimpleDecoder::decoding_finalized_</a></div><div class="ttdeci">bool decoding_finalized_</div><div class="ttdoc">decoding_finalized_ is true if someone called FinalizeDecoding(). </div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00306">lattice-simple-decoder.h:306</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a40bc4ede3f47b67f9c1920c5c7de4370"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a40bc4ede3f47b67f9c1920c5c7de4370">kaldi::LatticeSimpleDecoder::final_costs_</a></div><div class="ttdeci">unordered_map&lt; Token *, BaseFloat &gt; final_costs_</div><div class="ttdoc">For the meaning of the next 3 variables, see the comment for decoding_finalized_ above., and ComputeFinalCosts(). </div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00309">lattice-simple-decoder.h:309</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_abac1d9b6331d75273f079182a8995d19"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#abac1d9b6331d75273f079182a8995d19">kaldi::LatticeSimpleDecoder::ComputeFinalCosts</a></div><div class="ttdeci">void ComputeFinalCosts(unordered_map&lt; Token *, BaseFloat &gt; *final_costs, BaseFloat *final_relative_cost, BaseFloat *final_best_cost) const</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8cc_source.html#l00292">lattice-simple-decoder.cc:292</a></div></div>
<div class="ttc" id="group__error__group_html_ga994be213ddf127b5d6f20a43a02b513a"><div class="ttname"><a href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a></div><div class="ttdeci">#define KALDI_WARN</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00129">kaldi-error.h:129</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_aa7220626d9ea4e8aff1315ef5c68bd81"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#aa7220626d9ea4e8aff1315ef5c68bd81">kaldi::LatticeSimpleDecoder::cur_toks_</a></div><div class="ttdeci">unordered_map&lt; StateId, Token * &gt; cur_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00289">lattice-simple-decoder.h:289</a></div></div>
<div class="ttc" id="namespacekaldi_html_a99dcbb9fdaa6c980ba67941d45adf017"><div class="ttname"><a href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">kaldi::ApproxEqual</a></div><div class="ttdeci">static bool ApproxEqual(float a, float b, float relative_tolerance=0.001)</div><div class="ttdoc">return abs(a - b) &lt;= relative_tolerance * (abs(a)+abs(b)). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00264">kaldi-math.h:264</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9d76d21bba5c61771c8020a111e4f354"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d76d21bba5c61771c8020a111e4f354">&#9670;&nbsp;</a></span>PruneTokensForFrame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PruneTokensForFrame </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8cc_source.html#l00436">436</a> of file <a class="el" href="lattice-simple-decoder_8cc_source.html">lattice-simple-decoder.cc</a>.</p>

<p class="reference">References <a class="el" href="lattice-simple-decoder_8h_source.html#l00291">LatticeSimpleDecoder::active_toks_</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00187">LatticeSimpleDecoder::Token::extra_cost</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00129">KALDI_WARN</a>, <a class="el" href="lattice-simple-decoder_8h_source.html#l00196">LatticeSimpleDecoder::Token::next</a>, and <a class="el" href="lattice-simple-decoder_8h_source.html#l00295">LatticeSimpleDecoder::num_toks_</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-simple-decoder_8cc_source.html#l00495">LatticeSimpleDecoder::FinalizeDecoding()</a>, and <a class="el" href="lattice-simple-decoder_8cc_source.html#l00462">LatticeSimpleDecoder::PruneActiveTokens()</a>.</p>
<div class="fragment"><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                                                          {</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(frame &gt;= 0 &amp;&amp; frame &lt; <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.size());</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  Token *&amp;toks = <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[frame].toks;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="keywordflow">if</span> (toks == NULL)</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;No tokens alive [doing pruning]&quot;</span>;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  Token *tok, *next_tok, *prev_tok = NULL;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="keywordflow">for</span> (tok = toks; tok != NULL; tok = next_tok) {</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    next_tok = tok-&gt;next;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">if</span> (tok-&gt;extra_cost == std::numeric_limits&lt;BaseFloat&gt;::infinity()) {</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      <span class="comment">// Next token is unreachable from end of graph; excise tok from list</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      <span class="comment">// and delete tok.</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      <span class="keywordflow">if</span> (prev_tok != NULL) prev_tok-&gt;next = tok-&gt;next;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      <span class="keywordflow">else</span> toks = tok-&gt;next;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <span class="keyword">delete</span> tok;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#a21115816f8d2258f49f4934d2d9d83a7">num_toks_</a>--;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      prev_tok = tok;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    }</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  }</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a559a7c781b217933b6b2aaf9c15be0d0"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a559a7c781b217933b6b2aaf9c15be0d0">kaldi::LatticeSimpleDecoder::active_toks_</a></div><div class="ttdeci">std::vector&lt; TokenList &gt; active_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00291">lattice-simple-decoder.h:291</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_a21115816f8d2258f49f4934d2d9d83a7"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#a21115816f8d2258f49f4934d2d9d83a7">kaldi::LatticeSimpleDecoder::num_toks_</a></div><div class="ttdeci">int32 num_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8h_source.html#l00295">lattice-simple-decoder.h:295</a></div></div>
<div class="ttc" id="group__error__group_html_ga994be213ddf127b5d6f20a43a02b513a"><div class="ttname"><a href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a></div><div class="ttdeci">#define KALDI_WARN</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00129">kaldi-error.h:129</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad50a1511ad065870482b9af71818b4ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad50a1511ad065870482b9af71818b4ef">&#9670;&nbsp;</a></span>ReachedFinal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> ReachedFinal </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>says whether a final-state was active on the last frame. </p>
<p>If it was not, the lattice (or traceback) will end with states that are not final-states. </p>

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8h_source.html#l00100">100</a> of file <a class="el" href="lattice-simple-decoder_8h_source.html">lattice-simple-decoder.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="decoder-wrappers_8cc_source.html#l00331">kaldi::DecodeUtteranceLatticeSimple()</a>.</p>
<div class="fragment"><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                            {</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1LatticeSimpleDecoder.html#aab79c2c25990723951176c948ba1adc3">FinalRelativeCost</a>() != std::numeric_limits&lt;BaseFloat&gt;::infinity();</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  }</div><div class="ttc" id="classkaldi_1_1LatticeSimpleDecoder_html_aab79c2c25990723951176c948ba1adc3"><div class="ttname"><a href="classkaldi_1_1LatticeSimpleDecoder.html#aab79c2c25990723951176c948ba1adc3">kaldi::LatticeSimpleDecoder::FinalRelativeCost</a></div><div class="ttdeci">BaseFloat FinalRelativeCost() const</div><div class="ttdoc">FinalRelativeCost() serves the same purpose as ReachedFinal(), but gives more information. </div><div class="ttdef"><b>Definition:</b> <a href="lattice-simple-decoder_8cc_source.html#l00421">lattice-simple-decoder.cc:421</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a559a7c781b217933b6b2aaf9c15be0d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a559a7c781b217933b6b2aaf9c15be0d0">&#9670;&nbsp;</a></span>active_toks_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structkaldi_1_1LatticeSimpleDecoder_1_1TokenList.html">TokenList</a>&gt; active_toks_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8h_source.html#l00291">291</a> of file <a class="el" href="lattice-simple-decoder_8h_source.html">lattice-simple-decoder.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-simple-decoder_8cc_source.html#l00617">LatticeSimpleDecoder::ClearActiveTokens()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00194">LatticeSimpleDecoder::FindOrAddToken()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00078">LatticeSimpleDecoder::GetRawLattice()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00027">LatticeSimpleDecoder::InitDecoding()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00510">LatticeSimpleDecoder::ProcessEmitting()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00550">LatticeSimpleDecoder::ProcessNonemitting()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00462">LatticeSimpleDecoder::PruneActiveTokens()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00228">LatticeSimpleDecoder::PruneForwardLinks()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00338">LatticeSimpleDecoder::PruneForwardLinksFinal()</a>, and <a class="el" href="lattice-simple-decoder_8cc_source.html#l00436">LatticeSimpleDecoder::PruneTokensForFrame()</a>.</p>

</div>
</div>
<a id="a7511a7d279476b9b6f5c758b293b53f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7511a7d279476b9b6f5c758b293b53f8">&#9670;&nbsp;</a></span>config_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structkaldi_1_1LatticeSimpleDecoderConfig.html">LatticeSimpleDecoderConfig</a> config_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8h_source.html#l00294">294</a> of file <a class="el" href="lattice-simple-decoder_8h_source.html">lattice-simple-decoder.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-simple-decoder_8cc_source.html#l00046">LatticeSimpleDecoder::Decode()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00158">LatticeSimpleDecoder::GetLattice()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00510">LatticeSimpleDecoder::ProcessEmitting()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00550">LatticeSimpleDecoder::ProcessNonemitting()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00228">LatticeSimpleDecoder::PruneForwardLinks()</a>, and <a class="el" href="lattice-simple-decoder_8cc_source.html#l00338">LatticeSimpleDecoder::PruneForwardLinksFinal()</a>.</p>

</div>
</div>
<a id="aa7220626d9ea4e8aff1315ef5c68bd81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7220626d9ea4e8aff1315ef5c68bd81">&#9670;&nbsp;</a></span>cur_toks_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unordered_map&lt;<a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a4ace4c191c83fe28b57d4d080ae967b0">StateId</a>, <a class="el" href="structkaldi_1_1LatticeSimpleDecoder_1_1Token.html">Token</a>*&gt; cur_toks_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8h_source.html#l00289">289</a> of file <a class="el" href="lattice-simple-decoder_8h_source.html">lattice-simple-decoder.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-simple-decoder_8cc_source.html#l00292">LatticeSimpleDecoder::ComputeFinalCosts()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00046">LatticeSimpleDecoder::Decode()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00194">LatticeSimpleDecoder::FindOrAddToken()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00027">LatticeSimpleDecoder::InitDecoding()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00510">LatticeSimpleDecoder::ProcessEmitting()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00550">LatticeSimpleDecoder::ProcessNonemitting()</a>, and <a class="el" href="lattice-simple-decoder_8cc_source.html#l00338">LatticeSimpleDecoder::PruneForwardLinksFinal()</a>.</p>

</div>
</div>
<a id="ad15b222ead591bfc30e26feb230484bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad15b222ead591bfc30e26feb230484bf">&#9670;&nbsp;</a></span>decoding_finalized_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> decoding_finalized_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>decoding_finalized_ is true if someone called <a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a363a350323c7c881be0a0fc089d2b555" title="This function may be optionally called after AdvanceDecoding(), when you do not plan to decode any fu...">FinalizeDecoding()</a>. </p>
<p>[note, calling this is optional]. If true, it's forbidden to decode more. Also, if this is set, then the output of <a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#abac1d9b6331d75273f079182a8995d19">ComputeFinalCosts()</a> is in the next three variables. The reason we need to do this is that after <a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a363a350323c7c881be0a0fc089d2b555" title="This function may be optionally called after AdvanceDecoding(), when you do not plan to decode any fu...">FinalizeDecoding()</a> calls <a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a9d76d21bba5c61771c8020a111e4f354">PruneTokensForFrame()</a> for the final frame, some of the tokens on the last frame are freed, so we free the list from cur_toks_ to avoid having dangling pointers hanging around. </p>

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8h_source.html#l00306">306</a> of file <a class="el" href="lattice-simple-decoder_8h_source.html">lattice-simple-decoder.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-simple-decoder_8cc_source.html#l00292">LatticeSimpleDecoder::ComputeFinalCosts()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00421">LatticeSimpleDecoder::FinalRelativeCost()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00078">LatticeSimpleDecoder::GetRawLattice()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00027">LatticeSimpleDecoder::InitDecoding()</a>, and <a class="el" href="lattice-simple-decoder_8cc_source.html#l00338">LatticeSimpleDecoder::PruneForwardLinksFinal()</a>.</p>

</div>
</div>
<a id="a49eb722260aa57b473caac342187b63c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49eb722260aa57b473caac342187b63c">&#9670;&nbsp;</a></span>final_best_cost_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> final_best_cost_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8h_source.html#l00311">311</a> of file <a class="el" href="lattice-simple-decoder_8h_source.html">lattice-simple-decoder.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-simple-decoder_8cc_source.html#l00338">LatticeSimpleDecoder::PruneForwardLinksFinal()</a>.</p>

</div>
</div>
<a id="a40bc4ede3f47b67f9c1920c5c7de4370"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40bc4ede3f47b67f9c1920c5c7de4370">&#9670;&nbsp;</a></span>final_costs_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unordered_map&lt;<a class="el" href="structkaldi_1_1LatticeSimpleDecoder_1_1Token.html">Token</a>*, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&gt; final_costs_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For the meaning of the next 3 variables, see the comment for decoding_finalized_ above., and <a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#abac1d9b6331d75273f079182a8995d19">ComputeFinalCosts()</a>. </p>

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8h_source.html#l00309">309</a> of file <a class="el" href="lattice-simple-decoder_8h_source.html">lattice-simple-decoder.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-simple-decoder_8cc_source.html#l00046">LatticeSimpleDecoder::Decode()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00078">LatticeSimpleDecoder::GetRawLattice()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00027">LatticeSimpleDecoder::InitDecoding()</a>, and <a class="el" href="lattice-simple-decoder_8cc_source.html#l00338">LatticeSimpleDecoder::PruneForwardLinksFinal()</a>.</p>

</div>
</div>
<a id="ac89f0cc0de0da3c074f79341f3611b30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac89f0cc0de0da3c074f79341f3611b30">&#9670;&nbsp;</a></span>final_relative_cost_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> final_relative_cost_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8h_source.html#l00310">310</a> of file <a class="el" href="lattice-simple-decoder_8h_source.html">lattice-simple-decoder.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-simple-decoder_8cc_source.html#l00421">LatticeSimpleDecoder::FinalRelativeCost()</a>, and <a class="el" href="lattice-simple-decoder_8cc_source.html#l00338">LatticeSimpleDecoder::PruneForwardLinksFinal()</a>.</p>

</div>
</div>
<a id="ae6a9be3017661463c1d83b3dd1933cfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6a9be3017661463c1d83b3dd1933cfb">&#9670;&nbsp;</a></span>fst_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const fst::Fst&lt;<a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">fst::StdArc</a>&gt;&amp; fst_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8h_source.html#l00293">293</a> of file <a class="el" href="lattice-simple-decoder_8h_source.html">lattice-simple-decoder.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-simple-decoder_8cc_source.html#l00292">LatticeSimpleDecoder::ComputeFinalCosts()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00027">LatticeSimpleDecoder::InitDecoding()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00510">LatticeSimpleDecoder::ProcessEmitting()</a>, and <a class="el" href="lattice-simple-decoder_8cc_source.html#l00550">LatticeSimpleDecoder::ProcessNonemitting()</a>.</p>

</div>
</div>
<a id="a21115816f8d2258f49f4934d2d9d83a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21115816f8d2258f49f4934d2d9d83a7">&#9670;&nbsp;</a></span>num_toks_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 num_toks_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8h_source.html#l00295">295</a> of file <a class="el" href="lattice-simple-decoder_8h_source.html">lattice-simple-decoder.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-simple-decoder_8cc_source.html#l00617">LatticeSimpleDecoder::ClearActiveTokens()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00495">LatticeSimpleDecoder::FinalizeDecoding()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00194">LatticeSimpleDecoder::FindOrAddToken()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00078">LatticeSimpleDecoder::GetRawLattice()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00027">LatticeSimpleDecoder::InitDecoding()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00462">LatticeSimpleDecoder::PruneActiveTokens()</a>, and <a class="el" href="lattice-simple-decoder_8cc_source.html#l00436">LatticeSimpleDecoder::PruneTokensForFrame()</a>.</p>

</div>
</div>
<a id="a5f20aebe7a2cacd960afb828145c1a68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f20aebe7a2cacd960afb828145c1a68">&#9670;&nbsp;</a></span>prev_toks_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unordered_map&lt;<a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html#a4ace4c191c83fe28b57d4d080ae967b0">StateId</a>, <a class="el" href="structkaldi_1_1LatticeSimpleDecoder_1_1Token.html">Token</a>*&gt; prev_toks_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8h_source.html#l00290">290</a> of file <a class="el" href="lattice-simple-decoder_8h_source.html">lattice-simple-decoder.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-simple-decoder_8cc_source.html#l00027">LatticeSimpleDecoder::InitDecoding()</a>, and <a class="el" href="lattice-simple-decoder_8cc_source.html#l00510">LatticeSimpleDecoder::ProcessEmitting()</a>.</p>

</div>
</div>
<a id="abd4660a81d0a829a6920416d202a7041"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd4660a81d0a829a6920416d202a7041">&#9670;&nbsp;</a></span>warned_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> warned_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-simple-decoder_8h_source.html#l00296">296</a> of file <a class="el" href="lattice-simple-decoder_8h_source.html">lattice-simple-decoder.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-simple-decoder_8cc_source.html#l00027">LatticeSimpleDecoder::InitDecoding()</a>, <a class="el" href="lattice-simple-decoder_8cc_source.html#l00550">LatticeSimpleDecoder::ProcessNonemitting()</a>, and <a class="el" href="lattice-simple-decoder_8cc_source.html#l00228">LatticeSimpleDecoder::PruneForwardLinks()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>decoder/<a class="el" href="lattice-simple-decoder_8h_source.html">lattice-simple-decoder.h</a></li>
<li>decoder/<a class="el" href="lattice-simple-decoder_8cc_source.html">lattice-simple-decoder.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacekaldi.html">kaldi</a></li><li class="navelem"><a class="el" href="classkaldi_1_1LatticeSimpleDecoder.html">LatticeSimpleDecoder</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
