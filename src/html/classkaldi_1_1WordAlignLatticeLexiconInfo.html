<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Kaldi: WordAlignLatticeLexiconInfo Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" /> 
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
 <td id="projectlogo"><a href="http://kaldi-asr.org/"><img alt="Logo" src="KaldiTextAndLogoSmall.png"/ style="padding: 3px 5px 1px 5px"></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname" style="display:none">Kaldi
   </div>
  </td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief" style="display:none"></div>
    </td>
   <!--END PROJECT_BRIEF-->
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classkaldi_1_1WordAlignLatticeLexiconInfo.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-types">Protected Types</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classkaldi_1_1WordAlignLatticeLexiconInfo-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">WordAlignLatticeLexiconInfo Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This class extracts some information from the lexicon and stores it in a suitable form for the word-alignment code to use.  
 <a href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="word-align-lattice-lexicon_8h_source.html">word-align-lattice-lexicon.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for WordAlignLatticeLexiconInfo:</div>
<div class="dyncontent">
<div class="center"><img src="classkaldi_1_1WordAlignLatticeLexiconInfo__coll__graph.png" border="0" usemap="#WordAlignLatticeLexiconInfo_coll__map" alt="Collaboration graph"/></div>
<map name="WordAlignLatticeLexiconInfo_coll__map" id="WordAlignLatticeLexiconInfo_coll__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a993aa4b2f59625400c4329fa8d93f38f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a993aa4b2f59625400c4329fa8d93f38f">WordAlignLatticeLexiconInfo</a> (const std::vector&lt; std::vector&lt; int32 &gt; &gt; &amp;lexicon)</td></tr>
<tr class="separator:a993aa4b2f59625400c4329fa8d93f38f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c4322aa0fa09b9174c4344b41ade320"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a8c4322aa0fa09b9174c4344b41ade320">IsValidEntry</a> (const std::vector&lt; int32 &gt; &amp;entry) const</td></tr>
<tr class="memdesc:a8c4322aa0fa09b9174c4344b41ade320"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if this lexicon-entry can appear, intepreted as (output-word phone1 phone2 ...).  <a href="#a8c4322aa0fa09b9174c4344b41ade320">More...</a><br /></td></tr>
<tr class="separator:a8c4322aa0fa09b9174c4344b41ade320"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb7c50c176c8d5e0bc343a3272f25c9e"><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#aeb7c50c176c8d5e0bc343a3272f25c9e">EquivalenceClassOf</a> (int32 word) const</td></tr>
<tr class="memdesc:aeb7c50c176c8d5e0bc343a3272f25c9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Purely for the testing code, we map words into equivalence classes derived from the mappings in the first two fields of each line in the lexicon.  <a href="#aeb7c50c176c8d5e0bc343a3272f25c9e">More...</a><br /></td></tr>
<tr class="separator:aeb7c50c176c8d5e0bc343a3272f25c9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-types"></a>
Protected Types</h2></td></tr>
<tr class="memitem:a07faab50d90d8cebda5ee1cb6788bdd5"><td class="memItemLeft" align="right" valign="top">typedef unordered_map&lt; std::vector&lt; int32 &gt;, std::vector&lt; int32 &gt;, <a class="el" href="structkaldi_1_1VectorHasher.html">VectorHasher</a>&lt; int32 &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a07faab50d90d8cebda5ee1cb6788bdd5">ViabilityMap</a></td></tr>
<tr class="memdesc:a07faab50d90d8cebda5ee1cb6788bdd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">The type ViabilityMap maps from sequences of phones (excluding the empty sequence), to the sets of all word-labels [on the input lattice] that could correspond to phone sequences that start with s [but are longer than s].  <a href="#a07faab50d90d8cebda5ee1cb6788bdd5">More...</a><br /></td></tr>
<tr class="separator:a07faab50d90d8cebda5ee1cb6788bdd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abde0786769c783416727074b05dc2ffc"><td class="memItemLeft" align="right" valign="top">typedef unordered_map&lt; std::vector&lt; int32 &gt;, int32, <a class="el" href="structkaldi_1_1VectorHasher.html">VectorHasher</a>&lt; int32 &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#abde0786769c783416727074b05dc2ffc">LexiconMap</a></td></tr>
<tr class="memdesc:abde0786769c783416727074b05dc2ffc"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a map from a vector (orig-word-symbol phone1 phone2 ...  <a href="#abde0786769c783416727074b05dc2ffc">More...</a><br /></td></tr>
<tr class="separator:abde0786769c783416727074b05dc2ffc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeae518aa4fd9a97f20617f42f6f96bf8"><td class="memItemLeft" align="right" valign="top">typedef unordered_map&lt; int32, std::pair&lt; int32, int32 &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#aeae518aa4fd9a97f20617f42f6f96bf8">NumPhonesMap</a></td></tr>
<tr class="memdesc:aeae518aa4fd9a97f20617f42f6f96bf8"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a map from the word-id (as present in the original lattice) to the minimum and maximum #phones of lexicon entries for that word.  <a href="#aeae518aa4fd9a97f20617f42f6f96bf8">More...</a><br /></td></tr>
<tr class="separator:aeae518aa4fd9a97f20617f42f6f96bf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a964110bab2393106c51b9cb4204dfb5c"><td class="memItemLeft" align="right" valign="top">typedef unordered_map&lt; int32, int32 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a964110bab2393106c51b9cb4204dfb5c">EquivalenceMap</a></td></tr>
<tr class="memdesc:a964110bab2393106c51b9cb4204dfb5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is used only in testing code; it defines a mapping from a word to the primary member of that word's equivalence-class.  <a href="#a964110bab2393106c51b9cb4204dfb5c">More...</a><br /></td></tr>
<tr class="separator:a964110bab2393106c51b9cb4204dfb5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a6aeaa400d6d0f73bb0f6ca772fad2037"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a6aeaa400d6d0f73bb0f6ca772fad2037">UpdateViabilityMap</a> (const std::vector&lt; int32 &gt; &amp;lexicon_entry)</td></tr>
<tr class="separator:a6aeaa400d6d0f73bb0f6ca772fad2037"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad79e1469dd7b70ea8df50597e31c6ec0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#ad79e1469dd7b70ea8df50597e31c6ec0">UpdateLexiconMap</a> (const std::vector&lt; int32 &gt; &amp;lexicon_entry)</td></tr>
<tr class="memdesc:ad79e1469dd7b70ea8df50597e31c6ec0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the map from a vector (orig-word-symbol phone1 phone2 ...  <a href="#ad79e1469dd7b70ea8df50597e31c6ec0">More...</a><br /></td></tr>
<tr class="separator:ad79e1469dd7b70ea8df50597e31c6ec0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41e7e1f0e3ab8b69833b86e021311b77"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a41e7e1f0e3ab8b69833b86e021311b77">UpdateNumPhonesMap</a> (const std::vector&lt; int32 &gt; &amp;lexicon_entry)</td></tr>
<tr class="separator:a41e7e1f0e3ab8b69833b86e021311b77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41634594628ae3f036e5a1480c2f3f1f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a41634594628ae3f036e5a1480c2f3f1f">UpdateEquivalenceMap</a> (const std::vector&lt; std::vector&lt; int32 &gt; &gt; &amp;lexicon)</td></tr>
<tr class="separator:a41634594628ae3f036e5a1480c2f3f1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4a475b77af6ff792051d066f97ec9b2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#aa4a475b77af6ff792051d066f97ec9b2">FinalizeViabilityMap</a> ()</td></tr>
<tr class="separator:aa4a475b77af6ff792051d066f97ec9b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a9095049b3a75d1345e43c4f5f4f9c506"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#abde0786769c783416727074b05dc2ffc">LexiconMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a9095049b3a75d1345e43c4f5f4f9c506">lexicon_map_</a></td></tr>
<tr class="separator:a9095049b3a75d1345e43c4f5f4f9c506"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e8b2d8641b1d616eb919648b5721d72"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#aeae518aa4fd9a97f20617f42f6f96bf8">NumPhonesMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a8e8b2d8641b1d616eb919648b5721d72">num_phones_map_</a></td></tr>
<tr class="separator:a8e8b2d8641b1d616eb919648b5721d72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44589a04caf87298c831ed21223f5820"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a07faab50d90d8cebda5ee1cb6788bdd5">ViabilityMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a44589a04caf87298c831ed21223f5820">viability_map_</a></td></tr>
<tr class="separator:a44589a04caf87298c831ed21223f5820"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65b612261d299ab73c4637639c305599"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#abde0786769c783416727074b05dc2ffc">LexiconMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a65b612261d299ab73c4637639c305599">reverse_lexicon_map_</a></td></tr>
<tr class="separator:a65b612261d299ab73c4637639c305599"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af48811df7c0e1fb724e81ef230f619d4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a964110bab2393106c51b9cb4204dfb5c">EquivalenceMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#af48811df7c0e1fb724e81ef230f619d4">equivalence_map_</a></td></tr>
<tr class="separator:af48811df7c0e1fb724e81ef230f619d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:aefbe2b410dbe5ce8b585d1351b5a40de"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#aefbe2b410dbe5ce8b585d1351b5a40de">LatticeLexiconWordAligner</a></td></tr>
<tr class="separator:aefbe2b410dbe5ce8b585d1351b5a40de"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class extracts some information from the lexicon and stores it in a suitable form for the word-alignment code to use. </p>

<p class="definition">Definition at line <a class="el" href="word-align-lattice-lexicon_8h_source.html#l00056">56</a> of file <a class="el" href="word-align-lattice-lexicon_8h_source.html">word-align-lattice-lexicon.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a964110bab2393106c51b9cb4204dfb5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a964110bab2393106c51b9cb4204dfb5c">&#9670;&nbsp;</a></span>EquivalenceMap</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef unordered_map&lt;int32, int32&gt; <a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a964110bab2393106c51b9cb4204dfb5c">EquivalenceMap</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is used only in testing code; it defines a mapping from a word to the primary member of that word's equivalence-class. </p>

<p class="definition">Definition at line <a class="el" href="word-align-lattice-lexicon_8h_source.html#l00101">101</a> of file <a class="el" href="word-align-lattice-lexicon_8h_source.html">word-align-lattice-lexicon.h</a>.</p>

</div>
</div>
<a id="abde0786769c783416727074b05dc2ffc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abde0786769c783416727074b05dc2ffc">&#9670;&nbsp;</a></span>LexiconMap</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef unordered_map&lt;std::vector&lt;int32&gt;, int32, <a class="el" href="structkaldi_1_1VectorHasher.html">VectorHasher</a>&lt;int32&gt; &gt; <a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#abde0786769c783416727074b05dc2ffc">LexiconMap</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is a map from a vector (orig-word-symbol phone1 phone2 ... </p>
<p>) to the new word-symbol. [todo: make sure the new word-symbol is always nonzero.] </p>

<p class="definition">Definition at line <a class="el" href="word-align-lattice-lexicon_8h_source.html#l00092">92</a> of file <a class="el" href="word-align-lattice-lexicon_8h_source.html">word-align-lattice-lexicon.h</a>.</p>

</div>
</div>
<a id="aeae518aa4fd9a97f20617f42f6f96bf8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeae518aa4fd9a97f20617f42f6f96bf8">&#9670;&nbsp;</a></span>NumPhonesMap</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef unordered_map&lt;int32, std::pair&lt;int32, int32&gt; &gt; <a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#aeae518aa4fd9a97f20617f42f6f96bf8">NumPhonesMap</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is a map from the word-id (as present in the original lattice) to the minimum and maximum #phones of lexicon entries for that word. </p>
<p>It helps improve efficiency. </p>

<p class="definition">Definition at line <a class="el" href="word-align-lattice-lexicon_8h_source.html#l00097">97</a> of file <a class="el" href="word-align-lattice-lexicon_8h_source.html">word-align-lattice-lexicon.h</a>.</p>

</div>
</div>
<a id="a07faab50d90d8cebda5ee1cb6788bdd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07faab50d90d8cebda5ee1cb6788bdd5">&#9670;&nbsp;</a></span>ViabilityMap</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef unordered_map&lt;std::vector&lt;int32&gt;, std::vector&lt;int32&gt;, <a class="el" href="structkaldi_1_1VectorHasher.html">VectorHasher</a>&lt;int32&gt; &gt; <a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a07faab50d90d8cebda5ee1cb6788bdd5">ViabilityMap</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The type ViabilityMap maps from sequences of phones (excluding the empty sequence), to the sets of all word-labels [on the input lattice] that could correspond to phone sequences that start with s [but are longer than s]. </p>
<p>The sets of word-labels are represented as sorted vectors of int32 Note: the zero word-label is included here. This is used in a kind of co-accessibility test, to see whether it is worth extending this state by traversing arcs in the input lattice. </p>

<p class="definition">Definition at line <a class="el" href="word-align-lattice-lexicon_8h_source.html#l00087">87</a> of file <a class="el" href="word-align-lattice-lexicon_8h_source.html">word-align-lattice-lexicon.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a993aa4b2f59625400c4329fa8d93f38f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a993aa4b2f59625400c4329fa8d93f38f">&#9670;&nbsp;</a></span>WordAlignLatticeLexiconInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html">WordAlignLatticeLexiconInfo</a> </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; std::vector&lt; int32 &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>lexicon</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="word-align-lattice-lexicon_8cc_source.html#l00896">896</a> of file <a class="el" href="word-align-lattice-lexicon_8cc_source.html">word-align-lattice-lexicon.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>.</p>
<div class="fragment"><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                                                 {</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; lexicon.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <span class="keyword">const</span> std::vector&lt;int32&gt; &amp;lexicon_entry = lexicon[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(lexicon_entry.size() &gt;= 2);</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <a class="code" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a6aeaa400d6d0f73bb0f6ca772fad2037">UpdateViabilityMap</a>(lexicon_entry);</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <a class="code" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#ad79e1469dd7b70ea8df50597e31c6ec0">UpdateLexiconMap</a>(lexicon_entry);</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <a class="code" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a41e7e1f0e3ab8b69833b86e021311b77">UpdateNumPhonesMap</a>(lexicon_entry);</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  }</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <a class="code" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#aa4a475b77af6ff792051d066f97ec9b2">FinalizeViabilityMap</a>();</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <a class="code" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a41634594628ae3f036e5a1480c2f3f1f">UpdateEquivalenceMap</a>(lexicon);</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;}</div><div class="ttc" id="classkaldi_1_1WordAlignLatticeLexiconInfo_html_a6aeaa400d6d0f73bb0f6ca772fad2037"><div class="ttname"><a href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a6aeaa400d6d0f73bb0f6ca772fad2037">kaldi::WordAlignLatticeLexiconInfo::UpdateViabilityMap</a></div><div class="ttdeci">void UpdateViabilityMap(const std::vector&lt; int32 &gt; &amp;lexicon_entry)</div><div class="ttdef"><b>Definition:</b> <a href="word-align-lattice-lexicon_8cc_source.html#l00774">word-align-lattice-lexicon.cc:774</a></div></div>
<div class="ttc" id="classkaldi_1_1WordAlignLatticeLexiconInfo_html_a41634594628ae3f036e5a1480c2f3f1f"><div class="ttname"><a href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a41634594628ae3f036e5a1480c2f3f1f">kaldi::WordAlignLatticeLexiconInfo::UpdateEquivalenceMap</a></div><div class="ttdeci">void UpdateEquivalenceMap(const std::vector&lt; std::vector&lt; int32 &gt; &gt; &amp;lexicon)</div><div class="ttdef"><b>Definition:</b> <a href="word-align-lattice-lexicon_8cc_source.html#l00873">word-align-lattice-lexicon.cc:873</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="classkaldi_1_1WordAlignLatticeLexiconInfo_html_aa4a475b77af6ff792051d066f97ec9b2"><div class="ttname"><a href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#aa4a475b77af6ff792051d066f97ec9b2">kaldi::WordAlignLatticeLexiconInfo::FinalizeViabilityMap</a></div><div class="ttdeci">void FinalizeViabilityMap()</div><div class="ttdef"><b>Definition:</b> <a href="word-align-lattice-lexicon_8cc_source.html#l00791">word-align-lattice-lexicon.cc:791</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1WordAlignLatticeLexiconInfo_html_a41e7e1f0e3ab8b69833b86e021311b77"><div class="ttname"><a href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a41e7e1f0e3ab8b69833b86e021311b77">kaldi::WordAlignLatticeLexiconInfo::UpdateNumPhonesMap</a></div><div class="ttdeci">void UpdateNumPhonesMap(const std::vector&lt; int32 &gt; &amp;lexicon_entry)</div><div class="ttdef"><b>Definition:</b> <a href="word-align-lattice-lexicon_8cc_source.html#l00836">word-align-lattice-lexicon.cc:836</a></div></div>
<div class="ttc" id="classkaldi_1_1WordAlignLatticeLexiconInfo_html_ad79e1469dd7b70ea8df50597e31c6ec0"><div class="ttname"><a href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#ad79e1469dd7b70ea8df50597e31c6ec0">kaldi::WordAlignLatticeLexiconInfo::UpdateLexiconMap</a></div><div class="ttdeci">void UpdateLexiconMap(const std::vector&lt; int32 &gt; &amp;lexicon_entry)</div><div class="ttdoc">Update the map from a vector (orig-word-symbol phone1 phone2 ... </div><div class="ttdef"><b>Definition:</b> <a href="word-align-lattice-lexicon_8cc_source.html#l00804">word-align-lattice-lexicon.cc:804</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aeb7c50c176c8d5e0bc343a3272f25c9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb7c50c176c8d5e0bc343a3272f25c9e">&#9670;&nbsp;</a></span>EquivalenceClassOf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32 EquivalenceClassOf </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>word</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Purely for the testing code, we map words into equivalence classes derived from the mappings in the first two fields of each line in the lexicon. </p>
<p>This function maps from each word-id to the lowest member of its equivalence class. </p>

<p class="definition">Definition at line <a class="el" href="word-align-lattice-lexicon_8cc_source.html#l00866">866</a> of file <a class="el" href="word-align-lattice-lexicon_8cc_source.html">word-align-lattice-lexicon.cc</a>.</p>

<p class="reference">Referenced by <a class="el" href="word-align-lattice-lexicon_8cc_source.html#l00912">kaldi::MapSymbols()</a>.</p>
<div class="fragment"><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                                                                      {</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  unordered_map&lt;int32, int32&gt;::const_iterator iter =</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;      <a class="code" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#af48811df7c0e1fb724e81ef230f619d4">equivalence_map_</a>.find(word);</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="keywordflow">if</span> (iter == <a class="code" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#af48811df7c0e1fb724e81ef230f619d4">equivalence_map_</a>.end()) <span class="keywordflow">return</span> word; <span class="comment">// not in map.</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">return</span> iter-&gt;second;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;}</div><div class="ttc" id="classkaldi_1_1WordAlignLatticeLexiconInfo_html_af48811df7c0e1fb724e81ef230f619d4"><div class="ttname"><a href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#af48811df7c0e1fb724e81ef230f619d4">kaldi::WordAlignLatticeLexiconInfo::equivalence_map_</a></div><div class="ttdeci">EquivalenceMap equivalence_map_</div><div class="ttdef"><b>Definition:</b> <a href="word-align-lattice-lexicon_8h_source.html#l00116">word-align-lattice-lexicon.h:116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa4a475b77af6ff792051d066f97ec9b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4a475b77af6ff792051d066f97ec9b2">&#9670;&nbsp;</a></span>FinalizeViabilityMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FinalizeViabilityMap </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="word-align-lattice-lexicon_8cc_source.html#l00791">791</a> of file <a class="el" href="word-align-lattice-lexicon_8cc_source.html">word-align-lattice-lexicon.cc</a>.</p>

<p class="reference">References <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="stl-utils_8h_source.html#l00039">kaldi::SortAndUniq()</a>, and <a class="el" href="arpa-file-parser-test_8cc_source.html#l00043">words</a>.</p>
<div class="fragment"><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                                                       {</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <span class="keywordflow">for</span> (ViabilityMap::iterator iter = <a class="code" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a44589a04caf87298c831ed21223f5820">viability_map_</a>.begin();</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;       iter != <a class="code" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a44589a04caf87298c831ed21223f5820">viability_map_</a>.end();</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;       ++iter) {</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    std::vector&lt;int32&gt; &amp;<a class="code" href="arpa-file-parser-test_8cc.html#a1e047defc56305925400c84666b87df3">words</a> = iter-&gt;second;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <a class="code" href="namespacekaldi.html#a3dd7a9cc33032bfb870b4b6c053822db">SortAndUniq</a>(&amp;words);</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(words[0] &gt;= 0 &amp;&amp; <span class="stringliteral">&quot;Error: negative labels in lexicon.&quot;</span>);</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  }</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;}</div><div class="ttc" id="arpa-file-parser-test_8cc_html_a1e047defc56305925400c84666b87df3"><div class="ttname"><a href="arpa-file-parser-test_8cc.html#a1e047defc56305925400c84666b87df3">words</a></div><div class="ttdeci">int32 words[kMaxOrder]</div><div class="ttdef"><b>Definition:</b> <a href="arpa-file-parser-test_8cc_source.html#l00043">arpa-file-parser-test.cc:43</a></div></div>
<div class="ttc" id="classkaldi_1_1WordAlignLatticeLexiconInfo_html_a44589a04caf87298c831ed21223f5820"><div class="ttname"><a href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a44589a04caf87298c831ed21223f5820">kaldi::WordAlignLatticeLexiconInfo::viability_map_</a></div><div class="ttdeci">ViabilityMap viability_map_</div><div class="ttdef"><b>Definition:</b> <a href="word-align-lattice-lexicon_8h_source.html#l00107">word-align-lattice-lexicon.h:107</a></div></div>
<div class="ttc" id="namespacekaldi_html_a3dd7a9cc33032bfb870b4b6c053822db"><div class="ttname"><a href="namespacekaldi.html#a3dd7a9cc33032bfb870b4b6c053822db">kaldi::SortAndUniq</a></div><div class="ttdeci">void SortAndUniq(std::vector&lt; T &gt; *vec)</div><div class="ttdoc">Sorts and uniq&amp;#39;s (removes duplicates) from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="stl-utils_8h_source.html#l00039">stl-utils.h:39</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8c4322aa0fa09b9174c4344b41ade320"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c4322aa0fa09b9174c4344b41ade320">&#9670;&nbsp;</a></span>IsValidEntry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> IsValidEntry </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; int32 &gt; &amp;&#160;</td>
          <td class="paramname"><em>entry</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if this lexicon-entry can appear, intepreted as (output-word phone1 phone2 ...). </p>
<p>Entry contains new-word-id phone1 phone2 ...</p>
<p>This is just used in testing code.</p>
<p>equivalent to all but the 1st entry on a line of the input file. </p>

<p class="definition">Definition at line <a class="el" href="word-align-lattice-lexicon_8cc_source.html#l00853">853</a> of file <a class="el" href="word-align-lattice-lexicon_8cc_source.html">word-align-lattice-lexicon.cc</a>.</p>

<p class="reference">References <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>.</p>

<p class="reference">Referenced by <a class="el" href="word-align-lattice-lexicon_8cc_source.html#l00745">kaldi::IsPlausibleWord()</a>.</p>
<div class="fragment"><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                                                                                  {</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(!entry.empty());</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  LexiconMap::const_iterator iter = <a class="code" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a9095049b3a75d1345e43c4f5f4f9c506">lexicon_map_</a>.find(entry);</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  <span class="keywordflow">if</span> (iter != <a class="code" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a9095049b3a75d1345e43c4f5f4f9c506">lexicon_map_</a>.end()) {</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    int32 tgt_word = (iter-&gt;second == <a class="code" href="namespacekaldi.html#a548f5d51a19672871cae6256cafa413f">kTemporaryEpsilon</a> ? 0 : iter-&gt;second);</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="keywordflow">if</span> (tgt_word == entry[0]) <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// symmetric entry.</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <span class="comment">// this means that that there would be an output-word with this</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="comment">// value, and this sequence of phones.</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  }</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="comment">// For entries that were not symmetric:</span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a65b612261d299ab73c4637639c305599">reverse_lexicon_map_</a>.count(entry) != 0);</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;}</div><div class="ttc" id="classkaldi_1_1WordAlignLatticeLexiconInfo_html_a9095049b3a75d1345e43c4f5f4f9c506"><div class="ttname"><a href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a9095049b3a75d1345e43c4f5f4f9c506">kaldi::WordAlignLatticeLexiconInfo::lexicon_map_</a></div><div class="ttdeci">LexiconMap lexicon_map_</div><div class="ttdef"><b>Definition:</b> <a href="word-align-lattice-lexicon_8h_source.html#l00105">word-align-lattice-lexicon.h:105</a></div></div>
<div class="ttc" id="classkaldi_1_1WordAlignLatticeLexiconInfo_html_a65b612261d299ab73c4637639c305599"><div class="ttname"><a href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a65b612261d299ab73c4637639c305599">kaldi::WordAlignLatticeLexiconInfo::reverse_lexicon_map_</a></div><div class="ttdeci">LexiconMap reverse_lexicon_map_</div><div class="ttdef"><b>Definition:</b> <a href="word-align-lattice-lexicon_8h_source.html#l00111">word-align-lattice-lexicon.h:111</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="namespacekaldi_html_a548f5d51a19672871cae6256cafa413f"><div class="ttname"><a href="namespacekaldi.html#a548f5d51a19672871cae6256cafa413f">kaldi::kTemporaryEpsilon</a></div><div class="ttdeci">const int kTemporaryEpsilon</div><div class="ttdef"><b>Definition:</b> <a href="word-align-lattice-lexicon_8cc_source.html#l00030">word-align-lattice-lexicon.cc:30</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a41634594628ae3f036e5a1480c2f3f1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41634594628ae3f036e5a1480c2f3f1f">&#9670;&nbsp;</a></span>UpdateEquivalenceMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void UpdateEquivalenceMap </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; std::vector&lt; int32 &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>lexicon</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="word-align-lattice-lexicon_8cc_source.html#l00873">873</a> of file <a class="el" href="word-align-lattice-lexicon_8cc_source.html">word-align-lattice-lexicon.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="stl-utils_8h_source.html#l00039">kaldi::SortAndUniq()</a>, and <a class="el" href="basic-filebuf_8h_source.html#l00275">kaldi::swap()</a>.</p>
<div class="fragment"><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                                                 {</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  std::vector&lt;std::pair&lt;int32, int32&gt; &gt; equiv_pairs; <span class="comment">// pairs of</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  <span class="comment">// (lower,higher) words that are equivalent.</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; lexicon.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(lexicon[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].size() &gt;= 2);</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    int32 w1 = lexicon[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>][0], w2 = lexicon[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>][1];</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <span class="keywordflow">if</span> (w1 == w2) <span class="keywordflow">continue</span>; <span class="comment">// They are the same; this provides no information</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                            <span class="comment">// about equivalence, since any word is equivalent</span></div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                            <span class="comment">// to itself.</span></div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <span class="keywordflow">if</span> (w1 &gt; w2) <a class="code" href="namespacekaldi.html#aa3e99328db564bc2bf6397fa1eaee4d7">std::swap</a>(w1, w2); <span class="comment">// make sure w1 &lt; w2.</span></div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    equiv_pairs.push_back(std::make_pair(w1, w2));</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  }</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <a class="code" href="namespacekaldi.html#a3dd7a9cc33032bfb870b4b6c053822db">SortAndUniq</a>(&amp;equiv_pairs);</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <a class="code" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#af48811df7c0e1fb724e81ef230f619d4">equivalence_map_</a>.clear();</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; equiv_pairs.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    int32 w1 = equiv_pairs[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].first, w2 = equiv_pairs[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].second,</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        w1dash = <a class="code" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#aeb7c50c176c8d5e0bc343a3272f25c9e">EquivalenceClassOf</a>(w1);</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <a class="code" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#af48811df7c0e1fb724e81ef230f619d4">equivalence_map_</a>[w2] = w1dash;</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  }</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;}</div><div class="ttc" id="namespacekaldi_html_aa3e99328db564bc2bf6397fa1eaee4d7"><div class="ttname"><a href="namespacekaldi.html#aa3e99328db564bc2bf6397fa1eaee4d7">kaldi::swap</a></div><div class="ttdeci">void swap(basic_filebuf&lt; CharT, Traits &gt; &amp;x, basic_filebuf&lt; CharT, Traits &gt; &amp;y)</div><div class="ttdef"><b>Definition:</b> <a href="basic-filebuf_8h_source.html#l00275">basic-filebuf.h:275</a></div></div>
<div class="ttc" id="namespacekaldi_html_a3dd7a9cc33032bfb870b4b6c053822db"><div class="ttname"><a href="namespacekaldi.html#a3dd7a9cc33032bfb870b4b6c053822db">kaldi::SortAndUniq</a></div><div class="ttdeci">void SortAndUniq(std::vector&lt; T &gt; *vec)</div><div class="ttdoc">Sorts and uniq&amp;#39;s (removes duplicates) from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="stl-utils_8h_source.html#l00039">stl-utils.h:39</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1WordAlignLatticeLexiconInfo_html_aeb7c50c176c8d5e0bc343a3272f25c9e"><div class="ttname"><a href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#aeb7c50c176c8d5e0bc343a3272f25c9e">kaldi::WordAlignLatticeLexiconInfo::EquivalenceClassOf</a></div><div class="ttdeci">int32 EquivalenceClassOf(int32 word) const</div><div class="ttdoc">Purely for the testing code, we map words into equivalence classes derived from the mappings in the f...</div><div class="ttdef"><b>Definition:</b> <a href="word-align-lattice-lexicon_8cc_source.html#l00866">word-align-lattice-lexicon.cc:866</a></div></div>
<div class="ttc" id="classkaldi_1_1WordAlignLatticeLexiconInfo_html_af48811df7c0e1fb724e81ef230f619d4"><div class="ttname"><a href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#af48811df7c0e1fb724e81ef230f619d4">kaldi::WordAlignLatticeLexiconInfo::equivalence_map_</a></div><div class="ttdeci">EquivalenceMap equivalence_map_</div><div class="ttdef"><b>Definition:</b> <a href="word-align-lattice-lexicon_8h_source.html#l00116">word-align-lattice-lexicon.h:116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad79e1469dd7b70ea8df50597e31c6ec0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad79e1469dd7b70ea8df50597e31c6ec0">&#9670;&nbsp;</a></span>UpdateLexiconMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void UpdateLexiconMap </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; int32 &gt; &amp;&#160;</td>
          <td class="paramname"><em>lexicon_entry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the map from a vector (orig-word-symbol phone1 phone2 ... </p>
<p>) to the new word-symbol. The new word-symbol must always be nonzero; we'll replace it with kTemporaryEpsilon = -2, if it was zero. </p>

<p class="definition">Definition at line <a class="el" href="word-align-lattice-lexicon_8cc_source.html#l00804">804</a> of file <a class="el" href="word-align-lattice-lexicon_8cc_source.html">word-align-lattice-lexicon.cc</a>.</p>

<p class="reference">References <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>, <a class="el" href="kaldi-error_8h_source.html#l00129">KALDI_WARN</a>, and <a class="el" href="word-align-lattice-lexicon_8cc_source.html#l00030">kaldi::kTemporaryEpsilon</a>.</p>
<div class="fragment"><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                                           {</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(lexicon_entry.size() &gt;= 2);</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  std::vector&lt;int32&gt; key;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  key.reserve(lexicon_entry.size() - 1);</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <span class="comment">// add the original word:</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  key.push_back(lexicon_entry[0]);</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <span class="comment">// add the phones:</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  key.insert(key.end(), lexicon_entry.begin() + 2, lexicon_entry.end());</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  int32 new_word = lexicon_entry[1]; <span class="comment">// This will typically be the same as</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <span class="comment">// the original word at lexicon_entry[0] but is allowed to differ.</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  <span class="keywordflow">if</span> (new_word == 0) new_word = <a class="code" href="namespacekaldi.html#a548f5d51a19672871cae6256cafa413f">kTemporaryEpsilon</a>; <span class="comment">// replace 0&#39;s with -2;</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <span class="comment">// we&#39;ll revert the change at the end.</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a9095049b3a75d1345e43c4f5f4f9c506">lexicon_map_</a>.count(key) != 0) {</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a9095049b3a75d1345e43c4f5f4f9c506">lexicon_map_</a>[key] == new_word)</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;Duplicate entry in lexicon map for word &quot;</span> &lt;&lt; lexicon_entry[0];</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Duplicate entry in lexicon map for word &quot;</span> &lt;&lt; lexicon_entry[0]</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                &lt;&lt; <span class="stringliteral">&quot; with inconsistent to-word.&quot;</span>;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  }</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <a class="code" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a9095049b3a75d1345e43c4f5f4f9c506">lexicon_map_</a>[key] = new_word;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <span class="keywordflow">if</span> (lexicon_entry[0] != lexicon_entry[1]) {</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="comment">// Add reverse lexicon entry, this time with no 0 -&gt; -2 mapping.</span></div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    key[0] = lexicon_entry[1];</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="comment">// Note: we ignore the situation where there are conflicting</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="comment">// entries in reverse_lexicon_map_, as we never actually inspect</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="comment">// the contents so it won&#39;t matter.</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <a class="code" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a65b612261d299ab73c4637639c305599">reverse_lexicon_map_</a>[key] = lexicon_entry[0];</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  }</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;}</div><div class="ttc" id="classkaldi_1_1WordAlignLatticeLexiconInfo_html_a9095049b3a75d1345e43c4f5f4f9c506"><div class="ttname"><a href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a9095049b3a75d1345e43c4f5f4f9c506">kaldi::WordAlignLatticeLexiconInfo::lexicon_map_</a></div><div class="ttdeci">LexiconMap lexicon_map_</div><div class="ttdef"><b>Definition:</b> <a href="word-align-lattice-lexicon_8h_source.html#l00105">word-align-lattice-lexicon.h:105</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
<div class="ttc" id="group__error__group_html_ga994be213ddf127b5d6f20a43a02b513a"><div class="ttname"><a href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a></div><div class="ttdeci">#define KALDI_WARN</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00129">kaldi-error.h:129</a></div></div>
<div class="ttc" id="classkaldi_1_1WordAlignLatticeLexiconInfo_html_a65b612261d299ab73c4637639c305599"><div class="ttname"><a href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a65b612261d299ab73c4637639c305599">kaldi::WordAlignLatticeLexiconInfo::reverse_lexicon_map_</a></div><div class="ttdeci">LexiconMap reverse_lexicon_map_</div><div class="ttdef"><b>Definition:</b> <a href="word-align-lattice-lexicon_8h_source.html#l00111">word-align-lattice-lexicon.h:111</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="namespacekaldi_html_a548f5d51a19672871cae6256cafa413f"><div class="ttname"><a href="namespacekaldi.html#a548f5d51a19672871cae6256cafa413f">kaldi::kTemporaryEpsilon</a></div><div class="ttdeci">const int kTemporaryEpsilon</div><div class="ttdef"><b>Definition:</b> <a href="word-align-lattice-lexicon_8cc_source.html#l00030">word-align-lattice-lexicon.cc:30</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a41e7e1f0e3ab8b69833b86e021311b77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41e7e1f0e3ab8b69833b86e021311b77">&#9670;&nbsp;</a></span>UpdateNumPhonesMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void UpdateNumPhonesMap </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; int32 &gt; &amp;&#160;</td>
          <td class="paramname"><em>lexicon_entry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="word-align-lattice-lexicon_8cc_source.html#l00836">836</a> of file <a class="el" href="word-align-lattice-lexicon_8cc_source.html">word-align-lattice-lexicon.cc</a>.</p>

<p class="reference">References <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>.</p>
<div class="fragment"><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                                           {</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  int32 num_phones = <span class="keyword">static_cast&lt;</span>int32<span class="keyword">&gt;</span>(lexicon_entry.size()) - 2;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  int32 word = lexicon_entry[0];</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a8e8b2d8641b1d616eb919648b5721d72">num_phones_map_</a>.count(word) == 0)</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <a class="code" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a8e8b2d8641b1d616eb919648b5721d72">num_phones_map_</a>[word] = std::make_pair(num_phones, num_phones);</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    std::pair&lt;int32, int32&gt; &amp;pr = <a class="code" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a8e8b2d8641b1d616eb919648b5721d72">num_phones_map_</a>[word];</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    pr.first = std::min(pr.first, num_phones); <span class="comment">// update min-num-phones</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    pr.second = std::max(pr.second, num_phones); <span class="comment">// update max-num-phones</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <span class="keywordflow">if</span> (pr.first == 0 &amp;&amp; word == 0)</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Zero word with empty pronunciation is not allowed.&quot;</span>;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  }</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;}</div><div class="ttc" id="classkaldi_1_1WordAlignLatticeLexiconInfo_html_a8e8b2d8641b1d616eb919648b5721d72"><div class="ttname"><a href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a8e8b2d8641b1d616eb919648b5721d72">kaldi::WordAlignLatticeLexiconInfo::num_phones_map_</a></div><div class="ttdeci">NumPhonesMap num_phones_map_</div><div class="ttdef"><b>Definition:</b> <a href="word-align-lattice-lexicon_8h_source.html#l00106">word-align-lattice-lexicon.h:106</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6aeaa400d6d0f73bb0f6ca772fad2037"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6aeaa400d6d0f73bb0f6ca772fad2037">&#9670;&nbsp;</a></span>UpdateViabilityMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void UpdateViabilityMap </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; int32 &gt; &amp;&#160;</td>
          <td class="paramname"><em>lexicon_entry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="word-align-lattice-lexicon_8cc_source.html#l00774">774</a> of file <a class="el" href="word-align-lattice-lexicon_8cc_source.html">word-align-lattice-lexicon.cc</a>.</p>

<p class="reference">References <a class="el" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">rnnlm::n</a>.</p>
<div class="fragment"><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                                           {</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  int32 word = lexicon_entry[0];  <span class="comment">// note: word may be zero.</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  int32 num_phones = <span class="keyword">static_cast&lt;</span>int32<span class="keyword">&gt;</span>(lexicon_entry.size()) - 2;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  std::vector&lt;int32&gt; phones;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <span class="keywordflow">if</span> (num_phones &gt; 0)</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    phones.reserve(num_phones - 1);</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <span class="comment">// for each nonempty sequence of phones that is a strict prefix of the phones</span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <span class="comment">// in the lexicon entry (i.e. lexicon_entry [2 ... ]), add the word to the set</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <span class="comment">// in viability_map_[phones].</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">n</a> = 0; <a class="code" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">n</a> &lt; num_phones - 1; <a class="code" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">n</a>++) {</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    phones.push_back(lexicon_entry[<a class="code" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">n</a> + 2]); <span class="comment">// first phone is at position 2.</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="comment">// n+1 is the length of the sequence of phones</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <a class="code" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a44589a04caf87298c831ed21223f5820">viability_map_</a>[phones].push_back(word);</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  }</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;}</div><div class="ttc" id="classkaldi_1_1WordAlignLatticeLexiconInfo_html_a44589a04caf87298c831ed21223f5820"><div class="ttname"><a href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a44589a04caf87298c831ed21223f5820">kaldi::WordAlignLatticeLexiconInfo::viability_map_</a></div><div class="ttdeci">ViabilityMap viability_map_</div><div class="ttdef"><b>Definition:</b> <a href="word-align-lattice-lexicon_8h_source.html#l00107">word-align-lattice-lexicon.h:107</a></div></div>
<div class="ttc" id="namespacernnlm_html_ab4871778d570f724a07823e0a2fb9884"><div class="ttname"><a href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">rnnlm::n</a></div><div class="ttdeci">struct rnnlm::@11::@12 n</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="aefbe2b410dbe5ce8b585d1351b5a40de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefbe2b410dbe5ce8b585d1351b5a40de">&#9670;&nbsp;</a></span>LatticeLexiconWordAligner</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classkaldi_1_1LatticeLexiconWordAligner.html">LatticeLexiconWordAligner</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="word-align-lattice-lexicon_8h_source.html#l00069">69</a> of file <a class="el" href="word-align-lattice-lexicon_8h_source.html">word-align-lattice-lexicon.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="af48811df7c0e1fb724e81ef230f619d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af48811df7c0e1fb724e81ef230f619d4">&#9670;&nbsp;</a></span>equivalence_map_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a964110bab2393106c51b9cb4204dfb5c">EquivalenceMap</a> equivalence_map_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="word-align-lattice-lexicon_8h_source.html#l00116">116</a> of file <a class="el" href="word-align-lattice-lexicon_8h_source.html">word-align-lattice-lexicon.h</a>.</p>

</div>
</div>
<a id="a9095049b3a75d1345e43c4f5f4f9c506"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9095049b3a75d1345e43c4f5f4f9c506">&#9670;&nbsp;</a></span>lexicon_map_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#abde0786769c783416727074b05dc2ffc">LexiconMap</a> lexicon_map_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="word-align-lattice-lexicon_8h_source.html#l00105">105</a> of file <a class="el" href="word-align-lattice-lexicon_8h_source.html">word-align-lattice-lexicon.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="word-align-lattice-lexicon_8cc_source.html#l00380">LatticeLexiconWordAligner::ProcessEpsilonTransitions()</a>, and <a class="el" href="word-align-lattice-lexicon_8cc_source.html#l00439">LatticeLexiconWordAligner::ProcessWordTransitions()</a>.</p>

</div>
</div>
<a id="a8e8b2d8641b1d616eb919648b5721d72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e8b2d8641b1d616eb919648b5721d72">&#9670;&nbsp;</a></span>num_phones_map_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#aeae518aa4fd9a97f20617f42f6f96bf8">NumPhonesMap</a> num_phones_map_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="word-align-lattice-lexicon_8h_source.html#l00106">106</a> of file <a class="el" href="word-align-lattice-lexicon_8h_source.html">word-align-lattice-lexicon.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="word-align-lattice-lexicon_8cc_source.html#l00380">LatticeLexiconWordAligner::ProcessEpsilonTransitions()</a>, and <a class="el" href="word-align-lattice-lexicon_8cc_source.html#l00439">LatticeLexiconWordAligner::ProcessWordTransitions()</a>.</p>

</div>
</div>
<a id="a65b612261d299ab73c4637639c305599"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65b612261d299ab73c4637639c305599">&#9670;&nbsp;</a></span>reverse_lexicon_map_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#abde0786769c783416727074b05dc2ffc">LexiconMap</a> reverse_lexicon_map_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="word-align-lattice-lexicon_8h_source.html#l00111">111</a> of file <a class="el" href="word-align-lattice-lexicon_8h_source.html">word-align-lattice-lexicon.h</a>.</p>

</div>
</div>
<a id="a44589a04caf87298c831ed21223f5820"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44589a04caf87298c831ed21223f5820">&#9670;&nbsp;</a></span>viability_map_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html#a07faab50d90d8cebda5ee1cb6788bdd5">ViabilityMap</a> viability_map_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="word-align-lattice-lexicon_8h_source.html#l00107">107</a> of file <a class="el" href="word-align-lattice-lexicon_8h_source.html">word-align-lattice-lexicon.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="word-align-lattice-lexicon_8cc_source.html#l00488">LatticeLexiconWordAligner::PossiblyAdvanceArc()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>lat/<a class="el" href="word-align-lattice-lexicon_8h_source.html">word-align-lattice-lexicon.h</a></li>
<li>lat/<a class="el" href="word-align-lattice-lexicon_8cc_source.html">word-align-lattice-lexicon.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacekaldi.html">kaldi</a></li><li class="navelem"><a class="el" href="classkaldi_1_1WordAlignLatticeLexiconInfo.html">WordAlignLatticeLexiconInfo</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
