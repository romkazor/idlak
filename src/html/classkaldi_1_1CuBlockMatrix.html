<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Kaldi: CuBlockMatrix&lt; Real &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" /> 
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
 <td id="projectlogo"><a href="http://kaldi-asr.org/"><img alt="Logo" src="KaldiTextAndLogoSmall.png"/ style="padding: 3px 5px 1px 5px"></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname" style="display:none">Kaldi
   </div>
  </td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief" style="display:none"></div>
    </td>
   <!--END PROJECT_BRIEF-->
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classkaldi_1_1CuBlockMatrix.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classkaldi_1_1CuBlockMatrix-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CuBlockMatrix&lt; Real &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The class <a class="el" href="classkaldi_1_1CuBlockMatrix.html" title="The class CuBlockMatrix holds a vector of objects of type CuMatrix, say, M_1, M_2, . ">CuBlockMatrix</a> holds a vector of objects of type <a class="el" href="classkaldi_1_1CuMatrix.html" title="This class represents a matrix that&#39;s stored on the GPU if we have one, and in memory if not...">CuMatrix</a>, say, M_1, M_2, .  
 <a href="classkaldi_1_1CuBlockMatrix.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="cu-block-matrix_8h_source.html">cu-block-matrix.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for CuBlockMatrix&lt; Real &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classkaldi_1_1CuBlockMatrix__coll__graph.png" border="0" usemap="#CuBlockMatrix_3_01Real_01_4_coll__map" alt="Collaboration graph"/></div>
<map name="CuBlockMatrix_3_01Real_01_4_coll__map" id="CuBlockMatrix_3_01Real_01_4_coll__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1CuBlockMatrix_1_1BlockMatrixData.html">BlockMatrixData</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9f6efa9e60aa43dc6d9cf516193ea65c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuBlockMatrix.html#a9f6efa9e60aa43dc6d9cf516193ea65c">CuBlockMatrix</a> ()</td></tr>
<tr class="separator:a9f6efa9e60aa43dc6d9cf516193ea65c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6220264905972f136e72ec041ed873bd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuBlockMatrix.html#a6220264905972f136e72ec041ed873bd">CuBlockMatrix</a> (const std::vector&lt; <a class="el" href="classkaldi_1_1CuMatrix.html">CuMatrix</a>&lt; Real &gt; &gt; &amp;data)</td></tr>
<tr class="separator:a6220264905972f136e72ec041ed873bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a146c0f27787e73a5c2cbb4ca3f847c6e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuBlockMatrix.html#a146c0f27787e73a5c2cbb4ca3f847c6e">~CuBlockMatrix</a> ()</td></tr>
<tr class="separator:a146c0f27787e73a5c2cbb4ca3f847c6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a391c316c7ecd68e59e63d5d8a6da7c35"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuBlockMatrix.html#a391c316c7ecd68e59e63d5d8a6da7c35">CuBlockMatrix</a> (const <a class="el" href="classkaldi_1_1CuBlockMatrix.html">CuBlockMatrix</a> &amp;other)</td></tr>
<tr class="memdesc:a391c316c7ecd68e59e63d5d8a6da7c35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy constructor.  <a href="#a391c316c7ecd68e59e63d5d8a6da7c35">More...</a><br /></td></tr>
<tr class="separator:a391c316c7ecd68e59e63d5d8a6da7c35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76055251041d7e0087b8619188a691cf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1CuBlockMatrix.html">CuBlockMatrix</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuBlockMatrix.html#a76055251041d7e0087b8619188a691cf">operator=</a> (const <a class="el" href="classkaldi_1_1CuBlockMatrix.html">CuBlockMatrix</a> &amp;other)</td></tr>
<tr class="memdesc:a76055251041d7e0087b8619188a691cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assignment operator.  <a href="#a76055251041d7e0087b8619188a691cf">More...</a><br /></td></tr>
<tr class="separator:a76055251041d7e0087b8619188a691cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68f354fd5f096134162f01719096e6fc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuBlockMatrix.html#a68f354fd5f096134162f01719096e6fc">Write</a> (std::ostream &amp;os, <a class="el" href="classbool.html">bool</a> binary) const</td></tr>
<tr class="separator:a68f354fd5f096134162f01719096e6fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e7d2790fc7e94fe9780ccc937de1270"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuBlockMatrix.html#a8e7d2790fc7e94fe9780ccc937de1270">Read</a> (std::istream &amp;is, <a class="el" href="classbool.html">bool</a> binary)</td></tr>
<tr class="separator:a8e7d2790fc7e94fe9780ccc937de1270"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01cf7fccddf8deddc75b34408144ded1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuBlockMatrix.html#a01cf7fccddf8deddc75b34408144ded1">NumRows</a> () const</td></tr>
<tr class="separator:a01cf7fccddf8deddc75b34408144ded1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd4c9f53536602585f5aff9e8005299a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuBlockMatrix.html#acd4c9f53536602585f5aff9e8005299a">NumCols</a> () const</td></tr>
<tr class="separator:acd4c9f53536602585f5aff9e8005299a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34d725f7367a4041f158eb74ae306b03"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuBlockMatrix.html#a34d725f7367a4041f158eb74ae306b03">NumBlocks</a> () const</td></tr>
<tr class="separator:a34d725f7367a4041f158eb74ae306b03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b650a63415888150c4691965bb5b510"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuBlockMatrix.html#a1b650a63415888150c4691965bb5b510">MaxBlockCols</a> () const</td></tr>
<tr class="separator:a1b650a63415888150c4691965bb5b510"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb0fb0d3786d83e474bd7a02573293c2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuBlockMatrix.html#aeb0fb0d3786d83e474bd7a02573293c2">MaxBlockRows</a> () const</td></tr>
<tr class="separator:aeb0fb0d3786d83e474bd7a02573293c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8709048625eb0daa053903d2d8a0126"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classkaldi_1_1CuSubMatrix.html">CuSubMatrix</a>&lt; Real &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuBlockMatrix.html#ad8709048625eb0daa053903d2d8a0126">Block</a> (<a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> b) const</td></tr>
<tr class="separator:ad8709048625eb0daa053903d2d8a0126"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa39dc0e057c9fe3446744b149ec322ab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1CuSubMatrix.html">CuSubMatrix</a>&lt; Real &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuBlockMatrix.html#aa39dc0e057c9fe3446744b149ec322ab">Block</a> (<a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> b)</td></tr>
<tr class="separator:aa39dc0e057c9fe3446744b149ec322ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefa4a2695f1f56a947516f0394c09840"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuBlockMatrix.html#aefa4a2695f1f56a947516f0394c09840">AddMatMat</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> alpha, const <a class="el" href="classkaldi_1_1CuMatrix.html">CuMatrix</a>&lt; Real &gt; &amp;A, <a class="el" href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724f">MatrixTransposeType</a> transA, const <a class="el" href="classkaldi_1_1CuMatrix.html">CuMatrix</a>&lt; Real &gt; &amp;B, <a class="el" href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724f">MatrixTransposeType</a> transB, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> beta)</td></tr>
<tr class="memdesc:aefa4a2695f1f56a947516f0394c09840"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does *this = alpha A B + beta * *this, discarding elements of the product outside the block structure of the *this matrix.  <a href="#aefa4a2695f1f56a947516f0394c09840">More...</a><br /></td></tr>
<tr class="separator:aefa4a2695f1f56a947516f0394c09840"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb1f9c00fd862efc64c3c4590fa51813"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuBlockMatrix.html#adb1f9c00fd862efc64c3c4590fa51813">CopyFromMat</a> (const <a class="el" href="classkaldi_1_1CuMatrix.html">CuMatrix</a>&lt; Real &gt; &amp;M)</td></tr>
<tr class="memdesc:adb1f9c00fd862efc64c3c4590fa51813"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copies elements within the block structure from matrix M, discarding others.  <a href="#adb1f9c00fd862efc64c3c4590fa51813">More...</a><br /></td></tr>
<tr class="separator:adb1f9c00fd862efc64c3c4590fa51813"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace2c8f714301c288d75173d100aa63a3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuBlockMatrix.html#ace2c8f714301c288d75173d100aa63a3">NormalizeColumns</a> ()</td></tr>
<tr class="memdesc:ace2c8f714301c288d75173d100aa63a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Normalizes the columns of *this so that each one sums to one.  <a href="#ace2c8f714301c288d75173d100aa63a3">More...</a><br /></td></tr>
<tr class="separator:ace2c8f714301c288d75173d100aa63a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a434cdefab8de8af0a59eaed4777625e8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuBlockMatrix.html#a434cdefab8de8af0a59eaed4777625e8">Swap</a> (<a class="el" href="classkaldi_1_1CuBlockMatrix.html">CuBlockMatrix</a> *other)</td></tr>
<tr class="separator:a434cdefab8de8af0a59eaed4777625e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a39682fdd40113b8cec059fe05e16432d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1CuMatrix.html">CuMatrix</a>&lt; Real &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuBlockMatrix.html#a39682fdd40113b8cec059fe05e16432d">data_</a></td></tr>
<tr class="separator:a39682fdd40113b8cec059fe05e16432d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ac7e52345677feb22201656550d11b6f0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuBlockMatrix.html#ac7e52345677feb22201656550d11b6f0">FreeCudaData</a> ()</td></tr>
<tr class="memdesc:ac7e52345677feb22201656550d11b6f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">If using GPU and cu_data_ != NULL, free cu_data_ and set it to NULL.  <a href="#ac7e52345677feb22201656550d11b6f0">More...</a><br /></td></tr>
<tr class="separator:ac7e52345677feb22201656550d11b6f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c34301a82468103715153d681d75929"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuBlockMatrix.html#a4c34301a82468103715153d681d75929">SetCudaData</a> ()</td></tr>
<tr class="memdesc:a4c34301a82468103715153d681d75929"><td class="mdescLeft">&#160;</td><td class="mdescRight">If using GPU, allocate and set cu_data_ on the GPU to reflect "data_".  <a href="#a4c34301a82468103715153d681d75929">More...</a><br /></td></tr>
<tr class="separator:a4c34301a82468103715153d681d75929"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac919a991060ede6983343719401686de"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuBlockMatrix.html#ac919a991060ede6983343719401686de">Destroy</a> ()</td></tr>
<tr class="memdesc:ac919a991060ede6983343719401686de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees and deinitializes everything.  <a href="#ac919a991060ede6983343719401686de">More...</a><br /></td></tr>
<tr class="separator:ac919a991060ede6983343719401686de"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:af9c3d816ad5026c65e3d0cc2c695a8a9"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structkaldi_1_1CuBlockMatrix_1_1BlockMatrixData.html">BlockMatrixData</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuBlockMatrix.html#af9c3d816ad5026c65e3d0cc2c695a8a9">block_data_</a></td></tr>
<tr class="separator:af9c3d816ad5026c65e3d0cc2c695a8a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67d96c77dd3e450528faf1755002e42b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuBlockMatrix.html#a67d96c77dd3e450528faf1755002e42b">num_rows_</a></td></tr>
<tr class="separator:a67d96c77dd3e450528faf1755002e42b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a961cf693bb50620c440ba546c0a110cf"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1CuBlockMatrix.html#a961cf693bb50620c440ba546c0a110cf">CuMatrixBase&lt; Real &gt;</a></td></tr>
<tr class="separator:a961cf693bb50620c440ba546c0a110cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename Real&gt;<br />
class kaldi::CuBlockMatrix&lt; Real &gt;</h3>

<p>The class <a class="el" href="classkaldi_1_1CuBlockMatrix.html" title="The class CuBlockMatrix holds a vector of objects of type CuMatrix, say, M_1, M_2, . ">CuBlockMatrix</a> holds a vector of objects of type <a class="el" href="classkaldi_1_1CuMatrix.html" title="This class represents a matrix that&#39;s stored on the GPU if we have one, and in memory if not...">CuMatrix</a>, say, M_1, M_2, . </p>
<p>. M_N and it represents the matrix diag(M_1, M_2, ... M_N). Note: the individual matrices do not have to be square. The reason the class is needed is mostly so that we can efficiently multiply by this block-diagonal structure in a parallel way.</p>
<p>If we have a GPU available, <a class="el" href="classkaldi_1_1CuBlockMatrix.html" title="The class CuBlockMatrix holds a vector of objects of type CuMatrix, say, M_1, M_2, . ">CuBlockMatrix</a> will store a copy of the individual <a class="el" href="classkaldi_1_1CuMatrix.html" title="This class represents a matrix that&#39;s stored on the GPU if we have one, and in memory if not...">CuMatrix</a> quantities M_1 .. M_N on the GPU, but their 'primary' home remains on the CPU.. what we mean by this is that while the data remains on the GPU, the "primary" version of the <a class="el" href="classkaldi_1_1Matrix.html" title="A class for storing matrices. ">Matrix</a> object that holds the pointers will remain on the CPU. We just copy it over to the GPU whenever it is changed. </p>

<p class="definition">Definition at line <a class="el" href="cu-block-matrix_8h_source.html#l00051">51</a> of file <a class="el" href="cu-block-matrix_8h_source.html">cu-block-matrix.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a9f6efa9e60aa43dc6d9cf516193ea65c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f6efa9e60aa43dc6d9cf516193ea65c">&#9670;&nbsp;</a></span>CuBlockMatrix() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1CuBlockMatrix.html">CuBlockMatrix</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cu-block-matrix_8cc_source.html#l00035">35</a> of file <a class="el" href="cu-block-matrix_8cc_source.html">cu-block-matrix.cc</a>.</p>

<p class="reference">Referenced by <a class="el" href="cu-block-matrix_8cc_source.html#l00078">CuBlockMatrix&lt; Real &gt;::Block()</a>, and <a class="el" href="cu-block-matrix_8h_source.html#l00059">CuBlockMatrix&lt; Real &gt;::~CuBlockMatrix()</a>.</p>
<div class="fragment"><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                                   {</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#if HAVE_CUDA == 1</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  cu_data_ = NULL;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a6220264905972f136e72ec041ed873bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6220264905972f136e72ec041ed873bd">&#9670;&nbsp;</a></span>CuBlockMatrix() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1CuBlockMatrix.html">CuBlockMatrix</a> </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classkaldi_1_1CuMatrix.html">CuMatrix</a>&lt; Real &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cu-block-matrix_8cc_source.html#l00042">42</a> of file <a class="el" href="cu-block-matrix_8cc_source.html">cu-block-matrix.cc</a>.</p>

<p class="reference">References <a class="el" href="cu-block-matrix_8h_source.html#l00117">CuBlockMatrix&lt; Real &gt;::BlockMatrixData::col_offset</a>, <a class="el" href="arpa-lm-compiler_8cc_source.html#l00108">data_</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="cu-block-matrix_8h_source.html#l00115">CuBlockMatrix&lt; Real &gt;::BlockMatrixData::num_cols</a>, <a class="el" href="cu-block-matrix_8h_source.html#l00114">CuBlockMatrix&lt; Real &gt;::BlockMatrixData::num_rows</a>, and <a class="el" href="cu-block-matrix_8h_source.html#l00116">CuBlockMatrix&lt; Real &gt;::BlockMatrixData::row_offset</a>.</p>
<div class="fragment"><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                                                                        {</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#if HAVE_CUDA == 1</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  cu_data_ = NULL;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <a class="code" href="classkaldi_1_1CuBlockMatrix.html#af9c3d816ad5026c65e3d0cc2c695a8a9">block_data_</a>.resize(data.size());</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <a class="code" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> row_offset = 0, col_offset = 0, max_num_rows = 0;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> b = 0; b &lt; data.size(); b++) {</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <a class="code" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> num_rows = data[b].NumRows(), num_cols = data[b].NumCols();</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(num_rows &gt; 0 &amp;&amp; num_cols &gt; 0);</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    BlockMatrixData block_data;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    block_data.num_rows = num_rows;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    block_data.num_cols = num_cols;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    block_data.row_offset = row_offset;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    block_data.col_offset = col_offset;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    row_offset += num_rows;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    col_offset += num_cols;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    max_num_rows = std::max(max_num_rows, num_rows);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="classkaldi_1_1CuBlockMatrix.html#af9c3d816ad5026c65e3d0cc2c695a8a9">block_data_</a>[b] = block_data;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  }</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <a class="code" href="classkaldi_1_1CuBlockMatrix.html#a67d96c77dd3e450528faf1755002e42b">num_rows_</a> = row_offset;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <a class="code" href="classkaldi_1_1CuBlockMatrix.html#a39682fdd40113b8cec059fe05e16432d">data_</a>.Resize(max_num_rows, col_offset);</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordflow">for</span> (int32 b = 0; b &lt; <a class="code" href="classkaldi_1_1CuBlockMatrix.html#a34d725f7367a4041f158eb74ae306b03">NumBlocks</a>(); b++)</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <a class="code" href="classkaldi_1_1CuBlockMatrix.html#ad8709048625eb0daa053903d2d8a0126">Block</a>(b).CopyFromMat(data[b]);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <a class="code" href="classkaldi_1_1CuBlockMatrix.html#a4c34301a82468103715153d681d75929">SetCudaData</a>();</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;}</div><div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_af9c3d816ad5026c65e3d0cc2c695a8a9"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#af9c3d816ad5026c65e3d0cc2c695a8a9">kaldi::CuBlockMatrix::block_data_</a></div><div class="ttdeci">std::vector&lt; BlockMatrixData &gt; block_data_</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00135">cu-block-matrix.h:135</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_a39682fdd40113b8cec059fe05e16432d"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#a39682fdd40113b8cec059fe05e16432d">kaldi::CuBlockMatrix::data_</a></div><div class="ttdeci">CuMatrix&lt; Real &gt; data_</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00110">cu-block-matrix.h:110</a></div></div>
<div class="ttc" id="namespacekaldi_html_aac2c220416519a2b0a7ad822ee2ef972"><div class="ttname"><a href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">kaldi::MatrixIndexT</a></div><div class="ttdeci">int32 MatrixIndexT</div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00098">matrix-common.h:98</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_a4c34301a82468103715153d681d75929"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#a4c34301a82468103715153d681d75929">kaldi::CuBlockMatrix::SetCudaData</a></div><div class="ttdeci">void SetCudaData()</div><div class="ttdoc">If using GPU, allocate and set cu_data_ on the GPU to reflect &quot;data_&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8cc_source.html#l00122">cu-block-matrix.cc:122</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_a34d725f7367a4041f158eb74ae306b03"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#a34d725f7367a4041f158eb74ae306b03">kaldi::CuBlockMatrix::NumBlocks</a></div><div class="ttdeci">MatrixIndexT NumBlocks() const</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00075">cu-block-matrix.h:75</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_a67d96c77dd3e450528faf1755002e42b"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#a67d96c77dd3e450528faf1755002e42b">kaldi::CuBlockMatrix::num_rows_</a></div><div class="ttdeci">MatrixIndexT num_rows_</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00137">cu-block-matrix.h:137</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_ad8709048625eb0daa053903d2d8a0126"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#ad8709048625eb0daa053903d2d8a0126">kaldi::CuBlockMatrix::Block</a></div><div class="ttdeci">const CuSubMatrix&lt; Real &gt; Block(MatrixIndexT b) const</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8cc_source.html#l00070">cu-block-matrix.cc:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a146c0f27787e73a5c2cbb4ca3f847c6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a146c0f27787e73a5c2cbb4ca3f847c6e">&#9670;&nbsp;</a></span>~CuBlockMatrix()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classkaldi_1_1CuBlockMatrix.html">CuBlockMatrix</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cu-block-matrix_8h_source.html#l00059">59</a> of file <a class="el" href="cu-block-matrix_8h_source.html">cu-block-matrix.h</a>.</p>

<p class="reference">References <a class="el" href="cu-block-matrix_8cc_source.html#l00035">CuBlockMatrix&lt; Real &gt;::CuBlockMatrix()</a>, <a class="el" href="cu-block-matrix_8cc_source.html#l00201">CuBlockMatrix&lt; Real &gt;::Destroy()</a>, <a class="el" href="cu-block-matrix_8cc_source.html#l00096">CuBlockMatrix&lt; Real &gt;::operator=()</a>, <a class="el" href="cu-block-matrix_8cc_source.html#l00171">CuBlockMatrix&lt; Real &gt;::Read()</a>, and <a class="el" href="cu-block-matrix_8cc_source.html#l00160">CuBlockMatrix&lt; Real &gt;::Write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;{ <a class="code" href="classkaldi_1_1CuBlockMatrix.html#ac919a991060ede6983343719401686de">Destroy</a>(); }</div><div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_ac919a991060ede6983343719401686de"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#ac919a991060ede6983343719401686de">kaldi::CuBlockMatrix::Destroy</a></div><div class="ttdeci">void Destroy()</div><div class="ttdoc">Frees and deinitializes everything. </div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8cc_source.html#l00201">cu-block-matrix.cc:201</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a391c316c7ecd68e59e63d5d8a6da7c35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a391c316c7ecd68e59e63d5d8a6da7c35">&#9670;&nbsp;</a></span>CuBlockMatrix() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1CuBlockMatrix.html">CuBlockMatrix</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CuBlockMatrix.html">CuBlockMatrix</a>&lt; Real &gt; &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copy constructor. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aefa4a2695f1f56a947516f0394c09840"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefa4a2695f1f56a947516f0394c09840">&#9670;&nbsp;</a></span>AddMatMat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AddMatMat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>alpha</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CuMatrix.html">CuMatrix</a>&lt; Real &gt; &amp;&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724f">MatrixTransposeType</a>&#160;</td>
          <td class="paramname"><em>transA</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CuMatrix.html">CuMatrix</a>&lt; Real &gt; &amp;&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724f">MatrixTransposeType</a>&#160;</td>
          <td class="paramname"><em>transB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>beta</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Does *this = alpha A B + beta * *this, discarding elements of the product outside the block structure of the *this matrix. </p>
<p>The transA and transB parameters can be used to substitute A^T for A and B^T for B, respectively. </p>

<p class="definition">Definition at line <a class="el" href="cu-block-matrix_8cc_source.html#l00211">211</a> of file <a class="el" href="cu-block-matrix_8cc_source.html">cu-block-matrix.cc</a>.</p>

<p class="reference">References <a class="el" href="cu-matrix_8cc_source.html#l01278">CuMatrixBase&lt; Real &gt;::AddMatMat()</a>, <a class="el" href="cu-matrixdim_8h_source.html#l00063">CU1DBLOCK</a>, <a class="el" href="cu-matrixdim_8h_source.html#l00067">CU2DBLOCK</a>, <a class="el" href="cu-matrix_8h_source.html#l00689">CuMatrixBase&lt; Real &gt;::Data()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="matrix-common_8h_source.html#l00034">kaldi::kNoTrans</a>, <a class="el" href="matrix-common_8h_source.html#l00033">kaldi::kTrans</a>, <a class="el" href="cu-matrix_8h_source.html#l00215">CuMatrixBase&lt; Real &gt;::NumCols()</a>, <a class="el" href="cu-matrix_8h_source.html#l00214">CuMatrixBase&lt; Real &gt;::NumRows()</a>, <a class="el" href="cu-matrix_8h_source.html#l00596">CuMatrixBase&lt; Real &gt;::Range()</a>, <a class="el" href="cu-matrix_8h_source.html#l00216">CuMatrixBase&lt; Real &gt;::Stride()</a>, and <a class="el" href="basic-filebuf_8h_source.html#l00275">kaldi::swap()</a>.</p>

<p class="reference">Referenced by <a class="el" href="cu-block-matrix_8h_source.html#l00075">CuBlockMatrix&lt; Real &gt;::NumBlocks()</a>, and <a class="el" href="cu-block-matrix-test_8cc_source.html#l00116">kaldi::UnitTestCuBlockMatrixAddMatMat()</a>.</p>
<div class="fragment"><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                    {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <a class="code" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> A_num_rows = A.NumRows(), A_num_cols = A.NumCols(),</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      A_row_stride = A.Stride(), A_col_stride = 1,</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      B_num_rows = B.NumRows(), B_num_cols = B.NumCols(),</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      B_row_stride = B.Stride(), B_col_stride = 1;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="keywordflow">if</span> (transA == <a class="code" href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2">kTrans</a>) {</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <a class="code" href="namespacekaldi.html#aa3e99328db564bc2bf6397fa1eaee4d7">std::swap</a>(A_num_rows, A_num_cols);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <a class="code" href="namespacekaldi.html#aa3e99328db564bc2bf6397fa1eaee4d7">std::swap</a>(A_row_stride, A_col_stride);</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  }</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="keywordflow">if</span> (transB == <a class="code" href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2">kTrans</a>) {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <a class="code" href="namespacekaldi.html#aa3e99328db564bc2bf6397fa1eaee4d7">std::swap</a>(B_num_rows, B_num_cols);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <a class="code" href="namespacekaldi.html#aa3e99328db564bc2bf6397fa1eaee4d7">std::swap</a>(B_row_stride, B_col_stride);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  }</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(A_num_rows == <a class="code" href="classkaldi_1_1CuBlockMatrix.html#a01cf7fccddf8deddc75b34408144ded1">NumRows</a>() &amp;&amp; B_num_cols == <a class="code" href="classkaldi_1_1CuBlockMatrix.html#acd4c9f53536602585f5aff9e8005299a">NumCols</a>()</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;               &amp;&amp; A_num_cols == B_num_rows);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1CuBlockMatrix.html#a34d725f7367a4041f158eb74ae306b03">NumBlocks</a>() == 0) <span class="keywordflow">return</span>; <span class="comment">// empty matrix.</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="preprocessor">#if HAVE_CUDA == 1</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordflow">if</span> (CuDevice::Instantiate().Enabled()) {</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    CuTimer tim;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="comment">// (x,y,z) dimensions are (block-id, row-of-block, col-of-block)</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="comment">// First some logic to choose block dims...</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="comment">// we assume (which we can, safely) that CU1DBLOCK is &lt;= the max threads per block.</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    int32 x_blocksize = std::min(<a class="code" href="cu-matrixdim_8h.html#a6dbdf9d0385c92d6d915b96eaf9ce99e">CU1DBLOCK</a>, <a class="code" href="classkaldi_1_1CuBlockMatrix.html#a34d725f7367a4041f158eb74ae306b03">NumBlocks</a>()); <span class="comment">// x dim corresponds to block-idx.</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    int32 max_block_rows = <a class="code" href="classkaldi_1_1CuBlockMatrix.html#aeb0fb0d3786d83e474bd7a02573293c2">MaxBlockRows</a>(), max_block_cols = <a class="code" href="classkaldi_1_1CuBlockMatrix.html#a1b650a63415888150c4691965bb5b510">MaxBlockCols</a>();</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    int32 y_blocksize = max_block_rows;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">while</span> (y_blocksize * x_blocksize &gt; <a class="code" href="cu-matrixdim_8h.html#a6dbdf9d0385c92d6d915b96eaf9ce99e">CU1DBLOCK</a> || y_blocksize &gt; <a class="code" href="cu-matrixdim_8h.html#a84acd86e193bca04fb719c476fbcbe5b">CU2DBLOCK</a>)</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      y_blocksize--;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    int32 z_blocksize = max_block_cols;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">while</span> (z_blocksize * x_blocksize * y_blocksize &gt; <a class="code" href="cu-matrixdim_8h.html#a6dbdf9d0385c92d6d915b96eaf9ce99e">CU1DBLOCK</a> || z_blocksize &gt; <a class="code" href="cu-matrixdim_8h.html#a84acd86e193bca04fb719c476fbcbe5b">CU2DBLOCK</a>)</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      z_blocksize--;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    </div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    dim3 dimBlock(x_blocksize, y_blocksize, z_blocksize);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    dim3 dimGrid(n_blocks(<a class="code" href="classkaldi_1_1CuBlockMatrix.html#a34d725f7367a4041f158eb74ae306b03">NumBlocks</a>(), x_blocksize),</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                 n_blocks(max_block_rows, y_blocksize),</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                 n_blocks(max_block_cols, z_blocksize));</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    cuda_block_add_mat_mat(dimGrid, dimBlock, cu_data_, <a class="code" href="classkaldi_1_1CuBlockMatrix.html#a34d725f7367a4041f158eb74ae306b03">NumBlocks</a>(),</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                           A.Data(), A_num_cols, A_row_stride, A_col_stride,</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                           B.Data(), B_row_stride, B_col_stride, alpha, beta);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    CU_SAFE_CALL(cudaGetLastError());    </div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    CuDevice::Instantiate().AccuProfile(__func__, tim);    </div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  } <span class="keywordflow">else</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  {</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    int32 row_offset = 0, col_offset = 0;    </div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> b = 0; b &lt; <a class="code" href="classkaldi_1_1CuBlockMatrix.html#a34d725f7367a4041f158eb74ae306b03">NumBlocks</a>(); b++) {</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      CuSubMatrix&lt;Real&gt; this_block = <a class="code" href="classkaldi_1_1CuBlockMatrix.html#ad8709048625eb0daa053903d2d8a0126">Block</a>(b);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <a class="code" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> this_num_rows = this_block.NumRows(),</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;          this_num_cols = this_block.NumCols();</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      CuSubMatrix&lt;Real&gt; A_part = (transA == <a class="code" href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa6decd3b781a809d748e5221d49f0ab5d">kNoTrans</a> ?</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                                  A.Range(row_offset, this_num_rows,</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                                          0, A.NumCols()) :</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                                  A.Range(0, A.NumRows(),</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                                          row_offset, this_num_rows)),</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;          B_part = (transB == <a class="code" href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa6decd3b781a809d748e5221d49f0ab5d">kNoTrans</a> ?</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                    B.Range(0, B.NumRows(),</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                            col_offset, this_num_cols) :</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                    B.Range(col_offset, this_num_cols,</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                            0, B.NumCols()));</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      this_block.AddMatMat(alpha, A_part, transA, B_part, transB, beta);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      row_offset += this_num_rows;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      col_offset += this_num_cols;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    }</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(row_offset == <a class="code" href="classkaldi_1_1CuBlockMatrix.html#a01cf7fccddf8deddc75b34408144ded1">NumRows</a>() &amp;&amp; col_offset == <a class="code" href="classkaldi_1_1CuBlockMatrix.html#acd4c9f53536602585f5aff9e8005299a">NumCols</a>());</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  }</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;}</div><div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_aeb0fb0d3786d83e474bd7a02573293c2"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#aeb0fb0d3786d83e474bd7a02573293c2">kaldi::CuBlockMatrix::MaxBlockRows</a></div><div class="ttdeci">MatrixIndexT MaxBlockRows() const</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8cc_source.html#l00291">cu-block-matrix.cc:291</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa3e99328db564bc2bf6397fa1eaee4d7"><div class="ttname"><a href="namespacekaldi.html#aa3e99328db564bc2bf6397fa1eaee4d7">kaldi::swap</a></div><div class="ttdeci">void swap(basic_filebuf&lt; CharT, Traits &gt; &amp;x, basic_filebuf&lt; CharT, Traits &gt; &amp;y)</div><div class="ttdef"><b>Definition:</b> <a href="basic-filebuf_8h_source.html#l00275">basic-filebuf.h:275</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_a01cf7fccddf8deddc75b34408144ded1"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#a01cf7fccddf8deddc75b34408144ded1">kaldi::CuBlockMatrix::NumRows</a></div><div class="ttdeci">MatrixIndexT NumRows() const</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00071">cu-block-matrix.h:71</a></div></div>
<div class="ttc" id="namespacekaldi_html_a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2"><div class="ttname"><a href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2">kaldi::kTrans</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00033">matrix-common.h:33</a></div></div>
<div class="ttc" id="namespacekaldi_html_aac2c220416519a2b0a7ad822ee2ef972"><div class="ttname"><a href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">kaldi::MatrixIndexT</a></div><div class="ttdeci">int32 MatrixIndexT</div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00098">matrix-common.h:98</a></div></div>
<div class="ttc" id="cu-matrixdim_8h_html_a6dbdf9d0385c92d6d915b96eaf9ce99e"><div class="ttname"><a href="cu-matrixdim_8h.html#a6dbdf9d0385c92d6d915b96eaf9ce99e">CU1DBLOCK</a></div><div class="ttdeci">#define CU1DBLOCK</div><div class="ttdef"><b>Definition:</b> <a href="cu-matrixdim_8h_source.html#l00063">cu-matrixdim.h:63</a></div></div>
<div class="ttc" id="namespacekaldi_html_a610f4f6c3c8fe58b76713f593b9d724fa6decd3b781a809d748e5221d49f0ab5d"><div class="ttname"><a href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa6decd3b781a809d748e5221d49f0ab5d">kaldi::kNoTrans</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00034">matrix-common.h:34</a></div></div>
<div class="ttc" id="cu-matrixdim_8h_html_a84acd86e193bca04fb719c476fbcbe5b"><div class="ttname"><a href="cu-matrixdim_8h.html#a84acd86e193bca04fb719c476fbcbe5b">CU2DBLOCK</a></div><div class="ttdeci">#define CU2DBLOCK</div><div class="ttdef"><b>Definition:</b> <a href="cu-matrixdim_8h_source.html#l00067">cu-matrixdim.h:67</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_a34d725f7367a4041f158eb74ae306b03"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#a34d725f7367a4041f158eb74ae306b03">kaldi::CuBlockMatrix::NumBlocks</a></div><div class="ttdeci">MatrixIndexT NumBlocks() const</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00075">cu-block-matrix.h:75</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_acd4c9f53536602585f5aff9e8005299a"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#acd4c9f53536602585f5aff9e8005299a">kaldi::CuBlockMatrix::NumCols</a></div><div class="ttdeci">MatrixIndexT NumCols() const</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00073">cu-block-matrix.h:73</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_a1b650a63415888150c4691965bb5b510"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#a1b650a63415888150c4691965bb5b510">kaldi::CuBlockMatrix::MaxBlockCols</a></div><div class="ttdeci">MatrixIndexT MaxBlockCols() const</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8cc_source.html#l00283">cu-block-matrix.cc:283</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_ad8709048625eb0daa053903d2d8a0126"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#ad8709048625eb0daa053903d2d8a0126">kaldi::CuBlockMatrix::Block</a></div><div class="ttdeci">const CuSubMatrix&lt; Real &gt; Block(MatrixIndexT b) const</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8cc_source.html#l00070">cu-block-matrix.cc:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad8709048625eb0daa053903d2d8a0126"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8709048625eb0daa053903d2d8a0126">&#9670;&nbsp;</a></span>Block() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classkaldi_1_1CuSubMatrix.html">CuSubMatrix</a>&lt; Real &gt; Block </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a>&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cu-block-matrix_8cc_source.html#l00070">70</a> of file <a class="el" href="cu-block-matrix_8cc_source.html">cu-block-matrix.cc</a>.</p>

<p class="reference">References <a class="el" href="arpa-lm-compiler_8cc_source.html#l00108">data_</a>, and <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>.</p>

<p class="reference">Referenced by <a class="el" href="cu-matrix_8cc_source.html#l03172">CuMatrixBase&lt; float &gt;::AddMatBlock()</a>, <a class="el" href="cu-matrix_8cc_source.html#l00160">CuMatrixBase&lt; float &gt;::CopyFromBlock()</a>, and <a class="el" href="cu-block-matrix_8h_source.html#l00075">CuBlockMatrix&lt; Real &gt;::NumBlocks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                                                                {</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(static_cast&lt;size_t&gt;(b) &lt; <a class="code" href="classkaldi_1_1CuBlockMatrix.html#af9c3d816ad5026c65e3d0cc2c695a8a9">block_data_</a>.size());</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keyword">const</span> BlockMatrixData &amp;block_data = <a class="code" href="classkaldi_1_1CuBlockMatrix.html#af9c3d816ad5026c65e3d0cc2c695a8a9">block_data_</a>[b];</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="keywordflow">return</span> CuSubMatrix&lt;Real&gt;(<a class="code" href="classkaldi_1_1CuBlockMatrix.html#a39682fdd40113b8cec059fe05e16432d">data_</a>, 0, block_data.num_rows,</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                           block_data.col_offset, block_data.num_cols);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;}</div><div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_af9c3d816ad5026c65e3d0cc2c695a8a9"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#af9c3d816ad5026c65e3d0cc2c695a8a9">kaldi::CuBlockMatrix::block_data_</a></div><div class="ttdeci">std::vector&lt; BlockMatrixData &gt; block_data_</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00135">cu-block-matrix.h:135</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_a39682fdd40113b8cec059fe05e16432d"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#a39682fdd40113b8cec059fe05e16432d">kaldi::CuBlockMatrix::data_</a></div><div class="ttdeci">CuMatrix&lt; Real &gt; data_</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00110">cu-block-matrix.h:110</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa39dc0e057c9fe3446744b149ec322ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa39dc0e057c9fe3446744b149ec322ab">&#9670;&nbsp;</a></span>Block() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1CuSubMatrix.html">CuSubMatrix</a>&lt; Real &gt; Block </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a>&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cu-block-matrix_8cc_source.html#l00078">78</a> of file <a class="el" href="cu-block-matrix_8cc_source.html">cu-block-matrix.cc</a>.</p>

<p class="reference">References <a class="el" href="cu-block-matrix_8h_source.html#l00135">CuBlockMatrix&lt; Real &gt;::block_data_</a>, <a class="el" href="cu-block-matrix_8cc_source.html#l00035">CuBlockMatrix&lt; Real &gt;::CuBlockMatrix()</a>, <a class="el" href="arpa-lm-compiler_8cc_source.html#l00108">data_</a>, <a class="el" href="cu-block-matrix_8h_source.html#l00110">CuBlockMatrix&lt; Real &gt;::data_</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, and <a class="el" href="cu-block-matrix_8h_source.html#l00137">CuBlockMatrix&lt; Real &gt;::num_rows_</a>.</p>
<div class="fragment"><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                                                    {</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(static_cast&lt;size_t&gt;(b) &lt; <a class="code" href="classkaldi_1_1CuBlockMatrix.html#af9c3d816ad5026c65e3d0cc2c695a8a9">block_data_</a>.size());</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  BlockMatrixData &amp;block_data = <a class="code" href="classkaldi_1_1CuBlockMatrix.html#af9c3d816ad5026c65e3d0cc2c695a8a9">block_data_</a>[b];</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordflow">return</span> CuSubMatrix&lt;Real&gt;(<a class="code" href="classkaldi_1_1CuBlockMatrix.html#a39682fdd40113b8cec059fe05e16432d">data_</a>, 0, block_data.num_rows,</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                           block_data.col_offset, block_data.num_cols);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;}</div><div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_af9c3d816ad5026c65e3d0cc2c695a8a9"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#af9c3d816ad5026c65e3d0cc2c695a8a9">kaldi::CuBlockMatrix::block_data_</a></div><div class="ttdeci">std::vector&lt; BlockMatrixData &gt; block_data_</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00135">cu-block-matrix.h:135</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_a39682fdd40113b8cec059fe05e16432d"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#a39682fdd40113b8cec059fe05e16432d">kaldi::CuBlockMatrix::data_</a></div><div class="ttdeci">CuMatrix&lt; Real &gt; data_</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00110">cu-block-matrix.h:110</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adb1f9c00fd862efc64c3c4590fa51813"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb1f9c00fd862efc64c3c4590fa51813">&#9670;&nbsp;</a></span>CopyFromMat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CopyFromMat </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CuMatrix.html">CuMatrix</a>&lt; Real &gt; &amp;&#160;</td>
          <td class="paramname"><em>M</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copies elements within the block structure from matrix M, discarding others. </p>
<p>Note: this has not been implemented in a very efficient way, it's used only for testing. </p>

<p class="definition">Definition at line <a class="el" href="cu-block-matrix_8cc_source.html#l00296">296</a> of file <a class="el" href="cu-block-matrix_8cc_source.html">cu-block-matrix.cc</a>.</p>

<p class="reference">References <a class="el" href="cu-matrix_8cc_source.html#l00339">CuMatrixBase&lt; Real &gt;::CopyFromMat()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="cu-matrix_8h_source.html#l00215">CuMatrixBase&lt; Real &gt;::NumCols()</a>, and <a class="el" href="cu-matrix_8h_source.html#l00214">CuMatrixBase&lt; Real &gt;::NumRows()</a>.</p>

<p class="reference">Referenced by <a class="el" href="cu-block-matrix_8h_source.html#l00075">CuBlockMatrix&lt; Real &gt;::NumBlocks()</a>, and <a class="el" href="cu-block-matrix-test_8cc_source.html#l00116">kaldi::UnitTestCuBlockMatrixAddMatMat()</a>.</p>
<div class="fragment"><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                                                             {</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="classkaldi_1_1CuBlockMatrix.html#a01cf7fccddf8deddc75b34408144ded1">NumRows</a>() == M.NumRows() &amp;&amp; <a class="code" href="classkaldi_1_1CuBlockMatrix.html#acd4c9f53536602585f5aff9e8005299a">NumCols</a>() == M.NumCols());</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <a class="code" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> row_offset = 0, col_offset = 0;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> b = 0; b &lt; <a class="code" href="classkaldi_1_1CuBlockMatrix.html#a34d725f7367a4041f158eb74ae306b03">NumBlocks</a>(); b++) {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    CuSubMatrix&lt;Real&gt; this_block = <a class="code" href="classkaldi_1_1CuBlockMatrix.html#ad8709048625eb0daa053903d2d8a0126">Block</a>(b);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <a class="code" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> this_num_rows = this_block.NumRows(),</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        this_num_cols = this_block.NumCols();</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keyword">const</span> CuSubMatrix&lt;Real&gt; src(M, row_offset, this_num_rows,</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                                col_offset, this_num_cols);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    this_block.CopyFromMat(src);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    row_offset += this_num_rows;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    col_offset += this_num_cols;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(row_offset == <a class="code" href="classkaldi_1_1CuBlockMatrix.html#a01cf7fccddf8deddc75b34408144ded1">NumRows</a>() &amp;&amp; col_offset == <a class="code" href="classkaldi_1_1CuBlockMatrix.html#acd4c9f53536602585f5aff9e8005299a">NumCols</a>());</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;}</div><div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_a01cf7fccddf8deddc75b34408144ded1"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#a01cf7fccddf8deddc75b34408144ded1">kaldi::CuBlockMatrix::NumRows</a></div><div class="ttdeci">MatrixIndexT NumRows() const</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00071">cu-block-matrix.h:71</a></div></div>
<div class="ttc" id="namespacekaldi_html_aac2c220416519a2b0a7ad822ee2ef972"><div class="ttname"><a href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">kaldi::MatrixIndexT</a></div><div class="ttdeci">int32 MatrixIndexT</div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00098">matrix-common.h:98</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_a34d725f7367a4041f158eb74ae306b03"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#a34d725f7367a4041f158eb74ae306b03">kaldi::CuBlockMatrix::NumBlocks</a></div><div class="ttdeci">MatrixIndexT NumBlocks() const</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00075">cu-block-matrix.h:75</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_acd4c9f53536602585f5aff9e8005299a"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#acd4c9f53536602585f5aff9e8005299a">kaldi::CuBlockMatrix::NumCols</a></div><div class="ttdeci">MatrixIndexT NumCols() const</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00073">cu-block-matrix.h:73</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_ad8709048625eb0daa053903d2d8a0126"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#ad8709048625eb0daa053903d2d8a0126">kaldi::CuBlockMatrix::Block</a></div><div class="ttdeci">const CuSubMatrix&lt; Real &gt; Block(MatrixIndexT b) const</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8cc_source.html#l00070">cu-block-matrix.cc:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac919a991060ede6983343719401686de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac919a991060ede6983343719401686de">&#9670;&nbsp;</a></span>Destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Destroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Frees and deinitializes everything. </p>

<p class="definition">Definition at line <a class="el" href="cu-block-matrix_8cc_source.html#l00201">201</a> of file <a class="el" href="cu-block-matrix_8cc_source.html">cu-block-matrix.cc</a>.</p>

<p class="reference">References <a class="el" href="arpa-lm-compiler_8cc_source.html#l00108">data_</a>.</p>

<p class="reference">Referenced by <a class="el" href="cu-block-matrix_8h_source.html#l00059">CuBlockMatrix&lt; Real &gt;::~CuBlockMatrix()</a>.</p>
<div class="fragment"><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                                  {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <a class="code" href="classkaldi_1_1CuBlockMatrix.html#a39682fdd40113b8cec059fe05e16432d">data_</a>.Resize(0, 0);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <a class="code" href="classkaldi_1_1CuBlockMatrix.html#af9c3d816ad5026c65e3d0cc2c695a8a9">block_data_</a>.clear();</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <a class="code" href="classkaldi_1_1CuBlockMatrix.html#a67d96c77dd3e450528faf1755002e42b">num_rows_</a> = 0;  </div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <a class="code" href="classkaldi_1_1CuBlockMatrix.html#ac7e52345677feb22201656550d11b6f0">FreeCudaData</a>();</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;}</div><div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_af9c3d816ad5026c65e3d0cc2c695a8a9"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#af9c3d816ad5026c65e3d0cc2c695a8a9">kaldi::CuBlockMatrix::block_data_</a></div><div class="ttdeci">std::vector&lt; BlockMatrixData &gt; block_data_</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00135">cu-block-matrix.h:135</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_ac7e52345677feb22201656550d11b6f0"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#ac7e52345677feb22201656550d11b6f0">kaldi::CuBlockMatrix::FreeCudaData</a></div><div class="ttdeci">void FreeCudaData()</div><div class="ttdoc">If using GPU and cu_data_ != NULL, free cu_data_ and set it to NULL. </div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8cc_source.html#l00106">cu-block-matrix.cc:106</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_a39682fdd40113b8cec059fe05e16432d"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#a39682fdd40113b8cec059fe05e16432d">kaldi::CuBlockMatrix::data_</a></div><div class="ttdeci">CuMatrix&lt; Real &gt; data_</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00110">cu-block-matrix.h:110</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_a67d96c77dd3e450528faf1755002e42b"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#a67d96c77dd3e450528faf1755002e42b">kaldi::CuBlockMatrix::num_rows_</a></div><div class="ttdeci">MatrixIndexT num_rows_</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00137">cu-block-matrix.h:137</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac7e52345677feb22201656550d11b6f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7e52345677feb22201656550d11b6f0">&#9670;&nbsp;</a></span>FreeCudaData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FreeCudaData </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If using GPU and cu_data_ != NULL, free cu_data_ and set it to NULL. </p>

<p class="definition">Definition at line <a class="el" href="cu-block-matrix_8cc_source.html#l00106">106</a> of file <a class="el" href="cu-block-matrix_8cc_source.html">cu-block-matrix.cc</a>.</p>

<p class="reference">References <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>.</p>
<div class="fragment"><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                                       {</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="preprocessor">#if HAVE_CUDA == 1</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordflow">if</span> (cu_data_ != NULL) {</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">if</span> (CuDevice::Instantiate().Enabled()) {</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      CuDevice::Instantiate().Free(cu_data_);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      cu_data_ = NULL;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;CuBlockMatrix: you have CUDA data pointer but &quot;</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                &lt;&lt; <span class="stringliteral">&quot;no GPU is enabled: likely code error.&quot;</span>;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    }</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  }</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;}</div><div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1b650a63415888150c4691965bb5b510"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b650a63415888150c4691965bb5b510">&#9670;&nbsp;</a></span>MaxBlockCols()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> MaxBlockCols </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cu-block-matrix_8cc_source.html#l00283">283</a> of file <a class="el" href="cu-block-matrix_8cc_source.html">cu-block-matrix.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>.</p>

<p class="reference">Referenced by <a class="el" href="cu-block-matrix_8h_source.html#l00075">CuBlockMatrix&lt; Real &gt;::NumBlocks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                                                     {</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <a class="code" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> max_cols = 0;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="classkaldi_1_1CuBlockMatrix.html#af9c3d816ad5026c65e3d0cc2c695a8a9">block_data_</a>.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    max_cols = std::max(max_cols, <a class="code" href="classkaldi_1_1CuBlockMatrix.html#af9c3d816ad5026c65e3d0cc2c695a8a9">block_data_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].num_cols);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <span class="keywordflow">return</span> max_cols;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;}</div><div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_af9c3d816ad5026c65e3d0cc2c695a8a9"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#af9c3d816ad5026c65e3d0cc2c695a8a9">kaldi::CuBlockMatrix::block_data_</a></div><div class="ttdeci">std::vector&lt; BlockMatrixData &gt; block_data_</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00135">cu-block-matrix.h:135</a></div></div>
<div class="ttc" id="namespacekaldi_html_aac2c220416519a2b0a7ad822ee2ef972"><div class="ttname"><a href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">kaldi::MatrixIndexT</a></div><div class="ttdeci">int32 MatrixIndexT</div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00098">matrix-common.h:98</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeb0fb0d3786d83e474bd7a02573293c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb0fb0d3786d83e474bd7a02573293c2">&#9670;&nbsp;</a></span>MaxBlockRows()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> MaxBlockRows </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cu-block-matrix_8cc_source.html#l00291">291</a> of file <a class="el" href="cu-block-matrix_8cc_source.html">cu-block-matrix.cc</a>.</p>

<p class="reference">References <a class="el" href="arpa-lm-compiler_8cc_source.html#l00108">data_</a>.</p>

<p class="reference">Referenced by <a class="el" href="cu-block-matrix_8h_source.html#l00075">CuBlockMatrix&lt; Real &gt;::NumBlocks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                                                     {</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1CuBlockMatrix.html#a39682fdd40113b8cec059fe05e16432d">data_</a>.NumRows();</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;}</div><div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_a39682fdd40113b8cec059fe05e16432d"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#a39682fdd40113b8cec059fe05e16432d">kaldi::CuBlockMatrix::data_</a></div><div class="ttdeci">CuMatrix&lt; Real &gt; data_</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00110">cu-block-matrix.h:110</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ace2c8f714301c288d75173d100aa63a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace2c8f714301c288d75173d100aa63a3">&#9670;&nbsp;</a></span>NormalizeColumns()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NormalizeColumns </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Normalizes the columns of *this so that each one sums to one. </p>
<p>On error (e.g. inf's), will set the column to a constant value that sums to one. </p>

<p class="reference">Referenced by <a class="el" href="cu-block-matrix_8h_source.html#l00075">CuBlockMatrix&lt; Real &gt;::NumBlocks()</a>.</p>

</div>
</div>
<a id="a34d725f7367a4041f158eb74ae306b03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34d725f7367a4041f158eb74ae306b03">&#9670;&nbsp;</a></span>NumBlocks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> NumBlocks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cu-block-matrix_8h_source.html#l00075">75</a> of file <a class="el" href="cu-block-matrix_8h_source.html">cu-block-matrix.h</a>.</p>

<p class="reference">References <a class="el" href="cu-block-matrix_8cc_source.html#l00211">CuBlockMatrix&lt; Real &gt;::AddMatMat()</a>, <a class="el" href="cu-block-matrix_8cc_source.html#l00070">CuBlockMatrix&lt; Real &gt;::Block()</a>, <a class="el" href="cu-block-matrix_8h_source.html#l00135">CuBlockMatrix&lt; Real &gt;::block_data_</a>, <a class="el" href="cu-block-matrix_8cc_source.html#l00296">CuBlockMatrix&lt; Real &gt;::CopyFromMat()</a>, <a class="el" href="cu-block-matrix_8cc_source.html#l00283">CuBlockMatrix&lt; Real &gt;::MaxBlockCols()</a>, <a class="el" href="cu-block-matrix_8cc_source.html#l00291">CuBlockMatrix&lt; Real &gt;::MaxBlockRows()</a>, <a class="el" href="classkaldi_1_1CuBlockMatrix.html#ace2c8f714301c288d75173d100aa63a3">CuBlockMatrix&lt; Real &gt;::NormalizeColumns()</a>, and <a class="el" href="cu-block-matrix_8cc_source.html#l00150">CuBlockMatrix&lt; Real &gt;::Swap()</a>.</p>

<p class="reference">Referenced by <a class="el" href="cu-matrix_8cc_source.html#l03172">CuMatrixBase&lt; float &gt;::AddMatBlock()</a>, and <a class="el" href="cu-matrix_8cc_source.html#l00160">CuMatrixBase&lt; float &gt;::CopyFromBlock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1CuBlockMatrix.html#af9c3d816ad5026c65e3d0cc2c695a8a9">block_data_</a>.size(); }</div><div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_af9c3d816ad5026c65e3d0cc2c695a8a9"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#af9c3d816ad5026c65e3d0cc2c695a8a9">kaldi::CuBlockMatrix::block_data_</a></div><div class="ttdeci">std::vector&lt; BlockMatrixData &gt; block_data_</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00135">cu-block-matrix.h:135</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acd4c9f53536602585f5aff9e8005299a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd4c9f53536602585f5aff9e8005299a">&#9670;&nbsp;</a></span>NumCols()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> NumCols </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cu-block-matrix_8h_source.html#l00073">73</a> of file <a class="el" href="cu-block-matrix_8h_source.html">cu-block-matrix.h</a>.</p>

<p class="reference">References <a class="el" href="cu-block-matrix_8h_source.html#l00110">CuBlockMatrix&lt; Real &gt;::data_</a>.</p>

<p class="reference">Referenced by <a class="el" href="cu-matrix_8cc_source.html#l03172">CuMatrixBase&lt; float &gt;::AddMatBlock()</a>, <a class="el" href="cu-matrix_8cc_source.html#l00160">CuMatrixBase&lt; float &gt;::CopyFromBlock()</a>, <a class="el" href="cu-matrix_8cc_source.html#l00194">CuMatrix&lt; float &gt;::CuMatrix()</a>, <a class="el" href="cu-block-matrix-test_8cc_source.html#l00076">kaldi::UnitTestCuBlockMatrixAddMatBlock()</a>, and <a class="el" href="cu-block-matrix-test_8cc_source.html#l00116">kaldi::UnitTestCuBlockMatrixAddMatMat()</a>.</p>
<div class="fragment"><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1CuBlockMatrix.html#a39682fdd40113b8cec059fe05e16432d">data_</a>.num_cols_; }</div><div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_a39682fdd40113b8cec059fe05e16432d"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#a39682fdd40113b8cec059fe05e16432d">kaldi::CuBlockMatrix::data_</a></div><div class="ttdeci">CuMatrix&lt; Real &gt; data_</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00110">cu-block-matrix.h:110</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a01cf7fccddf8deddc75b34408144ded1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01cf7fccddf8deddc75b34408144ded1">&#9670;&nbsp;</a></span>NumRows()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> NumRows </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cu-block-matrix_8h_source.html#l00071">71</a> of file <a class="el" href="cu-block-matrix_8h_source.html">cu-block-matrix.h</a>.</p>

<p class="reference">References <a class="el" href="cu-block-matrix_8h_source.html#l00137">CuBlockMatrix&lt; Real &gt;::num_rows_</a>.</p>

<p class="reference">Referenced by <a class="el" href="cu-matrix_8cc_source.html#l03172">CuMatrixBase&lt; float &gt;::AddMatBlock()</a>, <a class="el" href="cu-matrix_8cc_source.html#l00160">CuMatrixBase&lt; float &gt;::CopyFromBlock()</a>, <a class="el" href="cu-matrix_8cc_source.html#l00194">CuMatrix&lt; float &gt;::CuMatrix()</a>, <a class="el" href="cu-block-matrix-test_8cc_source.html#l00076">kaldi::UnitTestCuBlockMatrixAddMatBlock()</a>, and <a class="el" href="cu-block-matrix-test_8cc_source.html#l00116">kaldi::UnitTestCuBlockMatrixAddMatMat()</a>.</p>
<div class="fragment"><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1CuBlockMatrix.html#a67d96c77dd3e450528faf1755002e42b">num_rows_</a>; }</div><div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_a67d96c77dd3e450528faf1755002e42b"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#a67d96c77dd3e450528faf1755002e42b">kaldi::CuBlockMatrix::num_rows_</a></div><div class="ttdeci">MatrixIndexT num_rows_</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00137">cu-block-matrix.h:137</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a76055251041d7e0087b8619188a691cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76055251041d7e0087b8619188a691cf">&#9670;&nbsp;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1CuBlockMatrix.html">CuBlockMatrix</a>&lt; Real &gt; &amp; operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CuBlockMatrix.html">CuBlockMatrix</a>&lt; Real &gt; &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Assignment operator. </p>

<p class="definition">Definition at line <a class="el" href="cu-block-matrix_8cc_source.html#l00096">96</a> of file <a class="el" href="cu-block-matrix_8cc_source.html">cu-block-matrix.cc</a>.</p>

<p class="reference">References <a class="el" href="cu-block-matrix_8h_source.html#l00135">CuBlockMatrix&lt; Real &gt;::block_data_</a>, <a class="el" href="arpa-lm-compiler_8cc_source.html#l00108">data_</a>, <a class="el" href="cu-block-matrix_8h_source.html#l00110">CuBlockMatrix&lt; Real &gt;::data_</a>, and <a class="el" href="cu-block-matrix_8h_source.html#l00137">CuBlockMatrix&lt; Real &gt;::num_rows_</a>.</p>

<p class="reference">Referenced by <a class="el" href="cu-block-matrix_8h_source.html#l00059">CuBlockMatrix&lt; Real &gt;::~CuBlockMatrix()</a>.</p>
<div class="fragment"><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                                                                                     {</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <a class="code" href="classkaldi_1_1CuBlockMatrix.html#ac7e52345677feb22201656550d11b6f0">FreeCudaData</a>();</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <a class="code" href="classkaldi_1_1CuBlockMatrix.html#a39682fdd40113b8cec059fe05e16432d">data_</a> = other.data_;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <a class="code" href="classkaldi_1_1CuBlockMatrix.html#af9c3d816ad5026c65e3d0cc2c695a8a9">block_data_</a> = other.block_data_;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <a class="code" href="classkaldi_1_1CuBlockMatrix.html#a67d96c77dd3e450528faf1755002e42b">num_rows_</a> = other.num_rows_;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <a class="code" href="classkaldi_1_1CuBlockMatrix.html#a4c34301a82468103715153d681d75929">SetCudaData</a>();</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;}</div><div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_af9c3d816ad5026c65e3d0cc2c695a8a9"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#af9c3d816ad5026c65e3d0cc2c695a8a9">kaldi::CuBlockMatrix::block_data_</a></div><div class="ttdeci">std::vector&lt; BlockMatrixData &gt; block_data_</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00135">cu-block-matrix.h:135</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_ac7e52345677feb22201656550d11b6f0"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#ac7e52345677feb22201656550d11b6f0">kaldi::CuBlockMatrix::FreeCudaData</a></div><div class="ttdeci">void FreeCudaData()</div><div class="ttdoc">If using GPU and cu_data_ != NULL, free cu_data_ and set it to NULL. </div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8cc_source.html#l00106">cu-block-matrix.cc:106</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_a39682fdd40113b8cec059fe05e16432d"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#a39682fdd40113b8cec059fe05e16432d">kaldi::CuBlockMatrix::data_</a></div><div class="ttdeci">CuMatrix&lt; Real &gt; data_</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00110">cu-block-matrix.h:110</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_a4c34301a82468103715153d681d75929"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#a4c34301a82468103715153d681d75929">kaldi::CuBlockMatrix::SetCudaData</a></div><div class="ttdeci">void SetCudaData()</div><div class="ttdoc">If using GPU, allocate and set cu_data_ on the GPU to reflect &quot;data_&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8cc_source.html#l00122">cu-block-matrix.cc:122</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_a67d96c77dd3e450528faf1755002e42b"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#a67d96c77dd3e450528faf1755002e42b">kaldi::CuBlockMatrix::num_rows_</a></div><div class="ttdeci">MatrixIndexT num_rows_</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00137">cu-block-matrix.h:137</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8e7d2790fc7e94fe9780ccc937de1270"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e7d2790fc7e94fe9780ccc937de1270">&#9670;&nbsp;</a></span>Read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Read </td>
          <td>(</td>
          <td class="paramtype">std::istream &amp;&#160;</td>
          <td class="paramname"><em>is</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>binary</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cu-block-matrix_8cc_source.html#l00171">171</a> of file <a class="el" href="cu-block-matrix_8cc_source.html">cu-block-matrix.cc</a>.</p>

<p class="reference">References <a class="el" href="io-funcs_8cc_source.html#l00194">kaldi::ExpectToken()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="io-funcs_8cc_source.html#l00145">kaldi::Peek()</a>, and <a class="el" href="io-funcs-inl_8h_source.html#l00055">kaldi::ReadBasicType()</a>.</p>

<p class="reference">Referenced by <a class="el" href="cu-block-matrix-test_8cc_source.html#l00046">kaldi::UnitTestCuBlockMatrixIO()</a>, and <a class="el" href="cu-block-matrix_8h_source.html#l00059">CuBlockMatrix&lt; Real &gt;::~CuBlockMatrix()</a>.</p>
<div class="fragment"><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                                                          {</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <a class="code" href="classkaldi_1_1CuBlockMatrix.html#ac919a991060ede6983343719401686de">Destroy</a>();</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="group__io__funcs__basic.html#gad31f67981a8f7b72645f65e57dcabc26">Peek</a>(is, binary);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  std::vector&lt;CuMatrix&lt;Real&gt; &gt; data;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="keywordflow">if</span> (i != static_cast&lt;int&gt;(<span class="charliteral">&#39;&lt;&#39;</span>)) {</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="comment">// back-compatibility code so we can read the older format of</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="comment">// MixtureProbComponent.  This code should be deleted eventually.</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    int32 size;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="group__io__funcs__basic.html#ga1bd1af0ef712b76f2332febcec8d095a">ReadBasicType</a>(is, binary, &amp;size);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(size &gt;= 0);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    data.resize(size);</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">for</span> (int32 i = 0; i &lt; size; i++)</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      data[i].<a class="code" href="classkaldi_1_1CuBlockMatrix.html#a8e7d2790fc7e94fe9780ccc937de1270">Read</a>(is, binary);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="group__io__funcs__basic.html#ga4c7a80f758e878578e78b667f62463a5">ExpectToken</a>(is, binary, <span class="stringliteral">&quot;&lt;CuBlockMatrix&gt;&quot;</span>);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    int32 size;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <a class="code" href="group__io__funcs__basic.html#ga1bd1af0ef712b76f2332febcec8d095a">ReadBasicType</a>(is, binary, &amp;size);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(size &gt;= 0);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    data.resize(size);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">for</span> (int32 i = 0; i &lt; size; i++)</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      data[i].<a class="code" href="classkaldi_1_1CuBlockMatrix.html#a8e7d2790fc7e94fe9780ccc937de1270">Read</a>(is, binary);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <a class="code" href="group__io__funcs__basic.html#ga4c7a80f758e878578e78b667f62463a5">ExpectToken</a>(is, binary, <span class="stringliteral">&quot;&lt;/CuBlockMatrix&gt;&quot;</span>);    </div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  }</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  CuBlockMatrix&lt;Real&gt; block_mat(data); <span class="comment">// initializer from std::vector&lt;CuMatrix&lt;Real&gt; &gt; does</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="comment">// the main job of initialization.</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  this-&gt;<a class="code" href="classkaldi_1_1CuBlockMatrix.html#a434cdefab8de8af0a59eaed4777625e8">Swap</a>(&amp;block_mat);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;}</div><div class="ttc" id="group__io__funcs__basic_html_ga1bd1af0ef712b76f2332febcec8d095a"><div class="ttname"><a href="group__io__funcs__basic.html#ga1bd1af0ef712b76f2332febcec8d095a">kaldi::ReadBasicType</a></div><div class="ttdeci">void ReadBasicType(std::istream &amp;is, bool binary, T *t)</div><div class="ttdoc">ReadBasicType is the name of the read function for bool, integer types, and floating-point types...</div><div class="ttdef"><b>Definition:</b> <a href="io-funcs-inl_8h_source.html#l00055">io-funcs-inl.h:55</a></div></div>
<div class="ttc" id="group__io__funcs__basic_html_gad31f67981a8f7b72645f65e57dcabc26"><div class="ttname"><a href="group__io__funcs__basic.html#gad31f67981a8f7b72645f65e57dcabc26">kaldi::Peek</a></div><div class="ttdeci">int Peek(std::istream &amp;is, bool binary)</div><div class="ttdoc">Peek consumes whitespace (if binary == false) and then returns the peek() value of the stream...</div><div class="ttdef"><b>Definition:</b> <a href="io-funcs_8cc_source.html#l00145">io-funcs.cc:145</a></div></div>
<div class="ttc" id="group__io__funcs__basic_html_ga4c7a80f758e878578e78b667f62463a5"><div class="ttname"><a href="group__io__funcs__basic.html#ga4c7a80f758e878578e78b667f62463a5">kaldi::ExpectToken</a></div><div class="ttdeci">void ExpectToken(std::istream &amp;is, bool binary, const char *token)</div><div class="ttdoc">ExpectToken tries to read in the given token, and throws an exception on failure. ...</div><div class="ttdef"><b>Definition:</b> <a href="io-funcs_8cc_source.html#l00194">io-funcs.cc:194</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_a434cdefab8de8af0a59eaed4777625e8"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#a434cdefab8de8af0a59eaed4777625e8">kaldi::CuBlockMatrix::Swap</a></div><div class="ttdeci">void Swap(CuBlockMatrix *other)</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8cc_source.html#l00150">cu-block-matrix.cc:150</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_a8e7d2790fc7e94fe9780ccc937de1270"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#a8e7d2790fc7e94fe9780ccc937de1270">kaldi::CuBlockMatrix::Read</a></div><div class="ttdeci">void Read(std::istream &amp;is, bool binary)</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8cc_source.html#l00171">cu-block-matrix.cc:171</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_ac919a991060ede6983343719401686de"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#ac919a991060ede6983343719401686de">kaldi::CuBlockMatrix::Destroy</a></div><div class="ttdeci">void Destroy()</div><div class="ttdoc">Frees and deinitializes everything. </div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8cc_source.html#l00201">cu-block-matrix.cc:201</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4c34301a82468103715153d681d75929"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c34301a82468103715153d681d75929">&#9670;&nbsp;</a></span>SetCudaData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SetCudaData </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If using GPU, allocate and set cu_data_ on the GPU to reflect "data_". </p>

<p class="definition">Definition at line <a class="el" href="cu-block-matrix_8cc_source.html#l00122">122</a> of file <a class="el" href="cu-block-matrix_8cc_source.html">cu-block-matrix.cc</a>.</p>

<p class="reference">References <a class="el" href="cu-matrixdim_8h_source.html#l00076">CuBlockMatrixData_::col_offset</a>, <a class="el" href="cu-matrix_8h_source.html#l00689">CuMatrixBase&lt; Real &gt;::Data()</a>, <a class="el" href="cu-matrix_8h_source.html#l00220">CuMatrixBase&lt; Real &gt;::Dim()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="cu-matrixdim_8h_source.html#l00078">CuBlockMatrixData_::matrix_data</a>, <a class="el" href="cu-matrixdim_8h_source.html#l00077">CuBlockMatrixData_::matrix_dim</a>, <a class="el" href="cu-matrix_8h_source.html#l00215">CuMatrixBase&lt; Real &gt;::NumCols()</a>, <a class="el" href="cu-matrix_8h_source.html#l00214">CuMatrixBase&lt; Real &gt;::NumRows()</a>, and <a class="el" href="cu-matrixdim_8h_source.html#l00075">CuBlockMatrixData_::row_offset</a>.</p>
<div class="fragment"><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                                      {</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="preprocessor">#if HAVE_CUDA == 1</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(cu_data_ == NULL);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1CuBlockMatrix.html#af9c3d816ad5026c65e3d0cc2c695a8a9">block_data_</a>.size() == 0) <span class="keywordflow">return</span>; <span class="comment">// Nothing to do.</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keywordflow">if</span> (CuDevice::Instantiate().Enabled()) {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    CuTimer tim;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    std::vector&lt;CuBlockMatrixData&gt; tmp_cu_data(<a class="code" href="classkaldi_1_1CuBlockMatrix.html#a34d725f7367a4041f158eb74ae306b03">NumBlocks</a>());</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    int32 row_offset = 0, col_offset = 0;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> b = 0; b &lt; <a class="code" href="classkaldi_1_1CuBlockMatrix.html#a34d725f7367a4041f158eb74ae306b03">NumBlocks</a>(); b++) {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      CuSubMatrix&lt;Real&gt; this_mat = <a class="code" href="classkaldi_1_1CuBlockMatrix.html#ad8709048625eb0daa053903d2d8a0126">Block</a>(b);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <a class="code" href="structCuBlockMatrixData__.html">CuBlockMatrixData</a> &amp;this_cu_data = tmp_cu_data[b];</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      this_cu_data.<a class="code" href="structCuBlockMatrixData__.html#a93a988eef342239df1d8ec1197c544c7">row_offset</a> = row_offset;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      this_cu_data.<a class="code" href="structCuBlockMatrixData__.html#aefe95d1654657a3857d3f3b984c72053">col_offset</a> = col_offset;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      this_cu_data.<a class="code" href="structCuBlockMatrixData__.html#ae066724e18656ba14714f04b138cf95e">matrix_dim</a> = this_mat.Dim();</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      this_cu_data.<a class="code" href="structCuBlockMatrixData__.html#a033a9659fedb88f8cb1d58b0e780fe56">matrix_data</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(this_mat.Data());</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      row_offset += this_mat.NumRows();</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      col_offset += this_mat.NumCols();</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    }</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordtype">size_t</span> size = <a class="code" href="classkaldi_1_1CuBlockMatrix.html#a34d725f7367a4041f158eb74ae306b03">NumBlocks</a>() * <span class="keyword">sizeof</span>(<a class="code" href="cu-matrixdim_8h.html#acc59f787b1cbabea4d6f4d9e1b5e687a">CuBlockMatrixData</a>);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    cu_data_ = <span class="keyword">static_cast&lt;</span><a class="code" href="structCuBlockMatrixData__.html">CuBlockMatrixData</a>*<span class="keyword">&gt;</span>(</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        CuDevice::Instantiate().Malloc(size));</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    CU_SAFE_CALL(cudaMemcpy(cu_data_, &amp;(tmp_cu_data[0]), size, cudaMemcpyHostToDevice));</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    CuDevice::Instantiate().AccuProfile(__func__, tim);    </div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  }</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;}</div><div class="ttc" id="structCuBlockMatrixData___html_a93a988eef342239df1d8ec1197c544c7"><div class="ttname"><a href="structCuBlockMatrixData__.html#a93a988eef342239df1d8ec1197c544c7">CuBlockMatrixData_::row_offset</a></div><div class="ttdeci">int32_cuda row_offset</div><div class="ttdef"><b>Definition:</b> <a href="cu-matrixdim_8h_source.html#l00075">cu-matrixdim.h:75</a></div></div>
<div class="ttc" id="cu-matrixdim_8h_html_acc59f787b1cbabea4d6f4d9e1b5e687a"><div class="ttname"><a href="cu-matrixdim_8h.html#acc59f787b1cbabea4d6f4d9e1b5e687a">CuBlockMatrixData</a></div><div class="ttdeci">struct CuBlockMatrixData_ CuBlockMatrixData</div><div class="ttdoc">This structure is used in cu-block-matrix.h to store information about a block-diagonal matrix...</div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_af9c3d816ad5026c65e3d0cc2c695a8a9"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#af9c3d816ad5026c65e3d0cc2c695a8a9">kaldi::CuBlockMatrix::block_data_</a></div><div class="ttdeci">std::vector&lt; BlockMatrixData &gt; block_data_</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00135">cu-block-matrix.h:135</a></div></div>
<div class="ttc" id="structCuBlockMatrixData___html"><div class="ttname"><a href="structCuBlockMatrixData__.html">CuBlockMatrixData_</a></div><div class="ttdoc">This structure is used in cu-block-matrix.h to store information about a block-diagonal matrix...</div><div class="ttdef"><b>Definition:</b> <a href="cu-matrixdim_8h_source.html#l00074">cu-matrixdim.h:74</a></div></div>
<div class="ttc" id="structCuBlockMatrixData___html_aefe95d1654657a3857d3f3b984c72053"><div class="ttname"><a href="structCuBlockMatrixData__.html#aefe95d1654657a3857d3f3b984c72053">CuBlockMatrixData_::col_offset</a></div><div class="ttdeci">int32_cuda col_offset</div><div class="ttdef"><b>Definition:</b> <a href="cu-matrixdim_8h_source.html#l00076">cu-matrixdim.h:76</a></div></div>
<div class="ttc" id="structCuBlockMatrixData___html_a033a9659fedb88f8cb1d58b0e780fe56"><div class="ttname"><a href="structCuBlockMatrixData__.html#a033a9659fedb88f8cb1d58b0e780fe56">CuBlockMatrixData_::matrix_data</a></div><div class="ttdeci">void * matrix_data</div><div class="ttdef"><b>Definition:</b> <a href="cu-matrixdim_8h_source.html#l00078">cu-matrixdim.h:78</a></div></div>
<div class="ttc" id="structCuBlockMatrixData___html_ae066724e18656ba14714f04b138cf95e"><div class="ttname"><a href="structCuBlockMatrixData__.html#ae066724e18656ba14714f04b138cf95e">CuBlockMatrixData_::matrix_dim</a></div><div class="ttdeci">MatrixDim matrix_dim</div><div class="ttdef"><b>Definition:</b> <a href="cu-matrixdim_8h_source.html#l00077">cu-matrixdim.h:77</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_a34d725f7367a4041f158eb74ae306b03"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#a34d725f7367a4041f158eb74ae306b03">kaldi::CuBlockMatrix::NumBlocks</a></div><div class="ttdeci">MatrixIndexT NumBlocks() const</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00075">cu-block-matrix.h:75</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_ad8709048625eb0daa053903d2d8a0126"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#ad8709048625eb0daa053903d2d8a0126">kaldi::CuBlockMatrix::Block</a></div><div class="ttdeci">const CuSubMatrix&lt; Real &gt; Block(MatrixIndexT b) const</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8cc_source.html#l00070">cu-block-matrix.cc:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a434cdefab8de8af0a59eaed4777625e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a434cdefab8de8af0a59eaed4777625e8">&#9670;&nbsp;</a></span>Swap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Swap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1CuBlockMatrix.html">CuBlockMatrix</a>&lt; Real &gt; *&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cu-block-matrix_8cc_source.html#l00150">150</a> of file <a class="el" href="cu-block-matrix_8cc_source.html">cu-block-matrix.cc</a>.</p>

<p class="reference">References <a class="el" href="cu-block-matrix_8h_source.html#l00135">CuBlockMatrix&lt; Real &gt;::block_data_</a>, <a class="el" href="arpa-lm-compiler_8cc_source.html#l00108">data_</a>, <a class="el" href="cu-block-matrix_8h_source.html#l00110">CuBlockMatrix&lt; Real &gt;::data_</a>, <a class="el" href="cu-block-matrix_8h_source.html#l00137">CuBlockMatrix&lt; Real &gt;::num_rows_</a>, and <a class="el" href="basic-filebuf_8h_source.html#l00275">kaldi::swap()</a>.</p>

<p class="reference">Referenced by <a class="el" href="cu-block-matrix_8h_source.html#l00075">CuBlockMatrix&lt; Real &gt;::NumBlocks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                                                         {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <a class="code" href="classkaldi_1_1CuBlockMatrix.html#a39682fdd40113b8cec059fe05e16432d">data_</a>.Swap(&amp;other-&gt;data_);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <a class="code" href="classkaldi_1_1CuBlockMatrix.html#af9c3d816ad5026c65e3d0cc2c695a8a9">block_data_</a>.swap(other-&gt;block_data_);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <a class="code" href="namespacekaldi.html#aa3e99328db564bc2bf6397fa1eaee4d7">std::swap</a>(<a class="code" href="classkaldi_1_1CuBlockMatrix.html#a67d96c77dd3e450528faf1755002e42b">num_rows_</a>, other-&gt;num_rows_);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="preprocessor">#if HAVE_CUDA == 1</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <a class="code" href="namespacekaldi.html#aa3e99328db564bc2bf6397fa1eaee4d7">std::swap</a>(cu_data_, other-&gt;cu_data_);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;}</div><div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_af9c3d816ad5026c65e3d0cc2c695a8a9"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#af9c3d816ad5026c65e3d0cc2c695a8a9">kaldi::CuBlockMatrix::block_data_</a></div><div class="ttdeci">std::vector&lt; BlockMatrixData &gt; block_data_</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00135">cu-block-matrix.h:135</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa3e99328db564bc2bf6397fa1eaee4d7"><div class="ttname"><a href="namespacekaldi.html#aa3e99328db564bc2bf6397fa1eaee4d7">kaldi::swap</a></div><div class="ttdeci">void swap(basic_filebuf&lt; CharT, Traits &gt; &amp;x, basic_filebuf&lt; CharT, Traits &gt; &amp;y)</div><div class="ttdef"><b>Definition:</b> <a href="basic-filebuf_8h_source.html#l00275">basic-filebuf.h:275</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_a39682fdd40113b8cec059fe05e16432d"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#a39682fdd40113b8cec059fe05e16432d">kaldi::CuBlockMatrix::data_</a></div><div class="ttdeci">CuMatrix&lt; Real &gt; data_</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00110">cu-block-matrix.h:110</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_a67d96c77dd3e450528faf1755002e42b"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#a67d96c77dd3e450528faf1755002e42b">kaldi::CuBlockMatrix::num_rows_</a></div><div class="ttdeci">MatrixIndexT num_rows_</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00137">cu-block-matrix.h:137</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a68f354fd5f096134162f01719096e6fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68f354fd5f096134162f01719096e6fc">&#9670;&nbsp;</a></span>Write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Write </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>os</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>binary</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cu-block-matrix_8cc_source.html#l00160">160</a> of file <a class="el" href="cu-block-matrix_8cc_source.html">cu-block-matrix.cc</a>.</p>

<p class="reference">References <a class="el" href="io-funcs-inl_8h_source.html#l00034">kaldi::WriteBasicType()</a>, and <a class="el" href="io-funcs_8cc_source.html#l00134">kaldi::WriteToken()</a>.</p>

<p class="reference">Referenced by <a class="el" href="cu-block-matrix-test_8cc_source.html#l00046">kaldi::UnitTestCuBlockMatrixIO()</a>, and <a class="el" href="cu-block-matrix_8h_source.html#l00059">CuBlockMatrix&lt; Real &gt;::~CuBlockMatrix()</a>.</p>
<div class="fragment"><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                                                                 {</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">WriteToken</a>(os, binary, <span class="stringliteral">&quot;&lt;CuBlockMatrix&gt;&quot;</span>);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  int32 num_blocks = <a class="code" href="classkaldi_1_1CuBlockMatrix.html#a34d725f7367a4041f158eb74ae306b03">NumBlocks</a>();</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga108506a9aabafd9006926aa1b47617da">WriteBasicType</a>(os, binary, num_blocks);</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordflow">for</span> (int32 b = 0; b &lt; num_blocks; b++)</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    this-&gt;<a class="code" href="classkaldi_1_1CuBlockMatrix.html#ad8709048625eb0daa053903d2d8a0126">Block</a>(b).Write(os, binary);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">WriteToken</a>(os, binary, <span class="stringliteral">&quot;&lt;/CuBlockMatrix&gt;&quot;</span>);  </div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;}</div><div class="ttc" id="group__io__funcs__basic_html_ga87f1638ef3c0a3ee117178b202c2d02a"><div class="ttname"><a href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">kaldi::WriteToken</a></div><div class="ttdeci">void WriteToken(std::ostream &amp;os, bool binary, const char *token)</div><div class="ttdoc">The WriteToken functions are for writing nonempty sequences of non-space characters. </div><div class="ttdef"><b>Definition:</b> <a href="io-funcs_8cc_source.html#l00134">io-funcs.cc:134</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_a34d725f7367a4041f158eb74ae306b03"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#a34d725f7367a4041f158eb74ae306b03">kaldi::CuBlockMatrix::NumBlocks</a></div><div class="ttdeci">MatrixIndexT NumBlocks() const</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8h_source.html#l00075">cu-block-matrix.h:75</a></div></div>
<div class="ttc" id="group__io__funcs__basic_html_ga108506a9aabafd9006926aa1b47617da"><div class="ttname"><a href="group__io__funcs__basic.html#ga108506a9aabafd9006926aa1b47617da">kaldi::WriteBasicType</a></div><div class="ttdeci">void WriteBasicType(std::ostream &amp;os, bool binary, T t)</div><div class="ttdoc">WriteBasicType is the name of the write function for bool, integer types, and floating-point types...</div><div class="ttdef"><b>Definition:</b> <a href="io-funcs-inl_8h_source.html#l00034">io-funcs-inl.h:34</a></div></div>
<div class="ttc" id="classkaldi_1_1CuBlockMatrix_html_ad8709048625eb0daa053903d2d8a0126"><div class="ttname"><a href="classkaldi_1_1CuBlockMatrix.html#ad8709048625eb0daa053903d2d8a0126">kaldi::CuBlockMatrix::Block</a></div><div class="ttdeci">const CuSubMatrix&lt; Real &gt; Block(MatrixIndexT b) const</div><div class="ttdef"><b>Definition:</b> <a href="cu-block-matrix_8cc_source.html#l00070">cu-block-matrix.cc:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="a961cf693bb50620c440ba546c0a110cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a961cf693bb50620c440ba546c0a110cf">&#9670;&nbsp;</a></span>CuMatrixBase< Real ></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; Real &gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cu-block-matrix_8h_source.html#l00053">53</a> of file <a class="el" href="cu-block-matrix_8h_source.html">cu-block-matrix.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="af9c3d816ad5026c65e3d0cc2c695a8a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9c3d816ad5026c65e3d0cc2c695a8a9">&#9670;&nbsp;</a></span>block_data_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structkaldi_1_1CuBlockMatrix_1_1BlockMatrixData.html">BlockMatrixData</a>&gt; block_data_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cu-block-matrix_8h_source.html#l00135">135</a> of file <a class="el" href="cu-block-matrix_8h_source.html">cu-block-matrix.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="cu-block-matrix_8cc_source.html#l00078">CuBlockMatrix&lt; Real &gt;::Block()</a>, <a class="el" href="cu-block-matrix_8h_source.html#l00075">CuBlockMatrix&lt; Real &gt;::NumBlocks()</a>, <a class="el" href="cu-block-matrix_8cc_source.html#l00096">CuBlockMatrix&lt; Real &gt;::operator=()</a>, and <a class="el" href="cu-block-matrix_8cc_source.html#l00150">CuBlockMatrix&lt; Real &gt;::Swap()</a>.</p>

</div>
</div>
<a id="a39682fdd40113b8cec059fe05e16432d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39682fdd40113b8cec059fe05e16432d">&#9670;&nbsp;</a></span>data_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1CuMatrix.html">CuMatrix</a>&lt;Real&gt; data_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cu-block-matrix_8h_source.html#l00110">110</a> of file <a class="el" href="cu-block-matrix_8h_source.html">cu-block-matrix.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="cu-block-matrix_8cc_source.html#l00078">CuBlockMatrix&lt; Real &gt;::Block()</a>, <a class="el" href="cu-block-matrix_8h_source.html#l00073">CuBlockMatrix&lt; Real &gt;::NumCols()</a>, <a class="el" href="cu-block-matrix_8cc_source.html#l00096">CuBlockMatrix&lt; Real &gt;::operator=()</a>, and <a class="el" href="cu-block-matrix_8cc_source.html#l00150">CuBlockMatrix&lt; Real &gt;::Swap()</a>.</p>

</div>
</div>
<a id="a67d96c77dd3e450528faf1755002e42b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67d96c77dd3e450528faf1755002e42b">&#9670;&nbsp;</a></span>num_rows_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aac2c220416519a2b0a7ad822ee2ef972">MatrixIndexT</a> num_rows_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cu-block-matrix_8h_source.html#l00137">137</a> of file <a class="el" href="cu-block-matrix_8h_source.html">cu-block-matrix.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="cu-block-matrix_8cc_source.html#l00078">CuBlockMatrix&lt; Real &gt;::Block()</a>, <a class="el" href="cu-block-matrix_8h_source.html#l00071">CuBlockMatrix&lt; Real &gt;::NumRows()</a>, <a class="el" href="cu-block-matrix_8cc_source.html#l00096">CuBlockMatrix&lt; Real &gt;::operator=()</a>, and <a class="el" href="cu-block-matrix_8cc_source.html#l00150">CuBlockMatrix&lt; Real &gt;::Swap()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>cudamatrix/<a class="el" href="cu-block-matrix_8h_source.html">cu-block-matrix.h</a></li>
<li>cudamatrix/<a class="el" href="cu-block-matrix_8cc_source.html">cu-block-matrix.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacekaldi.html">kaldi</a></li><li class="navelem"><a class="el" href="classkaldi_1_1CuBlockMatrix.html">CuBlockMatrix</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
