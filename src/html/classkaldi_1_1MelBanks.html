<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Kaldi: MelBanks Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" /> 
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
 <td id="projectlogo"><a href="http://kaldi-asr.org/"><img alt="Logo" src="KaldiTextAndLogoSmall.png"/ style="padding: 3px 5px 1px 5px"></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname" style="display:none">Kaldi
   </div>
  </td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief" style="display:none"></div>
    </td>
   <!--END PROJECT_BRIEF-->
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classkaldi_1_1MelBanks.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classkaldi_1_1MelBanks-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">MelBanks Class Reference<div class="ingroups"><a class="el" href="group__feat.html">FeatureExtraction</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="mel-computations_8h_source.html">mel-computations.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for MelBanks:</div>
<div class="dyncontent">
<div class="center"><img src="classkaldi_1_1MelBanks__coll__graph.png" border="0" usemap="#MelBanks_coll__map" alt="Collaboration graph"/></div>
<map name="MelBanks_coll__map" id="MelBanks_coll__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a28c12e3d92fbb958fadef3b3688ac5be"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1MelBanks.html#a28c12e3d92fbb958fadef3b3688ac5be">MelBanks</a> (const <a class="el" href="structkaldi_1_1MelBanksOptions.html">MelBanksOptions</a> &amp;opts, const <a class="el" href="structkaldi_1_1FrameExtractionOptions.html">FrameExtractionOptions</a> &amp;frame_opts, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> vtln_warp_factor)</td></tr>
<tr class="separator:a28c12e3d92fbb958fadef3b3688ac5be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72a4b70624c80414440371d7d09ea276"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1MelBanks.html#a72a4b70624c80414440371d7d09ea276">Compute</a> (const <a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;fft_energies, <a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *mel_energies_out) const</td></tr>
<tr class="memdesc:a72a4b70624c80414440371d7d09ea276"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute Mel energies (note: not log enerties).  <a href="#a72a4b70624c80414440371d7d09ea276">More...</a><br /></td></tr>
<tr class="separator:a72a4b70624c80414440371d7d09ea276"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ca259d8f25130b239e5864bba59b6ed"><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1MelBanks.html#a8ca259d8f25130b239e5864bba59b6ed">NumBins</a> () const</td></tr>
<tr class="separator:a8ca259d8f25130b239e5864bba59b6ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2977ef4bf409ec9accc5d8990690e685"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classkaldi_1_1Vector.html">Vector</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1MelBanks.html#a2977ef4bf409ec9accc5d8990690e685">GetCenterFreqs</a> () const</td></tr>
<tr class="separator:a2977ef4bf409ec9accc5d8990690e685"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a796abfa42616b0b98cc8860c86bdfc3e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1MelBanks.html#a796abfa42616b0b98cc8860c86bdfc3e">MelBanks</a> (const <a class="el" href="classkaldi_1_1MelBanks.html">MelBanks</a> &amp;other)</td></tr>
<tr class="separator:a796abfa42616b0b98cc8860c86bdfc3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:abeefc5379b444ca7fdc3f030c1df94c1"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1MelBanks.html#abeefc5379b444ca7fdc3f030c1df94c1">InverseMelScale</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> mel_freq)</td></tr>
<tr class="separator:abeefc5379b444ca7fdc3f030c1df94c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9933513967d4789dc07387ea8c5c2ba"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1MelBanks.html#ab9933513967d4789dc07387ea8c5c2ba">MelScale</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> freq)</td></tr>
<tr class="separator:ab9933513967d4789dc07387ea8c5c2ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5b030755f2890161e49f96e39262f37"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1MelBanks.html#ad5b030755f2890161e49f96e39262f37">VtlnWarpFreq</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> vtln_low_cutoff, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> vtln_high_cutoff, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> low_freq, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> high_freq, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> vtln_warp_factor, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> freq)</td></tr>
<tr class="separator:ad5b030755f2890161e49f96e39262f37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dab02fb5a882790172c5c57197998f0"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1MelBanks.html#a3dab02fb5a882790172c5c57197998f0">VtlnWarpMelFreq</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> vtln_low_cutoff, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> vtln_high_cutoff, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> low_freq, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> high_freq, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> vtln_warp_factor, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> mel_freq)</td></tr>
<tr class="separator:a3dab02fb5a882790172c5c57197998f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a5983d0fb05594c5098f5f8604eda1991"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1MelBanks.html">MelBanks</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1MelBanks.html#a5983d0fb05594c5098f5f8604eda1991">operator=</a> (const <a class="el" href="classkaldi_1_1MelBanks.html">MelBanks</a> &amp;other)</td></tr>
<tr class="separator:a5983d0fb05594c5098f5f8604eda1991"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ae6291eee0a301722a149b41b8d12a499"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1Vector.html">Vector</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1MelBanks.html#ae6291eee0a301722a149b41b8d12a499">center_freqs_</a></td></tr>
<tr class="separator:ae6291eee0a301722a149b41b8d12a499"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a034269db52b2fabaf6bc99d65ea5dfb8"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::pair&lt; int32, <a class="el" href="classkaldi_1_1Vector.html">Vector</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1MelBanks.html#a034269db52b2fabaf6bc99d65ea5dfb8">bins_</a></td></tr>
<tr class="separator:a034269db52b2fabaf6bc99d65ea5dfb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa3f4fa08a8a3b675e2dab06e29412a1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1MelBanks.html#afa3f4fa08a8a3b675e2dab06e29412a1">debug_</a></td></tr>
<tr class="separator:afa3f4fa08a8a3b675e2dab06e29412a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33a62f486ff62860204d6ab1822dcbe4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1MelBanks.html#a33a62f486ff62860204d6ab1822dcbe4">htk_mode_</a></td></tr>
<tr class="separator:a33a62f486ff62860204d6ab1822dcbe4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="mel-computations_8h_source.html#l00078">78</a> of file <a class="el" href="mel-computations_8h_source.html">mel-computations.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a28c12e3d92fbb958fadef3b3688ac5be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28c12e3d92fbb958fadef3b3688ac5be">&#9670;&nbsp;</a></span>MelBanks() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1MelBanks.html">MelBanks</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structkaldi_1_1MelBanksOptions.html">MelBanksOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>opts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structkaldi_1_1FrameExtractionOptions.html">FrameExtractionOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>frame_opts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>vtln_warp_factor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mel-computations_8cc_source.html#l00033">33</a> of file <a class="el" href="mel-computations_8cc_source.html">mel-computations.cc</a>.</p>

<p class="reference">References <a class="el" href="mel-computations_8h_source.html#l00131">MelBanks::bins_</a>, <a class="el" href="mel-computations_8h_source.html#l00127">MelBanks::center_freqs_</a>, <a class="el" href="mel-computations_8h_source.html#l00133">MelBanks::debug_</a>, <a class="el" href="mel-computations_8h_source.html#l00051">MelBanksOptions::debug_mel</a>, <a class="el" href="mel-computations_8h_source.html#l00046">MelBanksOptions::high_freq</a>, <a class="el" href="mel-computations_8h_source.html#l00055">MelBanksOptions::htk_mode</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="mel-computations_8h_source.html#l00081">MelBanks::InverseMelScale()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>, <a class="el" href="kaldi-error_8h_source.html#l00132">KALDI_LOG</a>, <a class="el" href="mel-computations_8h_source.html#l00045">MelBanksOptions::low_freq</a>, <a class="el" href="mel-computations_8h_source.html#l00085">MelBanks::MelScale()</a>, <a class="el" href="mel-computations_8h_source.html#l00044">MelBanksOptions::num_bins</a>, <a class="el" href="feature-window_8h_source.html#l00100">FrameExtractionOptions::PaddedWindowSize()</a>, <a class="el" href="kaldi-vector_8h_source.html#l00093">VectorBase&lt; Real &gt;::Range()</a>, <a class="el" href="feature-window_8h_source.html#l00036">FrameExtractionOptions::samp_freq</a>, <a class="el" href="mel-computations_8h_source.html#l00049">MelBanksOptions::vtln_high</a>, <a class="el" href="mel-computations_8h_source.html#l00048">MelBanksOptions::vtln_low</a>, and <a class="el" href="mel-computations_8cc_source.html#l00213">MelBanks::VtlnWarpMelFreq()</a>.</p>
<div class="fragment"><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                                              :</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <a class="code" href="classkaldi_1_1MelBanks.html#a33a62f486ff62860204d6ab1822dcbe4">htk_mode_</a>(opts.htk_mode) {</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  int32 num_bins = opts.num_bins;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="keywordflow">if</span> (num_bins &lt; 3) <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Must have at least 3 mel bins&quot;</span>;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> sample_freq = frame_opts.samp_freq;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  int32 window_length_padded = frame_opts.PaddedWindowSize();</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(window_length_padded % 2 == 0);</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  int32 num_fft_bins = window_length_padded / 2;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> nyquist = 0.5 * sample_freq;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> low_freq = opts.low_freq, high_freq;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keywordflow">if</span> (opts.high_freq &gt; 0.0)</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    high_freq = opts.high_freq;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    high_freq = nyquist + opts.high_freq;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="keywordflow">if</span> (low_freq &lt; 0.0 || low_freq &gt;= nyquist</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;      || high_freq &lt;= 0.0 || high_freq &gt; nyquist</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;      || high_freq &lt;= low_freq)</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Bad values in options: low-freq &quot;</span> &lt;&lt; low_freq</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;              &lt;&lt; <span class="stringliteral">&quot; and high-freq &quot;</span> &lt;&lt; high_freq &lt;&lt; <span class="stringliteral">&quot; vs. nyquist &quot;</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;              &lt;&lt; nyquist;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> fft_bin_width = sample_freq / window_length_padded;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="comment">// fft-bin width [think of it as Nyquist-freq / half-window-length]</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> mel_low_freq = <a class="code" href="classkaldi_1_1MelBanks.html#ab9933513967d4789dc07387ea8c5c2ba">MelScale</a>(low_freq);</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> mel_high_freq = <a class="code" href="classkaldi_1_1MelBanks.html#ab9933513967d4789dc07387ea8c5c2ba">MelScale</a>(high_freq);</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <a class="code" href="classkaldi_1_1MelBanks.html#afa3f4fa08a8a3b675e2dab06e29412a1">debug_</a> = opts.debug_mel;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="comment">// divide by num_bins+1 in next line because of end-effects where the bins</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="comment">// spread out to the sides.</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> mel_freq_delta = (mel_high_freq - mel_low_freq) / (num_bins+1);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> vtln_low = opts.vtln_low,</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      vtln_high = opts.vtln_high;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keywordflow">if</span> (vtln_high &lt; 0.0) {</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    vtln_high += nyquist;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  }</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keywordflow">if</span> (vtln_warp_factor != 1.0 &amp;&amp;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      (vtln_low &lt; 0.0 || vtln_low &lt;= low_freq</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;       || vtln_low &gt;= high_freq</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;       || vtln_high &lt;= 0.0 || vtln_high &gt;= high_freq</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;       || vtln_high &lt;= vtln_low))</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Bad values in options: vtln-low &quot;</span> &lt;&lt; vtln_low</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;              &lt;&lt; <span class="stringliteral">&quot; and vtln-high &quot;</span> &lt;&lt; vtln_high &lt;&lt; <span class="stringliteral">&quot;, versus &quot;</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;low-freq &quot;</span> &lt;&lt; low_freq &lt;&lt; <span class="stringliteral">&quot; and high-freq &quot;</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;              &lt;&lt; high_freq;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <a class="code" href="classkaldi_1_1MelBanks.html#a034269db52b2fabaf6bc99d65ea5dfb8">bins_</a>.resize(num_bins);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <a class="code" href="classkaldi_1_1MelBanks.html#ae6291eee0a301722a149b41b8d12a499">center_freqs_</a>.Resize(num_bins);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keywordflow">for</span> (int32 bin = 0; bin &lt; num_bins; bin++) {</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> left_mel = mel_low_freq + bin * mel_freq_delta,</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        center_mel = mel_low_freq + (bin + 1) * mel_freq_delta,</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        right_mel = mel_low_freq + (bin + 2) * mel_freq_delta;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">if</span> (vtln_warp_factor != 1.0) {</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      left_mel = <a class="code" href="classkaldi_1_1MelBanks.html#a3dab02fb5a882790172c5c57197998f0">VtlnWarpMelFreq</a>(vtln_low, vtln_high, low_freq, high_freq,</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                                 vtln_warp_factor, left_mel);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      center_mel = <a class="code" href="classkaldi_1_1MelBanks.html#a3dab02fb5a882790172c5c57197998f0">VtlnWarpMelFreq</a>(vtln_low, vtln_high, low_freq, high_freq,</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                                 vtln_warp_factor, center_mel);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      right_mel = <a class="code" href="classkaldi_1_1MelBanks.html#a3dab02fb5a882790172c5c57197998f0">VtlnWarpMelFreq</a>(vtln_low, vtln_high, low_freq, high_freq,</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                                  vtln_warp_factor, right_mel);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="classkaldi_1_1MelBanks.html#ae6291eee0a301722a149b41b8d12a499">center_freqs_</a>(bin) = <a class="code" href="classkaldi_1_1MelBanks.html#abeefc5379b444ca7fdc3f030c1df94c1">InverseMelScale</a>(center_mel);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// this_bin will be a vector of coefficients that is only</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">// nonzero where this mel bin is active.</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    Vector&lt;BaseFloat&gt; this_bin(num_fft_bins);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    int32 first_index = -1, last_index = -1;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; num_fft_bins; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> freq = (fft_bin_width * <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>);  <span class="comment">// Center frequency of this fft</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                                             <span class="comment">// bin.</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> mel = <a class="code" href="classkaldi_1_1MelBanks.html#ab9933513967d4789dc07387ea8c5c2ba">MelScale</a>(freq);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      <span class="keywordflow">if</span> (mel &gt; left_mel &amp;&amp; mel &lt; right_mel) {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> weight;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="keywordflow">if</span> (mel &lt;= center_mel)</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;          weight = (mel - left_mel) / (center_mel - left_mel);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;         weight = (right_mel-mel) / (right_mel-center_mel);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        this_bin(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) = weight;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordflow">if</span> (first_index == -1)</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;          first_index = <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        last_index = <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      }</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    }</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(first_index != -1 &amp;&amp; last_index &gt;= first_index</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                 &amp;&amp; <span class="stringliteral">&quot;You may have set --num-mel-bins too large.&quot;</span>);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="classkaldi_1_1MelBanks.html#a034269db52b2fabaf6bc99d65ea5dfb8">bins_</a>[bin].first = first_index;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    int32 size = last_index + 1 - first_index;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <a class="code" href="classkaldi_1_1MelBanks.html#a034269db52b2fabaf6bc99d65ea5dfb8">bins_</a>[bin].second.Resize(size);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <a class="code" href="classkaldi_1_1MelBanks.html#a034269db52b2fabaf6bc99d65ea5dfb8">bins_</a>[bin].second.CopyFromVec(this_bin.Range(first_index, size));</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="comment">// Replicate a bug in HTK, for testing purposes.</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">if</span> (opts.htk_mode &amp;&amp; bin == 0 &amp;&amp; mel_low_freq != 0.0)</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <a class="code" href="classkaldi_1_1MelBanks.html#a034269db52b2fabaf6bc99d65ea5dfb8">bins_</a>[bin].second(0) = 0.0;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  }</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1MelBanks.html#afa3f4fa08a8a3b675e2dab06e29412a1">debug_</a>) {</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="classkaldi_1_1MelBanks.html#a034269db52b2fabaf6bc99d65ea5dfb8">bins_</a>.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <a class="code" href="group__error__group.html#gaf8fb55454306b60c9c1e07a6ef9d341a">KALDI_LOG</a> &lt;&lt; <span class="stringliteral">&quot;bin &quot;</span> &lt;&lt; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;&lt; <span class="stringliteral">&quot;, offset = &quot;</span> &lt;&lt; <a class="code" href="classkaldi_1_1MelBanks.html#a034269db52b2fabaf6bc99d65ea5dfb8">bins_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].first</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                &lt;&lt; <span class="stringliteral">&quot;, vec = &quot;</span> &lt;&lt; <a class="code" href="classkaldi_1_1MelBanks.html#a034269db52b2fabaf6bc99d65ea5dfb8">bins_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].second;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    }</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  }</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;}</div><div class="ttc" id="classkaldi_1_1MelBanks_html_ab9933513967d4789dc07387ea8c5c2ba"><div class="ttname"><a href="classkaldi_1_1MelBanks.html#ab9933513967d4789dc07387ea8c5c2ba">kaldi::MelBanks::MelScale</a></div><div class="ttdeci">static BaseFloat MelScale(BaseFloat freq)</div><div class="ttdef"><b>Definition:</b> <a href="mel-computations_8h_source.html#l00085">mel-computations.h:85</a></div></div>
<div class="ttc" id="classkaldi_1_1MelBanks_html_a034269db52b2fabaf6bc99d65ea5dfb8"><div class="ttname"><a href="classkaldi_1_1MelBanks.html#a034269db52b2fabaf6bc99d65ea5dfb8">kaldi::MelBanks::bins_</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; int32, Vector&lt; BaseFloat &gt; &gt; &gt; bins_</div><div class="ttdef"><b>Definition:</b> <a href="mel-computations_8h_source.html#l00131">mel-computations.h:131</a></div></div>
<div class="ttc" id="classkaldi_1_1MelBanks_html_ae6291eee0a301722a149b41b8d12a499"><div class="ttname"><a href="classkaldi_1_1MelBanks.html#ae6291eee0a301722a149b41b8d12a499">kaldi::MelBanks::center_freqs_</a></div><div class="ttdeci">Vector&lt; BaseFloat &gt; center_freqs_</div><div class="ttdef"><b>Definition:</b> <a href="mel-computations_8h_source.html#l00127">mel-computations.h:127</a></div></div>
<div class="ttc" id="classkaldi_1_1MelBanks_html_afa3f4fa08a8a3b675e2dab06e29412a1"><div class="ttname"><a href="classkaldi_1_1MelBanks.html#afa3f4fa08a8a3b675e2dab06e29412a1">kaldi::MelBanks::debug_</a></div><div class="ttdeci">bool debug_</div><div class="ttdef"><b>Definition:</b> <a href="mel-computations_8h_source.html#l00133">mel-computations.h:133</a></div></div>
<div class="ttc" id="classkaldi_1_1MelBanks_html_a33a62f486ff62860204d6ab1822dcbe4"><div class="ttname"><a href="classkaldi_1_1MelBanks.html#a33a62f486ff62860204d6ab1822dcbe4">kaldi::MelBanks::htk_mode_</a></div><div class="ttdeci">bool htk_mode_</div><div class="ttdef"><b>Definition:</b> <a href="mel-computations_8h_source.html#l00134">mel-computations.h:134</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1MelBanks_html_abeefc5379b444ca7fdc3f030c1df94c1"><div class="ttname"><a href="classkaldi_1_1MelBanks.html#abeefc5379b444ca7fdc3f030c1df94c1">kaldi::MelBanks::InverseMelScale</a></div><div class="ttdeci">static BaseFloat InverseMelScale(BaseFloat mel_freq)</div><div class="ttdef"><b>Definition:</b> <a href="mel-computations_8h_source.html#l00081">mel-computations.h:81</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
<div class="ttc" id="classkaldi_1_1MelBanks_html_a3dab02fb5a882790172c5c57197998f0"><div class="ttname"><a href="classkaldi_1_1MelBanks.html#a3dab02fb5a882790172c5c57197998f0">kaldi::MelBanks::VtlnWarpMelFreq</a></div><div class="ttdeci">static BaseFloat VtlnWarpMelFreq(BaseFloat vtln_low_cutoff, BaseFloat vtln_high_cutoff, BaseFloat low_freq, BaseFloat high_freq, BaseFloat vtln_warp_factor, BaseFloat mel_freq)</div><div class="ttdef"><b>Definition:</b> <a href="mel-computations_8cc_source.html#l00213">mel-computations.cc:213</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="group__error__group_html_gaf8fb55454306b60c9c1e07a6ef9d341a"><div class="ttname"><a href="group__error__group.html#gaf8fb55454306b60c9c1e07a6ef9d341a">KALDI_LOG</a></div><div class="ttdeci">#define KALDI_LOG</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00132">kaldi-error.h:132</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a796abfa42616b0b98cc8860c86bdfc3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a796abfa42616b0b98cc8860c86bdfc3e">&#9670;&nbsp;</a></span>MelBanks() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1MelBanks.html">MelBanks</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1MelBanks.html">MelBanks</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mel-computations_8cc_source.html#l00144">144</a> of file <a class="el" href="mel-computations_8cc_source.html">mel-computations.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                                       :</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <a class="code" href="classkaldi_1_1MelBanks.html#ae6291eee0a301722a149b41b8d12a499">center_freqs_</a>(other.center_freqs_),</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <a class="code" href="classkaldi_1_1MelBanks.html#a034269db52b2fabaf6bc99d65ea5dfb8">bins_</a>(other.bins_),</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <a class="code" href="classkaldi_1_1MelBanks.html#afa3f4fa08a8a3b675e2dab06e29412a1">debug_</a>(other.debug_),</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <a class="code" href="classkaldi_1_1MelBanks.html#a33a62f486ff62860204d6ab1822dcbe4">htk_mode_</a>(other.htk_mode_) { }</div><div class="ttc" id="classkaldi_1_1MelBanks_html_a034269db52b2fabaf6bc99d65ea5dfb8"><div class="ttname"><a href="classkaldi_1_1MelBanks.html#a034269db52b2fabaf6bc99d65ea5dfb8">kaldi::MelBanks::bins_</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; int32, Vector&lt; BaseFloat &gt; &gt; &gt; bins_</div><div class="ttdef"><b>Definition:</b> <a href="mel-computations_8h_source.html#l00131">mel-computations.h:131</a></div></div>
<div class="ttc" id="classkaldi_1_1MelBanks_html_ae6291eee0a301722a149b41b8d12a499"><div class="ttname"><a href="classkaldi_1_1MelBanks.html#ae6291eee0a301722a149b41b8d12a499">kaldi::MelBanks::center_freqs_</a></div><div class="ttdeci">Vector&lt; BaseFloat &gt; center_freqs_</div><div class="ttdef"><b>Definition:</b> <a href="mel-computations_8h_source.html#l00127">mel-computations.h:127</a></div></div>
<div class="ttc" id="classkaldi_1_1MelBanks_html_afa3f4fa08a8a3b675e2dab06e29412a1"><div class="ttname"><a href="classkaldi_1_1MelBanks.html#afa3f4fa08a8a3b675e2dab06e29412a1">kaldi::MelBanks::debug_</a></div><div class="ttdeci">bool debug_</div><div class="ttdef"><b>Definition:</b> <a href="mel-computations_8h_source.html#l00133">mel-computations.h:133</a></div></div>
<div class="ttc" id="classkaldi_1_1MelBanks_html_a33a62f486ff62860204d6ab1822dcbe4"><div class="ttname"><a href="classkaldi_1_1MelBanks.html#a33a62f486ff62860204d6ab1822dcbe4">kaldi::MelBanks::htk_mode_</a></div><div class="ttdeci">bool htk_mode_</div><div class="ttdef"><b>Definition:</b> <a href="mel-computations_8h_source.html#l00134">mel-computations.h:134</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a72a4b70624c80414440371d7d09ea276"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72a4b70624c80414440371d7d09ea276">&#9670;&nbsp;</a></span>Compute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Compute </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>fft_energies</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *&#160;</td>
          <td class="paramname"><em>mel_energies_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute Mel energies (note: not log enerties). </p>
<p>At input, "fft_energies" contains the FFT energies (not log). </p>

<p class="definition">Definition at line <a class="el" href="mel-computations_8cc_source.html#l00226">226</a> of file <a class="el" href="mel-computations_8cc_source.html">mel-computations.cc</a>.</p>

<p class="reference">References <a class="el" href="mel-computations_8h_source.html#l00131">MelBanks::bins_</a>, <a class="el" href="mel-computations_8h_source.html#l00133">MelBanks::debug_</a>, <a class="el" href="kaldi-vector_8h_source.html#l00063">VectorBase&lt; Real &gt;::Dim()</a>, <a class="el" href="mel-computations_8h_source.html#l00134">MelBanks::htk_mode_</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="kaldi-math_8h_source.html#l00072">KALDI_ISNAN</a>, <a class="el" href="kaldi-vector_8h_source.html#l00093">VectorBase&lt; Real &gt;::Range()</a>, and <a class="el" href="kaldi-vector_8cc_source.html#l00037">kaldi::VecVec()</a>.</p>

<p class="reference">Referenced by <a class="el" href="feature-fbank_8cc_source.html#l00072">FbankComputer::Compute()</a>.</p>
<div class="fragment"><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                                                                      {</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  int32 num_bins = <a class="code" href="classkaldi_1_1MelBanks.html#a034269db52b2fabaf6bc99d65ea5dfb8">bins_</a>.size();</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(mel_energies_out-&gt;Dim() == num_bins);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; num_bins; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    int32 offset = <a class="code" href="classkaldi_1_1MelBanks.html#a034269db52b2fabaf6bc99d65ea5dfb8">bins_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].first;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keyword">const</span> Vector&lt;BaseFloat&gt; &amp;v(<a class="code" href="classkaldi_1_1MelBanks.html#a034269db52b2fabaf6bc99d65ea5dfb8">bins_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].second);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> energy = <a class="code" href="group__matrix__funcs__scalar.html#ga4750cd6f7a02a013435779588056b153">VecVec</a>(v, power_spectrum.Range(offset, v.Dim()));</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="comment">// HTK-like flooring- for testing purposes (we prefer dither)</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1MelBanks.html#a33a62f486ff62860204d6ab1822dcbe4">htk_mode_</a> &amp;&amp; energy &lt; 1.0) energy = 1.0;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    (*mel_energies_out)(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) = energy;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="comment">// The following assert was added due to a problem with OpenBlas that</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="comment">// we had at one point (it was a bug in that library).  Just to detect</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="comment">// it early.</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(!<a class="code" href="kaldi-math_8h.html#a784e8ae012c86a36a1f764b8ed829746">KALDI_ISNAN</a>((*mel_energies_out)(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>)));</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  }</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1MelBanks.html#afa3f4fa08a8a3b675e2dab06e29412a1">debug_</a>) {</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    fprintf(stderr, <span class="stringliteral">&quot;MEL BANKS:\n&quot;</span>);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; num_bins; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      fprintf(stderr, <span class="stringliteral">&quot; %f&quot;</span>, (*mel_energies_out)(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    fprintf(stderr, <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  }</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;}</div><div class="ttc" id="classkaldi_1_1MelBanks_html_a034269db52b2fabaf6bc99d65ea5dfb8"><div class="ttname"><a href="classkaldi_1_1MelBanks.html#a034269db52b2fabaf6bc99d65ea5dfb8">kaldi::MelBanks::bins_</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; int32, Vector&lt; BaseFloat &gt; &gt; &gt; bins_</div><div class="ttdef"><b>Definition:</b> <a href="mel-computations_8h_source.html#l00131">mel-computations.h:131</a></div></div>
<div class="ttc" id="classkaldi_1_1MelBanks_html_afa3f4fa08a8a3b675e2dab06e29412a1"><div class="ttname"><a href="classkaldi_1_1MelBanks.html#afa3f4fa08a8a3b675e2dab06e29412a1">kaldi::MelBanks::debug_</a></div><div class="ttdeci">bool debug_</div><div class="ttdef"><b>Definition:</b> <a href="mel-computations_8h_source.html#l00133">mel-computations.h:133</a></div></div>
<div class="ttc" id="classkaldi_1_1MelBanks_html_a33a62f486ff62860204d6ab1822dcbe4"><div class="ttname"><a href="classkaldi_1_1MelBanks.html#a33a62f486ff62860204d6ab1822dcbe4">kaldi::MelBanks::htk_mode_</a></div><div class="ttdeci">bool htk_mode_</div><div class="ttdef"><b>Definition:</b> <a href="mel-computations_8h_source.html#l00134">mel-computations.h:134</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="kaldi-math_8h_html_a784e8ae012c86a36a1f764b8ed829746"><div class="ttname"><a href="kaldi-math_8h.html#a784e8ae012c86a36a1f764b8ed829746">KALDI_ISNAN</a></div><div class="ttdeci">#define KALDI_ISNAN</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00072">kaldi-math.h:72</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="group__matrix__funcs__scalar_html_ga4750cd6f7a02a013435779588056b153"><div class="ttname"><a href="group__matrix__funcs__scalar.html#ga4750cd6f7a02a013435779588056b153">kaldi::VecVec</a></div><div class="ttdeci">Real VecVec(const VectorBase&lt; Real &gt; &amp;a, const VectorBase&lt; Real &gt; &amp;b)</div><div class="ttdoc">Returns dot product between v1 and v2. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-vector_8cc_source.html#l00037">kaldi-vector.cc:37</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2977ef4bf409ec9accc5d8990690e685"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2977ef4bf409ec9accc5d8990690e685">&#9670;&nbsp;</a></span>GetCenterFreqs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classkaldi_1_1Vector.html">Vector</a>&lt;<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&gt;&amp; GetCenterFreqs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mel-computations_8h_source.html#l00117">117</a> of file <a class="el" href="mel-computations_8h_source.html">mel-computations.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mel-computations_8cc_source.html#l00311">kaldi::GetEqualLoudnessVector()</a>.</p>
<div class="fragment"><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1MelBanks.html#ae6291eee0a301722a149b41b8d12a499">center_freqs_</a>; }</div><div class="ttc" id="classkaldi_1_1MelBanks_html_ae6291eee0a301722a149b41b8d12a499"><div class="ttname"><a href="classkaldi_1_1MelBanks.html#ae6291eee0a301722a149b41b8d12a499">kaldi::MelBanks::center_freqs_</a></div><div class="ttdeci">Vector&lt; BaseFloat &gt; center_freqs_</div><div class="ttdef"><b>Definition:</b> <a href="mel-computations_8h_source.html#l00127">mel-computations.h:127</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abeefc5379b444ca7fdc3f030c1df94c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abeefc5379b444ca7fdc3f030c1df94c1">&#9670;&nbsp;</a></span>InverseMelScale()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> InverseMelScale </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>mel_freq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mel-computations_8h_source.html#l00081">81</a> of file <a class="el" href="mel-computations_8h_source.html">mel-computations.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mel-computations_8cc_source.html#l00033">MelBanks::MelBanks()</a>, and <a class="el" href="mel-computations_8cc_source.html#l00213">MelBanks::VtlnWarpMelFreq()</a>.</p>
<div class="fragment"><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                                                              {</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">return</span> 700.0f * (expf (mel_freq / 1127.0f) - 1.0f);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  }</div></div><!-- fragment -->
</div>
</div>
<a id="ab9933513967d4789dc07387ea8c5c2ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9933513967d4789dc07387ea8c5c2ba">&#9670;&nbsp;</a></span>MelScale()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> MelScale </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>freq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mel-computations_8h_source.html#l00085">85</a> of file <a class="el" href="mel-computations_8h_source.html">mel-computations.h</a>.</p>

<p class="reference">References <a class="el" href="mel-computations_8h_source.html#l00046">MelBanksOptions::high_freq</a>, and <a class="el" href="mel-computations_8h_source.html#l00045">MelBanksOptions::low_freq</a>.</p>

<p class="reference">Referenced by <a class="el" href="mel-computations_8cc_source.html#l00033">MelBanks::MelBanks()</a>, and <a class="el" href="mel-computations_8cc_source.html#l00213">MelBanks::VtlnWarpMelFreq()</a>.</p>
<div class="fragment"><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                                                   {</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">return</span> 1127.0f * logf (1.0f + freq / 700.0f);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  }</div></div><!-- fragment -->
</div>
</div>
<a id="a8ca259d8f25130b239e5864bba59b6ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ca259d8f25130b239e5864bba59b6ed">&#9670;&nbsp;</a></span>NumBins()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 NumBins </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mel-computations_8h_source.html#l00114">114</a> of file <a class="el" href="mel-computations_8h_source.html">mel-computations.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mel-computations_8cc_source.html#l00311">kaldi::GetEqualLoudnessVector()</a>.</p>
<div class="fragment"><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1MelBanks.html#a034269db52b2fabaf6bc99d65ea5dfb8">bins_</a>.size(); }</div><div class="ttc" id="classkaldi_1_1MelBanks_html_a034269db52b2fabaf6bc99d65ea5dfb8"><div class="ttname"><a href="classkaldi_1_1MelBanks.html#a034269db52b2fabaf6bc99d65ea5dfb8">kaldi::MelBanks::bins_</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; int32, Vector&lt; BaseFloat &gt; &gt; &gt; bins_</div><div class="ttdef"><b>Definition:</b> <a href="mel-computations_8h_source.html#l00131">mel-computations.h:131</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5983d0fb05594c5098f5f8604eda1991"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5983d0fb05594c5098f5f8604eda1991">&#9670;&nbsp;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1MelBanks.html">MelBanks</a>&amp; operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1MelBanks.html">MelBanks</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad5b030755f2890161e49f96e39262f37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5b030755f2890161e49f96e39262f37">&#9670;&nbsp;</a></span>VtlnWarpFreq()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> VtlnWarpFreq </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>vtln_low_cutoff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>vtln_high_cutoff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>low_freq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>high_freq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>vtln_warp_factor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>freq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This computes a VTLN warping function that is not the same as HTK's one, but has similar inputs (this function has the advantage of never producing empty bins).</p>
<p>This function computes a warp function F(freq), defined between low_freq and high_freq inclusive, with the following properties: F(low_freq) == low_freq F(high_freq) == high_freq The function is continuous and piecewise linear with two inflection points. The lower inflection point (measured in terms of the unwarped frequency) is at frequency l, determined as described below. The higher inflection point is at a frequency h, determined as described below. If l &lt;= f &lt;= h, then F(f) = f/vtln_warp_factor. If the higher inflection point (measured in terms of the unwarped frequency) is at h, then max(h, F(h)) == vtln_high_cutoff. Since (by the last point) F(h) == h/vtln_warp_factor, then max(h, h/vtln_warp_factor) == vtln_high_cutoff, so h = vtln_high_cutoff / max(1, 1/vtln_warp_factor). = vtln_high_cutoff * min(1, vtln_warp_factor). If the lower inflection point (measured in terms of the unwarped frequency) is at l, then min(l, F(l)) == vtln_low_cutoff This implies that l = vtln_low_cutoff / min(1, 1/vtln_warp_factor) = vtln_low_cutoff * max(1, vtln_warp_factor) </p>

<p class="definition">Definition at line <a class="el" href="mel-computations_8cc_source.html#l00150">150</a> of file <a class="el" href="mel-computations_8cc_source.html">mel-computations.cc</a>.</p>

<p class="reference">References <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>.</p>

<p class="reference">Referenced by <a class="el" href="feature-mfcc-test_8cc_source.html#l00620">UnitTestVtln()</a>, and <a class="el" href="mel-computations_8cc_source.html#l00213">MelBanks::VtlnWarpMelFreq()</a>.</p>
<div class="fragment"><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                                                 {</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keywordflow">if</span> (freq &lt; low_freq || freq &gt; high_freq) <span class="keywordflow">return</span> freq;  <span class="comment">// in case this gets called</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="comment">// for out-of-range frequencies, just return the freq.</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(vtln_low_cutoff &gt; low_freq &amp;&amp;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;               <span class="stringliteral">&quot;be sure to set the --vtln-low option higher than --low-freq&quot;</span>);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(vtln_high_cutoff &lt; high_freq &amp;&amp;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;               <span class="stringliteral">&quot;be sure to set the --vtln-high option lower than --high-freq [or negative]&quot;</span>);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> one = 1.0;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> l = vtln_low_cutoff * std::max(one, vtln_warp_factor);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> h = vtln_high_cutoff * std::min(one, vtln_warp_factor);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> scale = 1.0 / vtln_warp_factor;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> Fl = scale * l;  <span class="comment">// F(l);</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> Fh = scale * h;  <span class="comment">// F(h);</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(l &gt; low_freq &amp;&amp; h &lt; high_freq);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="comment">// slope of left part of the 3-piece linear function</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> scale_left = (Fl - low_freq) / (l - low_freq);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="comment">// [slope of center part is just &quot;scale&quot;]</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="comment">// slope of right part of the 3-piece linear function</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> scale_right = (high_freq - Fh) / (high_freq - h);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keywordflow">if</span> (freq &lt; l) {</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">return</span> low_freq + scale_left * (freq - low_freq);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (freq &lt; h) {</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">return</span> scale * freq;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  } <span class="keywordflow">else</span> {  <span class="comment">// freq &gt;= h</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">return</span> high_freq + scale_right * (freq - high_freq);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  }</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;}</div><div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3dab02fb5a882790172c5c57197998f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dab02fb5a882790172c5c57197998f0">&#9670;&nbsp;</a></span>VtlnWarpMelFreq()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> VtlnWarpMelFreq </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>vtln_low_cutoff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>vtln_high_cutoff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>low_freq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>high_freq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>vtln_warp_factor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>mel_freq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mel-computations_8cc_source.html#l00213">213</a> of file <a class="el" href="mel-computations_8cc_source.html">mel-computations.cc</a>.</p>

<p class="reference">References <a class="el" href="mel-computations_8h_source.html#l00081">MelBanks::InverseMelScale()</a>, <a class="el" href="mel-computations_8h_source.html#l00085">MelBanks::MelScale()</a>, and <a class="el" href="mel-computations_8cc_source.html#l00150">MelBanks::VtlnWarpFreq()</a>.</p>

<p class="reference">Referenced by <a class="el" href="mel-computations_8cc_source.html#l00033">MelBanks::MelBanks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                                                        {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1MelBanks.html#ab9933513967d4789dc07387ea8c5c2ba">MelScale</a>(<a class="code" href="classkaldi_1_1MelBanks.html#ad5b030755f2890161e49f96e39262f37">VtlnWarpFreq</a>(vtln_low_cutoff, vtln_high_cutoff,</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                               low_freq, high_freq,</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                               vtln_warp_factor, <a class="code" href="classkaldi_1_1MelBanks.html#abeefc5379b444ca7fdc3f030c1df94c1">InverseMelScale</a>(mel_freq)));</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;}</div><div class="ttc" id="classkaldi_1_1MelBanks_html_ab9933513967d4789dc07387ea8c5c2ba"><div class="ttname"><a href="classkaldi_1_1MelBanks.html#ab9933513967d4789dc07387ea8c5c2ba">kaldi::MelBanks::MelScale</a></div><div class="ttdeci">static BaseFloat MelScale(BaseFloat freq)</div><div class="ttdef"><b>Definition:</b> <a href="mel-computations_8h_source.html#l00085">mel-computations.h:85</a></div></div>
<div class="ttc" id="classkaldi_1_1MelBanks_html_ad5b030755f2890161e49f96e39262f37"><div class="ttname"><a href="classkaldi_1_1MelBanks.html#ad5b030755f2890161e49f96e39262f37">kaldi::MelBanks::VtlnWarpFreq</a></div><div class="ttdeci">static BaseFloat VtlnWarpFreq(BaseFloat vtln_low_cutoff, BaseFloat vtln_high_cutoff, BaseFloat low_freq, BaseFloat high_freq, BaseFloat vtln_warp_factor, BaseFloat freq)</div><div class="ttdef"><b>Definition:</b> <a href="mel-computations_8cc_source.html#l00150">mel-computations.cc:150</a></div></div>
<div class="ttc" id="classkaldi_1_1MelBanks_html_abeefc5379b444ca7fdc3f030c1df94c1"><div class="ttname"><a href="classkaldi_1_1MelBanks.html#abeefc5379b444ca7fdc3f030c1df94c1">kaldi::MelBanks::InverseMelScale</a></div><div class="ttdeci">static BaseFloat InverseMelScale(BaseFloat mel_freq)</div><div class="ttdef"><b>Definition:</b> <a href="mel-computations_8h_source.html#l00081">mel-computations.h:81</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a034269db52b2fabaf6bc99d65ea5dfb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a034269db52b2fabaf6bc99d65ea5dfb8">&#9670;&nbsp;</a></span>bins_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::pair&lt;int32, <a class="el" href="classkaldi_1_1Vector.html">Vector</a>&lt;<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&gt; &gt; &gt; bins_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mel-computations_8h_source.html#l00131">131</a> of file <a class="el" href="mel-computations_8h_source.html">mel-computations.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mel-computations_8cc_source.html#l00226">MelBanks::Compute()</a>, and <a class="el" href="mel-computations_8cc_source.html#l00033">MelBanks::MelBanks()</a>.</p>

</div>
</div>
<a id="ae6291eee0a301722a149b41b8d12a499"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6291eee0a301722a149b41b8d12a499">&#9670;&nbsp;</a></span>center_freqs_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1Vector.html">Vector</a>&lt;<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&gt; center_freqs_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mel-computations_8h_source.html#l00127">127</a> of file <a class="el" href="mel-computations_8h_source.html">mel-computations.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mel-computations_8cc_source.html#l00033">MelBanks::MelBanks()</a>.</p>

</div>
</div>
<a id="afa3f4fa08a8a3b675e2dab06e29412a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa3f4fa08a8a3b675e2dab06e29412a1">&#9670;&nbsp;</a></span>debug_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> debug_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mel-computations_8h_source.html#l00133">133</a> of file <a class="el" href="mel-computations_8h_source.html">mel-computations.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mel-computations_8cc_source.html#l00226">MelBanks::Compute()</a>, and <a class="el" href="mel-computations_8cc_source.html#l00033">MelBanks::MelBanks()</a>.</p>

</div>
</div>
<a id="a33a62f486ff62860204d6ab1822dcbe4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33a62f486ff62860204d6ab1822dcbe4">&#9670;&nbsp;</a></span>htk_mode_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> htk_mode_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mel-computations_8h_source.html#l00134">134</a> of file <a class="el" href="mel-computations_8h_source.html">mel-computations.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mel-computations_8cc_source.html#l00226">MelBanks::Compute()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>feat/<a class="el" href="mel-computations_8h_source.html">mel-computations.h</a></li>
<li>feat/<a class="el" href="mel-computations_8cc_source.html">mel-computations.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacekaldi.html">kaldi</a></li><li class="navelem"><a class="el" href="classkaldi_1_1MelBanks.html">MelBanks</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
