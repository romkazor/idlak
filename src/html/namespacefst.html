<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Kaldi: fst Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" /> 
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
 <td id="projectlogo"><a href="http://kaldi-asr.org/"><img alt="Logo" src="KaldiTextAndLogoSmall.png"/ style="padding: 3px 5px 1px 5px"></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname" style="display:none">Kaldi
   </div>
  </td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief" style="display:none"></div>
    </td>
   <!--END PROJECT_BRIEF-->
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('namespacefst.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">fst Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>For an extended explanation of the framework of which grammar-fsts are a part, please see <a class="el" href="grammar.html">Support for grammars and graphs with on-the-fly parts.</a> (i.e.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacefst_1_1internal"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst_1_1internal.html">internal</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespacefst_1_1pre__determinize__helpers"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst_1_1pre__determinize__helpers.html">pre_determinize_helpers</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1ArcIterator_3_01GrammarFst_01_4.html">ArcIterator&lt; GrammarFst &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the overridden template for class ArcIterator for <a class="el" href="classfst_1_1GrammarFst.html" title="GrammarFst is an FST that is &#39;stitched together&#39; from multiple FSTs, that can recursively incorporate...">GrammarFst</a>.  <a href="classfst_1_1ArcIterator_3_01GrammarFst_01_4.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1ArcIterator_3_01TrivialFactorWeightFst_3_01A_00_01F_01_4_01_4.html">ArcIterator&lt; TrivialFactorWeightFst&lt; A, F &gt; &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1BackoffDeterministicOnDemandFst.html">BackoffDeterministicOnDemandFst</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class wraps an Fst, representing a language model, using the interface for "BackoffDeterministicOnDemandFst".  <a href="classfst_1_1BackoffDeterministicOnDemandFst.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1CacheDeterministicOnDemandFst.html">CacheDeterministicOnDemandFst</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1CompactLatticeMinimizer.html">CompactLatticeMinimizer</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1CompactLatticePusher.html">CompactLatticePusher</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1CompactLatticeWeightCommonDivisorTpl.html">CompactLatticeWeightCommonDivisorTpl</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1ComposeDeterministicOnDemandFst.html">ComposeDeterministicOnDemandFst</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1DeterministicOnDemandFst.html">DeterministicOnDemandFst</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">class <a class="el" href="classfst_1_1DeterministicOnDemandFst.html" title="class DeterministicOnDemandFst is an &quot;FST-like&quot; base-class. ">DeterministicOnDemandFst</a> is an "FST-like" base-class.  <a href="classfst_1_1DeterministicOnDemandFst.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfst_1_1DeterminizeLatticeOptions.html">DeterminizeLatticeOptions</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfst_1_1DeterminizeLatticePhonePrunedOptions.html">DeterminizeLatticePhonePrunedOptions</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfst_1_1DeterminizeLatticePrunedOptions.html">DeterminizeLatticePrunedOptions</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1DeterminizerStar.html">DeterminizerStar</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1DfsOrderVisitor.html">DfsOrderVisitor</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1GrammarFst.html">GrammarFst</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classfst_1_1GrammarFst.html" title="GrammarFst is an FST that is &#39;stitched together&#39; from multiple FSTs, that can recursively incorporate...">GrammarFst</a> is an FST that is 'stitched together' from multiple FSTs, that can recursively incorporate each other.  <a href="classfst_1_1GrammarFst.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfst_1_1GrammarFstArc.html">GrammarFstArc</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1GrammarFstPreparer.html">GrammarFstPreparer</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfst_1_1IdentityFunction.html">IdentityFunction</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1InverseContextFst.html">InverseContextFst</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1InverseLeftBiphoneContextFst.html">InverseLeftBiphoneContextFst</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1LatticeDeterminizer.html">LatticeDeterminizer</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1LatticeDeterminizerPruned.html">LatticeDeterminizerPruned</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1LatticeStringRepository.html">LatticeStringRepository</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1LatticeToStdMapper.html">LatticeToStdMapper</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class <a class="el" href="classfst_1_1LatticeToStdMapper.html" title="Class LatticeToStdMapper maps a LatticeArc to a normal arc (StdArc) by adding the elements of the Lat...">LatticeToStdMapper</a> maps a LatticeArc to a normal arc (StdArc) by adding the elements of the LatticeArc weight.  <a href="classfst_1_1LatticeToStdMapper.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1LmExampleDeterministicOnDemandFst.html">LmExampleDeterministicOnDemandFst</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class is for didactic purposes, it does not really do anything.  <a href="classfst_1_1LmExampleDeterministicOnDemandFst.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1MapInputSymbolsMapper.html">MapInputSymbolsMapper</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1NaturalLess_3_01CompactLatticeWeightTpl_3_01LatticeWeightTpl_3_01double_01_4_00_01int32_01_4_01_4.html">NaturalLess&lt; CompactLatticeWeightTpl&lt; LatticeWeightTpl&lt; double &gt;, int32 &gt; &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1NaturalLess_3_01CompactLatticeWeightTpl_3_01LatticeWeightTpl_3_01float_01_4_00_01int32_01_4_01_4.html">NaturalLess&lt; CompactLatticeWeightTpl&lt; LatticeWeightTpl&lt; float &gt;, int32 &gt; &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1NaturalLess_3_01CompactLatticeWeightTpl_3_01LatticeWeightTpl_3_01FloatType_01_4_00_01IntType_01_4_01_4.html">NaturalLess&lt; CompactLatticeWeightTpl&lt; LatticeWeightTpl&lt; FloatType &gt;, IntType &gt; &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1NaturalLess_3_01LatticeWeightTpl_3_01double_01_4_01_4.html">NaturalLess&lt; LatticeWeightTpl&lt; double &gt; &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1NaturalLess_3_01LatticeWeightTpl_3_01float_01_4_01_4.html">NaturalLess&lt; LatticeWeightTpl&lt; float &gt; &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1NaturalLess_3_01LatticeWeightTpl_3_01FloatType_01_4_01_4.html">NaturalLess&lt; LatticeWeightTpl&lt; FloatType &gt; &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1PruneSpecialClass.html">PruneSpecialClass</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class is used to implement the function PruneSpecial.  <a href="classfst_1_1PruneSpecialClass.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1PushSpecialClass.html">PushSpecialClass</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfst_1_1RandFstOptions.html">RandFstOptions</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1RemoveEpsLocalClass.html">RemoveEpsLocalClass</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1RemoveSomeInputSymbolsMapper.html">RemoveSomeInputSymbolsMapper</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfst_1_1ReweightPlusDefault.html">ReweightPlusDefault</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfst_1_1ReweightPlusLogArc.html">ReweightPlusLogArc</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1ScaleDeterministicOnDemandFst.html">ScaleDeterministicOnDemandFst</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class <a class="el" href="classfst_1_1ScaleDeterministicOnDemandFst.html" title="Class ScaleDeterministicOnDemandFst takes another DeterministicOnDemandFst and scales the weights (li...">ScaleDeterministicOnDemandFst</a> takes another <a class="el" href="classfst_1_1DeterministicOnDemandFst.html" title="class DeterministicOnDemandFst is an &quot;FST-like&quot; base-class. ">DeterministicOnDemandFst</a> and scales the weights (like applying a language-model scale).  <a href="classfst_1_1ScaleDeterministicOnDemandFst.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1StateIterator_3_01TrivialFactorWeightFst_3_01A_00_01F_01_4_01_4.html">StateIterator&lt; TrivialFactorWeightFst&lt; A, F &gt; &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1StdToLatticeMapper.html">StdToLatticeMapper</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class <a class="el" href="classfst_1_1StdToLatticeMapper.html" title="Class StdToLatticeMapper maps a normal arc (StdArc) to a LatticeArc by putting the StdArc weight as t...">StdToLatticeMapper</a> maps a normal arc (StdArc) to a LatticeArc by putting the StdArc weight as the first element of the LatticeWeight.  <a href="classfst_1_1StdToLatticeMapper.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1StringRepository.html">StringRepository</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfst_1_1TableComposeCache.html">TableComposeCache</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structfst_1_1TableComposeCache.html" title="TableComposeCache lets us do multiple compositions while caching the same matcher. ">TableComposeCache</a> lets us do multiple compositions while caching the same matcher.  <a href="structfst_1_1TableComposeCache.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfst_1_1TableComposeOptions.html">TableComposeOptions</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1TableMatcher.html">TableMatcher</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1TableMatcherImpl.html">TableMatcherImpl</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfst_1_1TableMatcherOptions.html">TableMatcherOptions</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classfst_1_1TableMatcher.html">TableMatcher</a> is a matcher specialized for the case where the output side of the left FST always has either all-epsilons coming out of a state, or a majority of the symbol table.  <a href="structfst_1_1TableMatcherOptions.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfst_1_1TestFunctor.html">TestFunctor</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1TrivialFactorWeightFst.html">TrivialFactorWeightFst</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classfst_1_1TrivialFactorWeightFst.html" title="TrivialFactorWeightFst takes as template parameter a FactorIterator as defined above. ">TrivialFactorWeightFst</a> takes as template parameter a FactorIterator as defined above.  <a href="classfst_1_1TrivialFactorWeightFst.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfst_1_1TrivialFactorWeightOptions.html">TrivialFactorWeightOptions</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1UnweightedNgramFst.html">UnweightedNgramFst</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The class <a class="el" href="classfst_1_1UnweightedNgramFst.html" title="The class UnweightedNgramFst is a DeterministicOnDemandFst whose states encode an n-gram history...">UnweightedNgramFst</a> is a <a class="el" href="classfst_1_1DeterministicOnDemandFst.html" title="class DeterministicOnDemandFst is an &quot;FST-like&quot; base-class. ">DeterministicOnDemandFst</a> whose states encode an n-gram history.  <a href="classfst_1_1UnweightedNgramFst.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfst_1_1VectorFstTplHolder.html">VectorFstTplHolder</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a70478eb2428a9406e4692d19a7a3a97f"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">fst::StdArc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a></td></tr>
<tr class="separator:a70478eb2428a9406e4692d19a7a3a97f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a006b00477e4d9250474e76e1ec61bb3f"><td class="memItemLeft" align="right" valign="top">typedef fst::StdArc::Label&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a></td></tr>
<tr class="separator:a006b00477e4d9250474e76e1ec61bb3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae38f9e2cc96a39ff2953a2846c2538db"><td class="memItemLeft" align="right" valign="top">typedef fst::StdArc::StateId&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a></td></tr>
<tr class="separator:ae38f9e2cc96a39ff2953a2846c2538db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88a968cc6f6d68c2b3dd6aa90385f65c"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">fst::StdVectorFst</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">StdVectorFst</a></td></tr>
<tr class="separator:a88a968cc6f6d68c2b3dd6aa90385f65c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fdd196e46607f0d35b13369d9f9970d"><td class="memItemLeft" align="right" valign="top">typedef fst::StdArc::Weight&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a></td></tr>
<tr class="separator:a2fdd196e46607f0d35b13369d9f9970d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afde762a4bf33b2bbdc061b074b7d089c"><td class="memItemLeft" align="right" valign="top">typedef unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#afde762a4bf33b2bbdc061b074b7d089c">StatePropertiesType</a></td></tr>
<tr class="separator:afde762a4bf33b2bbdc061b074b7d089c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7d2278940f998d865a0fb84f89ff125"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classfst_1_1VectorFstTplHolder.html">VectorFstTplHolder</a>&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#ab7d2278940f998d865a0fb84f89ff125">VectorFstHolder</a></td></tr>
<tr class="separator:ab7d2278940f998d865a0fb84f89ff125"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa66ff8367094543664b3b6a13d77c139"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classfloat.html">float</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a></td></tr>
<tr class="separator:aa66ff8367094543664b3b6a13d77c139"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a312b29f86c5ef78810556e470635a291"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; <a class="el" href="namespacefst.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a312b29f86c5ef78810556e470635a291">LatticeWeight</a></td></tr>
<tr class="separator:a312b29f86c5ef78810556e470635a291"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b96c2715539a4b5008546dbe9d5085b"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="namespacefst.html#a312b29f86c5ef78810556e470635a291">LatticeWeight</a>, int32 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a4b96c2715539a4b5008546dbe9d5085b">CompactLatticeWeight</a></td></tr>
<tr class="separator:a4b96c2715539a4b5008546dbe9d5085b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53af4ee0b29523b7c627660609ea6190"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classfst_1_1CompactLatticeWeightCommonDivisorTpl.html">CompactLatticeWeightCommonDivisorTpl</a>&lt; <a class="el" href="namespacefst.html#a312b29f86c5ef78810556e470635a291">LatticeWeight</a>, int32 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a53af4ee0b29523b7c627660609ea6190">CompactLatticeWeightCommonDivisor</a></td></tr>
<tr class="separator:a53af4ee0b29523b7c627660609ea6190"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14f2a6c1714becab8337b1101ba8fc27"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; <a class="el" href="classfloat.html">float</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a14f2a6c1714becab8337b1101ba8fc27">ArcticWeight</a></td></tr>
<tr class="separator:a14f2a6c1714becab8337b1101ba8fc27"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:abed82baf7f470b522273a3e37c24c600"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a1947c0d03bf916c037b4f25cccc92ace">kStateHasEpsilonArcsEntering</a> = 0x1, 
<a class="el" href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a3048a708ccd7fc2d37561d3aeb544f63">kStateHasNonEpsilonArcsEntering</a> = 0x2, 
<a class="el" href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a2d3c0fb5e5e5c747c645653b5ce863e7">kStateHasEpsilonArcsLeaving</a> = 0x4, 
<a class="el" href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a229ce10dbec4dcf7ca9736ee6f3e8467">kStateHasNonEpsilonArcsLeaving</a> = 0x8
 }</td></tr>
<tr class="separator:abed82baf7f470b522273a3e37c24c600"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57cc279168f707dd164f9543f1b36907"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907">StatePropertiesEnum</a> { <br />
&#160;&#160;<a class="el" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907ae210c78f45c66eeb3668dacf52ba71b5">kStateFinal</a> = 0x1, 
<a class="el" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907a3d8a6a3ea58a37879916e5cf8571190c">kStateInitial</a> = 0x2, 
<a class="el" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907ae21df5d1a918da8755c69c1e49ab3af1">kStateArcsIn</a> = 0x4, 
<a class="el" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907a5116305c68c9e41479ccbcb8d38cdb4b">kStateMultipleArcsIn</a> = 0x8, 
<br />
&#160;&#160;<a class="el" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907a6c9a11fe021867b25e75bb27cba5dbe6">kStateArcsOut</a> = 0x10, 
<a class="el" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907aeb2d3e327757068f02d09dee9aa1beb1">kStateMultipleArcsOut</a> = 0x20, 
<a class="el" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907af992661b1988386d7326c44c731e2441">kStateOlabelsOut</a> = 0x40, 
<a class="el" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907acc7557139cc1096f82c0e08abfcb729f">kStateIlabelsOut</a> = 0x80
<br />
 }</td></tr>
<tr class="separator:a57cc279168f707dd164f9543f1b36907"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a251b709d87fe58fc66599f483fb98bd2"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a251b709d87fe58fc66599f483fb98bd2">NonterminalValues</a> { <br />
&#160;&#160;<a class="el" href="namespacefst.html#a251b709d87fe58fc66599f483fb98bd2a8420d849ee0c4302c3e4f963feed7a00">kNontermBos</a> = 0, 
<a class="el" href="namespacefst.html#a251b709d87fe58fc66599f483fb98bd2a853f28d67c5daf316eecc91390831332">kNontermBegin</a> = 1, 
<a class="el" href="namespacefst.html#a251b709d87fe58fc66599f483fb98bd2a534b236508a8d909dd97b3d7475b75db">kNontermEnd</a> = 2, 
<a class="el" href="namespacefst.html#a251b709d87fe58fc66599f483fb98bd2af2f1f7ed744565c5728529dcce2e2ef5">kNontermReenter</a> = 3, 
<br />
&#160;&#160;<a class="el" href="namespacefst.html#a251b709d87fe58fc66599f483fb98bd2a9407a1ae01a2fea99f092723c3c3cbc0">kNontermUserDefined</a> = 4, 
<a class="el" href="namespacefst.html#a251b709d87fe58fc66599f483fb98bd2a912e4937034fa71a1d4dc31c523dc351">kNontermMediumNumber</a> = 1000, 
<a class="el" href="namespacefst.html#a251b709d87fe58fc66599f483fb98bd2aafc1d79474b5b834eae90c6a9c42790f">kNontermBigNumber</a> = 10000000
<br />
 }<tr class="memdesc:a251b709d87fe58fc66599f483fb98bd2"><td class="mdescLeft">&#160;</td><td class="mdescRight">An anonymous enum to define some values for symbols used in our grammar-fst framework.  <a href="namespacefst.html#a251b709d87fe58fc66599f483fb98bd2">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:a251b709d87fe58fc66599f483fb98bd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:afa276c80715b5925eb3798c97db8a01c"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:afa276c80715b5925eb3798c97db8a01c"><td class="memTemplItemLeft" align="right" valign="top">static VectorFst&lt; Arc &gt; *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#afa276c80715b5925eb3798c97db8a01c">GenAcceptorFromSequence</a> (const vector&lt; typename Arc::Label &gt; &amp;symbols, <a class="el" href="classfloat.html">float</a> cost)</td></tr>
<tr class="separator:afa276c80715b5925eb3798c97db8a01c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa854a74c810ff63416ed5be1795b1ff6"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:aa854a74c810ff63416ed5be1795b1ff6"><td class="memTemplItemLeft" align="right" valign="top">static <a class="el" href="classfloat.html">float</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#aa854a74c810ff63416ed5be1795b1ff6">CheckPhones</a> (const VectorFst&lt; Arc &gt; &amp;linear_fst, const vector&lt; typename Arc::Label &gt; &amp;phone_ids, const vector&lt; typename Arc::Label &gt; &amp;disambig_ids, const vector&lt; typename Arc::Label &gt; &amp;phone_seq, const vector&lt; vector&lt; typename Arc::Label &gt; &gt; &amp;ilabel_info, int N, int P)</td></tr>
<tr class="separator:aa854a74c810ff63416ed5be1795b1ff6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a60f55a4e5bc8aef4c3b29df68382e7"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a6a60f55a4e5bc8aef4c3b29df68382e7"><td class="memTemplItemLeft" align="right" valign="top">static VectorFst&lt; Arc &gt; *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a6a60f55a4e5bc8aef4c3b29df68382e7">GenRandPhoneSeq</a> (vector&lt; typename Arc::Label &gt; &amp;phone_syms, vector&lt; typename Arc::Label &gt; &amp;disambig_syms, typename Arc::Label subsequential_symbol, int num_subseq_syms, <a class="el" href="classfloat.html">float</a> seq_prob, vector&lt; typename Arc::Label &gt; *phoneseq_out)</td></tr>
<tr class="separator:a6a60f55a4e5bc8aef4c3b29df68382e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03dd82498371cccad5dcc5d9b3962660"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a03dd82498371cccad5dcc5d9b3962660">TestContextFst</a> (<a class="el" href="classbool.html">bool</a> verbose, <a class="el" href="classbool.html">bool</a> use_matcher)</td></tr>
<tr class="separator:a03dd82498371cccad5dcc5d9b3962660"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a198edfe97614325be9828685b28d6235"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a198edfe97614325be9828685b28d6235">ComposeContext</a> (const vector&lt; int32 &gt; &amp;disambig_syms, int32 context_width, int32 central_position, VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *ifst, VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *ofst, vector&lt; vector&lt; int32 &gt; &gt; *ilabels_out, <a class="el" href="classbool.html">bool</a> project_ifst=false)</td></tr>
<tr class="memdesc:a198edfe97614325be9828685b28d6235"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used in the command-line tool fstcomposecontext.  <a href="#a198edfe97614325be9828685b28d6235">More...</a><br /></td></tr>
<tr class="separator:a198edfe97614325be9828685b28d6235"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c8426e0cb7d35fe4b1abcef0b163b4f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a0c8426e0cb7d35fe4b1abcef0b163b4f">AddSubsequentialLoop</a> (StdArc::Label subseq_symbol, MutableFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *fst)</td></tr>
<tr class="memdesc:a0c8426e0cb7d35fe4b1abcef0b163b4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modifies an FST so that it transuces the same paths, but the input side of the paths can all have the subsequential symbol '$' appended to them any number of times (we could easily specify the number of times, but accepting any number of repetitions is just more convenient).  <a href="#a0c8426e0cb7d35fe4b1abcef0b163b4f">More...</a><br /></td></tr>
<tr class="separator:a0c8426e0cb7d35fe4b1abcef0b163b4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34bd956ade7a51e8051267bf5c2519cb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a34bd956ade7a51e8051267bf5c2519cb">WriteILabelInfo</a> (std::ostream &amp;os, <a class="el" href="classbool.html">bool</a> binary, const vector&lt; vector&lt; int32 &gt; &gt; &amp;ilabel_info)</td></tr>
<tr class="memdesc:a34bd956ade7a51e8051267bf5c2519cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Utility function for writing ilabel-info vectors to disk.  <a href="#a34bd956ade7a51e8051267bf5c2519cb">More...</a><br /></td></tr>
<tr class="separator:a34bd956ade7a51e8051267bf5c2519cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05f4ee704ff98edc7675f37d91649bdb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a05f4ee704ff98edc7675f37d91649bdb">ReadILabelInfo</a> (std::istream &amp;is, <a class="el" href="classbool.html">bool</a> binary, vector&lt; vector&lt; int32 &gt; &gt; *ilabel_info)</td></tr>
<tr class="memdesc:a05f4ee704ff98edc7675f37d91649bdb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Utility function for reading ilabel-info vectors from disk.  <a href="#a05f4ee704ff98edc7675f37d91649bdb">More...</a><br /></td></tr>
<tr class="separator:a05f4ee704ff98edc7675f37d91649bdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76bd95d1410e5c6b51be57717f43fd6f"><td class="memItemLeft" align="right" valign="top">SymbolTable *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a76bd95d1410e5c6b51be57717f43fd6f">CreateILabelInfoSymbolTable</a> (const vector&lt; vector&lt; int32 &gt; &gt; &amp;ilabel_info, const SymbolTable &amp;phones_symtab, std::string separator, std::string disambig_prefix)</td></tr>
<tr class="memdesc:a76bd95d1410e5c6b51be57717f43fd6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The following function is mainly of use for printing and debugging.  <a href="#a76bd95d1410e5c6b51be57717f43fd6f">More...</a><br /></td></tr>
<tr class="separator:a76bd95d1410e5c6b51be57717f43fd6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga67dafdc415ae8ca0385a6cd237d4cf9b"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:ga67dafdc415ae8ca0385a6cd237d4cf9b"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__deterministic__fst__group.html#ga67dafdc415ae8ca0385a6cd237d4cf9b">ComposeDeterministicOnDemand</a> (const Fst&lt; Arc &gt; &amp;fst1, <a class="el" href="classfst_1_1DeterministicOnDemandFst.html">DeterministicOnDemandFst</a>&lt; Arc &gt; *fst2, MutableFst&lt; Arc &gt; *fst_composed)</td></tr>
<tr class="separator:ga67dafdc415ae8ca0385a6cd237d4cf9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9f5e73f2d8e2644492db7857d02acfc2"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:ga9f5e73f2d8e2644492db7857d02acfc2"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__deterministic__fst__group.html#ga9f5e73f2d8e2644492db7857d02acfc2">ComposeDeterministicOnDemandInverse</a> (const Fst&lt; Arc &gt; &amp;fst1, <a class="el" href="classfst_1_1DeterministicOnDemandFst.html">DeterministicOnDemandFst</a>&lt; Arc &gt; *fst2, MutableFst&lt; Arc &gt; *fst_composed)</td></tr>
<tr class="memdesc:ga9f5e73f2d8e2644492db7857d02acfc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function does '*fst_composed = Compose(Inverse(*fst2), fst1)' Note that the arguments are reversed; this is unfortunate but it's because the fst2 argument needs to be non-const and non-const arguments must follow const ones.  <a href="group__deterministic__fst__group.html#ga9f5e73f2d8e2644492db7857d02acfc2">More...</a><br /></td></tr>
<tr class="separator:ga9f5e73f2d8e2644492db7857d02acfc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfc6cd75a3760f2df7d1f1196c90422b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#acfc6cd75a3760f2df7d1f1196c90422b">FileExists</a> (string strFilename)</td></tr>
<tr class="separator:acfc6cd75a3760f2df7d1f1196c90422b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9da47640f365f6aa7839e9aff630a3ff"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">StdVectorFst</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a9da47640f365f6aa7839e9aff630a3ff">CreateBackoffFst</a> ()</td></tr>
<tr class="separator:a9da47640f365f6aa7839e9aff630a3ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac445fdfa8473caa38b3bf243f535be69"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">StdVectorFst</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#ac445fdfa8473caa38b3bf243f535be69">CreateResultFst</a> ()</td></tr>
<tr class="separator:ac445fdfa8473caa38b3bf243f535be69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fbb6852179648a4c70c282a348c74e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a0fbb6852179648a4c70c282a348c74e3">DeleteTestFst</a> (<a class="el" href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">StdVectorFst</a> *fst)</td></tr>
<tr class="separator:a0fbb6852179648a4c70c282a348c74e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a323c3df81cbbe8508ef1609aaa2ba7d3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a323c3df81cbbe8508ef1609aaa2ba7d3">WalkSinglePath</a> (<a class="el" href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">StdVectorFst</a> *ifst, <a class="el" href="classfst_1_1DeterministicOnDemandFst.html">DeterministicOnDemandFst</a>&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *dfst)</td></tr>
<tr class="separator:a323c3df81cbbe8508ef1609aaa2ba7d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab149c8a8436671a737bb63e2f55d24d7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#ab149c8a8436671a737bb63e2f55d24d7">TestBackoffAndCache</a> ()</td></tr>
<tr class="separator:ab149c8a8436671a737bb63e2f55d24d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11a0d94e814f77dba6ce57e5057226b3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a11a0d94e814f77dba6ce57e5057226b3">TestCompose</a> ()</td></tr>
<tr class="separator:a11a0d94e814f77dba6ce57e5057226b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga09127115b60edc4f73f5ce64f5b2902d"><td class="memTemplParams" colspan="2">template&lt;class Weight , class IntType &gt; </td></tr>
<tr class="memitem:ga09127115b60edc4f73f5ce64f5b2902d"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__fst__extensions.html#ga09127115b60edc4f73f5ce64f5b2902d">DeterminizeLattice</a> (const Fst&lt; ArcTpl&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> &gt; &gt; &amp;ifst, MutableFst&lt; ArcTpl&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> &gt; &gt; *ofst, <a class="el" href="structfst_1_1DeterminizeLatticeOptions.html">DeterminizeLatticeOptions</a> opts=<a class="el" href="structfst_1_1DeterminizeLatticeOptions.html">DeterminizeLatticeOptions</a>(), <a class="el" href="classbool.html">bool</a> *debug_ptr=NULL)</td></tr>
<tr class="memdesc:ga09127115b60edc4f73f5ce64f5b2902d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function implements the normal version of DeterminizeLattice, in which the output strings are represented using sequences of arcs, where all but the first one has an epsilon on the input side.  <a href="group__fst__extensions.html#ga09127115b60edc4f73f5ce64f5b2902d">More...</a><br /></td></tr>
<tr class="separator:ga09127115b60edc4f73f5ce64f5b2902d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga089fac5db8728882ff4e454b10c0f10b"><td class="memTemplParams" colspan="2">template&lt;class Weight , class IntType &gt; </td></tr>
<tr class="memitem:ga089fac5db8728882ff4e454b10c0f10b"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__fst__extensions.html#ga089fac5db8728882ff4e454b10c0f10b">DeterminizeLattice</a> (const Fst&lt; ArcTpl&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> &gt; &gt; &amp;ifst, MutableFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>, IntType &gt; &gt; &gt; *ofst, <a class="el" href="structfst_1_1DeterminizeLatticeOptions.html">DeterminizeLatticeOptions</a> opts, <a class="el" href="classbool.html">bool</a> *debug_ptr)</td></tr>
<tr class="separator:ga089fac5db8728882ff4e454b10c0f10b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba78427c6cf2117076a6fe026658824f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#aba78427c6cf2117076a6fe026658824f">TestLatticeStringRepository</a> ()</td></tr>
<tr class="separator:aba78427c6cf2117076a6fe026658824f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa976407780444836102f2573eab368ac"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:aa976407780444836102f2573eab368ac"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#aa976407780444836102f2573eab368ac">TestDeterminizeLattice</a> ()</td></tr>
<tr class="separator:aa976407780444836102f2573eab368ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c418012c98e559f4c096e93c6c5109d"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a3c418012c98e559f4c096e93c6c5109d"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a3c418012c98e559f4c096e93c6c5109d">TestDeterminizeLattice2</a> ()</td></tr>
<tr class="separator:a3c418012c98e559f4c096e93c6c5109d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac6d4823e83f5353ae5b5ce569a7a29a3"><td class="memTemplParams" colspan="2">template&lt;class F &gt; </td></tr>
<tr class="memitem:gac6d4823e83f5353ae5b5ce569a7a29a3"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__fst__extensions.html#gac6d4823e83f5353ae5b5ce569a7a29a3">DeterminizeStar</a> (F &amp;ifst, MutableFst&lt; typename F::Arc &gt; *ofst, <a class="el" href="classfloat.html">float</a> delta=kDelta, <a class="el" href="classbool.html">bool</a> *debug_ptr=NULL, int max_states=-1, <a class="el" href="classbool.html">bool</a> allow_partial=false)</td></tr>
<tr class="memdesc:gac6d4823e83f5353ae5b5ce569a7a29a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function implements the normal version of DeterminizeStar, in which the output strings are represented using sequences of arcs, where all but the first one has an epsilon on the input side.  <a href="group__fst__extensions.html#gac6d4823e83f5353ae5b5ce569a7a29a3">More...</a><br /></td></tr>
<tr class="separator:gac6d4823e83f5353ae5b5ce569a7a29a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa83b38f8e9a754bbd3ed552bef274977"><td class="memTemplParams" colspan="2">template&lt;class F &gt; </td></tr>
<tr class="memitem:gaa83b38f8e9a754bbd3ed552bef274977"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__fst__extensions.html#gaa83b38f8e9a754bbd3ed552bef274977">DeterminizeStar</a> (F &amp;ifst, MutableFst&lt; GallicArc&lt; typename F::Arc &gt; &gt; *ofst, <a class="el" href="classfloat.html">float</a> delta, <a class="el" href="classbool.html">bool</a> *debug_ptr, int max_states, <a class="el" href="classbool.html">bool</a> allow_partial)</td></tr>
<tr class="separator:gaa83b38f8e9a754bbd3ed552bef274977"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a795c6de075960cbd396c9d32323381b2"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a795c6de075960cbd396c9d32323381b2"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a795c6de075960cbd396c9d32323381b2">TestDeterminizeGeneral</a> ()</td></tr>
<tr class="separator:a795c6de075960cbd396c9d32323381b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa21f847efaffea553f9fd1db201106f1"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:aa21f847efaffea553f9fd1db201106f1"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#aa21f847efaffea553f9fd1db201106f1">TestDeterminize</a> ()</td></tr>
<tr class="separator:aa21f847efaffea553f9fd1db201106f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa818c9146194433029e33fa52ac2daeb"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:aa818c9146194433029e33fa52ac2daeb"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#aa818c9146194433029e33fa52ac2daeb">TestDeterminize2</a> ()</td></tr>
<tr class="separator:aa818c9146194433029e33fa52ac2daeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52acad2b8b4d9f27119fa9aa24f2be2c"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a52acad2b8b4d9f27119fa9aa24f2be2c"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a52acad2b8b4d9f27119fa9aa24f2be2c">TestPush</a> ()</td></tr>
<tr class="separator:a52acad2b8b4d9f27119fa9aa24f2be2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac66ab9ed105350a84d78ad204c61550a"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:ac66ab9ed105350a84d78ad204c61550a"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#ac66ab9ed105350a84d78ad204c61550a">TestMinimize</a> ()</td></tr>
<tr class="separator:ac66ab9ed105350a84d78ad204c61550a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0c7b9ff84c7149049e9b0bb67ee26d4"><td class="memTemplParams" colspan="2">template&lt;class Arc , class inttype &gt; </td></tr>
<tr class="memitem:af0c7b9ff84c7149049e9b0bb67ee26d4"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#af0c7b9ff84c7149049e9b0bb67ee26d4">TestStringRepository</a> ()</td></tr>
<tr class="separator:af0c7b9ff84c7149049e9b0bb67ee26d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0335ed4b018328470d0d4856837fbefb"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a0335ed4b018328470d0d4856837fbefb"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a0335ed4b018328470d0d4856837fbefb">ComputeStateInfo</a> (const VectorFst&lt; Arc &gt; &amp;fst, std::vector&lt; char &gt; *epsilon_info)</td></tr>
<tr class="memdesc:a0335ed4b018328470d0d4856837fbefb"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will set epsilon_info to have size equal to the NumStates() of the FST, containing a logical-or of the enum values kStateHasEpsilonArcsEntering, kStateHasNonEpsilonArcsEntering, kStateHasEpsilonArcsLeaving, and kStateHasNonEpsilonArcsLeaving.  <a href="#a0335ed4b018328470d0d4856837fbefb">More...</a><br /></td></tr>
<tr class="separator:a0335ed4b018328470d0d4856837fbefb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4164ec8f0eed99fbb144c1e06bf622f4"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a4164ec8f0eed99fbb144c1e06bf622f4"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a4164ec8f0eed99fbb144c1e06bf622f4">EnsureEpsilonProperty</a> (VectorFst&lt; Arc &gt; *fst)</td></tr>
<tr class="memdesc:a4164ec8f0eed99fbb144c1e06bf622f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function modifies the fst (while maintaining equivalence) in such a way that, after the modification, all states of the FST which have epsilon-arcs entering them, have no non-epsilon arcs entering them, and all states which have epsilon-arcs leaving them, have no non-epsilon arcs leaving them.  <a href="#a4164ec8f0eed99fbb144c1e06bf622f4">More...</a><br /></td></tr>
<tr class="separator:a4164ec8f0eed99fbb144c1e06bf622f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60a97e0ac51c4372deb69441e42c79df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a60a97e0ac51c4372deb69441e42c79df">TestEnsureEpsilonProperty</a> ()</td></tr>
<tr class="separator:a60a97e0ac51c4372deb69441e42c79df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89e7aeda4a8ca8ba83a2d13061bbe759"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a89e7aeda4a8ca8ba83a2d13061bbe759"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a89e7aeda4a8ca8ba83a2d13061bbe759">GetStateProperties</a> (const Fst&lt; Arc &gt; &amp;fst, typename Arc::StateId max_state, vector&lt; <a class="el" href="namespacefst.html#afde762a4bf33b2bbdc061b074b7d089c">StatePropertiesType</a> &gt; *props)</td></tr>
<tr class="memdesc:a89e7aeda4a8ca8ba83a2d13061bbe759"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function works out various properties of the states in the FST, using the bit properties defined in StatePropertiesEnum.  <a href="#a89e7aeda4a8ca8ba83a2d13061bbe759">More...</a><br /></td></tr>
<tr class="separator:a89e7aeda4a8ca8ba83a2d13061bbe759"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3abe8a6b622b82e751c44cbe46583ae"><td class="memTemplParams" colspan="2">template&lt;class Arc , class I &gt; </td></tr>
<tr class="memitem:ab3abe8a6b622b82e751c44cbe46583ae"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#ab3abe8a6b622b82e751c44cbe46583ae">Factor</a> (const Fst&lt; Arc &gt; &amp;fst, MutableFst&lt; Arc &gt; *ofst, vector&lt; vector&lt; I &gt; &gt; *symbols)</td></tr>
<tr class="memdesc:ab3abe8a6b622b82e751c44cbe46583ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Factor identifies linear chains of states with an olabel (if any) only on the first arc of the chain, and possibly a sequence of ilabels; it outputs an FST with different symbols on the input that represent sequences of the original input symbols; it outputs the mapping from the new symbol to sequences of original symbols, as "symbols" [zero is reserved for epsilon].  <a href="#ab3abe8a6b622b82e751c44cbe46583ae">More...</a><br /></td></tr>
<tr class="separator:ab3abe8a6b622b82e751c44cbe46583ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0278a2997a1acf3f3c9bf41a4a6fe609"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a0278a2997a1acf3f3c9bf41a4a6fe609"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a0278a2997a1acf3f3c9bf41a4a6fe609">Factor</a> (const Fst&lt; Arc &gt; &amp;fst, MutableFst&lt; Arc &gt; *ofst1, MutableFst&lt; Arc &gt; *ofst2)</td></tr>
<tr class="memdesc:a0278a2997a1acf3f3c9bf41a4a6fe609"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a more conventional interface of Factor that outputs the result as two FSTs.  <a href="#a0278a2997a1acf3f3c9bf41a4a6fe609">More...</a><br /></td></tr>
<tr class="separator:a0278a2997a1acf3f3c9bf41a4a6fe609"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3c6893c42fe5672ac65c9588cf53e4c"><td class="memTemplParams" colspan="2">template&lt;class Arc , class I &gt; </td></tr>
<tr class="memitem:aa3c6893c42fe5672ac65c9588cf53e4c"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#aa3c6893c42fe5672ac65c9588cf53e4c">ExpandInputSequences</a> (const vector&lt; vector&lt; I &gt; &gt; &amp;sequences, MutableFst&lt; Arc &gt; *fst)</td></tr>
<tr class="memdesc:aa3c6893c42fe5672ac65c9588cf53e4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">ExpandInputSequences expands out the input symbols into sequences of input symbols.  <a href="#aa3c6893c42fe5672ac65c9588cf53e4c">More...</a><br /></td></tr>
<tr class="separator:aa3c6893c42fe5672ac65c9588cf53e4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a070610f7a2b12584472be177c162c2"><td class="memTemplParams" colspan="2">template&lt;class Arc , class I &gt; </td></tr>
<tr class="memitem:a6a070610f7a2b12584472be177c162c2"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a6a070610f7a2b12584472be177c162c2">CreateFactorFst</a> (const vector&lt; vector&lt; I &gt; &gt; &amp;sequences, MutableFst&lt; Arc &gt; *fst)</td></tr>
<tr class="memdesc:a6a070610f7a2b12584472be177c162c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">The function CreateFactorFst will create an FST that expands out the "factors" that are the indices of the "sequences" array, into linear sequences of symbols.  <a href="#a6a070610f7a2b12584472be177c162c2">More...</a><br /></td></tr>
<tr class="separator:a6a070610f7a2b12584472be177c162c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a217df6f5bb354d2513b771a18aed0508"><td class="memTemplParams" colspan="2">template&lt;class Arc , class I &gt; </td></tr>
<tr class="memitem:a217df6f5bb354d2513b771a18aed0508"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a217df6f5bb354d2513b771a18aed0508">CreateMapFst</a> (const vector&lt; I &gt; &amp;symbol_map, MutableFst&lt; Arc &gt; *fst)</td></tr>
<tr class="memdesc:a217df6f5bb354d2513b771a18aed0508"><td class="mdescLeft">&#160;</td><td class="mdescRight">CreateMapFst will create an FST representing this symbol_map.  <a href="#a217df6f5bb354d2513b771a18aed0508">More...</a><br /></td></tr>
<tr class="separator:a217df6f5bb354d2513b771a18aed0508"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaaf608887e6b0291a339b9b2051ee4b3"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:aaaf608887e6b0291a339b9b2051ee4b3"><td class="memTemplItemLeft" align="right" valign="top">static void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#aaaf608887e6b0291a339b9b2051ee4b3">TestFactor</a> ()</td></tr>
<tr class="separator:aaaf608887e6b0291a339b9b2051ee4b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a285e517ce625fdd9db1000ef73c5782b"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a285e517ce625fdd9db1000ef73c5782b"><td class="memTemplItemLeft" align="right" valign="top">Arc::Label&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a285e517ce625fdd9db1000ef73c5782b">HighestNumberedOutputSymbol</a> (const Fst&lt; Arc &gt; &amp;fst)</td></tr>
<tr class="memdesc:a285e517ce625fdd9db1000ef73c5782b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the highest numbered output symbol id of the FST (or zero for an empty FST.  <a href="#a285e517ce625fdd9db1000ef73c5782b">More...</a><br /></td></tr>
<tr class="separator:a285e517ce625fdd9db1000ef73c5782b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac359ee42978cf57f9c5dfdc50df8fe16"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:ac359ee42978cf57f9c5dfdc50df8fe16"><td class="memTemplItemLeft" align="right" valign="top">Arc::Label&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#ac359ee42978cf57f9c5dfdc50df8fe16">HighestNumberedInputSymbol</a> (const Fst&lt; Arc &gt; &amp;fst)</td></tr>
<tr class="memdesc:ac359ee42978cf57f9c5dfdc50df8fe16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the highest numbered input symbol id of the FST (or zero for an empty FST.  <a href="#ac359ee42978cf57f9c5dfdc50df8fe16">More...</a><br /></td></tr>
<tr class="separator:ac359ee42978cf57f9c5dfdc50df8fe16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fa1b835ccb140bdedccdff9d7a70dc1"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a9fa1b835ccb140bdedccdff9d7a70dc1"><td class="memTemplItemLeft" align="right" valign="top">Arc::StateId&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a9fa1b835ccb140bdedccdff9d7a70dc1">NumArcs</a> (const ExpandedFst&lt; Arc &gt; &amp;fst)</td></tr>
<tr class="memdesc:a9fa1b835ccb140bdedccdff9d7a70dc1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the total number of arcs in an FST.  <a href="#a9fa1b835ccb140bdedccdff9d7a70dc1">More...</a><br /></td></tr>
<tr class="separator:a9fa1b835ccb140bdedccdff9d7a70dc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a310971f5213d23305ec1bee408aa58ad"><td class="memTemplParams" colspan="2">template&lt;class Arc , class I &gt; </td></tr>
<tr class="memitem:a310971f5213d23305ec1bee408aa58ad"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a310971f5213d23305ec1bee408aa58ad">GetOutputSymbols</a> (const Fst&lt; Arc &gt; &amp;fst, <a class="el" href="classbool.html">bool</a> include_eps, vector&lt; I &gt; *symbols)</td></tr>
<tr class="memdesc:a310971f5213d23305ec1bee408aa58ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">GetOutputSymbols gets the list of symbols on the output of fst (including epsilon, if include_eps == true)  <a href="#a310971f5213d23305ec1bee408aa58ad">More...</a><br /></td></tr>
<tr class="separator:a310971f5213d23305ec1bee408aa58ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a497c657ffe831f50f0de2ce5c296beb6"><td class="memTemplParams" colspan="2">template&lt;class Arc , class I &gt; </td></tr>
<tr class="memitem:a497c657ffe831f50f0de2ce5c296beb6"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a497c657ffe831f50f0de2ce5c296beb6">GetInputSymbols</a> (const Fst&lt; Arc &gt; &amp;fst, <a class="el" href="classbool.html">bool</a> include_eps, vector&lt; I &gt; *symbols)</td></tr>
<tr class="memdesc:a497c657ffe831f50f0de2ce5c296beb6"><td class="mdescLeft">&#160;</td><td class="mdescRight">GetInputSymbols gets the list of symbols on the input of fst (including epsilon, if include_eps == true), as a sorted, unique list.  <a href="#a497c657ffe831f50f0de2ce5c296beb6">More...</a><br /></td></tr>
<tr class="separator:a497c657ffe831f50f0de2ce5c296beb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a954ae05d3b7066bd26c09cf13c3a5d4d"><td class="memTemplParams" colspan="2">template&lt;class Arc , class I &gt; </td></tr>
<tr class="memitem:a954ae05d3b7066bd26c09cf13c3a5d4d"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a954ae05d3b7066bd26c09cf13c3a5d4d">RemoveSomeInputSymbols</a> (const vector&lt; I &gt; &amp;to_remove, MutableFst&lt; Arc &gt; *fst)</td></tr>
<tr class="memdesc:a954ae05d3b7066bd26c09cf13c3a5d4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">RemoveSomeInputSymbols removes any symbol that appears in "to_remove", from the input side of the FST, replacing them with epsilon.  <a href="#a954ae05d3b7066bd26c09cf13c3a5d4d">More...</a><br /></td></tr>
<tr class="separator:a954ae05d3b7066bd26c09cf13c3a5d4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf280c4ca1442b10be12d6006bd0c325"><td class="memTemplParams" colspan="2">template&lt;class Arc , class I &gt; </td></tr>
<tr class="memitem:adf280c4ca1442b10be12d6006bd0c325"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#adf280c4ca1442b10be12d6006bd0c325">MapInputSymbols</a> (const vector&lt; I &gt; &amp;symbol_mapping, MutableFst&lt; Arc &gt; *fst)</td></tr>
<tr class="separator:adf280c4ca1442b10be12d6006bd0c325"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae14d5a9815e596bfa4a455ce965c2697"><td class="memTemplParams" colspan="2">template&lt;class Arc , class I &gt; </td></tr>
<tr class="memitem:ae14d5a9815e596bfa4a455ce965c2697"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#ae14d5a9815e596bfa4a455ce965c2697">GetLinearSymbolSequence</a> (const Fst&lt; Arc &gt; &amp;fst, vector&lt; I &gt; *isymbols_out, vector&lt; I &gt; *osymbols_out, typename Arc::Weight *tot_weight_out)</td></tr>
<tr class="memdesc:ae14d5a9815e596bfa4a455ce965c2697"><td class="mdescLeft">&#160;</td><td class="mdescRight">GetLinearSymbolSequence gets the symbol sequence from a linear FST.  <a href="#ae14d5a9815e596bfa4a455ce965c2697">More...</a><br /></td></tr>
<tr class="separator:ae14d5a9815e596bfa4a455ce965c2697"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d1ee0ef9cb443eb0301466050757738"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a4d1ee0ef9cb443eb0301466050757738"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a4d1ee0ef9cb443eb0301466050757738">ConvertNbestToVector</a> (const Fst&lt; Arc &gt; &amp;fst, vector&lt; VectorFst&lt; Arc &gt; &gt; *fsts_out)</td></tr>
<tr class="memdesc:a4d1ee0ef9cb443eb0301466050757738"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function converts an FST with a special structure, which is output by the OpenFst functions ShortestPath and RandGen, and converts them into a vector of separate FSTs.  <a href="#a4d1ee0ef9cb443eb0301466050757738">More...</a><br /></td></tr>
<tr class="separator:a4d1ee0ef9cb443eb0301466050757738"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42a4066a7a87381f4c3af10420cf46b8"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a42a4066a7a87381f4c3af10420cf46b8"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a42a4066a7a87381f4c3af10420cf46b8">NbestAsFsts</a> (const Fst&lt; Arc &gt; &amp;fst, <a class="el" href="classsize__t.html">size_t</a> n, vector&lt; VectorFst&lt; Arc &gt; &gt; *fsts_out)</td></tr>
<tr class="memdesc:a42a4066a7a87381f4c3af10420cf46b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Takes the n-shortest-paths (using ShortestPath), but outputs the result as a vector of up to n fsts.  <a href="#a42a4066a7a87381f4c3af10420cf46b8">More...</a><br /></td></tr>
<tr class="separator:a42a4066a7a87381f4c3af10420cf46b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae983e979663bbc2561d06a540ba49470"><td class="memTemplParams" colspan="2">template&lt;class Arc , class I &gt; </td></tr>
<tr class="memitem:ae983e979663bbc2561d06a540ba49470"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#ae983e979663bbc2561d06a540ba49470">MakeLinearAcceptorWithAlternatives</a> (const vector&lt; vector&lt; I &gt; &gt; &amp;labels, MutableFst&lt; Arc &gt; *ofst)</td></tr>
<tr class="memdesc:ae983e979663bbc2561d06a540ba49470"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates an unweighted acceptor with a linear structure, with alternatives at each position.  <a href="#ae983e979663bbc2561d06a540ba49470">More...</a><br /></td></tr>
<tr class="separator:ae983e979663bbc2561d06a540ba49470"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6c2fc5eefdb3342cce42b1c0cd6340a"><td class="memTemplParams" colspan="2">template&lt;class Arc , class I &gt; </td></tr>
<tr class="memitem:af6c2fc5eefdb3342cce42b1c0cd6340a"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#af6c2fc5eefdb3342cce42b1c0cd6340a">MakeLinearAcceptor</a> (const vector&lt; I &gt; &amp;labels, MutableFst&lt; Arc &gt; *ofst)</td></tr>
<tr class="memdesc:af6c2fc5eefdb3342cce42b1c0cd6340a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates unweighted linear acceptor from symbol sequence.  <a href="#af6c2fc5eefdb3342cce42b1c0cd6340a">More...</a><br /></td></tr>
<tr class="separator:af6c2fc5eefdb3342cce42b1c0cd6340a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3901a5f23cec1974cff8cb46c7a787b"><td class="memTemplParams" colspan="2">template&lt;class I &gt; </td></tr>
<tr class="memitem:ae3901a5f23cec1974cff8cb46c7a787b"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#ae3901a5f23cec1974cff8cb46c7a787b">GetSymbols</a> (const SymbolTable &amp;symtab, <a class="el" href="classbool.html">bool</a> include_eps, vector&lt; I &gt; *syms_out)</td></tr>
<tr class="separator:ae3901a5f23cec1974cff8cb46c7a787b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a603f9590e0369ac80054f72e18fc3ab0"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a603f9590e0369ac80054f72e18fc3ab0"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a603f9590e0369ac80054f72e18fc3ab0">SafeDeterminizeWrapper</a> (MutableFst&lt; Arc &gt; *ifst, MutableFst&lt; Arc &gt; *ofst, <a class="el" href="classfloat.html">float</a> delta=kDelta)</td></tr>
<tr class="memdesc:a603f9590e0369ac80054f72e18fc3ab0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does PreDeterminize and DeterminizeStar and then removes the disambiguation symbols.  <a href="#a603f9590e0369ac80054f72e18fc3ab0">More...</a><br /></td></tr>
<tr class="separator:a603f9590e0369ac80054f72e18fc3ab0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8879829362d7a0f0117247ded14e19f"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:ae8879829362d7a0f0117247ded14e19f"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#ae8879829362d7a0f0117247ded14e19f">SafeDeterminizeMinimizeWrapper</a> (MutableFst&lt; Arc &gt; *ifst, VectorFst&lt; Arc &gt; *ofst, <a class="el" href="classfloat.html">float</a> delta=kDelta)</td></tr>
<tr class="memdesc:ae8879829362d7a0f0117247ded14e19f"><td class="mdescLeft">&#160;</td><td class="mdescRight">SafeDeterminizeMinimizeWapper is as SafeDeterminizeWrapper except that it also minimizes (encoded minimization, which is safe).  <a href="#ae8879829362d7a0f0117247ded14e19f">More...</a><br /></td></tr>
<tr class="separator:ae8879829362d7a0f0117247ded14e19f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97677191e8f55e7ac378d1e4a7e61976"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a97677191e8f55e7ac378d1e4a7e61976">DeterminizeStarInLog</a> (VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *fst, <a class="el" href="classfloat.html">float</a> delta, <a class="el" href="classbool.html">bool</a> *debug_ptr, int max_states)</td></tr>
<tr class="separator:a97677191e8f55e7ac378d1e4a7e61976"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8a27fbfa6636ccb12785e01bb3ed685"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#ad8a27fbfa6636ccb12785e01bb3ed685">DeterminizeInLog</a> (VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *fst)</td></tr>
<tr class="separator:ad8a27fbfa6636ccb12785e01bb3ed685"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3220461ade577911b4400996626a4f0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#aa3220461ade577911b4400996626a4f0">SafeDeterminizeMinimizeWrapperInLog</a> (VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *ifst, VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *ofst, <a class="el" href="classfloat.html">float</a> delta=kDelta)</td></tr>
<tr class="memdesc:aa3220461ade577911b4400996626a4f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">SafeDeterminizeMinimizeWapperInLog is as SafeDeterminizeMinimizeWrapper except it first casts tothe log semiring.  <a href="#aa3220461ade577911b4400996626a4f0">More...</a><br /></td></tr>
<tr class="separator:aa3220461ade577911b4400996626a4f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb7d66e9308748eca3f2eb1f818ae1d5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#acb7d66e9308748eca3f2eb1f818ae1d5">SafeDeterminizeWrapperInLog</a> (VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *ifst, VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *ofst, <a class="el" href="classfloat.html">float</a> delta)</td></tr>
<tr class="separator:acb7d66e9308748eca3f2eb1f818ae1d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27e110281b5adb2eea46d8470385d31f"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a27e110281b5adb2eea46d8470385d31f"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a27e110281b5adb2eea46d8470385d31f">RemoveWeights</a> (MutableFst&lt; Arc &gt; *ifst)</td></tr>
<tr class="separator:a27e110281b5adb2eea46d8470385d31f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace144ccc7af6b1c4be3e4d932ff2325a"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:ace144ccc7af6b1c4be3e4d932ff2325a"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#ace144ccc7af6b1c4be3e4d932ff2325a">PrecedingInputSymbolsAreSame</a> (<a class="el" href="classbool.html">bool</a> start_is_epsilon, const Fst&lt; Arc &gt; &amp;fst)</td></tr>
<tr class="memdesc:ace144ccc7af6b1c4be3e4d932ff2325a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if and only if the FST is such that the input symbols on arcs entering any given state all have the same value.  <a href="#ace144ccc7af6b1c4be3e4d932ff2325a">More...</a><br /></td></tr>
<tr class="separator:ace144ccc7af6b1c4be3e4d932ff2325a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a766eb5d44ddf7e0d45a4ddc85f632138"><td class="memTemplParams" colspan="2">template&lt;class Arc , class F &gt; </td></tr>
<tr class="memitem:a766eb5d44ddf7e0d45a4ddc85f632138"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a766eb5d44ddf7e0d45a4ddc85f632138">PrecedingInputSymbolsAreSameClass</a> (<a class="el" href="classbool.html">bool</a> start_is_epsilon, const Fst&lt; Arc &gt; &amp;fst, const F &amp;f)</td></tr>
<tr class="memdesc:a766eb5d44ddf7e0d45a4ddc85f632138"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is as PrecedingInputSymbolsAreSame, but with a functor f that maps labels to classes.  <a href="#a766eb5d44ddf7e0d45a4ddc85f632138">More...</a><br /></td></tr>
<tr class="separator:a766eb5d44ddf7e0d45a4ddc85f632138"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2dc0a68baac154b98e543310696c92c"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:af2dc0a68baac154b98e543310696c92c"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#af2dc0a68baac154b98e543310696c92c">FollowingInputSymbolsAreSame</a> (<a class="el" href="classbool.html">bool</a> end_is_epsilon, const Fst&lt; Arc &gt; &amp;fst)</td></tr>
<tr class="memdesc:af2dc0a68baac154b98e543310696c92c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if and only if the FST is such that the input symbols on arcs exiting any given state all have the same value.  <a href="#af2dc0a68baac154b98e543310696c92c">More...</a><br /></td></tr>
<tr class="separator:af2dc0a68baac154b98e543310696c92c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad06fa46b0810d248d45fa67dc07e4293"><td class="memTemplParams" colspan="2">template&lt;class Arc , class F &gt; </td></tr>
<tr class="memitem:ad06fa46b0810d248d45fa67dc07e4293"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#ad06fa46b0810d248d45fa67dc07e4293">FollowingInputSymbolsAreSameClass</a> (<a class="el" href="classbool.html">bool</a> end_is_epsilon, const Fst&lt; Arc &gt; &amp;fst, const F &amp;f)</td></tr>
<tr class="separator:ad06fa46b0810d248d45fa67dc07e4293"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e9ae1bd1915d71003df02534ccb75ba"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a2e9ae1bd1915d71003df02534ccb75ba"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a2e9ae1bd1915d71003df02534ccb75ba">MakePrecedingInputSymbolsSame</a> (<a class="el" href="classbool.html">bool</a> start_is_epsilon, MutableFst&lt; Arc &gt; *fst)</td></tr>
<tr class="memdesc:a2e9ae1bd1915d71003df02534ccb75ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">MakePrecedingInputSymbolsSame ensures that all arcs entering any given fst state have the same input symbol.  <a href="#a2e9ae1bd1915d71003df02534ccb75ba">More...</a><br /></td></tr>
<tr class="separator:a2e9ae1bd1915d71003df02534ccb75ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87c0ca5c61cd0edbda6ec7cd416e2c6a"><td class="memTemplParams" colspan="2">template&lt;class Arc , class F &gt; </td></tr>
<tr class="memitem:a87c0ca5c61cd0edbda6ec7cd416e2c6a"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a87c0ca5c61cd0edbda6ec7cd416e2c6a">MakePrecedingInputSymbolsSameClass</a> (<a class="el" href="classbool.html">bool</a> start_is_epsilon, MutableFst&lt; Arc &gt; *fst, const F &amp;f)</td></tr>
<tr class="memdesc:a87c0ca5c61cd0edbda6ec7cd416e2c6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">As MakePrecedingInputSymbolsSame, but takes a functor object that maps labels to classes.  <a href="#a87c0ca5c61cd0edbda6ec7cd416e2c6a">More...</a><br /></td></tr>
<tr class="separator:a87c0ca5c61cd0edbda6ec7cd416e2c6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae7df766b7e70cce07586d03bbbb3da7"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:aae7df766b7e70cce07586d03bbbb3da7"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#aae7df766b7e70cce07586d03bbbb3da7">MakeFollowingInputSymbolsSame</a> (<a class="el" href="classbool.html">bool</a> end_is_epsilon, MutableFst&lt; Arc &gt; *fst)</td></tr>
<tr class="memdesc:aae7df766b7e70cce07586d03bbbb3da7"><td class="mdescLeft">&#160;</td><td class="mdescRight">MakeFollowingInputSymbolsSame ensures that all arcs exiting any given fst state have the same input symbol.  <a href="#aae7df766b7e70cce07586d03bbbb3da7">More...</a><br /></td></tr>
<tr class="separator:aae7df766b7e70cce07586d03bbbb3da7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5e20d7135997de882b0a0e0ccdc1e99"><td class="memTemplParams" colspan="2">template&lt;class Arc , class F &gt; </td></tr>
<tr class="memitem:ad5e20d7135997de882b0a0e0ccdc1e99"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#ad5e20d7135997de882b0a0e0ccdc1e99">MakeFollowingInputSymbolsSameClass</a> (<a class="el" href="classbool.html">bool</a> end_is_epsilon, MutableFst&lt; Arc &gt; *fst, const F &amp;f)</td></tr>
<tr class="memdesc:ad5e20d7135997de882b0a0e0ccdc1e99"><td class="mdescLeft">&#160;</td><td class="mdescRight">As MakeFollowingInputSymbolsSame, but takes a functor object that maps labels to classes.  <a href="#ad5e20d7135997de882b0a0e0ccdc1e99">More...</a><br /></td></tr>
<tr class="separator:ad5e20d7135997de882b0a0e0ccdc1e99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b99f77992383006bda67038a91191de"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a3b99f77992383006bda67038a91191de"><td class="memTemplItemLeft" align="right" valign="top">VectorFst&lt; Arc &gt; *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a3b99f77992383006bda67038a91191de">MakeLoopFst</a> (const vector&lt; const ExpandedFst&lt; Arc &gt; * &gt; &amp;fsts)</td></tr>
<tr class="memdesc:a3b99f77992383006bda67038a91191de"><td class="mdescLeft">&#160;</td><td class="mdescRight">MakeLoopFst creates an FST that has a state that is both initial and final (weight == Weight::One()), and for each non-NULL pointer fsts[i], it has an arc out whose output-symbol is i and which goes to a sub-graph whose input language is equivalent to fsts[i], where the final-state becomes a transition to the loop-state.  <a href="#a3b99f77992383006bda67038a91191de">More...</a><br /></td></tr>
<tr class="separator:a3b99f77992383006bda67038a91191de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada6ce1dc40d3ae27883d689f916fc3f7"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:ada6ce1dc40d3ae27883d689f916fc3f7"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#ada6ce1dc40d3ae27883d689f916fc3f7">ClearSymbols</a> (<a class="el" href="classbool.html">bool</a> clear_input, <a class="el" href="classbool.html">bool</a> clear_output, MutableFst&lt; Arc &gt; *fst)</td></tr>
<tr class="memdesc:ada6ce1dc40d3ae27883d689f916fc3f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">ClearSymbols sets all the symbols on the input and/or output side of the FST to zero, as specified.  <a href="#ada6ce1dc40d3ae27883d689f916fc3f7">More...</a><br /></td></tr>
<tr class="separator:ada6ce1dc40d3ae27883d689f916fc3f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acde6e041e51a069f9dc20999c332473d"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:acde6e041e51a069f9dc20999c332473d"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#acde6e041e51a069f9dc20999c332473d">ApplyProbabilityScale</a> (<a class="el" href="classfloat.html">float</a> scale, MutableFst&lt; Arc &gt; *fst)</td></tr>
<tr class="memdesc:acde6e041e51a069f9dc20999c332473d"><td class="mdescLeft">&#160;</td><td class="mdescRight">ApplyProbabilityScale is applicable to FSTs in the log or tropical semiring.  <a href="#acde6e041e51a069f9dc20999c332473d">More...</a><br /></td></tr>
<tr class="separator:acde6e041e51a069f9dc20999c332473d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af575c9b0e1e3a5d30f731f8f3cd027a2"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:af575c9b0e1e3a5d30f731f8f3cd027a2"><td class="memTemplItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#af575c9b0e1e3a5d30f731f8f3cd027a2">FindSelfLoopWithILabel</a> (const Fst&lt; Arc &gt; &amp;fst, typename Arc::StateId s)</td></tr>
<tr class="separator:af575c9b0e1e3a5d30f731f8f3cd027a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fc98c1743a4bd467d655e9634636027"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a4fc98c1743a4bd467d655e9634636027"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a4fc98c1743a4bd467d655e9634636027">EqualAlign</a> (const Fst&lt; Arc &gt; &amp;ifst, typename Arc::StateId length, int rand_seed, MutableFst&lt; Arc &gt; *ofst, int num_retries=10)</td></tr>
<tr class="memdesc:a4fc98c1743a4bd467d655e9634636027"><td class="mdescLeft">&#160;</td><td class="mdescRight">EqualAlign is similar to RandGen, but it generates a sequence with exactly "length" input symbols.  <a href="#a4fc98c1743a4bd467d655e9634636027">More...</a><br /></td></tr>
<tr class="separator:a4fc98c1743a4bd467d655e9634636027"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfb3de4d04cbaf233f99b259362eeba2"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:adfb3de4d04cbaf233f99b259362eeba2"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#adfb3de4d04cbaf233f99b259362eeba2">RemoveUselessArcs</a> (MutableFst&lt; Arc &gt; *fst)</td></tr>
<tr class="separator:adfb3de4d04cbaf233f99b259362eeba2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67b9ceed91eb95e8f3beeb42563e4c4b"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a67b9ceed91eb95e8f3beeb42563e4c4b"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a67b9ceed91eb95e8f3beeb42563e4c4b">PhiCompose</a> (const Fst&lt; Arc &gt; &amp;fst1, const Fst&lt; Arc &gt; &amp;fst2, typename Arc::Label phi_label, MutableFst&lt; Arc &gt; *ofst)</td></tr>
<tr class="separator:a67b9ceed91eb95e8f3beeb42563e4c4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53cbf1caf23dd66f4b9d2ec6a03bf65e"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a53cbf1caf23dd66f4b9d2ec6a03bf65e"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a53cbf1caf23dd66f4b9d2ec6a03bf65e">PropagateFinalInternal</a> (typename Arc::Label phi_label, typename Arc::StateId s, MutableFst&lt; Arc &gt; *fst)</td></tr>
<tr class="separator:a53cbf1caf23dd66f4b9d2ec6a03bf65e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0eae40426db120dd1fd95a8ce9ea908"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:ae0eae40426db120dd1fd95a8ce9ea908"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#ae0eae40426db120dd1fd95a8ce9ea908">PropagateFinal</a> (typename Arc::Label phi_label, MutableFst&lt; Arc &gt; *fst)</td></tr>
<tr class="separator:ae0eae40426db120dd1fd95a8ce9ea908"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b73c3b912ae5971263216fb1c988b2b"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a7b73c3b912ae5971263216fb1c988b2b"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a7b73c3b912ae5971263216fb1c988b2b">RhoCompose</a> (const Fst&lt; Arc &gt; &amp;fst1, const Fst&lt; Arc &gt; &amp;fst2, typename Arc::Label rho_label, MutableFst&lt; Arc &gt; *ofst)</td></tr>
<tr class="separator:a7b73c3b912ae5971263216fb1c988b2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05555697346e1b408792565dde384b77"><td class="memTemplParams" colspan="2">template&lt;&gt; </td></tr>
<tr class="memitem:a05555697346e1b408792565dde384b77"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a05555697346e1b408792565dde384b77">IsStochasticFst</a> (const Fst&lt; LogArc &gt; &amp;fst, <a class="el" href="classfloat.html">float</a> delta, LogArc::Weight *min_sum, LogArc::Weight *max_sum)</td></tr>
<tr class="separator:a05555697346e1b408792565dde384b77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeadbd8e023bf3b876ee83825235f5869"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:aeadbd8e023bf3b876ee83825235f5869"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#aeadbd8e023bf3b876ee83825235f5869">IsStochasticFst</a> (const Fst&lt; Arc &gt; &amp;fst, <a class="el" href="classfloat.html">float</a> delta=kDelta, typename Arc::Weight *min_sum=NULL, typename Arc::Weight *max_sum=NULL)</td></tr>
<tr class="memdesc:aeadbd8e023bf3b876ee83825235f5869"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function returns true if, in the semiring of the FST, the sum (within the semiring) of all the arcs out of each state in the FST is one, to within delta.  <a href="#aeadbd8e023bf3b876ee83825235f5869">More...</a><br /></td></tr>
<tr class="separator:aeadbd8e023bf3b876ee83825235f5869"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a313777cb91faed78bc50fc629a349f66"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a313777cb91faed78bc50fc629a349f66">IsStochasticFstInLog</a> (const Fst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; &amp;fst, <a class="el" href="classfloat.html">float</a> delta, StdArc::Weight *min_sum, StdArc::Weight *max_sum)</td></tr>
<tr class="separator:a313777cb91faed78bc50fc629a349f66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2aae6c34ab901e1d36fefbf9ffc5d0a8"><td class="memTemplParams" colspan="2">template&lt;class Arc , class I &gt; </td></tr>
<tr class="memitem:a2aae6c34ab901e1d36fefbf9ffc5d0a8"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a2aae6c34ab901e1d36fefbf9ffc5d0a8">TestMakeLinearAcceptor</a> ()</td></tr>
<tr class="separator:a2aae6c34ab901e1d36fefbf9ffc5d0a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b5aea17ab28307f7a332647f2cae6c6"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a8b5aea17ab28307f7a332647f2cae6c6"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a8b5aea17ab28307f7a332647f2cae6c6">TestDeterminizeStarInLog</a> ()</td></tr>
<tr class="separator:a8b5aea17ab28307f7a332647f2cae6c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a280ad72c50c6a6ceaa3159ca6bae9894"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a280ad72c50c6a6ceaa3159ca6bae9894"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a280ad72c50c6a6ceaa3159ca6bae9894">TestSafeDeterminizeWrapper</a> ()</td></tr>
<tr class="separator:a280ad72c50c6a6ceaa3159ca6bae9894"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad30f8a00c803d4a579a28faeca1a89d5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#ad30f8a00c803d4a579a28faeca1a89d5">TestPushInLog</a> ()</td></tr>
<tr class="separator:ad30f8a00c803d4a579a28faeca1a89d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46cc54bb3eb71e64f7d163ab55be9da4"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a46cc54bb3eb71e64f7d163ab55be9da4"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a46cc54bb3eb71e64f7d163ab55be9da4">TestAcceptorMinimize</a> ()</td></tr>
<tr class="separator:a46cc54bb3eb71e64f7d163ab55be9da4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d158f20467d8f3f9f852ba343e9af8a"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a9d158f20467d8f3f9f852ba343e9af8a"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a9d158f20467d8f3f9f852ba343e9af8a">TestMakeSymbolsSame</a> ()</td></tr>
<tr class="separator:a9d158f20467d8f3f9f852ba343e9af8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fbd45173abd899086592301f18f2522"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a5fbd45173abd899086592301f18f2522"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a5fbd45173abd899086592301f18f2522">TestMakeSymbolsSameClass</a> ()</td></tr>
<tr class="separator:a5fbd45173abd899086592301f18f2522"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a799ce7ea4de106861f51d6821a88bf04"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a799ce7ea4de106861f51d6821a88bf04"><td class="memTemplItemLeft" align="right" valign="top">VectorFst&lt; Arc &gt; *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a799ce7ea4de106861f51d6821a88bf04">MakeLoopFstCompare</a> (const vector&lt; const ExpandedFst&lt; Arc &gt; *&gt; &amp;fsts)</td></tr>
<tr class="separator:a799ce7ea4de106861f51d6821a88bf04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6595d247b3991fc5b4dac9ec45ad1a5"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:ae6595d247b3991fc5b4dac9ec45ad1a5"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#ae6595d247b3991fc5b4dac9ec45ad1a5">TestMakeLoopFst</a> ()</td></tr>
<tr class="separator:ae6595d247b3991fc5b4dac9ec45ad1a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ad6f174a14946dd388b86ffaaeb8a5e"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a9ad6f174a14946dd388b86ffaaeb8a5e"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a9ad6f174a14946dd388b86ffaaeb8a5e">TestEqualAlign</a> ()</td></tr>
<tr class="separator:a9ad6f174a14946dd388b86ffaaeb8a5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaadd097e429dad191dd0e94ee35cc90e"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:aaadd097e429dad191dd0e94ee35cc90e"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#aaadd097e429dad191dd0e94ee35cc90e">Print</a> (const Fst&lt; Arc &gt; &amp;fst, std::string message)</td></tr>
<tr class="separator:aaadd097e429dad191dd0e94ee35cc90e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13814f452b825aa9f51ae8050af77971"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a13814f452b825aa9f51ae8050af77971"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a13814f452b825aa9f51ae8050af77971">TestRemoveUselessArcs</a> ()</td></tr>
<tr class="separator:a13814f452b825aa9f51ae8050af77971"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a501146ab32fb0880facd197485bd2d0f"><td class="memTemplParams" colspan="2">template&lt;ReweightType rtype&gt; </td></tr>
<tr class="memitem:a501146ab32fb0880facd197485bd2d0f"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a501146ab32fb0880facd197485bd2d0f">PushInLog</a> (VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *fst, uint32 ptype, <a class="el" href="classfloat.html">float</a> delta=kDelta)</td></tr>
<tr class="separator:a501146ab32fb0880facd197485bd2d0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb4020188382e3aa0dafe317df145765"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:afb4020188382e3aa0dafe317df145765"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#afb4020188382e3aa0dafe317df145765">MinimizeEncoded</a> (VectorFst&lt; Arc &gt; *fst, <a class="el" href="classfloat.html">float</a> delta=kDelta)</td></tr>
<tr class="separator:afb4020188382e3aa0dafe317df145765"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21a6b661fb0fef2b84b13bde67d25a05"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a21a6b661fb0fef2b84b13bde67d25a05">ComposeContextLeftBiphone</a> (int32 nonterm_phones_offset, const vector&lt; int32 &gt; &amp;disambig_syms_in, const VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; &amp;ifst, VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *ofst, std::vector&lt; std::vector&lt; int32 &gt; &gt; *ilabels)</td></tr>
<tr class="memdesc:a21a6b661fb0fef2b84b13bde67d25a05"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a variant of the function <a class="el" href="namespacefst.html#a198edfe97614325be9828685b28d6235" title="Used in the command-line tool fstcomposecontext. ">ComposeContext()</a> which is to be used with our "grammar FST" framework (see <a class="el" href="graph.html#graph_context">The ContextFst object</a>, i.e.  <a href="#a21a6b661fb0fef2b84b13bde67d25a05">More...</a><br /></td></tr>
<tr class="separator:a21a6b661fb0fef2b84b13bde67d25a05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4828391bb3d612ffffaf704c14c30d6a"><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a4828391bb3d612ffffaf704c14c30d6a">GetEncodingMultiple</a> (int32 nonterm_phones_offset)</td></tr>
<tr class="separator:a4828391bb3d612ffffaf704c14c30d6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0d288fdc51aa72c70fe5af7ce3e34be"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#af0d288fdc51aa72c70fe5af7ce3e34be">ComposeContextLeftBiphone</a> (int32 nonterm_phones_offset, const vector&lt; int32 &gt; &amp;disambig_syms, const VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; &amp;ifst, VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *ofst, vector&lt; vector&lt; int32 &gt; &gt; *ilabels)</td></tr>
<tr class="memdesc:af0d288fdc51aa72c70fe5af7ce3e34be"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a variant of the function <a class="el" href="namespacefst.html#a198edfe97614325be9828685b28d6235" title="Used in the command-line tool fstcomposecontext. ">ComposeContext()</a> which is to be used with our "grammar FST" framework (see <a class="el" href="graph.html#graph_context">The ContextFst object</a>, i.e.  <a href="#af0d288fdc51aa72c70fe5af7ce3e34be">More...</a><br /></td></tr>
<tr class="separator:af0d288fdc51aa72c70fe5af7ce3e34be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4d1d7b428370986d1a8d122b83eebff"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:af4d1d7b428370986d1a8d122b83eebff"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#af4d1d7b428370986d1a8d122b83eebff">WriteFstKaldi</a> (std::ostream &amp;os, <a class="el" href="classbool.html">bool</a> binary, const VectorFst&lt; Arc &gt; &amp;t)</td></tr>
<tr class="separator:af4d1d7b428370986d1a8d122b83eebff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f846d9d9f15191161529f06a5c8909c"><td class="memTemplParams" colspan="2">template&lt;class W &gt; </td></tr>
<tr class="memitem:a7f846d9d9f15191161529f06a5c8909c"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a7f846d9d9f15191161529f06a5c8909c">StrToWeight</a> (const std::string &amp;s, <a class="el" href="classbool.html">bool</a> allow_zero, W *w)</td></tr>
<tr class="separator:a7f846d9d9f15191161529f06a5c8909c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a477c0ccbc8a9560e60fccc00526e1a62"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a477c0ccbc8a9560e60fccc00526e1a62"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a477c0ccbc8a9560e60fccc00526e1a62">ReadFstKaldi</a> (std::istream &amp;is, <a class="el" href="classbool.html">bool</a> binary, VectorFst&lt; Arc &gt; *fst)</td></tr>
<tr class="separator:a477c0ccbc8a9560e60fccc00526e1a62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad918f04119d515cf5a9cdb726f8ca996"><td class="memItemLeft" align="right" valign="top">VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#ad918f04119d515cf5a9cdb726f8ca996">ReadFstKaldi</a> (std::string rxfilename)</td></tr>
<tr class="separator:ad918f04119d515cf5a9cdb726f8ca996"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7191fa1ffa0b81bd49b98feb94a95fe6"><td class="memItemLeft" align="right" valign="top">Fst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a7191fa1ffa0b81bd49b98feb94a95fe6">ReadFstKaldiGeneric</a> (std::string rxfilename, <a class="el" href="classbool.html">bool</a> throw_on_err)</td></tr>
<tr class="separator:a7191fa1ffa0b81bd49b98feb94a95fe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f557ab4341ddad5fc3302f14aa9814a"><td class="memItemLeft" align="right" valign="top">VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a0f557ab4341ddad5fc3302f14aa9814a">CastOrConvertToVectorFst</a> (Fst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *fst)</td></tr>
<tr class="separator:a0f557ab4341ddad5fc3302f14aa9814a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4af6995bca3f3fb53439405f42165c19"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a4af6995bca3f3fb53439405f42165c19">ReadFstKaldi</a> (std::string rxfilename, <a class="el" href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">fst::StdVectorFst</a> *ofst)</td></tr>
<tr class="separator:a4af6995bca3f3fb53439405f42165c19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19221711656d7f96c97c442c5b1e3631"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a19221711656d7f96c97c442c5b1e3631">WriteFstKaldi</a> (const VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; &amp;fst, std::string wxfilename)</td></tr>
<tr class="separator:a19221711656d7f96c97c442c5b1e3631"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ebaa75f10ff622221ca4bac4104592a"><td class="memItemLeft" align="right" valign="top">fst::VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">fst::StdArc</a> &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a6ebaa75f10ff622221ca4bac4104592a">ReadAndPrepareLmFst</a> (std::string rxfilename)</td></tr>
<tr class="separator:a6ebaa75f10ff622221ca4bac4104592a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a102791361028fd97ce07cca6f2c26c82"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a102791361028fd97ce07cca6f2c26c82">ReadFstKaldi</a> (std::string rxfilename, VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *ofst)</td></tr>
<tr class="separator:a102791361028fd97ce07cca6f2c26c82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb292eda61ae2a04c5336c88b49ef832"><td class="memTemplParams" colspan="2">template&lt;class Weight , class Int &gt; </td></tr>
<tr class="memitem:abb292eda61ae2a04c5336c88b49ef832"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#abb292eda61ae2a04c5336c88b49ef832">ConvertLattice</a> (const ExpandedFst&lt; ArcTpl&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> &gt; &gt; &amp;ifst, MutableFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>, Int &gt; &gt; &gt; *ofst, <a class="el" href="classbool.html">bool</a> invert=true)</td></tr>
<tr class="memdesc:abb292eda61ae2a04c5336c88b49ef832"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert lattice from a normal FST to a CompactLattice FST.  <a href="#abb292eda61ae2a04c5336c88b49ef832">More...</a><br /></td></tr>
<tr class="separator:abb292eda61ae2a04c5336c88b49ef832"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9fa068a0ce8f0eaa3710c02d861e9de"><td class="memTemplParams" colspan="2">template&lt;class Weight , class Int &gt; </td></tr>
<tr class="memitem:ae9fa068a0ce8f0eaa3710c02d861e9de"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#ae9fa068a0ce8f0eaa3710c02d861e9de">ConvertLattice</a> (const ExpandedFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>, Int &gt; &gt; &gt; &amp;ifst, MutableFst&lt; ArcTpl&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> &gt; &gt; *ofst, <a class="el" href="classbool.html">bool</a> invert=true)</td></tr>
<tr class="memdesc:ae9fa068a0ce8f0eaa3710c02d861e9de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert lattice CompactLattice format to Lattice.  <a href="#ae9fa068a0ce8f0eaa3710c02d861e9de">More...</a><br /></td></tr>
<tr class="separator:ae9fa068a0ce8f0eaa3710c02d861e9de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e13b7fb1c17dc85ccc17bed2b047aa7"><td class="memTemplParams" colspan="2">template&lt;class WeightIn , class WeightOut &gt; </td></tr>
<tr class="memitem:a5e13b7fb1c17dc85ccc17bed2b047aa7"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a5e13b7fb1c17dc85ccc17bed2b047aa7">ConvertLattice</a> (const ExpandedFst&lt; ArcTpl&lt; WeightIn &gt; &gt; &amp;ifst, MutableFst&lt; ArcTpl&lt; WeightOut &gt; &gt; *ofst)</td></tr>
<tr class="memdesc:a5e13b7fb1c17dc85ccc17bed2b047aa7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert between CompactLattices and Lattices of different floating point types...  <a href="#a5e13b7fb1c17dc85ccc17bed2b047aa7">More...</a><br /></td></tr>
<tr class="separator:a5e13b7fb1c17dc85ccc17bed2b047aa7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43c0c2263cc58499e55a8e00176c3dc4"><td class="memTemplParams" colspan="2">template&lt;class Weight , class ScaleFloat &gt; </td></tr>
<tr class="memitem:a43c0c2263cc58499e55a8e00176c3dc4"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a43c0c2263cc58499e55a8e00176c3dc4">ScaleLattice</a> (const vector&lt; vector&lt; ScaleFloat &gt; &gt; &amp;scale, MutableFst&lt; ArcTpl&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> &gt; &gt; *fst)</td></tr>
<tr class="memdesc:a43c0c2263cc58499e55a8e00176c3dc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scales the pairs of weights in LatticeWeight or CompactLatticeWeight by viewing the pair (a, b) as a 2-vector and pre-multiplying by the 2x2 matrix in "scale".  <a href="#a43c0c2263cc58499e55a8e00176c3dc4">More...</a><br /></td></tr>
<tr class="separator:a43c0c2263cc58499e55a8e00176c3dc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47b707ba4aef86613621869006abe99a"><td class="memTemplParams" colspan="2">template&lt;class Weight , class Int &gt; </td></tr>
<tr class="memitem:a47b707ba4aef86613621869006abe99a"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a47b707ba4aef86613621869006abe99a">RemoveAlignmentsFromCompactLattice</a> (MutableFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>, Int &gt; &gt; &gt; *fst)</td></tr>
<tr class="memdesc:a47b707ba4aef86613621869006abe99a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes state-level alignments (the strings that are part of the weights).  <a href="#a47b707ba4aef86613621869006abe99a">More...</a><br /></td></tr>
<tr class="separator:a47b707ba4aef86613621869006abe99a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af406359703f3c4af2e1a1f8cf9bc1015"><td class="memTemplParams" colspan="2">template&lt;class Weight , class Int &gt; </td></tr>
<tr class="memitem:af406359703f3c4af2e1a1f8cf9bc1015"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#af406359703f3c4af2e1a1f8cf9bc1015">CompactLatticeHasAlignment</a> (const ExpandedFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>, Int &gt; &gt; &gt; &amp;fst)</td></tr>
<tr class="memdesc:af406359703f3c4af2e1a1f8cf9bc1015"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if lattice has alignments, i.e.  <a href="#af406359703f3c4af2e1a1f8cf9bc1015">More...</a><br /></td></tr>
<tr class="separator:af406359703f3c4af2e1a1f8cf9bc1015"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2eee5723a6815835fec137a69485438f"><td class="memTemplParams" colspan="2">template&lt;class Real &gt; </td></tr>
<tr class="memitem:a2eee5723a6815835fec137a69485438f"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a2eee5723a6815835fec137a69485438f">ConvertFstToLattice</a> (const ExpandedFst&lt; ArcTpl&lt; TropicalWeight &gt; &gt; &amp;ifst, MutableFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; Real &gt; &gt; &gt; *ofst)</td></tr>
<tr class="memdesc:a2eee5723a6815835fec137a69485438f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts TropicalWeight to LatticeWeight (puts all the weight on the first float in the lattice's pair).  <a href="#a2eee5723a6815835fec137a69485438f">More...</a><br /></td></tr>
<tr class="separator:a2eee5723a6815835fec137a69485438f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ad8889af98283110c8339214a6b988d"><td class="memTemplParams" colspan="2">template&lt;class Weight , class Int &gt; </td></tr>
<tr class="memitem:a2ad8889af98283110c8339214a6b988d"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a2ad8889af98283110c8339214a6b988d">TestConvert</a> (<a class="el" href="classbool.html">bool</a> invert)</td></tr>
<tr class="separator:a2ad8889af98283110c8339214a6b988d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4f2152f15d868e99055746a5c2b90ae"><td class="memTemplParams" colspan="2">template&lt;class Weight , class Int &gt; </td></tr>
<tr class="memitem:aa4f2152f15d868e99055746a5c2b90ae"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#aa4f2152f15d868e99055746a5c2b90ae">TestShortestPath</a> ()</td></tr>
<tr class="separator:aa4f2152f15d868e99055746a5c2b90ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a364b2973f58e8056e089a7ad98d0283a"><td class="memTemplParams" colspan="2">template&lt;class Int &gt; </td></tr>
<tr class="memitem:a364b2973f58e8056e089a7ad98d0283a"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a364b2973f58e8056e089a7ad98d0283a">TestConvert2</a> ()</td></tr>
<tr class="separator:a364b2973f58e8056e089a7ad98d0283a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36836a85df74b54af3ea2d5005e41f3a"><td class="memTemplParams" colspan="2">template&lt;class Weight , class Int &gt; </td></tr>
<tr class="memitem:a36836a85df74b54af3ea2d5005e41f3a"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a36836a85df74b54af3ea2d5005e41f3a">TestConvertPair</a> (<a class="el" href="classbool.html">bool</a> invert)</td></tr>
<tr class="separator:a36836a85df74b54af3ea2d5005e41f3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba6757ca2fbc1695f46ee013c77424b3"><td class="memTemplParams" colspan="2">template&lt;class Weight , class Int &gt; </td></tr>
<tr class="memitem:aba6757ca2fbc1695f46ee013c77424b3"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#aba6757ca2fbc1695f46ee013c77424b3">TestScalePair</a> (<a class="el" href="classbool.html">bool</a> invert)</td></tr>
<tr class="separator:aba6757ca2fbc1695f46ee013c77424b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80447060449bf4d9a8abfe9df3e62e55"><td class="memTemplParams" colspan="2">template&lt;class Int &gt; </td></tr>
<tr class="memitem:a80447060449bf4d9a8abfe9df3e62e55"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a80447060449bf4d9a8abfe9df3e62e55">ConvertLattice</a> (const ExpandedFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; <a class="el" href="classfloat.html">float</a> &gt; &gt; &gt; &amp;ifst, MutableFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; double &gt;, Int &gt; &gt; &gt; *ofst)</td></tr>
<tr class="separator:a80447060449bf4d9a8abfe9df3e62e55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a165cb74b34d2cef5aecb34ebdf9976f0"><td class="memTemplParams" colspan="2">template&lt;class Int &gt; </td></tr>
<tr class="memitem:a165cb74b34d2cef5aecb34ebdf9976f0"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a165cb74b34d2cef5aecb34ebdf9976f0">ConvertLattice</a> (const ExpandedFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; double &gt; &gt; &gt; &amp;ifst, MutableFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; <a class="el" href="classfloat.html">float</a> &gt;, Int &gt; &gt; &gt; *ofst)</td></tr>
<tr class="separator:a165cb74b34d2cef5aecb34ebdf9976f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7a8e25686ec7b4cfe080ee0c81cec24"><td class="memTemplParams" colspan="2">template&lt;class Int &gt; </td></tr>
<tr class="memitem:ab7a8e25686ec7b4cfe080ee0c81cec24"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#ab7a8e25686ec7b4cfe080ee0c81cec24">ConvertLattice</a> (const ExpandedFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; double &gt;, Int &gt; &gt; &gt; &amp;ifst, MutableFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; <a class="el" href="classfloat.html">float</a> &gt; &gt; &gt; *ofst)</td></tr>
<tr class="memdesc:ab7a8e25686ec7b4cfe080ee0c81cec24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts CompactLattice with double to Lattice with float.  <a href="#ab7a8e25686ec7b4cfe080ee0c81cec24">More...</a><br /></td></tr>
<tr class="separator:ab7a8e25686ec7b4cfe080ee0c81cec24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acda6ebb73ad680ecbc74daabf9436462"><td class="memTemplParams" colspan="2">template&lt;class Int &gt; </td></tr>
<tr class="memitem:acda6ebb73ad680ecbc74daabf9436462"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#acda6ebb73ad680ecbc74daabf9436462">ConvertLattice</a> (const ExpandedFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; <a class="el" href="classfloat.html">float</a> &gt;, Int &gt; &gt; &gt; &amp;ifst, MutableFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; double &gt; &gt; &gt; *ofst)</td></tr>
<tr class="memdesc:acda6ebb73ad680ecbc74daabf9436462"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts CompactLattice with float to Lattice with double.  <a href="#acda6ebb73ad680ecbc74daabf9436462">More...</a><br /></td></tr>
<tr class="separator:acda6ebb73ad680ecbc74daabf9436462"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a295c809e48d355794a9489f0aa35f4bb"><td class="memItemLeft" align="right" valign="top">vector&lt; vector&lt; double &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a295c809e48d355794a9489f0aa35f4bb">DefaultLatticeScale</a> ()</td></tr>
<tr class="memdesc:a295c809e48d355794a9489f0aa35f4bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a default 2x2 matrix scaling factor for LatticeWeight.  <a href="#a295c809e48d355794a9489f0aa35f4bb">More...</a><br /></td></tr>
<tr class="separator:a295c809e48d355794a9489f0aa35f4bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfea40731f16180f1e567f2aa14af9d9"><td class="memItemLeft" align="right" valign="top">vector&lt; vector&lt; double &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#acfea40731f16180f1e567f2aa14af9d9">AcousticLatticeScale</a> (double acwt)</td></tr>
<tr class="separator:acfea40731f16180f1e567f2aa14af9d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9af3b773968edcd5dd94e779dbae7f1"><td class="memItemLeft" align="right" valign="top">vector&lt; vector&lt; double &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#ad9af3b773968edcd5dd94e779dbae7f1">GraphLatticeScale</a> (double lmwt)</td></tr>
<tr class="separator:ad9af3b773968edcd5dd94e779dbae7f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa46731e5563a36fb8468a287bb913042"><td class="memItemLeft" align="right" valign="top">vector&lt; vector&lt; double &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#aa46731e5563a36fb8468a287bb913042">LatticeScale</a> (double lmwt, double acwt)</td></tr>
<tr class="separator:aa46731e5563a36fb8468a287bb913042"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f59fcf7c002f200801612c0d7f9e13c"><td class="memTemplParams" colspan="2">template&lt;class Weight , class Int &gt; </td></tr>
<tr class="memitem:a3f59fcf7c002f200801612c0d7f9e13c"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a3f59fcf7c002f200801612c0d7f9e13c">PruneCompactLattice</a> (<a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> beam, MutableFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>, Int &gt; &gt; &gt; *fst)</td></tr>
<tr class="separator:a3f59fcf7c002f200801612c0d7f9e13c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07194dbde79b19df5faffc996ac69113"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacefst.html#a312b29f86c5ef78810556e470635a291">LatticeWeight</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a07194dbde79b19df5faffc996ac69113">RandomLatticeWeight</a> ()</td></tr>
<tr class="separator:a07194dbde79b19df5faffc996ac69113"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01daf43f2d78080986c9140e239b11db"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacefst.html#a4b96c2715539a4b5008546dbe9d5085b">CompactLatticeWeight</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a01daf43f2d78080986c9140e239b11db">RandomCompactLatticeWeight</a> ()</td></tr>
<tr class="separator:a01daf43f2d78080986c9140e239b11db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51e672be16d0d197c24afba5a76916af"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a51e672be16d0d197c24afba5a76916af">LatticeWeightTest</a> ()</td></tr>
<tr class="separator:a51e672be16d0d197c24afba5a76916af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcea2c9852fcd6ca4086828be71e4d81"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#afcea2c9852fcd6ca4086828be71e4d81">CompactLatticeWeightTest</a> ()</td></tr>
<tr class="separator:afcea2c9852fcd6ca4086828be71e4d81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5fc44752f14df7daff770c77fd93fec"><td class="memTemplParams" colspan="2">template&lt;class FloatType &gt; </td></tr>
<tr class="memitem:aa5fc44752f14df7daff770c77fd93fec"><td class="memTemplItemLeft" align="right" valign="top">ostream &amp;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#aa5fc44752f14df7daff770c77fd93fec">operator&lt;&lt;</a> (ostream &amp;strm, const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;w)</td></tr>
<tr class="separator:aa5fc44752f14df7daff770c77fd93fec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeafae94f54edef21078094a831826afe"><td class="memTemplParams" colspan="2">template&lt;class FloatType &gt; </td></tr>
<tr class="memitem:aeafae94f54edef21078094a831826afe"><td class="memTemplItemLeft" align="right" valign="top">istream &amp;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#aeafae94f54edef21078094a831826afe">operator&gt;&gt;</a> (istream &amp;strm, <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;w)</td></tr>
<tr class="separator:aeafae94f54edef21078094a831826afe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ce7436781aadfd93c45023d1791826b"><td class="memTemplParams" colspan="2">template&lt;class FloatType , class ScaleFloatType &gt; </td></tr>
<tr class="memitem:a9ce7436781aadfd93c45023d1791826b"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a9ce7436781aadfd93c45023d1791826b">ScaleTupleWeight</a> (const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;w, const vector&lt; vector&lt; ScaleFloatType &gt; &gt; &amp;scale)</td></tr>
<tr class="separator:a9ce7436781aadfd93c45023d1791826b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57c26dbd9293618187cd15a031f8a72b"><td class="memTemplParams" colspan="2">template&lt;class FloatType , class ScaleFloatType &gt; </td></tr>
<tr class="memitem:a57c26dbd9293618187cd15a031f8a72b"><td class="memTemplItemLeft" align="right" valign="top">PairWeight&lt; TropicalWeightTpl&lt; FloatType &gt;, TropicalWeightTpl&lt; FloatType &gt; &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a57c26dbd9293618187cd15a031f8a72b">ScaleTupleWeight</a> (const PairWeight&lt; TropicalWeightTpl&lt; FloatType &gt;, TropicalWeightTpl&lt; FloatType &gt; &gt; &amp;w, const vector&lt; vector&lt; ScaleFloatType &gt; &gt; &amp;scale)</td></tr>
<tr class="separator:a57c26dbd9293618187cd15a031f8a72b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4490313abee604c0fea7b0e6999b1d6"><td class="memTemplParams" colspan="2">template&lt;class FloatType &gt; </td></tr>
<tr class="memitem:af4490313abee604c0fea7b0e6999b1d6"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#af4490313abee604c0fea7b0e6999b1d6">operator==</a> (const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;wa, const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;wb)</td></tr>
<tr class="separator:af4490313abee604c0fea7b0e6999b1d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c494f444664668fce163b8a450a279c"><td class="memTemplParams" colspan="2">template&lt;class FloatType &gt; </td></tr>
<tr class="memitem:a6c494f444664668fce163b8a450a279c"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a6c494f444664668fce163b8a450a279c">operator!=</a> (const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;wa, const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;wb)</td></tr>
<tr class="separator:a6c494f444664668fce163b8a450a279c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf747c74695ff3610637fdce3fc3b6a4"><td class="memTemplParams" colspan="2">template&lt;class FloatType &gt; </td></tr>
<tr class="memitem:adf747c74695ff3610637fdce3fc3b6a4"><td class="memTemplItemLeft" align="right" valign="top">int&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#adf747c74695ff3610637fdce3fc3b6a4">Compare</a> (const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;w1, const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;w2)</td></tr>
<tr class="memdesc:adf747c74695ff3610637fdce3fc3b6a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compare returns -1 if w1 &lt; w2, +1 if w1 &gt; w2, and 0 if w1 == w2.  <a href="#adf747c74695ff3610637fdce3fc3b6a4">More...</a><br /></td></tr>
<tr class="separator:adf747c74695ff3610637fdce3fc3b6a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbb3ae5b68808cb433cc710a7052c4c4"><td class="memTemplParams" colspan="2">template&lt;class FloatType &gt; </td></tr>
<tr class="memitem:afbb3ae5b68808cb433cc710a7052c4c4"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a> (const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;w1, const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;w2)</td></tr>
<tr class="separator:afbb3ae5b68808cb433cc710a7052c4c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0807071c6ceb397bc35281fce74ff8a7"><td class="memTemplParams" colspan="2">template&lt;class FloatType &gt; </td></tr>
<tr class="memitem:a0807071c6ceb397bc35281fce74ff8a7"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a> (const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;w1, const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;w2)</td></tr>
<tr class="separator:a0807071c6ceb397bc35281fce74ff8a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a694bc33e16bfb9d7a1639f8488508d20"><td class="memTemplParams" colspan="2">template&lt;class FloatType &gt; </td></tr>
<tr class="memitem:a694bc33e16bfb9d7a1639f8488508d20"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a694bc33e16bfb9d7a1639f8488508d20">Divide</a> (const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;w1, const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;w2, DivideType typ=DIVIDE_ANY)</td></tr>
<tr class="separator:a694bc33e16bfb9d7a1639f8488508d20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9042f129a0e7ab56de347dc9a71f14b2"><td class="memTemplParams" colspan="2">template&lt;class FloatType &gt; </td></tr>
<tr class="memitem:a9042f129a0e7ab56de347dc9a71f14b2"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a9042f129a0e7ab56de347dc9a71f14b2">ApproxEqual</a> (const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;w1, const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;w2, <a class="el" href="classfloat.html">float</a> delta=kDelta)</td></tr>
<tr class="separator:a9042f129a0e7ab56de347dc9a71f14b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b73dbb23e6e1f8aea156ed9dc905c22"><td class="memTemplParams" colspan="2">template&lt;class WeightType , class IntType &gt; </td></tr>
<tr class="memitem:a0b73dbb23e6e1f8aea156ed9dc905c22"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a0b73dbb23e6e1f8aea156ed9dc905c22">operator==</a> (const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;w1, const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;w2)</td></tr>
<tr class="separator:a0b73dbb23e6e1f8aea156ed9dc905c22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefe372ac9ec0c6f5cc104406d770c8cd"><td class="memTemplParams" colspan="2">template&lt;class WeightType , class IntType &gt; </td></tr>
<tr class="memitem:aefe372ac9ec0c6f5cc104406d770c8cd"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#aefe372ac9ec0c6f5cc104406d770c8cd">operator!=</a> (const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;w1, const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;w2)</td></tr>
<tr class="separator:aefe372ac9ec0c6f5cc104406d770c8cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67438f971c176f9ef20c8247e900a9b8"><td class="memTemplParams" colspan="2">template&lt;class WeightType , class IntType &gt; </td></tr>
<tr class="memitem:a67438f971c176f9ef20c8247e900a9b8"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a67438f971c176f9ef20c8247e900a9b8">ApproxEqual</a> (const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;w1, const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;w2, <a class="el" href="classfloat.html">float</a> delta=kDelta)</td></tr>
<tr class="separator:a67438f971c176f9ef20c8247e900a9b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bd76f49ec8a92905a464d7d4ac903de"><td class="memTemplParams" colspan="2">template&lt;class WeightType , class IntType &gt; </td></tr>
<tr class="memitem:a3bd76f49ec8a92905a464d7d4ac903de"><td class="memTemplItemLeft" align="right" valign="top">int&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a3bd76f49ec8a92905a464d7d4ac903de">Compare</a> (const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;w1, const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;w2)</td></tr>
<tr class="separator:a3bd76f49ec8a92905a464d7d4ac903de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cd0f5b5b35f6273907ef74cb7a7e8d2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a5cd0f5b5b35f6273907ef74cb7a7e8d2">Compare</a> (const TropicalWeight &amp;w1, const TropicalWeight &amp;w2)</td></tr>
<tr class="separator:a5cd0f5b5b35f6273907ef74cb7a7e8d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18e7585d41664b22aac30309645bdbac"><td class="memTemplParams" colspan="2">template&lt;class WeightType , class IntType &gt; </td></tr>
<tr class="memitem:a18e7585d41664b22aac30309645bdbac"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a18e7585d41664b22aac30309645bdbac">Plus</a> (const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;w1, const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;w2)</td></tr>
<tr class="separator:a18e7585d41664b22aac30309645bdbac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7512896457d14cac2dc2804d7200162a"><td class="memTemplParams" colspan="2">template&lt;class WeightType , class IntType &gt; </td></tr>
<tr class="memitem:a7512896457d14cac2dc2804d7200162a"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a7512896457d14cac2dc2804d7200162a">Times</a> (const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;w1, const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;w2)</td></tr>
<tr class="separator:a7512896457d14cac2dc2804d7200162a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ca31d235c7e8f830b3009e25b9a1f24"><td class="memTemplParams" colspan="2">template&lt;class WeightType , class IntType &gt; </td></tr>
<tr class="memitem:a1ca31d235c7e8f830b3009e25b9a1f24"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a1ca31d235c7e8f830b3009e25b9a1f24">Divide</a> (const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;w1, const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;w2, DivideType div=DIVIDE_ANY)</td></tr>
<tr class="separator:a1ca31d235c7e8f830b3009e25b9a1f24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa306277eef4aa59876984dfeb605f3e5"><td class="memTemplParams" colspan="2">template&lt;class WeightType , class IntType &gt; </td></tr>
<tr class="memitem:aa306277eef4aa59876984dfeb605f3e5"><td class="memTemplItemLeft" align="right" valign="top">ostream &amp;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#aa306277eef4aa59876984dfeb605f3e5">operator&lt;&lt;</a> (ostream &amp;strm, const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;w)</td></tr>
<tr class="separator:aa306277eef4aa59876984dfeb605f3e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6b23838b36a6a7b0ada0e968ff42455"><td class="memTemplParams" colspan="2">template&lt;class WeightType , class IntType &gt; </td></tr>
<tr class="memitem:ac6b23838b36a6a7b0ada0e968ff42455"><td class="memTemplItemLeft" align="right" valign="top">istream &amp;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#ac6b23838b36a6a7b0ada0e968ff42455">operator&gt;&gt;</a> (istream &amp;strm, <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;w)</td></tr>
<tr class="separator:ac6b23838b36a6a7b0ada0e968ff42455"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77b6227fe3877df652306b8b797324e7"><td class="memTemplParams" colspan="2">template&lt;class Weight , class IntType , class ScaleFloatType &gt; </td></tr>
<tr class="memitem:a77b6227fe3877df652306b8b797324e7"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>, IntType &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a77b6227fe3877df652306b8b797324e7">ScaleTupleWeight</a> (const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>, IntType &gt; &amp;w, const vector&lt; vector&lt; ScaleFloatType &gt; &gt; &amp;scale)</td></tr>
<tr class="memdesc:a77b6227fe3877df652306b8b797324e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scales the pair (a, b) of floating-point weights inside a CompactLatticeWeight by premultiplying it (viewed as a vector) by a 2x2 matrix "scale".  <a href="#a77b6227fe3877df652306b8b797324e7">More...</a><br /></td></tr>
<tr class="separator:a77b6227fe3877df652306b8b797324e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3022c591548796746abd21f94e8eff64"><td class="memTemplParams" colspan="2">template&lt;class Float1 , class Float2 &gt; </td></tr>
<tr class="memitem:a3022c591548796746abd21f94e8eff64"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a3022c591548796746abd21f94e8eff64">ConvertLatticeWeight</a> (const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; Float1 &gt; &amp;w_in, <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; Float2 &gt; *w_out)</td></tr>
<tr class="memdesc:a3022c591548796746abd21f94e8eff64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define some ConvertLatticeWeight functions that are used in various lattice conversions...  <a href="#a3022c591548796746abd21f94e8eff64">More...</a><br /></td></tr>
<tr class="separator:a3022c591548796746abd21f94e8eff64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8ba8d11c7c95beaaf4b4288aec32d6a"><td class="memTemplParams" colspan="2">template&lt;class Float1 , class Float2 , class Int &gt; </td></tr>
<tr class="memitem:ad8ba8d11c7c95beaaf4b4288aec32d6a"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#ad8ba8d11c7c95beaaf4b4288aec32d6a">ConvertLatticeWeight</a> (const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; Float1 &gt;, Int &gt; &amp;w_in, <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; Float2 &gt;, Int &gt; *w_out)</td></tr>
<tr class="separator:ad8ba8d11c7c95beaaf4b4288aec32d6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad476963d9a09d93fed7fd09831facffb"><td class="memTemplParams" colspan="2">template&lt;class Float1 , class Float2 &gt; </td></tr>
<tr class="memitem:ad476963d9a09d93fed7fd09831facffb"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#ad476963d9a09d93fed7fd09831facffb">ConvertLatticeWeight</a> (const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; Float1 &gt; &amp;w_in, TropicalWeightTpl&lt; Float2 &gt; *w_out)</td></tr>
<tr class="separator:ad476963d9a09d93fed7fd09831facffb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac05b62e18be915dd13b3ff6c7001003c"><td class="memTemplParams" colspan="2">template&lt;class Float &gt; </td></tr>
<tr class="memitem:ac05b62e18be915dd13b3ff6c7001003c"><td class="memTemplItemLeft" align="right" valign="top">double&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#ac05b62e18be915dd13b3ff6c7001003c">ConvertToCost</a> (const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; Float &gt; &amp;w)</td></tr>
<tr class="separator:ac05b62e18be915dd13b3ff6c7001003c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc67d4111308f2990286df01843e9ef6"><td class="memTemplParams" colspan="2">template&lt;class Float , class Int &gt; </td></tr>
<tr class="memitem:acc67d4111308f2990286df01843e9ef6"><td class="memTemplItemLeft" align="right" valign="top">double&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#acc67d4111308f2990286df01843e9ef6">ConvertToCost</a> (const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; Float &gt;, Int &gt; &amp;w)</td></tr>
<tr class="separator:acc67d4111308f2990286df01843e9ef6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c37a99192155302866beab3f9bd78f0"><td class="memTemplParams" colspan="2">template&lt;class Float &gt; </td></tr>
<tr class="memitem:a1c37a99192155302866beab3f9bd78f0"><td class="memTemplItemLeft" align="right" valign="top">double&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a1c37a99192155302866beab3f9bd78f0">ConvertToCost</a> (const TropicalWeightTpl&lt; Float &gt; &amp;w)</td></tr>
<tr class="separator:a1c37a99192155302866beab3f9bd78f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf75c786b2e62e985ace7739c5e58e77"><td class="memTemplParams" colspan="2">template&lt;class Arc , class Int &gt; </td></tr>
<tr class="memitem:aaf75c786b2e62e985ace7739c5e58e77"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#aaf75c786b2e62e985ace7739c5e58e77">PreDeterminize</a> (MutableFst&lt; Arc &gt; *fst, typename Arc::Label first_new_sym, vector&lt; Int &gt; *symsOut)</td></tr>
<tr class="separator:aaf75c786b2e62e985ace7739c5e58e77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a414bcae5fa37960a55aa30a8ecad31d8"><td class="memTemplParams" colspan="2">template&lt;class Label &gt; </td></tr>
<tr class="memitem:a414bcae5fa37960a55aa30a8ecad31d8"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a414bcae5fa37960a55aa30a8ecad31d8">CreateNewSymbols</a> (SymbolTable *input_sym_table, int nSym, std::string prefix, vector&lt; <a class="el" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a> &gt; *symsOut)</td></tr>
<tr class="separator:a414bcae5fa37960a55aa30a8ecad31d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7181b1bceae5beb0147d81bc611d5207"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a7181b1bceae5beb0147d81bc611d5207"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a7181b1bceae5beb0147d81bc611d5207">AddSelfLoops</a> (MutableFst&lt; Arc &gt; *fst, vector&lt; typename Arc::Label &gt; &amp;isyms, vector&lt; typename Arc::Label &gt; &amp;osyms)</td></tr>
<tr class="memdesc:a7181b1bceae5beb0147d81bc611d5207"><td class="mdescLeft">&#160;</td><td class="mdescRight">AddSelfLoops is a function you will probably want to use alongside PreDeterminize, to add self-loops to any FSTs that you compose on the left hand side of the one modified by PreDeterminize.  <a href="#a7181b1bceae5beb0147d81bc611d5207">More...</a><br /></td></tr>
<tr class="separator:a7181b1bceae5beb0147d81bc611d5207"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad573c7b2172714c534c18d58ec0dd93a"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:ad573c7b2172714c534c18d58ec0dd93a"><td class="memTemplItemLeft" align="right" valign="top">int64&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#ad573c7b2172714c534c18d58ec0dd93a">DeleteISymbols</a> (MutableFst&lt; Arc &gt; *fst, vector&lt; typename Arc::Label &gt; isyms)</td></tr>
<tr class="separator:ad573c7b2172714c534c18d58ec0dd93a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af612cf218dbb31edf2567bf7cdc70c79"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:af612cf218dbb31edf2567bf7cdc70c79"><td class="memTemplItemLeft" align="right" valign="top">Arc::StateId&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#af612cf218dbb31edf2567bf7cdc70c79">CreateSuperFinal</a> (MutableFst&lt; Arc &gt; *fst)</td></tr>
<tr class="separator:af612cf218dbb31edf2567bf7cdc70c79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e0f8a739801e3b1c8811f1f29730e8e"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a6e0f8a739801e3b1c8811f1f29730e8e"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a6e0f8a739801e3b1c8811f1f29730e8e">TestPreDeterminize</a> ()</td></tr>
<tr class="separator:a6e0f8a739801e3b1c8811f1f29730e8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f7eda522e7cfe853fd685bc06ccc159"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a6f7eda522e7cfe853fd685bc06ccc159"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a6f7eda522e7cfe853fd685bc06ccc159">TestAddSelfLoops</a> ()</td></tr>
<tr class="separator:a6f7eda522e7cfe853fd685bc06ccc159"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2078f30f8e57480c6c0aa2208d35a2eb"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a2078f30f8e57480c6c0aa2208d35a2eb"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a2078f30f8e57480c6c0aa2208d35a2eb">PruneSpecial</a> (const Fst&lt; Arc &gt; &amp;ifst, VectorFst&lt; Arc &gt; *ofst, typename Arc::Weight beam, <a class="el" href="classsize__t.html">size_t</a> max_states=0)</td></tr>
<tr class="memdesc:a2078f30f8e57480c6c0aa2208d35a2eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">The function PruneSpecial is like the standard OpenFst function "prune", except it does not expand the entire "ifst"- this is useful for cases where ifst is an on-demand FST such as a ComposeFst and we don't want to visit it all.  <a href="#a2078f30f8e57480c6c0aa2208d35a2eb">More...</a><br /></td></tr>
<tr class="separator:a2078f30f8e57480c6c0aa2208d35a2eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ccddbbd4041ecf41dda012b2c5fbd52"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a3ccddbbd4041ecf41dda012b2c5fbd52">TestPruneSpecial</a> ()</td></tr>
<tr class="separator:a3ccddbbd4041ecf41dda012b2c5fbd52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2349d406044ec6e0c62b1be562240739"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a2349d406044ec6e0c62b1be562240739">TestPushSpecial</a> ()</td></tr>
<tr class="separator:a2349d406044ec6e0c62b1be562240739"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebe0ba379ba5033e6e26084d5b7ae59f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#aebe0ba379ba5033e6e26084d5b7ae59f">PushSpecial</a> (VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *fst, <a class="el" href="classfloat.html">float</a> delta)</td></tr>
<tr class="separator:aebe0ba379ba5033e6e26084d5b7ae59f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6eaeadc75ec86fd77287ad5ee75af9ce"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a6eaeadc75ec86fd77287ad5ee75af9ce"><td class="memTemplItemLeft" align="right" valign="top">VectorFst&lt; Arc &gt; *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a6eaeadc75ec86fd77287ad5ee75af9ce">RandFst</a> (<a class="el" href="structfst_1_1RandFstOptions.html">RandFstOptions</a> opts=<a class="el" href="structfst_1_1RandFstOptions.html">RandFstOptions</a>())</td></tr>
<tr class="memdesc:a6eaeadc75ec86fd77287ad5ee75af9ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a random FST.  <a href="#a6eaeadc75ec86fd77287ad5ee75af9ce">More...</a><br /></td></tr>
<tr class="separator:a6eaeadc75ec86fd77287ad5ee75af9ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59098866f3e0da7502de95eba3c7f35d"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a59098866f3e0da7502de95eba3c7f35d"><td class="memTemplItemLeft" align="right" valign="top">VectorFst&lt; Arc &gt; *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a59098866f3e0da7502de95eba3c7f35d">RandPairFst</a> (<a class="el" href="structfst_1_1RandFstOptions.html">RandFstOptions</a> opts=<a class="el" href="structfst_1_1RandFstOptions.html">RandFstOptions</a>())</td></tr>
<tr class="memdesc:a59098866f3e0da7502de95eba3c7f35d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a random FST.  <a href="#a59098866f3e0da7502de95eba3c7f35d">More...</a><br /></td></tr>
<tr class="separator:a59098866f3e0da7502de95eba3c7f35d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa21bb5fdd25868b9fd813a15f37aef8e"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:aa21bb5fdd25868b9fd813a15f37aef8e"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#aa21bb5fdd25868b9fd813a15f37aef8e">RemoveEpsLocal</a> (MutableFst&lt; Arc &gt; *fst)</td></tr>
<tr class="memdesc:aa21bb5fdd25868b9fd813a15f37aef8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">RemoveEpsLocal remove some (but not necessarily all) epsilons in an FST, using an algorithm that is guaranteed to never increase the number of arcs in the FST (and will also never increase the number of states).  <a href="#aa21bb5fdd25868b9fd813a15f37aef8e">More...</a><br /></td></tr>
<tr class="separator:aa21bb5fdd25868b9fd813a15f37aef8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae64b4835d6f9be3bcf646e644542ef8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#aae64b4835d6f9be3bcf646e644542ef8">RemoveEpsLocalSpecial</a> (MutableFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *fst)</td></tr>
<tr class="memdesc:aae64b4835d6f9be3bcf646e644542ef8"><td class="mdescLeft">&#160;</td><td class="mdescRight">As RemoveEpsLocal but takes care to preserve stochasticity when cast to LogArc.  <a href="#aae64b4835d6f9be3bcf646e644542ef8">More...</a><br /></td></tr>
<tr class="separator:aae64b4835d6f9be3bcf646e644542ef8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a449742baa0a94afb18a4bbf881c99c72"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a449742baa0a94afb18a4bbf881c99c72"><td class="memTemplItemLeft" align="right" valign="top">static void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a449742baa0a94afb18a4bbf881c99c72">TestRemoveEpsLocal</a> ()</td></tr>
<tr class="separator:a449742baa0a94afb18a4bbf881c99c72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a583edbd3986c1e0ad24f38abf6532a84"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a583edbd3986c1e0ad24f38abf6532a84">TestRemoveEpsLocalSpecial</a> ()</td></tr>
<tr class="separator:a583edbd3986c1e0ad24f38abf6532a84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad03ee5dac5fe7e79c63d7ded81c5b293"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:ad03ee5dac5fe7e79c63d7ded81c5b293"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#ad03ee5dac5fe7e79c63d7ded81c5b293">TestTableMatcher</a> (<a class="el" href="classbool.html">bool</a> connect, <a class="el" href="classbool.html">bool</a> left)</td></tr>
<tr class="separator:ad03ee5dac5fe7e79c63d7ded81c5b293"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0ba3411c7524cd9232d939597c23e87"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:ac0ba3411c7524cd9232d939597c23e87"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#ac0ba3411c7524cd9232d939597c23e87">TestTableMatcherCacheLeft</a> (<a class="el" href="classbool.html">bool</a> connect)</td></tr>
<tr class="separator:ac0ba3411c7524cd9232d939597c23e87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae69f1ed37a40f8a2fa5f514dfce6126d"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:ae69f1ed37a40f8a2fa5f514dfce6126d"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#ae69f1ed37a40f8a2fa5f514dfce6126d">TestTableMatcherCacheRight</a> (<a class="el" href="classbool.html">bool</a> connect)</td></tr>
<tr class="separator:ae69f1ed37a40f8a2fa5f514dfce6126d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4121807cfc94de5efb2420716093ca6"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:aa4121807cfc94de5efb2420716093ca6"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#aa4121807cfc94de5efb2420716093ca6">TableCompose</a> (const Fst&lt; Arc &gt; &amp;ifst1, const Fst&lt; Arc &gt; &amp;ifst2, MutableFst&lt; Arc &gt; *ofst, const <a class="el" href="structfst_1_1TableComposeOptions.html">TableComposeOptions</a> &amp;opts=<a class="el" href="structfst_1_1TableComposeOptions.html">TableComposeOptions</a>())</td></tr>
<tr class="separator:aa4121807cfc94de5efb2420716093ca6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa5f211f4b0291079c1b4e42f3b419f1"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:aaa5f211f4b0291079c1b4e42f3b419f1"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#aaa5f211f4b0291079c1b4e42f3b419f1">TableCompose</a> (const Fst&lt; Arc &gt; &amp;ifst1, const Fst&lt; Arc &gt; &amp;ifst2, MutableFst&lt; Arc &gt; *ofst, <a class="el" href="structfst_1_1TableComposeCache.html">TableComposeCache</a>&lt; Fst&lt; Arc &gt; &gt; *cache)</td></tr>
<tr class="separator:aaa5f211f4b0291079c1b4e42f3b419f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a824142895ef709bee55df6cb6b99151d"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a824142895ef709bee55df6cb6b99151d"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a824142895ef709bee55df6cb6b99151d">TestFactor</a> ()</td></tr>
<tr class="separator:a824142895ef709bee55df6cb6b99151d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a279c469277315d755bd9ed37d718c377"><td class="memItemLeft" align="right" valign="top">static ConstFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a279c469277315d755bd9ed37d718c377">ReadConstFstFromStream</a> (std::istream &amp;is)</td></tr>
<tr class="separator:a279c469277315d755bd9ed37d718c377"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbbeb727f9b9258b2830e83c89dbedda"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#acbbeb727f9b9258b2830e83c89dbedda">PrepareForGrammarFst</a> (int32 nonterm_phones_offset, VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *fst)</td></tr>
<tr class="memdesc:acbbeb727f9b9258b2830e83c89dbedda"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function prepares 'ifst' for use in <a class="el" href="classfst_1_1GrammarFst.html" title="GrammarFst is an FST that is &#39;stitched together&#39; from multiple FSTs, that can recursively incorporate...">GrammarFst</a>: it ensures that it has the expected properties, changing it slightly as needed.  <a href="#acbbeb727f9b9258b2830e83c89dbedda">More...</a><br /></td></tr>
<tr class="separator:acbbeb727f9b9258b2830e83c89dbedda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ce371531425ec7d5049f73d839a16c1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a2ce371531425ec7d5049f73d839a16c1">CopyToVectorFst</a> (<a class="el" href="classfst_1_1GrammarFst.html">GrammarFst</a> *grammar_fst, VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *vector_fst)</td></tr>
<tr class="memdesc:a2ce371531425ec7d5049f73d839a16c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function copies a <a class="el" href="classfst_1_1GrammarFst.html" title="GrammarFst is an FST that is &#39;stitched together&#39; from multiple FSTs, that can recursively incorporate...">GrammarFst</a> to a VectorFst (intended mostly for testing and comparison purposes).  <a href="#a2ce371531425ec7d5049f73d839a16c1">More...</a><br /></td></tr>
<tr class="separator:a2ce371531425ec7d5049f73d839a16c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afce56ea11d9bebca73684091f028dfb0"><td class="memTemplParams" colspan="2">template&lt;class T &gt; </td></tr>
<tr class="memitem:afce56ea11d9bebca73684091f028dfb0"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; T &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#afce56ea11d9bebca73684091f028dfb0">Plus</a> (const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; T &gt; &amp;w1, const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; T &gt; &amp;w2)</td></tr>
<tr class="separator:afce56ea11d9bebca73684091f028dfb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91e18687a38d30d41d40c8932108b1c4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; <a class="el" href="classfloat.html">float</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a91e18687a38d30d41d40c8932108b1c4">Plus</a> (const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; <a class="el" href="classfloat.html">float</a> &gt; &amp;w1, const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; <a class="el" href="classfloat.html">float</a> &gt; &amp;w2)</td></tr>
<tr class="separator:a91e18687a38d30d41d40c8932108b1c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f450d9bf13077e5ce36b62857d25c2c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a9f450d9bf13077e5ce36b62857d25c2c">Plus</a> (const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; double &gt; &amp;w1, const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; double &gt; &amp;w2)</td></tr>
<tr class="separator:a9f450d9bf13077e5ce36b62857d25c2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5e7654cb24a10903d4df955be7ee82c"><td class="memTemplParams" colspan="2">template&lt;class T &gt; </td></tr>
<tr class="memitem:af5e7654cb24a10903d4df955be7ee82c"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; T &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#af5e7654cb24a10903d4df955be7ee82c">Times</a> (const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; T &gt; &amp;w1, const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; T &gt; &amp;w2)</td></tr>
<tr class="separator:af5e7654cb24a10903d4df955be7ee82c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1062db1a532f89db640fb251f52f3f8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; <a class="el" href="classfloat.html">float</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#aa1062db1a532f89db640fb251f52f3f8">Times</a> (const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; <a class="el" href="classfloat.html">float</a> &gt; &amp;w1, const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; <a class="el" href="classfloat.html">float</a> &gt; &amp;w2)</td></tr>
<tr class="separator:aa1062db1a532f89db640fb251f52f3f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05ba4b46b421548b3af8fc08bb328cd0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a05ba4b46b421548b3af8fc08bb328cd0">Times</a> (const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; double &gt; &amp;w1, const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; double &gt; &amp;w2)</td></tr>
<tr class="separator:a05ba4b46b421548b3af8fc08bb328cd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9166fb75b9a515b965d5f68239310018"><td class="memTemplParams" colspan="2">template&lt;class T &gt; </td></tr>
<tr class="memitem:a9166fb75b9a515b965d5f68239310018"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; T &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a9166fb75b9a515b965d5f68239310018">Divide</a> (const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; T &gt; &amp;w1, const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; T &gt; &amp;w2, DivideType typ=DIVIDE_ANY)</td></tr>
<tr class="separator:a9166fb75b9a515b965d5f68239310018"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa22137994af0e83470f6eafaa20fba87"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; <a class="el" href="classfloat.html">float</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#aa22137994af0e83470f6eafaa20fba87">Divide</a> (const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; <a class="el" href="classfloat.html">float</a> &gt; &amp;w1, const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; <a class="el" href="classfloat.html">float</a> &gt; &amp;w2, DivideType typ=DIVIDE_ANY)</td></tr>
<tr class="separator:aa22137994af0e83470f6eafaa20fba87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad57489159261565da04b4a30da378c1d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#ad57489159261565da04b4a30da378c1d">Divide</a> (const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; double &gt; &amp;w1, const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; double &gt; &amp;w2, DivideType typ=DIVIDE_ANY)</td></tr>
<tr class="separator:ad57489159261565da04b4a30da378c1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a520642da087cbad8f896919650f7fad5"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:a520642da087cbad8f896919650f7fad5"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a520642da087cbad8f896919650f7fad5">TestDeterminizeLatticePruned</a> ()</td></tr>
<tr class="separator:a520642da087cbad8f896919650f7fad5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb86d6ce69d71affd54da9ff0d6940dc"><td class="memTemplParams" colspan="2">template&lt;class Arc &gt; </td></tr>
<tr class="memitem:acb86d6ce69d71affd54da9ff0d6940dc"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#acb86d6ce69d71affd54da9ff0d6940dc">TestDeterminizeLatticePruned2</a> ()</td></tr>
<tr class="separator:acb86d6ce69d71affd54da9ff0d6940dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae37d77a64fdc7c92ad2c44ece0b74f9a"><td class="memTemplParams" colspan="2">template&lt;class Weight , class IntType &gt; </td></tr>
<tr class="memitem:gae37d77a64fdc7c92ad2c44ece0b74f9a"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__fst__extensions.html#gae37d77a64fdc7c92ad2c44ece0b74f9a">DeterminizeLatticePruned</a> (const ExpandedFst&lt; ArcTpl&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> &gt; &gt; &amp;ifst, double beam, MutableFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>, IntType &gt; &gt; &gt; *ofst, <a class="el" href="structfst_1_1DeterminizeLatticePrunedOptions.html">DeterminizeLatticePrunedOptions</a> opts)</td></tr>
<tr class="separator:gae37d77a64fdc7c92ad2c44ece0b74f9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga599f3ab3855e6847f4b23777e14b18ab"><td class="memTemplParams" colspan="2">template&lt;class Weight &gt; </td></tr>
<tr class="memitem:ga599f3ab3855e6847f4b23777e14b18ab"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__fst__extensions.html#ga599f3ab3855e6847f4b23777e14b18ab">DeterminizeLatticePruned</a> (const ExpandedFst&lt; ArcTpl&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> &gt; &gt; &amp;ifst, double prune, MutableFst&lt; ArcTpl&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> &gt; &gt; *ofst, <a class="el" href="structfst_1_1DeterminizeLatticePrunedOptions.html">DeterminizeLatticePrunedOptions</a> opts=<a class="el" href="structfst_1_1DeterminizeLatticePrunedOptions.html">DeterminizeLatticePrunedOptions</a>())</td></tr>
<tr class="memdesc:ga599f3ab3855e6847f4b23777e14b18ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function implements the normal version of DeterminizeLattice, in which the output strings are represented using sequences of arcs, where all but the first one has an epsilon on the input side.  <a href="group__fst__extensions.html#ga599f3ab3855e6847f4b23777e14b18ab">More...</a><br /></td></tr>
<tr class="separator:ga599f3ab3855e6847f4b23777e14b18ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadf1a298863d74aaa793841cdbb3b72fd"><td class="memTemplParams" colspan="2">template&lt;class Weight &gt; </td></tr>
<tr class="memitem:gadf1a298863d74aaa793841cdbb3b72fd"><td class="memTemplItemLeft" align="right" valign="top">ArcTpl&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> &gt;::<a class="el" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__fst__extensions.html#gadf1a298863d74aaa793841cdbb3b72fd">DeterminizeLatticeInsertPhones</a> (const <a class="el" href="classkaldi_1_1TransitionModel.html">kaldi::TransitionModel</a> &amp;trans_model, MutableFst&lt; ArcTpl&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> &gt; &gt; *fst)</td></tr>
<tr class="memdesc:gadf1a298863d74aaa793841cdbb3b72fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function takes in lattices and inserts phones at phone boundaries.  <a href="group__fst__extensions.html#gadf1a298863d74aaa793841cdbb3b72fd">More...</a><br /></td></tr>
<tr class="separator:gadf1a298863d74aaa793841cdbb3b72fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga39d3a3374e6395b20230e7294ca08e3e"><td class="memTemplParams" colspan="2">template&lt;class Weight &gt; </td></tr>
<tr class="memitem:ga39d3a3374e6395b20230e7294ca08e3e"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__fst__extensions.html#ga39d3a3374e6395b20230e7294ca08e3e">DeterminizeLatticeDeletePhones</a> (typename ArcTpl&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> &gt;::<a class="el" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a> first_phone_label, MutableFst&lt; ArcTpl&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> &gt; &gt; *fst)</td></tr>
<tr class="memdesc:ga39d3a3374e6395b20230e7294ca08e3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function takes in lattices and deletes "phones" from them.  <a href="group__fst__extensions.html#ga39d3a3374e6395b20230e7294ca08e3e">More...</a><br /></td></tr>
<tr class="separator:ga39d3a3374e6395b20230e7294ca08e3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e3c8d1359774dca3e2701dfb7a1e00a"><td class="memItemLeft" align="right" valign="top">template void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a9e3c8d1359774dca3e2701dfb7a1e00a">DeterminizeLatticeDeletePhones</a> (ArcTpl&lt; <a class="el" href="namespacefst.html#a312b29f86c5ef78810556e470635a291">kaldi::LatticeWeight</a> &gt;::<a class="el" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a> first_phone_label, MutableFst&lt; ArcTpl&lt; <a class="el" href="namespacefst.html#a312b29f86c5ef78810556e470635a291">kaldi::LatticeWeight</a> &gt; &gt; *fst)</td></tr>
<tr class="separator:a9e3c8d1359774dca3e2701dfb7a1e00a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5003d0c78ef934fae8501cf4af8d334a"><td class="memTemplParams" colspan="2">template&lt;class Weight , class IntType &gt; </td></tr>
<tr class="memitem:a5003d0c78ef934fae8501cf4af8d334a"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a5003d0c78ef934fae8501cf4af8d334a">DeterminizeLatticePhonePrunedFirstPass</a> (const <a class="el" href="classkaldi_1_1TransitionModel.html">kaldi::TransitionModel</a> &amp;trans_model, double beam, MutableFst&lt; ArcTpl&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> &gt; &gt; *fst, const <a class="el" href="structfst_1_1DeterminizeLatticePrunedOptions.html">DeterminizeLatticePrunedOptions</a> &amp;opts)</td></tr>
<tr class="memdesc:a5003d0c78ef934fae8501cf4af8d334a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function does a first pass determinization with phone symbols inserted at phone boundary.  <a href="#a5003d0c78ef934fae8501cf4af8d334a">More...</a><br /></td></tr>
<tr class="separator:a5003d0c78ef934fae8501cf4af8d334a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae7a66f2c18ebe4f4f00424aad0401bc5"><td class="memTemplParams" colspan="2">template&lt;class Weight , class IntType &gt; </td></tr>
<tr class="memitem:gae7a66f2c18ebe4f4f00424aad0401bc5"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__fst__extensions.html#gae7a66f2c18ebe4f4f00424aad0401bc5">DeterminizeLatticePhonePruned</a> (const <a class="el" href="classkaldi_1_1TransitionModel.html">kaldi::TransitionModel</a> &amp;trans_model, MutableFst&lt; ArcTpl&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> &gt; &gt; *ifst, double prune, MutableFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>, IntType &gt; &gt; &gt; *ofst, <a class="el" href="structfst_1_1DeterminizeLatticePhonePrunedOptions.html">DeterminizeLatticePhonePrunedOptions</a> opts=<a class="el" href="structfst_1_1DeterminizeLatticePhonePrunedOptions.html">DeterminizeLatticePhonePrunedOptions</a>())</td></tr>
<tr class="memdesc:gae7a66f2c18ebe4f4f00424aad0401bc5"><td class="mdescLeft">&#160;</td><td class="mdescRight">"Destructive" version of <a class="el" href="group__fst__extensions.html#gae7a66f2c18ebe4f4f00424aad0401bc5" title="&quot;Destructive&quot; version of DeterminizeLatticePhonePruned() where the input lattice might be changed...">DeterminizeLatticePhonePruned()</a> where the input lattice might be changed.  <a href="group__fst__extensions.html#gae7a66f2c18ebe4f4f00424aad0401bc5">More...</a><br /></td></tr>
<tr class="separator:gae7a66f2c18ebe4f4f00424aad0401bc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac2efca45f2bc492afa7a87f7a8eeff13"><td class="memTemplParams" colspan="2">template&lt;class Weight , class IntType &gt; </td></tr>
<tr class="memitem:gac2efca45f2bc492afa7a87f7a8eeff13"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__fst__extensions.html#gac2efca45f2bc492afa7a87f7a8eeff13">DeterminizeLatticePhonePruned</a> (const <a class="el" href="classkaldi_1_1TransitionModel.html">kaldi::TransitionModel</a> &amp;trans_model, const ExpandedFst&lt; ArcTpl&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> &gt; &gt; &amp;ifst, double prune, MutableFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>, IntType &gt; &gt; &gt; *ofst, <a class="el" href="structfst_1_1DeterminizeLatticePhonePrunedOptions.html">DeterminizeLatticePhonePrunedOptions</a> opts=<a class="el" href="structfst_1_1DeterminizeLatticePhonePrunedOptions.html">DeterminizeLatticePhonePrunedOptions</a>())</td></tr>
<tr class="memdesc:gac2efca45f2bc492afa7a87f7a8eeff13"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is a wrapper of <a class="el" href="namespacefst.html#a5003d0c78ef934fae8501cf4af8d334a" title="This function does a first pass determinization with phone symbols inserted at phone boundary...">DeterminizeLatticePhonePrunedFirstPass()</a> and <a class="el" href="group__fst__extensions.html#gae37d77a64fdc7c92ad2c44ece0b74f9a">DeterminizeLatticePruned()</a>.  <a href="group__fst__extensions.html#gac2efca45f2bc492afa7a87f7a8eeff13">More...</a><br /></td></tr>
<tr class="separator:gac2efca45f2bc492afa7a87f7a8eeff13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga49f7b58eaa834d7ad3535fee81de4d93"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fst__extensions.html#ga49f7b58eaa834d7ad3535fee81de4d93">DeterminizeLatticePhonePrunedWrapper</a> (const <a class="el" href="classkaldi_1_1TransitionModel.html">kaldi::TransitionModel</a> &amp;trans_model, MutableFst&lt; <a class="el" href="namespacekaldi.html#a417e37822095c5adb9680fa07dffea8d">kaldi::LatticeArc</a> &gt; *ifst, double prune, MutableFst&lt; <a class="el" href="namespacekaldi.html#a33b7ea55be82ee6bab64430dd93cbcba">kaldi::CompactLatticeArc</a> &gt; *ofst, <a class="el" href="structfst_1_1DeterminizeLatticePhonePrunedOptions.html">DeterminizeLatticePhonePrunedOptions</a> opts=<a class="el" href="structfst_1_1DeterminizeLatticePhonePrunedOptions.html">DeterminizeLatticePhonePrunedOptions</a>())</td></tr>
<tr class="memdesc:ga49f7b58eaa834d7ad3535fee81de4d93"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is a wrapper of <a class="el" href="group__fst__extensions.html#gae7a66f2c18ebe4f4f00424aad0401bc5" title="&quot;Destructive&quot; version of DeterminizeLatticePhonePruned() where the input lattice might be changed...">DeterminizeLatticePhonePruned()</a> that works for Lattice type FSTs.  <a href="group__fst__extensions.html#ga49f7b58eaa834d7ad3535fee81de4d93">More...</a><br /></td></tr>
<tr class="separator:ga49f7b58eaa834d7ad3535fee81de4d93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9883ed5858e5968dd42d7ebcbd905750"><td class="memItemLeft" align="right" valign="top">template <a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a9883ed5858e5968dd42d7ebcbd905750">DeterminizeLatticePruned&lt; kaldi::LatticeWeight &gt;</a> (const ExpandedFst&lt; <a class="el" href="namespacekaldi.html#a417e37822095c5adb9680fa07dffea8d">kaldi::LatticeArc</a> &gt; &amp;ifst, double prune, MutableFst&lt; <a class="el" href="namespacekaldi.html#a33b7ea55be82ee6bab64430dd93cbcba">kaldi::CompactLatticeArc</a> &gt; *ofst, <a class="el" href="structfst_1_1DeterminizeLatticePrunedOptions.html">DeterminizeLatticePrunedOptions</a> opts)</td></tr>
<tr class="separator:a9883ed5858e5968dd42d7ebcbd905750"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d57029ccc34c07a534562451f65ebff"><td class="memItemLeft" align="right" valign="top">template <a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a4d57029ccc34c07a534562451f65ebff">DeterminizeLatticePruned&lt; kaldi::LatticeWeight &gt;</a> (const ExpandedFst&lt; <a class="el" href="namespacekaldi.html#a417e37822095c5adb9680fa07dffea8d">kaldi::LatticeArc</a> &gt; &amp;ifst, double prune, MutableFst&lt; <a class="el" href="namespacekaldi.html#a417e37822095c5adb9680fa07dffea8d">kaldi::LatticeArc</a> &gt; *ofst, <a class="el" href="structfst_1_1DeterminizeLatticePrunedOptions.html">DeterminizeLatticePrunedOptions</a> opts)</td></tr>
<tr class="separator:a4d57029ccc34c07a534562451f65ebff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39a43bbc70e62aa9785a53df3cc50cba"><td class="memItemLeft" align="right" valign="top">template <a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a39a43bbc70e62aa9785a53df3cc50cba">DeterminizeLatticePhonePruned&lt; kaldi::LatticeWeight, kaldi::int32 &gt;</a> (const <a class="el" href="classkaldi_1_1TransitionModel.html">kaldi::TransitionModel</a> &amp;trans_model, const ExpandedFst&lt; <a class="el" href="namespacekaldi.html#a417e37822095c5adb9680fa07dffea8d">kaldi::LatticeArc</a> &gt; &amp;ifst, double prune, MutableFst&lt; <a class="el" href="namespacekaldi.html#a33b7ea55be82ee6bab64430dd93cbcba">kaldi::CompactLatticeArc</a> &gt; *ofst, <a class="el" href="structfst_1_1DeterminizeLatticePhonePrunedOptions.html">DeterminizeLatticePhonePrunedOptions</a> opts)</td></tr>
<tr class="separator:a39a43bbc70e62aa9785a53df3cc50cba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fa5db2a4df17faa5f07d207f1de2949"><td class="memItemLeft" align="right" valign="top">template <a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a6fa5db2a4df17faa5f07d207f1de2949">DeterminizeLatticePhonePruned&lt; kaldi::LatticeWeight, kaldi::int32 &gt;</a> (const <a class="el" href="classkaldi_1_1TransitionModel.html">kaldi::TransitionModel</a> &amp;trans_model, MutableFst&lt; <a class="el" href="namespacekaldi.html#a417e37822095c5adb9680fa07dffea8d">kaldi::LatticeArc</a> &gt; *ifst, double prune, MutableFst&lt; <a class="el" href="namespacekaldi.html#a33b7ea55be82ee6bab64430dd93cbcba">kaldi::CompactLatticeArc</a> &gt; *ofst, <a class="el" href="structfst_1_1DeterminizeLatticePhonePrunedOptions.html">DeterminizeLatticePhonePrunedOptions</a> opts)</td></tr>
<tr class="separator:a6fa5db2a4df17faa5f07d207f1de2949"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1fb399f92c63d329f3bdf7bb03b9313"><td class="memTemplParams" colspan="2">template&lt;class Weight , class IntType &gt; </td></tr>
<tr class="memitem:ae1fb399f92c63d329f3bdf7bb03b9313"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#ae1fb399f92c63d329f3bdf7bb03b9313">MinimizeCompactLattice</a> (MutableFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>, IntType &gt; &gt; &gt; *clat, <a class="el" href="classfloat.html">float</a> delta=fst::kDelta)</td></tr>
<tr class="memdesc:ae1fb399f92c63d329f3bdf7bb03b9313"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function minimizes the compact lattice.  <a href="#ae1fb399f92c63d329f3bdf7bb03b9313">More...</a><br /></td></tr>
<tr class="separator:ae1fb399f92c63d329f3bdf7bb03b9313"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5ae7b490c5efde5e1770a34335ca81a"><td class="memItemLeft" align="right" valign="top">template <a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#ae5ae7b490c5efde5e1770a34335ca81a">MinimizeCompactLattice&lt; kaldi::LatticeWeight, kaldi::int32 &gt;</a> (MutableFst&lt; <a class="el" href="namespacekaldi.html#a33b7ea55be82ee6bab64430dd93cbcba">kaldi::CompactLatticeArc</a> &gt; *clat, <a class="el" href="classfloat.html">float</a> delta)</td></tr>
<tr class="separator:ae5ae7b490c5efde5e1770a34335ca81a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a078fe1718d6f8404f60b5ee10132af09"><td class="memTemplParams" colspan="2">template&lt;class Weight , class IntType &gt; </td></tr>
<tr class="memitem:a078fe1718d6f8404f60b5ee10132af09"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a078fe1718d6f8404f60b5ee10132af09">PushCompactLatticeStrings</a> (MutableFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>, IntType &gt; &gt; &gt; *clat)</td></tr>
<tr class="memdesc:a078fe1718d6f8404f60b5ee10132af09"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function pushes the transition-ids as far towards the start as they will go.  <a href="#a078fe1718d6f8404f60b5ee10132af09">More...</a><br /></td></tr>
<tr class="separator:a078fe1718d6f8404f60b5ee10132af09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4287e92b8b0cfc580bb8b516d8108ff5"><td class="memTemplParams" colspan="2">template&lt;class Weight , class IntType &gt; </td></tr>
<tr class="memitem:a4287e92b8b0cfc580bb8b516d8108ff5"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a4287e92b8b0cfc580bb8b516d8108ff5">PushCompactLatticeWeights</a> (MutableFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>, IntType &gt; &gt; &gt; *clat)</td></tr>
<tr class="memdesc:a4287e92b8b0cfc580bb8b516d8108ff5"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function pushes the weights in the CompactLattice so that all states except possibly the start state, have Weight components (of type LatticeWeight) that "sum to one" in the LatticeWeight (i.e.  <a href="#a4287e92b8b0cfc580bb8b516d8108ff5">More...</a><br /></td></tr>
<tr class="separator:a4287e92b8b0cfc580bb8b516d8108ff5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3aee1a1cfc436ca1909b419f09a3380e"><td class="memItemLeft" align="right" valign="top">template <a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a3aee1a1cfc436ca1909b419f09a3380e">PushCompactLatticeStrings&lt; kaldi::LatticeWeight, kaldi::int32 &gt;</a> (MutableFst&lt; <a class="el" href="namespacekaldi.html#a33b7ea55be82ee6bab64430dd93cbcba">kaldi::CompactLatticeArc</a> &gt; *clat)</td></tr>
<tr class="separator:a3aee1a1cfc436ca1909b419f09a3380e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43dd002ffe6f8c6446a0890dc8fa822d"><td class="memItemLeft" align="right" valign="top">template <a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a43dd002ffe6f8c6446a0890dc8fa822d">PushCompactLatticeWeights&lt; kaldi::LatticeWeight, kaldi::int32 &gt;</a> (MutableFst&lt; <a class="el" href="namespacekaldi.html#a33b7ea55be82ee6bab64430dd93cbcba">kaldi::CompactLatticeArc</a> &gt; *clat)</td></tr>
<tr class="separator:a43dd002ffe6f8c6446a0890dc8fa822d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33d579cd05b334089d57b2a7ccd1ecc8"><td class="memTemplParams" colspan="2">template&lt;class Arc , class I &gt; </td></tr>
<tr class="memitem:a33d579cd05b334089d57b2a7ccd1ecc8"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a33d579cd05b334089d57b2a7ccd1ecc8">RemoveArcsWithSomeInputSymbols</a> (const std::vector&lt; I &gt; &amp;symbols_in, VectorFst&lt; <a class="el" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &gt; *fst)</td></tr>
<tr class="separator:a33d579cd05b334089d57b2a7ccd1ecc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b59f132a1a8b78f70da3ac74d981b93"><td class="memTemplParams" colspan="2">template&lt;class Arc , class I &gt; </td></tr>
<tr class="memitem:a9b59f132a1a8b78f70da3ac74d981b93"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacefst.html#a9b59f132a1a8b78f70da3ac74d981b93">PenalizeArcsWithSomeInputSymbols</a> (const std::vector&lt; I &gt; &amp;symbols_in, <a class="el" href="classfloat.html">float</a> penalty, VectorFst&lt; <a class="el" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &gt; *fst)</td></tr>
<tr class="separator:a9b59f132a1a8b78f70da3ac74d981b93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a60c55abd6353cbe457f1d7babbd557"><td class="memItemLeft" align="right" valign="top">ConstFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a7a60c55abd6353cbe457f1d7babbd557">ReadAsConstFst</a> (std::string rxfilename)</td></tr>
<tr class="separator:a7a60c55abd6353cbe457f1d7babbd557"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a8abb0a8a2f9bbee7e71c82dac30840"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefst.html#a8a8abb0a8a2f9bbee7e71c82dac30840">PrintProxyFstPath</a> (const VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; &amp;proxy, vector&lt; vector&lt; StdArc::Label &gt; &gt; *path, vector&lt; StdArc::Weight &gt; *weight, StdArc::StateId cur_state, vector&lt; StdArc::Label &gt; cur_path, StdArc::Weight cur_weight)</td></tr>
<tr class="separator:a8a8abb0a8a2f9bbee7e71c82dac30840"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>For an extended explanation of the framework of which grammar-fsts are a part, please see <a class="el" href="grammar.html">Support for grammars and graphs with on-the-fly parts.</a> (i.e. </p>
<p>../doc/grammar.dox).</p>
<p>This header implements a special FST type which we use in that framework; it is a lightweight wrapper which stitches together several FSTs and makes them look, to the decoder code, like a single FST. It is a bit like OpenFst's Replace() function, but with support for left-biphone context. </p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a14f2a6c1714becab8337b1101ba8fc27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14f2a6c1714becab8337b1101ba8fc27">&#9670;&nbsp;</a></span>ArcticWeight</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt;<a class="el" href="classfloat.html">float</a>&gt; <a class="el" href="namespacefst.html#a14f2a6c1714becab8337b1101ba8fc27">ArcticWeight</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arctic-weight_8h_source.html#l00084">84</a> of file <a class="el" href="arctic-weight_8h_source.html">arctic-weight.h</a>.</p>

</div>
</div>
<a id="aa66ff8367094543664b3b6a13d77c139"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa66ff8367094543664b3b6a13d77c139">&#9670;&nbsp;</a></span>BaseFloat</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classfloat.html">float</a> <a class="el" href="namespacefst.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight-test_8cc_source.html#l00026">26</a> of file <a class="el" href="lattice-weight-test_8cc_source.html">lattice-weight-test.cc</a>.</p>

</div>
</div>
<a id="a4b96c2715539a4b5008546dbe9d5085b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b96c2715539a4b5008546dbe9d5085b">&#9670;&nbsp;</a></span>CompactLatticeWeight</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt;<a class="el" href="namespacefst.html#a312b29f86c5ef78810556e470635a291">LatticeWeight</a>, int32&gt; <a class="el" href="namespacefst.html#a4b96c2715539a4b5008546dbe9d5085b">CompactLatticeWeight</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight-test_8cc_source.html#l00030">30</a> of file <a class="el" href="lattice-weight-test_8cc_source.html">lattice-weight-test.cc</a>.</p>

</div>
</div>
<a id="a53af4ee0b29523b7c627660609ea6190"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53af4ee0b29523b7c627660609ea6190">&#9670;&nbsp;</a></span>CompactLatticeWeightCommonDivisor</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classfst_1_1CompactLatticeWeightCommonDivisorTpl.html">CompactLatticeWeightCommonDivisorTpl</a>&lt;<a class="el" href="namespacefst.html#a312b29f86c5ef78810556e470635a291">LatticeWeight</a>, int32&gt; <a class="el" href="namespacefst.html#a53af4ee0b29523b7c627660609ea6190">CompactLatticeWeightCommonDivisor</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight-test_8cc_source.html#l00033">33</a> of file <a class="el" href="lattice-weight-test_8cc_source.html">lattice-weight-test.cc</a>.</p>

</div>
</div>
<a id="a006b00477e4d9250474e76e1ec61bb3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a006b00477e4d9250474e76e1ec61bb3f">&#9670;&nbsp;</a></span>Label</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef fst::StdArc::Label <a class="el" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="deterministic-fst-test_8cc_source.html#l00054">54</a> of file <a class="el" href="deterministic-fst-test_8cc_source.html">deterministic-fst-test.cc</a>.</p>

</div>
</div>
<a id="a312b29f86c5ef78810556e470635a291"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a312b29f86c5ef78810556e470635a291">&#9670;&nbsp;</a></span>LatticeWeight</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt;<a class="el" href="namespacefst.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&gt; <a class="el" href="namespacefst.html#a312b29f86c5ef78810556e470635a291">LatticeWeight</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight-test_8cc_source.html#l00028">28</a> of file <a class="el" href="lattice-weight-test_8cc_source.html">lattice-weight-test.cc</a>.</p>

</div>
</div>
<a id="ae38f9e2cc96a39ff2953a2846c2538db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae38f9e2cc96a39ff2953a2846c2538db">&#9670;&nbsp;</a></span>StateId</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef fst::StdArc::StateId <a class="el" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="deterministic-fst-test_8cc_source.html#l00055">55</a> of file <a class="el" href="deterministic-fst-test_8cc_source.html">deterministic-fst-test.cc</a>.</p>

</div>
</div>
<a id="afde762a4bf33b2bbdc061b074b7d089c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afde762a4bf33b2bbdc061b074b7d089c">&#9670;&nbsp;</a></span>StatePropertiesType</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef unsigned char <a class="el" href="namespacefst.html#afde762a4bf33b2bbdc061b074b7d089c">StatePropertiesType</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="factor_8h_source.html#l00122">122</a> of file <a class="el" href="factor_8h_source.html">factor.h</a>.</p>

</div>
</div>
<a id="a70478eb2428a9406e4692d19a7a3a97f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70478eb2428a9406e4692d19a7a3a97f">&#9670;&nbsp;</a></span>StdArc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">fst::StdArc</a> <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="deterministic-fst-test_8cc_source.html#l00053">53</a> of file <a class="el" href="deterministic-fst-test_8cc_source.html">deterministic-fst-test.cc</a>.</p>

</div>
</div>
<a id="a88a968cc6f6d68c2b3dd6aa90385f65c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88a968cc6f6d68c2b3dd6aa90385f65c">&#9670;&nbsp;</a></span>StdVectorFst</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">fst::StdVectorFst</a> <a class="el" href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">StdVectorFst</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="deterministic-fst-test_8cc_source.html#l00056">56</a> of file <a class="el" href="deterministic-fst-test_8cc_source.html">deterministic-fst-test.cc</a>.</p>

</div>
</div>
<a id="ab7d2278940f998d865a0fb84f89ff125"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7d2278940f998d865a0fb84f89ff125">&#9670;&nbsp;</a></span>VectorFstHolder</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classfst_1_1VectorFstTplHolder.html">VectorFstTplHolder</a>&lt;<a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a>&gt; <a class="el" href="namespacefst.html#ab7d2278940f998d865a0fb84f89ff125">VectorFstHolder</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="kaldi-fst-io_8h_source.html#l00151">151</a> of file <a class="el" href="kaldi-fst-io_8h_source.html">kaldi-fst-io.h</a>.</p>

</div>
</div>
<a id="a2fdd196e46607f0d35b13369d9f9970d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fdd196e46607f0d35b13369d9f9970d">&#9670;&nbsp;</a></span>Weight</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef fst::StdArc::Weight <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="deterministic-fst-test_8cc_source.html#l00057">57</a> of file <a class="el" href="deterministic-fst-test_8cc_source.html">deterministic-fst-test.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="abed82baf7f470b522273a3e37c24c600"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abed82baf7f470b522273a3e37c24c600">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="abed82baf7f470b522273a3e37c24c600a1947c0d03bf916c037b4f25cccc92ace"></a>kStateHasEpsilonArcsEntering&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="abed82baf7f470b522273a3e37c24c600a3048a708ccd7fc2d37561d3aeb544f63"></a>kStateHasNonEpsilonArcsEntering&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="abed82baf7f470b522273a3e37c24c600a2d3c0fb5e5e5c747c645653b5ce863e7"></a>kStateHasEpsilonArcsLeaving&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="abed82baf7f470b522273a3e37c24c600a229ce10dbec4dcf7ca9736ee6f3e8467"></a>kStateHasNonEpsilonArcsLeaving&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="epsilon-property_8h_source.html#l00027">27</a> of file <a class="el" href="epsilon-property_8h_source.html">epsilon-property.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;     {</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  <a class="code" href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a1947c0d03bf916c037b4f25cccc92ace">kStateHasEpsilonArcsEntering</a> = 0x1,</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <a class="code" href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a3048a708ccd7fc2d37561d3aeb544f63">kStateHasNonEpsilonArcsEntering</a> = 0x2,</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <a class="code" href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a2d3c0fb5e5e5c747c645653b5ce863e7">kStateHasEpsilonArcsLeaving</a> = 0x4,</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <a class="code" href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a229ce10dbec4dcf7ca9736ee6f3e8467">kStateHasNonEpsilonArcsLeaving</a> = 0x8</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;}; <span class="comment">// use &#39;char&#39; for this enum.</span></div><div class="ttc" id="namespacefst_html_abed82baf7f470b522273a3e37c24c600a1947c0d03bf916c037b4f25cccc92ace"><div class="ttname"><a href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a1947c0d03bf916c037b4f25cccc92ace">fst::kStateHasEpsilonArcsEntering</a></div><div class="ttdef"><b>Definition:</b> <a href="epsilon-property_8h_source.html#l00028">epsilon-property.h:28</a></div></div>
<div class="ttc" id="namespacefst_html_abed82baf7f470b522273a3e37c24c600a2d3c0fb5e5e5c747c645653b5ce863e7"><div class="ttname"><a href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a2d3c0fb5e5e5c747c645653b5ce863e7">fst::kStateHasEpsilonArcsLeaving</a></div><div class="ttdef"><b>Definition:</b> <a href="epsilon-property_8h_source.html#l00030">epsilon-property.h:30</a></div></div>
<div class="ttc" id="namespacefst_html_abed82baf7f470b522273a3e37c24c600a3048a708ccd7fc2d37561d3aeb544f63"><div class="ttname"><a href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a3048a708ccd7fc2d37561d3aeb544f63">fst::kStateHasNonEpsilonArcsEntering</a></div><div class="ttdef"><b>Definition:</b> <a href="epsilon-property_8h_source.html#l00029">epsilon-property.h:29</a></div></div>
<div class="ttc" id="namespacefst_html_abed82baf7f470b522273a3e37c24c600a229ce10dbec4dcf7ca9736ee6f3e8467"><div class="ttname"><a href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a229ce10dbec4dcf7ca9736ee6f3e8467">fst::kStateHasNonEpsilonArcsLeaving</a></div><div class="ttdef"><b>Definition:</b> <a href="epsilon-property_8h_source.html#l00031">epsilon-property.h:31</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a251b709d87fe58fc66599f483fb98bd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a251b709d87fe58fc66599f483fb98bd2">&#9670;&nbsp;</a></span>NonterminalValues</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="namespacefst.html#a251b709d87fe58fc66599f483fb98bd2">NonterminalValues</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>An anonymous enum to define some values for symbols used in our grammar-fst framework. </p>
<p>Please understand this with reference to the documentation in <a class="el" href="grammar.html">Support for grammars and graphs with on-the-fly parts.</a> (../doc/grammar.dox). This enum defines the values of nonterminal-related symbols in phones.txt. They are not the actual values&ndash; they will be shifted by adding the value nonterm_phones_offset which is passed in by the command-line flag &ndash;nonterm-phones-offset. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a251b709d87fe58fc66599f483fb98bd2a8420d849ee0c4302c3e4f963feed7a00"></a>kNontermBos&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a251b709d87fe58fc66599f483fb98bd2a853f28d67c5daf316eecc91390831332"></a>kNontermBegin&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a251b709d87fe58fc66599f483fb98bd2a534b236508a8d909dd97b3d7475b75db"></a>kNontermEnd&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a251b709d87fe58fc66599f483fb98bd2af2f1f7ed744565c5728529dcce2e2ef5"></a>kNontermReenter&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a251b709d87fe58fc66599f483fb98bd2a9407a1ae01a2fea99f092723c3c3cbc0"></a>kNontermUserDefined&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a251b709d87fe58fc66599f483fb98bd2a912e4937034fa71a1d4dc31c523dc351"></a>kNontermMediumNumber&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a251b709d87fe58fc66599f483fb98bd2aafc1d79474b5b834eae90c6a9c42790f"></a>kNontermBigNumber&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="grammar-context-fst_8h_source.html#l00068">68</a> of file <a class="el" href="grammar-context-fst_8h_source.html">grammar-context-fst.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                       {</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <a class="code" href="namespacefst.html#a251b709d87fe58fc66599f483fb98bd2a8420d849ee0c4302c3e4f963feed7a00">kNontermBos</a> = 0,  <span class="comment">// #nonterm_bos</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <a class="code" href="namespacefst.html#a251b709d87fe58fc66599f483fb98bd2a853f28d67c5daf316eecc91390831332">kNontermBegin</a> = 1,  <span class="comment">// #nonterm_begin</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <a class="code" href="namespacefst.html#a251b709d87fe58fc66599f483fb98bd2a534b236508a8d909dd97b3d7475b75db">kNontermEnd</a> = 2,  <span class="comment">// #nonterm_end</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <a class="code" href="namespacefst.html#a251b709d87fe58fc66599f483fb98bd2af2f1f7ed744565c5728529dcce2e2ef5">kNontermReenter</a> = 3,  <span class="comment">// #nonterm_reenter</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <a class="code" href="namespacefst.html#a251b709d87fe58fc66599f483fb98bd2a9407a1ae01a2fea99f092723c3c3cbc0">kNontermUserDefined</a> = 4,   <span class="comment">// the lowest-numbered user-defined nonterminal, e.g. #nonterm:foo</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="comment">// kNontermMediumNumber and kNontermBigNumber come into the encoding of</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="comment">// nonterminal-related symbols in HCLG.fst.  The only hard constraint on them</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="comment">// is that kNontermBigNumber must be bigger than the biggest transition-id in</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="comment">// your system, and kNontermMediumNumber must be &gt;0.  These values were chosen</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="comment">// for ease of human inspection of numbers encoded with them.</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <a class="code" href="namespacefst.html#a251b709d87fe58fc66599f483fb98bd2a912e4937034fa71a1d4dc31c523dc351">kNontermMediumNumber</a> = 1000,</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <a class="code" href="namespacefst.html#a251b709d87fe58fc66599f483fb98bd2aafc1d79474b5b834eae90c6a9c42790f">kNontermBigNumber</a> = 10000000</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;};</div><div class="ttc" id="namespacefst_html_a251b709d87fe58fc66599f483fb98bd2aafc1d79474b5b834eae90c6a9c42790f"><div class="ttname"><a href="namespacefst.html#a251b709d87fe58fc66599f483fb98bd2aafc1d79474b5b834eae90c6a9c42790f">fst::kNontermBigNumber</a></div><div class="ttdef"><b>Definition:</b> <a href="grammar-context-fst_8h_source.html#l00080">grammar-context-fst.h:80</a></div></div>
<div class="ttc" id="namespacefst_html_a251b709d87fe58fc66599f483fb98bd2a853f28d67c5daf316eecc91390831332"><div class="ttname"><a href="namespacefst.html#a251b709d87fe58fc66599f483fb98bd2a853f28d67c5daf316eecc91390831332">fst::kNontermBegin</a></div><div class="ttdef"><b>Definition:</b> <a href="grammar-context-fst_8h_source.html#l00070">grammar-context-fst.h:70</a></div></div>
<div class="ttc" id="namespacefst_html_a251b709d87fe58fc66599f483fb98bd2af2f1f7ed744565c5728529dcce2e2ef5"><div class="ttname"><a href="namespacefst.html#a251b709d87fe58fc66599f483fb98bd2af2f1f7ed744565c5728529dcce2e2ef5">fst::kNontermReenter</a></div><div class="ttdef"><b>Definition:</b> <a href="grammar-context-fst_8h_source.html#l00072">grammar-context-fst.h:72</a></div></div>
<div class="ttc" id="namespacefst_html_a251b709d87fe58fc66599f483fb98bd2a9407a1ae01a2fea99f092723c3c3cbc0"><div class="ttname"><a href="namespacefst.html#a251b709d87fe58fc66599f483fb98bd2a9407a1ae01a2fea99f092723c3c3cbc0">fst::kNontermUserDefined</a></div><div class="ttdef"><b>Definition:</b> <a href="grammar-context-fst_8h_source.html#l00073">grammar-context-fst.h:73</a></div></div>
<div class="ttc" id="namespacefst_html_a251b709d87fe58fc66599f483fb98bd2a8420d849ee0c4302c3e4f963feed7a00"><div class="ttname"><a href="namespacefst.html#a251b709d87fe58fc66599f483fb98bd2a8420d849ee0c4302c3e4f963feed7a00">fst::kNontermBos</a></div><div class="ttdef"><b>Definition:</b> <a href="grammar-context-fst_8h_source.html#l00069">grammar-context-fst.h:69</a></div></div>
<div class="ttc" id="namespacefst_html_a251b709d87fe58fc66599f483fb98bd2a534b236508a8d909dd97b3d7475b75db"><div class="ttname"><a href="namespacefst.html#a251b709d87fe58fc66599f483fb98bd2a534b236508a8d909dd97b3d7475b75db">fst::kNontermEnd</a></div><div class="ttdef"><b>Definition:</b> <a href="grammar-context-fst_8h_source.html#l00071">grammar-context-fst.h:71</a></div></div>
<div class="ttc" id="namespacefst_html_a251b709d87fe58fc66599f483fb98bd2a912e4937034fa71a1d4dc31c523dc351"><div class="ttname"><a href="namespacefst.html#a251b709d87fe58fc66599f483fb98bd2a912e4937034fa71a1d4dc31c523dc351">fst::kNontermMediumNumber</a></div><div class="ttdef"><b>Definition:</b> <a href="grammar-context-fst_8h_source.html#l00079">grammar-context-fst.h:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a57cc279168f707dd164f9543f1b36907"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57cc279168f707dd164f9543f1b36907">&#9670;&nbsp;</a></span>StatePropertiesEnum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907">StatePropertiesEnum</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a57cc279168f707dd164f9543f1b36907ae210c78f45c66eeb3668dacf52ba71b5"></a>kStateFinal&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a57cc279168f707dd164f9543f1b36907a3d8a6a3ea58a37879916e5cf8571190c"></a>kStateInitial&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a57cc279168f707dd164f9543f1b36907ae21df5d1a918da8755c69c1e49ab3af1"></a>kStateArcsIn&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a57cc279168f707dd164f9543f1b36907a5116305c68c9e41479ccbcb8d38cdb4b"></a>kStateMultipleArcsIn&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a57cc279168f707dd164f9543f1b36907a6c9a11fe021867b25e75bb27cba5dbe6"></a>kStateArcsOut&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a57cc279168f707dd164f9543f1b36907aeb2d3e327757068f02d09dee9aa1beb1"></a>kStateMultipleArcsOut&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a57cc279168f707dd164f9543f1b36907af992661b1988386d7326c44c731e2441"></a>kStateOlabelsOut&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a57cc279168f707dd164f9543f1b36907acc7557139cc1096f82c0e08abfcb729f"></a>kStateIlabelsOut&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="factor_8h_source.html#l00112">112</a> of file <a class="el" href="factor_8h_source.html">factor.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;{ <a class="code" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907ae210c78f45c66eeb3668dacf52ba71b5">kStateFinal</a> = 0x1,</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <a class="code" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907a3d8a6a3ea58a37879916e5cf8571190c">kStateInitial</a> = 0x2,</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <a class="code" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907ae21df5d1a918da8755c69c1e49ab3af1">kStateArcsIn</a> = 0x4,</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <a class="code" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907a5116305c68c9e41479ccbcb8d38cdb4b">kStateMultipleArcsIn</a> = 0x8,</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <a class="code" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907a6c9a11fe021867b25e75bb27cba5dbe6">kStateArcsOut</a> = 0x10,</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <a class="code" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907aeb2d3e327757068f02d09dee9aa1beb1">kStateMultipleArcsOut</a> = 0x20,</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <a class="code" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907af992661b1988386d7326c44c731e2441">kStateOlabelsOut</a> = 0x40,</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <a class="code" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907acc7557139cc1096f82c0e08abfcb729f">kStateIlabelsOut</a> = 0x80 }; </div><div class="ttc" id="namespacefst_html_a57cc279168f707dd164f9543f1b36907ae21df5d1a918da8755c69c1e49ab3af1"><div class="ttname"><a href="namespacefst.html#a57cc279168f707dd164f9543f1b36907ae21df5d1a918da8755c69c1e49ab3af1">fst::kStateArcsIn</a></div><div class="ttdef"><b>Definition:</b> <a href="factor_8h_source.html#l00115">factor.h:115</a></div></div>
<div class="ttc" id="namespacefst_html_a57cc279168f707dd164f9543f1b36907acc7557139cc1096f82c0e08abfcb729f"><div class="ttname"><a href="namespacefst.html#a57cc279168f707dd164f9543f1b36907acc7557139cc1096f82c0e08abfcb729f">fst::kStateIlabelsOut</a></div><div class="ttdef"><b>Definition:</b> <a href="factor_8h_source.html#l00120">factor.h:120</a></div></div>
<div class="ttc" id="namespacefst_html_a57cc279168f707dd164f9543f1b36907aeb2d3e327757068f02d09dee9aa1beb1"><div class="ttname"><a href="namespacefst.html#a57cc279168f707dd164f9543f1b36907aeb2d3e327757068f02d09dee9aa1beb1">fst::kStateMultipleArcsOut</a></div><div class="ttdef"><b>Definition:</b> <a href="factor_8h_source.html#l00118">factor.h:118</a></div></div>
<div class="ttc" id="namespacefst_html_a57cc279168f707dd164f9543f1b36907af992661b1988386d7326c44c731e2441"><div class="ttname"><a href="namespacefst.html#a57cc279168f707dd164f9543f1b36907af992661b1988386d7326c44c731e2441">fst::kStateOlabelsOut</a></div><div class="ttdef"><b>Definition:</b> <a href="factor_8h_source.html#l00119">factor.h:119</a></div></div>
<div class="ttc" id="namespacefst_html_a57cc279168f707dd164f9543f1b36907a5116305c68c9e41479ccbcb8d38cdb4b"><div class="ttname"><a href="namespacefst.html#a57cc279168f707dd164f9543f1b36907a5116305c68c9e41479ccbcb8d38cdb4b">fst::kStateMultipleArcsIn</a></div><div class="ttdef"><b>Definition:</b> <a href="factor_8h_source.html#l00116">factor.h:116</a></div></div>
<div class="ttc" id="namespacefst_html_a57cc279168f707dd164f9543f1b36907ae210c78f45c66eeb3668dacf52ba71b5"><div class="ttname"><a href="namespacefst.html#a57cc279168f707dd164f9543f1b36907ae210c78f45c66eeb3668dacf52ba71b5">fst::kStateFinal</a></div><div class="ttdef"><b>Definition:</b> <a href="factor_8h_source.html#l00113">factor.h:113</a></div></div>
<div class="ttc" id="namespacefst_html_a57cc279168f707dd164f9543f1b36907a3d8a6a3ea58a37879916e5cf8571190c"><div class="ttname"><a href="namespacefst.html#a57cc279168f707dd164f9543f1b36907a3d8a6a3ea58a37879916e5cf8571190c">fst::kStateInitial</a></div><div class="ttdef"><b>Definition:</b> <a href="factor_8h_source.html#l00114">factor.h:114</a></div></div>
<div class="ttc" id="namespacefst_html_a57cc279168f707dd164f9543f1b36907a6c9a11fe021867b25e75bb27cba5dbe6"><div class="ttname"><a href="namespacefst.html#a57cc279168f707dd164f9543f1b36907a6c9a11fe021867b25e75bb27cba5dbe6">fst::kStateArcsOut</a></div><div class="ttdef"><b>Definition:</b> <a href="factor_8h_source.html#l00117">factor.h:117</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="acfea40731f16180f1e567f2aa14af9d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfea40731f16180f1e567f2aa14af9d9">&#9670;&nbsp;</a></span>AcousticLatticeScale()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt;vector&lt;double&gt; &gt; fst::AcousticLatticeScale </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>acwt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-utils_8h_source.html#l00138">138</a> of file <a class="el" href="lattice-utils_8h_source.html">lattice-utils.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="discriminative-supervision_8cc_source.html#l00232">DiscriminativeSupervisionSplitter::CreateRangeLattice()</a>, <a class="el" href="gmm-latgen-biglm-faster_8cc_source.html#l00036">kaldi::DecodeUtterance()</a>, <a class="el" href="decoder-wrappers_8cc_source.html#l00201">kaldi::DecodeUtteranceLatticeFaster()</a>, <a class="el" href="decoder-wrappers_8cc_source.html#l00331">kaldi::DecodeUtteranceLatticeSimple()</a>, <a class="el" href="gmm-decode-biglm-faster_8cc_source.html#l00068">main()</a>, <a class="el" href="lattice-determinize-phone-pruned-parallel_8cc_source.html#l00046">DeterminizeLatticeTask::operator()()</a>, <a class="el" href="decoder-wrappers_8cc_source.html#l00064">DecodeUtteranceLatticeFasterClass::operator()()</a>, and <a class="el" href="discriminative-supervision_8cc_source.html#l00362">DiscriminativeSupervisionSplitter::PrepareLattice()</a>.</p>
<div class="fragment"><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                                                                 {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  vector&lt;vector&lt;double&gt; &gt; ans(2);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  ans[0].resize(2, 0.0);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  ans[1].resize(2, 0.0);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  ans[0][0] = 1.0;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  ans[1][1] = acwt;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordflow">return</span> ans;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a7181b1bceae5beb0147d81bc611d5207"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7181b1bceae5beb0147d81bc611d5207">&#9670;&nbsp;</a></span>AddSelfLoops()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AddSelfLoops </td>
          <td>(</td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; typename Arc::Label &gt; &amp;&#160;</td>
          <td class="paramname"><em>isyms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; typename Arc::Label &gt; &amp;&#160;</td>
          <td class="paramname"><em>osyms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>AddSelfLoops is a function you will probably want to use alongside PreDeterminize, to add self-loops to any FSTs that you compose on the left hand side of the one modified by PreDeterminize. </p>
<p>This function inserts loops with "special symbols" [e.g. #0, #1] into an FST. This is done at each final state and each state with non-epsilon output symbols on at least one arc out of it. This is to ensure that these symbols, when inserted into the input side of an FST we will compose with on the right, can "pass through" this FST.</p>
<p>At input, isyms and osyms must be vectors of the same size n, corresponding to symbols that currently do not exist in 'fst'. For each state in n that has non-epsilon symbols on the output side of arcs leaving it, or which is a final state, this function inserts n self-loops with unit weight and one of the n pairs of symbols on its input and output. </p>

<p class="definition">Definition at line <a class="el" href="pre-determinize-inl_8h_source.html#l00599">599</a> of file <a class="el" href="pre-determinize-inl_8h_source.html">pre-determinize-inl.h</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">rnnlm::n</a>.</p>

<p class="reference">Referenced by <a class="el" href="pre-determinize-test_8cc_source.html#l00140">TestAddSelfLoops()</a>.</p>
<div class="fragment"><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                                                                        {</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  assert(<a class="code" href="namespacefst.html">fst</a> != NULL);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  assert(isyms.size() == osyms.size());</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">n</a> = isyms.size();</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <span class="keywordflow">if</span> (n == 0) <span class="keywordflow">return</span>;  <span class="comment">// Nothing to do.</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="comment">// {</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <span class="comment">// the following declarations and statements are for quick detection of these</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <span class="comment">// symbols, which is purely for debugging/checking purposes.</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  Label  isyms_min = *std::min_element(isyms.begin(), isyms.end()),</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;         isyms_max = *std::max_element(isyms.begin(), isyms.end()),</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;         osyms_min = *std::min_element(osyms.begin(), osyms.end()),</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;         osyms_max = *std::max_element(osyms.begin(), osyms.end());</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  std::set&lt;Label&gt; isyms_set, osyms_set;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; isyms.size();<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    assert(isyms[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] &gt; 0 &amp;&amp; osyms[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] &gt; 0);  <span class="comment">// should not have epsilon or invalid symbols.</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    isyms_set.insert(isyms[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    osyms_set.insert(osyms[i]);</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  }</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  assert(isyms_set.size() == n &amp;&amp; osyms_set.size() == <a class="code" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">n</a>);</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="comment">// } end block.</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <span class="keywordflow">for</span> (StateIterator&lt;MutableFst&lt;Arc&gt; &gt; siter(*<a class="code" href="namespacefst.html">fst</a>); ! siter.Done(); siter.Next()) {</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    StateId state = siter.Value();</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keywordtype">bool</span> this_state_needs_self_loops = (<a class="code" href="namespacefst.html">fst</a>-&gt;Final(state) != Weight::Zero());</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="keywordflow">for</span> (ArcIterator&lt;MutableFst&lt;Arc&gt; &gt; aiter(*<a class="code" href="namespacefst.html">fst</a>, state); ! aiter.Done(); aiter.Next()) {</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &amp;arc = aiter.Value();</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      <span class="comment">// If one of the following asserts fails, it means that the input FST already had the symbols</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      <span class="comment">// we are inserting.  This is contrary to the preconditions of this algorithm.</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      assert(!(arc.ilabel&gt;=isyms_min &amp;&amp; arc.ilabel&lt;=isyms_max &amp;&amp; isyms_set.count(arc.ilabel) != 0));</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      assert(!(arc.olabel&gt;=osyms_min &amp;&amp; arc.olabel&lt;=osyms_max &amp;&amp; osyms_set.count(arc.olabel) != 0));</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      <span class="keywordflow">if</span> (arc.olabel != 0) <span class="comment">// Has non-epsilon output label -&gt; need self loops.</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        this_state_needs_self_loops = <span class="keyword">true</span>;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    }</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">if</span> (this_state_needs_self_loops) {</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0;i &lt; <a class="code" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">n</a>;i++) {</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> arc;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        arc.ilabel = isyms[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        arc.olabel = osyms[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        arc.weight = Weight::One();</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        arc.nextstate = state;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <a class="code" href="namespacefst.html">fst</a>-&gt;AddArc(state, arc);</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      }</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    }</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  }</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacernnlm_html_ab4871778d570f724a07823e0a2fb9884"><div class="ttname"><a href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">rnnlm::n</a></div><div class="ttdeci">struct rnnlm::@11::@12 n</div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0c8426e0cb7d35fe4b1abcef0b163b4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c8426e0cb7d35fe4b1abcef0b163b4f">&#9670;&nbsp;</a></span>AddSubsequentialLoop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AddSubsequentialLoop </td>
          <td>(</td>
          <td class="paramtype">StdArc::Label&#160;</td>
          <td class="paramname"><em>subseq_symbol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Modifies an FST so that it transuces the same paths, but the input side of the paths can all have the subsequential symbol '$' appended to them any number of times (we could easily specify the number of times, but accepting any number of repetitions is just more convenient). </p>
<p>The actual way we do this is for each final state, we add a transition with weight equal to the final-weight of that state, with input-symbol '$' and output-symbols &lt;eps&gt;, and ending in a new super-final state that has unit final-probability and a unit-weight self-loop with '$' on its input and &lt;eps&gt; on its output. The reason we don't just add a loop to each final-state has to do with preserving stochasticity (see <a class="el" href="fst_algo.html#fst_algo_stochastic">Preserving stochasticity and testing it</a>). We keep the final-probability in all the original final-states rather than setting them to zero, so the resulting FST can accept zero '$' symbols at the end (in case we had no right context). </p>

<p class="definition">Definition at line <a class="el" href="context-fst_8cc_source.html#l00296">296</a> of file <a class="el" href="context-fst_8cc_source.html">context-fst.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>.</p>

<p class="reference">Referenced by <a class="el" href="context-fst_8cc_source.html#l00245">ComposeContext()</a>, <a class="el" href="fstaddsubsequentialloop_8cc_source.html#l00037">main()</a>, and <a class="el" href="training-graph-compiler_8cc_source.html#l00026">TrainingGraphCompiler::TrainingGraphCompiler()</a>.</p>
<div class="fragment"><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                                                   {</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  vector&lt;StateId&gt; final_states;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="keywordflow">for</span> (StateIterator&lt;MutableFst&lt;Arc&gt; &gt; siter(*<a class="code" href="namespacefst.html">fst</a>); !siter.Done(); siter.Next()) {</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    StateId s = siter.Value();</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacefst.html">fst</a>-&gt;Final(s) != Weight::Zero())  final_states.push_back(s);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  }</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  StateId superfinal = <a class="code" href="namespacefst.html">fst</a>-&gt;AddState();</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  Arc arc(subseq_symbol, 0, Weight::One(), superfinal);</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <a class="code" href="namespacefst.html">fst</a>-&gt;AddArc(superfinal, arc);  <span class="comment">// loop at superfinal.</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <a class="code" href="namespacefst.html">fst</a>-&gt;SetFinal(superfinal, Weight::One());</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; final_states.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    StateId s = final_states[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <a class="code" href="namespacefst.html">fst</a>-&gt;AddArc(s, <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>(subseq_symbol, 0, <a class="code" href="namespacefst.html">fst</a>-&gt;Final(s), superfinal));</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="comment">// No, don&#39;t remove the final-weights of the original states..</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="comment">// this is so we can add the subsequential loop in cases where</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="comment">// there is no context, and it won&#39;t hurt.</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="comment">// fst-&gt;SetFinal(s, Weight::Zero());</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    arc.nextstate = final_states[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  }</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a70478eb2428a9406e4692d19a7a3a97f"><div class="ttname"><a href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">fst::StdArc</a></div><div class="ttdeci">fst::StdArc StdArc</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00053">deterministic-fst-test.cc:53</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acde6e041e51a069f9dc20999c332473d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acde6e041e51a069f9dc20999c332473d">&#9670;&nbsp;</a></span>ApplyProbabilityScale()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ApplyProbabilityScale </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfloat.html">float</a>&#160;</td>
          <td class="paramname"><em>scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ApplyProbabilityScale is applicable to FSTs in the log or tropical semiring. </p>
<p>It multiplies the arc and final weights by "scale" [this is not the Mul operation of the semiring, it's actual multiplication, which is equivalent to taking a power in the semiring]. </p>

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00771">771</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="hmm-utils_8cc_source.html#l00032">kaldi::GetHmmAsFsa()</a>, <a class="el" href="gmm-decode-biglm-faster_8cc_source.html#l00068">main()</a>, and <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>.</p>
<div class="fragment"><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                                                              {</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  <span class="keywordflow">for</span> (StateIterator&lt;MutableFst&lt;Arc&gt; &gt; siter(*<a class="code" href="namespacefst.html">fst</a>);</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;       !siter.Done();</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;       siter.Next()) {</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    StateId s = siter.Value();</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="keywordflow">for</span> (MutableArcIterator&lt;MutableFst&lt;Arc&gt; &gt; aiter(<a class="code" href="namespacefst.html">fst</a>, s);</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        !aiter.Done();</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        aiter.Next()) {</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;      <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> arc = aiter.Value();</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      arc.weight = <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>(arc.weight.Value() * scale);</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      aiter.SetValue(arc);</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    }</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacefst.html">fst</a>-&gt;Final(s) != Weight::Zero())</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      <a class="code" href="namespacefst.html">fst</a>-&gt;SetFinal(s, Weight(<a class="code" href="namespacefst.html">fst</a>-&gt;Final(s).Value() * scale));</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  }</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9042f129a0e7ab56de347dc9a71f14b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9042f129a0e7ab56de347dc9a71f14b2">&#9670;&nbsp;</a></span>ApproxEqual() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> fst::ApproxEqual </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfloat.html">float</a>&#160;</td>
          <td class="paramname"><em>delta</em> = <code>kDelta</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight_8h_source.html#l00390">390</a> of file <a class="el" href="lattice-weight_8h_source.html">lattice-weight.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00052">LatticeWeightTpl&lt; FloatType &gt;::Value1()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00054">LatticeWeightTpl&lt; FloatType &gt;::Value2()</a>.</p>

<p class="reference">Referenced by <a class="el" href="determinize-star-inl_8h_source.html#l00746">DeterminizerStar&lt; F &gt;::EpsilonClosure::AddOneElement()</a>, <a class="el" href="lattice-weight_8h_source.html#l00571">ApproxEqual()</a>, <a class="el" href="lattice-weight-test_8cc_source.html#l00124">CompactLatticeWeightTest()</a>, <a class="el" href="minimize-lattice_8cc_source.html#l00148">CompactLatticeMinimizer&lt; Weight, IntType &gt;::Equivalent()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l01135">IsStochasticFst()</a>, <a class="el" href="lattice-weight-test_8cc_source.html#l00062">LatticeWeightTest()</a>, <a class="el" href="determinize-star-inl_8h_source.html#l00306">DeterminizerStar&lt; F &gt;::SubsetEqual::operator()()</a>, <a class="el" href="determinize-lattice-pruned_8cc_source.html#l00449">LatticeDeterminizerPruned&lt; Weight, IntType &gt;::SubsetEqual::operator()()</a>, <a class="el" href="determinize-lattice-inl_8h_source.html#l00595">LatticeDeterminizer&lt; Weight, IntType &gt;::SubsetEqual::operator()()</a>, <a class="el" href="deterministic-fst-test_8cc_source.html#l00145">TestBackoffAndCache()</a>, <a class="el" href="deterministic-fst-test_8cc_source.html#l00180">TestCompose()</a>, <a class="el" href="remove-eps-local-test_8cc_source.html#l00113">TestRemoveEpsLocalSpecial()</a>, <a class="el" href="fstext-utils-test_8cc_source.html#l00367">TestRemoveUselessArcs()</a>, and <a class="el" href="lattice-utils-test_8cc_source.html#l00060">TestShortestPath()</a>.</p>
<div class="fragment"><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                                              {</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="keywordflow">if</span> (w1.Value1() == w2.Value1() &amp;&amp; w1.Value2() == w2.Value2()) <span class="keywordflow">return</span> <span class="keyword">true</span>;  <span class="comment">// handles Zero().</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="keywordflow">return</span> (fabs((w1.Value1() + w1.Value2()) - (w2.Value1() + w2.Value2())) &lt;= delta);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a67438f971c176f9ef20c8247e900a9b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67438f971c176f9ef20c8247e900a9b8">&#9670;&nbsp;</a></span>ApproxEqual() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> fst::ApproxEqual </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfloat.html">float</a>&#160;</td>
          <td class="paramname"><em>delta</em> = <code>kDelta</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight_8h_source.html#l00571">571</a> of file <a class="el" href="lattice-weight_8h_source.html">lattice-weight.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00390">ApproxEqual()</a>, <a class="el" href="lattice-weight_8h_source.html#l00450">CompactLatticeWeightTpl&lt; WeightType, IntType &gt;::String()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00448">CompactLatticeWeightTpl&lt; WeightType, IntType &gt;::Weight()</a>.</p>
<div class="fragment"><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                                              {</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="namespacefst.html#a67438f971c176f9ef20c8247e900a9b8">ApproxEqual</a>(w1.Weight(), w2.Weight(), delta) &amp;&amp; w1.String() == w2.String());</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;}</div><div class="ttc" id="namespacefst_html_a67438f971c176f9ef20c8247e900a9b8"><div class="ttname"><a href="namespacefst.html#a67438f971c176f9ef20c8247e900a9b8">fst::ApproxEqual</a></div><div class="ttdeci">bool ApproxEqual(const CompactLatticeWeightTpl&lt; WeightType, IntType &gt; &amp;w1, const CompactLatticeWeightTpl&lt; WeightType, IntType &gt; &amp;w2, float delta=kDelta)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00571">lattice-weight.h:571</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0f557ab4341ddad5fc3302f14aa9814a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f557ab4341ddad5fc3302f14aa9814a">&#9670;&nbsp;</a></span>CastOrConvertToVectorFst()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; * CastOrConvertToVectorFst </td>
          <td>(</td>
          <td class="paramtype">Fst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *&#160;</td>
          <td class="paramname"><em>fst</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="kaldi-fst-io_8cc_source.html#l00094">94</a> of file <a class="el" href="kaldi-fst-io_8cc_source.html">kaldi-fst-io.cc</a>.</p>

<p class="reference">References <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstrmsymbols_8cc_source.html#l00085">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                                                              {</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="comment">// This version currently supports ConstFst&lt;StdArc&gt; or VectorFst&lt;StdArc&gt;</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  std::string real_type = <a class="code" href="namespacefst.html">fst</a>-&gt;Type();</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(real_type == <span class="stringliteral">&quot;vector&quot;</span> || real_type == <span class="stringliteral">&quot;const&quot;</span>);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="keywordflow">if</span> (real_type == <span class="stringliteral">&quot;vector&quot;</span>) {</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">dynamic_cast&lt;</span>VectorFst&lt;StdArc&gt; *<span class="keyword">&gt;</span>(<a class="code" href="namespacefst.html">fst</a>);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">// As the &#39;fst&#39; can&#39;t cast to VectorFst, we carete a new</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment">// VectorFst&lt;StdArc&gt; initialized by &#39;fst&#39;, and delete &#39;fst&#39;.</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    VectorFst&lt;StdArc&gt; *new_fst = <span class="keyword">new</span> VectorFst&lt;StdArc&gt;(*fst);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keyword">delete</span> fst;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">return</span> new_fst;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa854a74c810ff63416ed5be1795b1ff6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa854a74c810ff63416ed5be1795b1ff6">&#9670;&nbsp;</a></span>CheckPhones()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classfloat.html">float</a> fst::CheckPhones </td>
          <td>(</td>
          <td class="paramtype">const VectorFst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>linear_fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vector&lt; typename Arc::Label &gt; &amp;&#160;</td>
          <td class="paramname"><em>phone_ids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vector&lt; typename Arc::Label &gt; &amp;&#160;</td>
          <td class="paramname"><em>disambig_ids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vector&lt; typename Arc::Label &gt; &amp;&#160;</td>
          <td class="paramname"><em>phone_seq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vector&lt; vector&lt; typename Arc::Label &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>ilabel_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>N</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>P</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="context-fst-test_8cc_source.html#l00070">70</a> of file <a class="el" href="context-fst-test_8cc_source.html">context-fst-test.cc</a>.</p>

<p class="reference">References <a class="el" href="fstext-utils-inl_8h_source.html#l00178">GetLinearSymbolSequence()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="stl-utils_8h_source.html#l00047">kaldi::IsSorted()</a>, and <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>.</p>
<div class="fragment"><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                                        {</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  assert(<a class="code" href="namespacekaldi.html#aaf3a91e99ae24050405bddc2ee24335f">kaldi::IsSorted</a>(phone_ids));  <span class="comment">// so we can do binary_search.</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  vector&lt;int32&gt; input_syms;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  vector&lt;int32&gt; output_syms;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  Weight tot_cost;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keywordtype">bool</span> ans = <a class="code" href="namespacefst.html#ae14d5a9815e596bfa4a455ce965c2697">GetLinearSymbolSequence</a>(linear_fst,  &amp;input_syms,</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                                     &amp;output_syms, &amp;tot_cost);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  assert(ans);  <span class="comment">// should be linear.</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  vector&lt;int32&gt; phone_seq_check;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; output_syms.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">if</span> (std::binary_search(phone_ids.begin(), phone_ids.end(), output_syms[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]))</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      phone_seq_check.push_back(output_syms[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  assert(phone_seq_check  == phone_seq);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  vector&lt;vector&lt;int32&gt; &gt; input_syms_long;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; input_syms.size(); i++) {</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    Label isym = input_syms[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordflow">if</span> (ilabel_info[isym].size() == 0) <span class="keywordflow">continue</span>;  <span class="comment">// epsilon.</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">if</span> ( (ilabel_info[isym].size() == 1 &amp;&amp;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;         ilabel_info[isym][0] &lt;= 0) ) <span class="keywordflow">continue</span>;  <span class="comment">// disambig.</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    input_syms_long.push_back(ilabel_info[isym]);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  }</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; input_syms_long.size(); i++) {</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    vector&lt;int32&gt; phone_context_window(N);  <span class="comment">// phone at pos i will be at pos P in this window.</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordtype">int</span> pos = ((int)i) - P;  <span class="comment">// pos of first phone in window [ may be out of range] .</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; N; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++, pos++) {</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <span class="keywordflow">if</span> (static_cast&lt;size_t&gt;(pos) &lt; phone_seq.size()) phone_context_window[<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>] = phone_seq[pos];</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      <span class="keywordflow">else</span> phone_context_window[<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>] = 0;  <span class="comment">// 0 is a special symbol that context-dep-itf expects to see</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      <span class="comment">// when no phone is present due to out-of-window.  context-fst knows about this too.</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    }</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    assert(input_syms_long[i] == phone_context_window);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  }</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keywordflow">return</span> tot_cost.Value();</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacefst_html_ae14d5a9815e596bfa4a455ce965c2697"><div class="ttname"><a href="namespacefst.html#ae14d5a9815e596bfa4a455ce965c2697">fst::GetLinearSymbolSequence</a></div><div class="ttdeci">bool GetLinearSymbolSequence(const Fst&lt; Arc &gt; &amp;fst, vector&lt; I &gt; *isymbols_out, vector&lt; I &gt; *osymbols_out, typename Arc::Weight *tot_weight_out)</div><div class="ttdoc">GetLinearSymbolSequence gets the symbol sequence from a linear FST. </div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00178">fstext-utils-inl.h:178</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacekaldi_html_aaf3a91e99ae24050405bddc2ee24335f"><div class="ttname"><a href="namespacekaldi.html#aaf3a91e99ae24050405bddc2ee24335f">kaldi::IsSorted</a></div><div class="ttdeci">bool IsSorted(const std::vector&lt; T &gt; &amp;vec)</div><div class="ttdoc">Returns true if the vector is sorted. </div><div class="ttdef"><b>Definition:</b> <a href="stl-utils_8h_source.html#l00047">stl-utils.h:47</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ada6ce1dc40d3ae27883d689f916fc3f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada6ce1dc40d3ae27883d689f916fc3f7">&#9670;&nbsp;</a></span>ClearSymbols()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ClearSymbols </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>clear_input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>clear_output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ClearSymbols sets all the symbols on the input and/or output side of the FST to zero, as specified. </p>
<p>It does not alter the symbol tables. </p>

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00742">742</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstext-utils-test_8cc_source.html#l00278">MakeLoopFstCompare()</a>.</p>
<div class="fragment"><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                                        {</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <span class="keywordflow">for</span> (StateIterator&lt;MutableFst&lt;Arc&gt; &gt; siter(*<a class="code" href="namespacefst.html">fst</a>);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;       !siter.Done();</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;       siter.Next()) {</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> s = siter.Value();</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="keywordflow">for</span> (MutableArcIterator&lt;MutableFst&lt;Arc&gt; &gt; aiter(<a class="code" href="namespacefst.html">fst</a>, s);</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;         !aiter.Done();</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;         aiter.Next()) {</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> arc = aiter.Value();</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      <span class="keywordtype">bool</span> change = <span class="keyword">false</span>;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      <span class="keywordflow">if</span> (clear_input &amp;&amp; arc.ilabel != 0) {</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        arc.ilabel = 0;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        change = <span class="keyword">true</span>;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;      }</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      <span class="keywordflow">if</span> (clear_output &amp;&amp; arc.olabel != 0) {</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        arc.olabel = 0;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        change = <span class="keyword">true</span>;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      }</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      <span class="keywordflow">if</span> (change) {</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        aiter.SetValue(arc);</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      }</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    }</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  }</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af406359703f3c4af2e1a1f8cf9bc1015"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af406359703f3c4af2e1a1f8cf9bc1015">&#9670;&nbsp;</a></span>CompactLatticeHasAlignment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> CompactLatticeHasAlignment </td>
          <td>(</td>
          <td class="paramtype">const ExpandedFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>, Int &gt; &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>fst</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if lattice has alignments, i.e. </p>
<p>it has any nonempty strings inside its weights. </p>

<p class="definition">Definition at line <a class="el" href="lattice-utils-inl_8h_source.html#l00244">244</a> of file <a class="el" href="lattice-utils-inl_8h_source.html">lattice-utils-inl.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-utils_8h_source.html#l00156">LatticeScale()</a>.</p>
<div class="fragment"><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                                                                            {</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keyword">typedef</span> CompactLatticeWeightTpl&lt;Weight, Int&gt; W;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keyword">typedef</span> ArcTpl&lt;W&gt; <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keyword">typedef</span> ExpandedFst&lt;Arc&gt; Fst;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  StateId num_states = <a class="code" href="namespacefst.html">fst</a>.NumStates();</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="keywordflow">for</span> (StateId s = 0; s &lt; num_states; s++) {</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">for</span> (ArcIterator&lt;Fst&gt; aiter(<a class="code" href="namespacefst.html">fst</a>, s);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;         !aiter.Done();</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;         aiter.Next()) {</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <span class="keyword">const</span> Arc &amp;arc = aiter.Value();</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <span class="keywordflow">if</span> (!arc.weight.String().empty()) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    }</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    W final_weight = <a class="code" href="namespacefst.html">fst</a>.Final(s);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">if</span> (!final_weight.String().empty()) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  }</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afcea2c9852fcd6ca4086828be71e4d81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcea2c9852fcd6ca4086828be71e4d81">&#9670;&nbsp;</a></span>CompactLatticeWeightTest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::CompactLatticeWeightTest </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight-test_8cc_source.html#l00124">124</a> of file <a class="el" href="lattice-weight-test_8cc_source.html">lattice-weight-test.cc</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00390">ApproxEqual()</a>, <a class="el" href="lattice-weight_8h_source.html#l00295">Compare()</a>, <a class="el" href="lattice-weight_8h_source.html#l00371">Divide()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="lattice-weight_8h_source.html#l00492">CompactLatticeWeightTpl&lt; WeightType, IntType &gt;::Member()</a>, <a class="el" href="lattice-weight_8h_source.html#l00461">CompactLatticeWeightTpl&lt; WeightType, IntType &gt;::One()</a>, <a class="el" href="lattice-weight_8h_source.html#l00312">Plus()</a>, <a class="el" href="lattice-weight_8h_source.html#l00503">CompactLatticeWeightTpl&lt; WeightType, IntType &gt;::Quantize()</a>, <a class="el" href="lattice-weight-test_8cc_source.html#l00049">RandomCompactLatticeWeight()</a>, <a class="el" href="lattice-weight_8h_source.html#l00513">CompactLatticeWeightTpl&lt; WeightType, IntType &gt;::Read()</a>, <a class="el" href="lattice-weight_8h_source.html#l00363">Times()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00456">CompactLatticeWeightTpl&lt; WeightType, IntType &gt;::Zero()</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-weight-test_8cc_source.html#l00191">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                                {</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordflow">for</span>(int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 100; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="namespacefst.html#a4b96c2715539a4b5008546dbe9d5085b">CompactLatticeWeight</a> l1 = <a class="code" href="namespacefst.html#a01daf43f2d78080986c9140e239b11db">RandomCompactLatticeWeight</a>(), l2 = <a class="code" href="namespacefst.html#a01daf43f2d78080986c9140e239b11db">RandomCompactLatticeWeight</a>();</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <a class="code" href="namespacefst.html#a4b96c2715539a4b5008546dbe9d5085b">CompactLatticeWeight</a> l3 = <a class="code" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a>(l1, l2);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <a class="code" href="namespacefst.html#a4b96c2715539a4b5008546dbe9d5085b">CompactLatticeWeight</a> l4 = <a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(l1, l2);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a>(l3, l3) == l3);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a>(l1, l2) == <a class="code" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a>(l2, l1)); <span class="comment">// commutativity of plus</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a>(l3, CompactLatticeWeight::Zero()) == l3); <span class="comment">// x + 0 = x</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(l3, CompactLatticeWeight::One()) == l3); <span class="comment">// x * 1 = x</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(l3, CompactLatticeWeight::Zero()) == CompactLatticeWeight::Zero()); <span class="comment">// x * 0 = 0</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    NaturalLess&lt;CompactLatticeWeight&gt; nl;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordtype">bool</span> a = nl(l1, l2);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordtype">bool</span> b = (<a class="code" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a>(l1, l2) == l1 &amp;&amp; l1 != l2);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(a == b);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="namespacefst.html#adf747c74695ff3610637fdce3fc3b6a4">Compare</a>(l1, <a class="code" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a>(l1, l2)) != 1); <span class="comment">// so do not have l1 &gt; l1 + l2</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="namespacefst.html#a4b96c2715539a4b5008546dbe9d5085b">CompactLatticeWeight</a> l5 = <a class="code" href="namespacefst.html#a01daf43f2d78080986c9140e239b11db">RandomCompactLatticeWeight</a>(), l6 = <a class="code" href="namespacefst.html#a01daf43f2d78080986c9140e239b11db">RandomCompactLatticeWeight</a>();</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(<a class="code" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a>(l1, l2), <a class="code" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a>(l5, l6)) ==</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                 <a class="code" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a>(<a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(l1, l5), <a class="code" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a>(<a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(l1, l6),</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                 <a class="code" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a>(<a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(l2, l5), <a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(l2, l6))))); <span class="comment">// * distributes over +</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(l1.Member() &amp;&amp; l2.Member() &amp;&amp; l3.Member() &amp;&amp; l4.Member()</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                 &amp;&amp; l5.Member() &amp;&amp; l6.Member());</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">if</span> (l2 != CompactLatticeWeight::Zero())  {</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">ApproxEqual</a>(<a class="code" href="namespacefst.html#a694bc33e16bfb9d7a1639f8488508d20">Divide</a>(<a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(l1, l2), l2, DIVIDE_RIGHT), l1)); <span class="comment">// (a*b) / b = a if b != 0</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">ApproxEqual</a>(<a class="code" href="namespacefst.html#a694bc33e16bfb9d7a1639f8488508d20">Divide</a>(<a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(l2, l1), l2, DIVIDE_LEFT), l1)); <span class="comment">// (a*b) / b = a if b != 0</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    }</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">ApproxEqual</a>(l1, l1.Quantize()));</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    std::ostringstream s1;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    s1 &lt;&lt; l1;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    std::istringstream s2(s1.str());</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    s2 &gt;&gt; l2;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">ApproxEqual</a>(l1, l2));</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    std::cout &lt;&lt; s1.str() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    {</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      std::ostringstream s1b;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      l1.Write(s1b);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      std::istringstream s2b(s1b.str());</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      l3.Read(s2b);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(l1 == l3);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    }</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="namespacefst.html#a53af4ee0b29523b7c627660609ea6190">CompactLatticeWeightCommonDivisor</a> divisor;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;l5 = &quot;</span> &lt;&lt; l5 &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;l6 = &quot;</span> &lt;&lt; l6 &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    l1 = divisor(l5, l6);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;div = &quot;</span> &lt;&lt; l1 &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">if</span> (l1 != CompactLatticeWeight::Zero()) {</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      l2 = <a class="code" href="namespacefst.html#a694bc33e16bfb9d7a1639f8488508d20">Divide</a>(l5, l1, DIVIDE_LEFT);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      l3 = <a class="code" href="namespacefst.html#a694bc33e16bfb9d7a1639f8488508d20">Divide</a>(l6, l1, DIVIDE_LEFT);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      std::cout &lt;&lt; <span class="stringliteral">&quot;l2 = &quot;</span> &lt;&lt; l2 &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      std::cout &lt;&lt; <span class="stringliteral">&quot;l3 = &quot;</span> &lt;&lt; l3 &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      l4 = divisor(l2, l3); <span class="comment">// make sure l2 is now one.</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      std::cout &lt;&lt; <span class="stringliteral">&quot;l4 = &quot;</span> &lt;&lt; l4 &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">ApproxEqual</a>(l4, CompactLatticeWeight::One()));</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(l5 == CompactLatticeWeight::Zero()</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                   &amp;&amp; l6 == CompactLatticeWeight::Zero());</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    }</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;}</div><div class="ttc" id="namespacefst_html_a01daf43f2d78080986c9140e239b11db"><div class="ttname"><a href="namespacefst.html#a01daf43f2d78080986c9140e239b11db">fst::RandomCompactLatticeWeight</a></div><div class="ttdeci">CompactLatticeWeight RandomCompactLatticeWeight()</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight-test_8cc_source.html#l00049">lattice-weight-test.cc:49</a></div></div>
<div class="ttc" id="namespacefst_html_a694bc33e16bfb9d7a1639f8488508d20"><div class="ttname"><a href="namespacefst.html#a694bc33e16bfb9d7a1639f8488508d20">fst::Divide</a></div><div class="ttdeci">LatticeWeightTpl&lt; FloatType &gt; Divide(const LatticeWeightTpl&lt; FloatType &gt; &amp;w1, const LatticeWeightTpl&lt; FloatType &gt; &amp;w2, DivideType typ=DIVIDE_ANY)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00371">lattice-weight.h:371</a></div></div>
<div class="ttc" id="namespacefst_html_afbb3ae5b68808cb433cc710a7052c4c4"><div class="ttname"><a href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">fst::Plus</a></div><div class="ttdeci">LatticeWeightTpl&lt; FloatType &gt; Plus(const LatticeWeightTpl&lt; FloatType &gt; &amp;w1, const LatticeWeightTpl&lt; FloatType &gt; &amp;w2)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00312">lattice-weight.h:312</a></div></div>
<div class="ttc" id="namespacefst_html_a0807071c6ceb397bc35281fce74ff8a7"><div class="ttname"><a href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">fst::Times</a></div><div class="ttdeci">LatticeWeightTpl&lt; FloatType &gt; Times(const LatticeWeightTpl&lt; FloatType &gt; &amp;w1, const LatticeWeightTpl&lt; FloatType &gt; &amp;w2)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00363">lattice-weight.h:363</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacefst_html_adf747c74695ff3610637fdce3fc3b6a4"><div class="ttname"><a href="namespacefst.html#adf747c74695ff3610637fdce3fc3b6a4">fst::Compare</a></div><div class="ttdeci">int Compare(const LatticeWeightTpl&lt; FloatType &gt; &amp;w1, const LatticeWeightTpl&lt; FloatType &gt; &amp;w2)</div><div class="ttdoc">Compare returns -1 if w1 &lt; w2, +1 if w1 &gt; w2, and 0 if w1 == w2. </div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00295">lattice-weight.h:295</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="namespacekaldi_html_a99dcbb9fdaa6c980ba67941d45adf017"><div class="ttname"><a href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">kaldi::ApproxEqual</a></div><div class="ttdeci">static bool ApproxEqual(float a, float b, float relative_tolerance=0.001)</div><div class="ttdoc">return abs(a - b) &lt;= relative_tolerance * (abs(a)+abs(b)). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00264">kaldi-math.h:264</a></div></div>
<div class="ttc" id="namespacefst_html_a4b96c2715539a4b5008546dbe9d5085b"><div class="ttname"><a href="namespacefst.html#a4b96c2715539a4b5008546dbe9d5085b">fst::CompactLatticeWeight</a></div><div class="ttdeci">CompactLatticeWeightTpl&lt; LatticeWeight, int32 &gt; CompactLatticeWeight</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight-test_8cc_source.html#l00030">lattice-weight-test.cc:30</a></div></div>
<div class="ttc" id="namespacefst_html_a53af4ee0b29523b7c627660609ea6190"><div class="ttname"><a href="namespacefst.html#a53af4ee0b29523b7c627660609ea6190">fst::CompactLatticeWeightCommonDivisor</a></div><div class="ttdeci">CompactLatticeWeightCommonDivisorTpl&lt; LatticeWeight, int32 &gt; CompactLatticeWeightCommonDivisor</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight-test_8cc_source.html#l00033">lattice-weight-test.cc:33</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adf747c74695ff3610637fdce3fc3b6a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf747c74695ff3610637fdce3fc3b6a4">&#9670;&nbsp;</a></span>Compare() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int fst::Compare </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compare returns -1 if w1 &lt; w2, +1 if w1 &gt; w2, and 0 if w1 == w2. </p>

<p class="definition">Definition at line <a class="el" href="lattice-weight_8h_source.html#l00295">295</a> of file <a class="el" href="lattice-weight_8h_source.html">lattice-weight.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00052">LatticeWeightTpl&lt; FloatType &gt;::Value1()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00054">LatticeWeightTpl&lt; FloatType &gt;::Value2()</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-weight-test_8cc_source.html#l00124">CompactLatticeWeightTest()</a>, <a class="el" href="lattice-weight_8h_source.html#l00592">Compare()</a>, <a class="el" href="determinize-lattice-pruned_8cc_source.html#l00605">LatticeDeterminizerPruned&lt; Weight, IntType &gt;::Compare()</a>, <a class="el" href="determinize-lattice-inl_8h_source.html#l00733">LatticeDeterminizer&lt; Weight, IntType &gt;::Compare()</a>, <a class="el" href="prune-special-inl_8h_source.html#l00077">PruneSpecialClass&lt; Arc &gt;::Done()</a>, <a class="el" href="determinize-lattice-pruned_8cc_source.html#l00633">LatticeDeterminizerPruned&lt; Weight, IntType &gt;::EpsilonClosure()</a>, <a class="el" href="determinize-lattice-inl_8h_source.html#l00762">LatticeDeterminizer&lt; Weight, IntType &gt;::EpsilonClosure()</a>, <a class="el" href="lattice-weight-test_8cc_source.html#l00062">LatticeWeightTest()</a>, <a class="el" href="determinize-lattice-inl_8h_source.html#l00924">LatticeDeterminizer&lt; Weight, IntType &gt;::MakeSubsetUnique()</a>, <a class="el" href="lattice-weight_8h_source.html#l00326">NaturalLess&lt; LatticeWeightTpl&lt; FloatType &gt; &gt;::operator()()</a>, <a class="el" href="lattice-weight_8h_source.html#l00340">NaturalLess&lt; LatticeWeightTpl&lt; float &gt; &gt;::operator()()</a>, <a class="el" href="lattice-weight_8h_source.html#l00354">NaturalLess&lt; LatticeWeightTpl&lt; double &gt; &gt;::operator()()</a>, <a class="el" href="lattice-weight_8h_source.html#l00616">NaturalLess&lt; CompactLatticeWeightTpl&lt; LatticeWeightTpl&lt; FloatType &gt;, IntType &gt; &gt;::operator()()</a>, <a class="el" href="lattice-weight_8h_source.html#l00630">NaturalLess&lt; CompactLatticeWeightTpl&lt; LatticeWeightTpl&lt; float &gt;, int32 &gt; &gt;::operator()()</a>, <a class="el" href="lattice-weight_8h_source.html#l00644">NaturalLess&lt; CompactLatticeWeightTpl&lt; LatticeWeightTpl&lt; double &gt;, int32 &gt; &gt;::operator()()</a>, <a class="el" href="prune-special-inl_8h_source.html#l00072">PruneSpecialClass&lt; Arc &gt;::Task::operator&lt;()</a>, <a class="el" href="lattice-weight_8h_source.html#l00312">Plus()</a>, <a class="el" href="determinize-lattice-inl_8h_source.html#l00852">LatticeDeterminizer&lt; Weight, IntType &gt;::ProcessFinal()</a>, and <a class="el" href="prune-special-inl_8h_source.html#l00092">PruneSpecialClass&lt; Arc &gt;::ProcessState()</a>.</p>
<div class="fragment"><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                                                           {</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  FloatType f1 = w1.Value1() + w1.Value2(),</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      f2 = w2.Value1() + w2.Value2();</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordflow">if</span> (f1 &lt; f2) { <span class="keywordflow">return</span> 1; } <span class="comment">// having smaller cost means you&#39;re larger</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="comment">// in the semiring [higher probability]</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (f1 &gt; f2) { <span class="keywordflow">return</span> -1; }</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="comment">// mathematically we should be comparing (w1.value1_-w1.value2_ &lt; w2.value1_-w2.value2_)</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="comment">// in the next line, but add w1.value1_+w1.value2_ = w2.value1_+w2.value2_ to both sides and</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="comment">// divide by two, and we get the simpler equivalent form w1.value1_ &lt; w2.value1_.</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (w1.Value1() &lt; w2.Value1()) { <span class="keywordflow">return</span> 1; }</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (w1.Value1() &gt; w2.Value1()) { <span class="keywordflow">return</span> -1; }</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="keywordflow">else</span> { <span class="keywordflow">return</span> 0; }</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a3bd76f49ec8a92905a464d7d4ac903de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bd76f49ec8a92905a464d7d4ac903de">&#9670;&nbsp;</a></span>Compare() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int fst::Compare </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight_8h_source.html#l00592">592</a> of file <a class="el" href="lattice-weight_8h_source.html">lattice-weight.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00295">Compare()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="lattice-weight_8h_source.html#l00450">CompactLatticeWeightTpl&lt; WeightType, IntType &gt;::String()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00448">CompactLatticeWeightTpl&lt; WeightType, IntType &gt;::Weight()</a>.</p>
<div class="fragment"><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                                                                            {</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="keywordtype">int</span> c1 = <a class="code" href="namespacefst.html#a5cd0f5b5b35f6273907ef74cb7a7e8d2">Compare</a>(w1.Weight(), w2.Weight());</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <span class="keywordflow">if</span> (c1 != 0) <span class="keywordflow">return</span> c1;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <span class="keywordtype">int</span> l1 = w1.String().size(), l2 = w2.String().size();</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="comment">// Use opposite order on the string lengths, so that if the costs are the same,</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="comment">// the shorter string wins.</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="keywordflow">if</span> (l1 &gt; l2) <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (l1 &lt; l2) <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; l1; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">if</span> (w1.String()[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt; w2.String()[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]) <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (w1.String()[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] &gt; w2.String()[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]) <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  }</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;}</div><div class="ttc" id="namespacefst_html_a5cd0f5b5b35f6273907ef74cb7a7e8d2"><div class="ttname"><a href="namespacefst.html#a5cd0f5b5b35f6273907ef74cb7a7e8d2">fst::Compare</a></div><div class="ttdeci">int Compare(const TropicalWeight &amp;w1, const TropicalWeight &amp;w2)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00654">lattice-weight.h:654</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5cd0f5b5b35f6273907ef74cb7a7e8d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cd0f5b5b35f6273907ef74cb7a7e8d2">&#9670;&nbsp;</a></span>Compare() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int fst::Compare </td>
          <td>(</td>
          <td class="paramtype">const TropicalWeight &amp;&#160;</td>
          <td class="paramname"><em>w1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TropicalWeight &amp;&#160;</td>
          <td class="paramname"><em>w2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight_8h_source.html#l00654">654</a> of file <a class="el" href="lattice-weight_8h_source.html">lattice-weight.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                                             {</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  <span class="keywordtype">float</span> f1 = w1.Value(), f2 = w2.Value();</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="keywordflow">if</span> (f1 == f2) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (f1 &gt; f2) <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a198edfe97614325be9828685b28d6235"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a198edfe97614325be9828685b28d6235">&#9670;&nbsp;</a></span>ComposeContext()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ComposeContext </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; int32 &gt; &amp;&#160;</td>
          <td class="paramname"><em>disambig_syms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>context_width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>central_position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *&#160;</td>
          <td class="paramname"><em>ifst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; vector&lt; int32 &gt; &gt; *&#160;</td>
          <td class="paramname"><em>ilabels_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>project_ifst</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used in the command-line tool fstcomposecontext. </p>
<p>It creates a context FST and composes it on the left with "ifst" to make "ofst". It outputs the label information to ilabels_out. "ifst" is mutable because we need to add the subsequential loop.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">disambig_syms</td><td>List of disambiguation symbols, e.g. the integer ids of #0, #1, #2 ... in the phones.txt. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">context_width</td><td>Size of context window, e.g. 3 for triphone. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">central_position</td><td>Central position in phonetic context window (zero-based index), e.g. 1 for triphone. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ifst</td><td>The FST we are composing with C (e.g. LG.fst), mustable because we need to add the subsequential loop to it. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ofst</td><td>Composed output FST (would be CLG.fst). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ilabels_out</td><td>Vector, indexed by ilabel of CLG.fst, providing information about the meaning of that ilabel; see "http://kaldi-asr.org/doc/tree_externals.html#tree_ilabel". </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">project_ifst</td><td>This is intended only to be set to true in the program 'fstmakecontextfst'... if true, it will project on the input after adding the subsequential loop to 'ifst', which allows us to reconstruct the context fst C.fst. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="context-fst_8cc_source.html#l00245">245</a> of file <a class="el" href="context-fst_8cc_source.html">context-fst.cc</a>.</p>

<p class="reference">References <a class="el" href="context-fst_8cc_source.html#l00296">AddSubsequentialLoop()</a>, <a class="el" href="deterministic-fst-inl_8h_source.html#l00408">ComposeDeterministicOnDemandInverse()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00097">GetInputSymbols()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, and <a class="el" href="context-fst_8h_source.html#l00200">InverseContextFst::SwapIlabelInfo()</a>.</p>

<p class="reference">Referenced by <a class="el" href="compile-graph_8cc_source.html#l00032">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                                       {</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(ifst != NULL &amp;&amp; ofst != NULL);</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(context_width &gt; 0);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(central_position &gt;= 0);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(central_position &lt; context_width);</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  vector&lt;int32&gt; disambig_syms(disambig_syms_in);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  std::sort(disambig_syms.begin(), disambig_syms.end());</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  vector&lt;int32&gt; all_syms;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <a class="code" href="namespacefst.html#a497c657ffe831f50f0de2ce5c296beb6">GetInputSymbols</a>(*ifst, <span class="keyword">false</span><span class="comment">/*no eps*/</span>, &amp;all_syms);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  std::sort(all_syms.begin(), all_syms.end());</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  vector&lt;int32&gt; phones;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; all_syms.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordflow">if</span> (!std::binary_search(disambig_syms.begin(),</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                            disambig_syms.end(), all_syms[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]))</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      phones.push_back(all_syms[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="comment">// Get subsequential symbol that does not clash with</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="comment">// any disambiguation symbol or symbol in the FST.</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  int32 subseq_sym = 1;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="keywordflow">if</span> (!all_syms.empty())</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    subseq_sym = std::max(subseq_sym, all_syms.back() + 1);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keywordflow">if</span> (!disambig_syms.empty())</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    subseq_sym = std::max(subseq_sym, disambig_syms.back() + 1);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="comment">// if central_position == context_width-1, it&#39;s left-context, and no</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="comment">// subsequential symbol is needed.</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="keywordflow">if</span> (central_position != context_width-1) {</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <a class="code" href="namespacefst.html#a0c8426e0cb7d35fe4b1abcef0b163b4f">AddSubsequentialLoop</a>(subseq_sym, ifst);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">if</span> (project_ifst) {</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      fst::Project(ifst, fst::PROJECT_INPUT);</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    }</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  }</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  InverseContextFst inv_c(subseq_sym, phones, disambig_syms,</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                          context_width, central_position);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="comment">// The following statement is equivalent to the following</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="comment">// (if FSTs had the &#39;*&#39; operator for composition):</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="comment">//   (*ofst) = inv(inv_c) * (*ifst)</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <a class="code" href="group__deterministic__fst__group.html#ga9f5e73f2d8e2644492db7857d02acfc2">ComposeDeterministicOnDemandInverse</a>(*ifst, &amp;inv_c, ofst);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  inv_c.SwapIlabelInfo(ilabels_out);</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;}</div><div class="ttc" id="namespacefst_html_a497c657ffe831f50f0de2ce5c296beb6"><div class="ttname"><a href="namespacefst.html#a497c657ffe831f50f0de2ce5c296beb6">fst::GetInputSymbols</a></div><div class="ttdeci">void GetInputSymbols(const Fst&lt; Arc &gt; &amp;fst, bool include_eps, vector&lt; I &gt; *symbols)</div><div class="ttdoc">GetInputSymbols gets the list of symbols on the input of fst (including epsilon, if include_eps == tr...</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00097">fstext-utils-inl.h:97</a></div></div>
<div class="ttc" id="group__deterministic__fst__group_html_ga9f5e73f2d8e2644492db7857d02acfc2"><div class="ttname"><a href="group__deterministic__fst__group.html#ga9f5e73f2d8e2644492db7857d02acfc2">fst::ComposeDeterministicOnDemandInverse</a></div><div class="ttdeci">void ComposeDeterministicOnDemandInverse(const Fst&lt; Arc &gt; &amp;right, DeterministicOnDemandFst&lt; Arc &gt; *left, MutableFst&lt; Arc &gt; *fst_composed)</div><div class="ttdoc">This function does &amp;#39;*fst_composed = Compose(Inverse(*fst2), fst1)&amp;#39; Note that the arguments are revers...</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-inl_8h_source.html#l00408">deterministic-fst-inl.h:408</a></div></div>
<div class="ttc" id="namespacefst_html_a0c8426e0cb7d35fe4b1abcef0b163b4f"><div class="ttname"><a href="namespacefst.html#a0c8426e0cb7d35fe4b1abcef0b163b4f">fst::AddSubsequentialLoop</a></div><div class="ttdeci">void AddSubsequentialLoop(StdArc::Label subseq_symbol, MutableFst&lt; StdArc &gt; *fst)</div><div class="ttdoc">Modifies an FST so that it transuces the same paths, but the input side of the paths can all have the...</div><div class="ttdef"><b>Definition:</b> <a href="context-fst_8cc_source.html#l00296">context-fst.cc:296</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af0d288fdc51aa72c70fe5af7ce3e34be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0d288fdc51aa72c70fe5af7ce3e34be">&#9670;&nbsp;</a></span>ComposeContextLeftBiphone() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::ComposeContextLeftBiphone </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>nonterm_phones_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vector&lt; int32 &gt; &amp;&#160;</td>
          <td class="paramname"><em>disambig_syms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>ifst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; vector&lt; int32 &gt; &gt; *&#160;</td>
          <td class="paramname"><em>ilabels</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is a variant of the function <a class="el" href="namespacefst.html#a198edfe97614325be9828685b28d6235" title="Used in the command-line tool fstcomposecontext. ">ComposeContext()</a> which is to be used with our "grammar FST" framework (see <a class="el" href="graph.html#graph_context">The ContextFst object</a>, i.e. </p>
<p>../doc/grammar.dox, for more details). This does not take the 'context_width' and 'central_position' arguments because they are assumed to be 2 and 1 respectively (meaning, left-biphone phonetic context).</p>
<p>This function creates a context FST and composes it on the left with "ifst" to make "ofst".</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nonterm_phones_offset</td><td>The integer id of the symbol #nonterm_bos in the phones.txt file. You can just set this to a large value (like 1 million) if you are not actually using nonterminals (e.g. for testing purposes). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">disambig_syms</td><td>List of disambiguation symbols, e.g. the integer ids of #0, #1, #2 ... in the phones.txt. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ifst</td><td>The FST we are composing with C (e.g. LG.fst). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ofst</td><td>Composed output FST (would be CLG.fst). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ilabels</td><td>Vector, indexed by ilabel of CLG.fst, providing information about the meaning of that ilabel; see <a class="el" href="tree_externals.html#tree_ilabel">The ilabel_info object</a> (<a href="http://kaldi-asr.org/doc/tree_externals.html#tree_ilabel">http://kaldi-asr.org/doc/tree_externals.html#tree_ilabel</a>) and also <a class="el" href="grammar.html#grammar_special_clg">Special symbols in CLG.fst</a> (<a href="http://kaldi-asr.org/doc/grammar#grammar_special_clg">http://kaldi-asr.org/doc/grammar#grammar_special_clg</a>). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="grammar-context-fst_8cc_source.html#l00196">196</a> of file <a class="el" href="grammar-context-fst_8cc_source.html">grammar-context-fst.cc</a>.</p>

<p class="reference">References <a class="el" href="deterministic-fst-inl_8h_source.html#l00408">ComposeDeterministicOnDemandInverse()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00097">GetInputSymbols()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="grammar-context-fst_8h_source.html#l00230">InverseLeftBiphoneContextFst::SwapIlabelInfo()</a>.</p>

<p class="reference">Referenced by <a class="el" href="grammar-context-fst_8h_source.html#l00090">GetEncodingMultiple()</a>, and <a class="el" href="compile-graph_8cc_source.html#l00032">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                                           {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  vector&lt;int32&gt; disambig_syms(disambig_syms_in);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  std::sort(disambig_syms.begin(), disambig_syms.end());</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  vector&lt;int32&gt; all_syms;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <a class="code" href="namespacefst.html#a497c657ffe831f50f0de2ce5c296beb6">GetInputSymbols</a>(ifst, <span class="keyword">false</span><span class="comment">/*no eps*/</span>, &amp;all_syms);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  std::sort(all_syms.begin(), all_syms.end());</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  vector&lt;int32&gt; phones;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; all_syms.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">if</span> (!std::binary_search(disambig_syms.begin(),</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                            disambig_syms.end(), all_syms[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]) &amp;&amp;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        all_syms[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt; nonterm_phones_offset)</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      phones.push_back(all_syms[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  InverseLeftBiphoneContextFst inv_c(nonterm_phones_offset,</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                                     phones, disambig_syms);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="comment">// The following statement is equivalent to the following</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="comment">// (if FSTs had the &#39;*&#39; operator for composition):</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="comment">//   (*ofst) = inv(inv_c) * (*ifst)</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <a class="code" href="group__deterministic__fst__group.html#ga9f5e73f2d8e2644492db7857d02acfc2">ComposeDeterministicOnDemandInverse</a>(ifst, &amp;inv_c, ofst);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  inv_c.SwapIlabelInfo(ilabels);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div><div class="ttc" id="namespacefst_html_a497c657ffe831f50f0de2ce5c296beb6"><div class="ttname"><a href="namespacefst.html#a497c657ffe831f50f0de2ce5c296beb6">fst::GetInputSymbols</a></div><div class="ttdeci">void GetInputSymbols(const Fst&lt; Arc &gt; &amp;fst, bool include_eps, vector&lt; I &gt; *symbols)</div><div class="ttdoc">GetInputSymbols gets the list of symbols on the input of fst (including epsilon, if include_eps == tr...</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00097">fstext-utils-inl.h:97</a></div></div>
<div class="ttc" id="group__deterministic__fst__group_html_ga9f5e73f2d8e2644492db7857d02acfc2"><div class="ttname"><a href="group__deterministic__fst__group.html#ga9f5e73f2d8e2644492db7857d02acfc2">fst::ComposeDeterministicOnDemandInverse</a></div><div class="ttdeci">void ComposeDeterministicOnDemandInverse(const Fst&lt; Arc &gt; &amp;right, DeterministicOnDemandFst&lt; Arc &gt; *left, MutableFst&lt; Arc &gt; *fst_composed)</div><div class="ttdoc">This function does &amp;#39;*fst_composed = Compose(Inverse(*fst2), fst1)&amp;#39; Note that the arguments are revers...</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-inl_8h_source.html#l00408">deterministic-fst-inl.h:408</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a21a6b661fb0fef2b84b13bde67d25a05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21a6b661fb0fef2b84b13bde67d25a05">&#9670;&nbsp;</a></span>ComposeContextLeftBiphone() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::ComposeContextLeftBiphone </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>nonterm_phones_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vector&lt; int32 &gt; &amp;&#160;</td>
          <td class="paramname"><em>disambig_syms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>ifst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; vector&lt; int32 &gt; &gt; *&#160;</td>
          <td class="paramname"><em>ilabels</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is a variant of the function <a class="el" href="namespacefst.html#a198edfe97614325be9828685b28d6235" title="Used in the command-line tool fstcomposecontext. ">ComposeContext()</a> which is to be used with our "grammar FST" framework (see <a class="el" href="graph.html#graph_context">The ContextFst object</a>, i.e. </p>
<p>../doc/grammar.dox, for more details). This does not take the 'context_width' and 'central_position' arguments because they are assumed to be 2 and 1 respectively (meaning, left-biphone phonetic context).</p>
<p>This function creates a context FST and composes it on the left with "ifst" to make "ofst".</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nonterm_phones_offset</td><td>The integer id of the symbol #nonterm_bos in the phones.txt file. You can just set this to a large value (like 1 million) if you are not actually using nonterminals (e.g. for testing purposes). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">disambig_syms</td><td>List of disambiguation symbols, e.g. the integer ids of #0, #1, #2 ... in the phones.txt. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ifst</td><td>The FST we are composing with C (e.g. LG.fst). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ofst</td><td>Composed output FST (would be CLG.fst). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ilabels</td><td>Vector, indexed by ilabel of CLG.fst, providing information about the meaning of that ilabel; see <a class="el" href="tree_externals.html#tree_ilabel">The ilabel_info object</a> (<a href="http://kaldi-asr.org/doc/tree_externals.html#tree_ilabel">http://kaldi-asr.org/doc/tree_externals.html#tree_ilabel</a>) and also <a class="el" href="grammar.html#grammar_special_clg">Special symbols in CLG.fst</a> (<a href="http://kaldi-asr.org/doc/grammar#grammar_special_clg">http://kaldi-asr.org/doc/grammar#grammar_special_clg</a>). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="grammar-context-fst_8cc_source.html#l00196">196</a> of file <a class="el" href="grammar-context-fst_8cc_source.html">grammar-context-fst.cc</a>.</p>

<p class="reference">References <a class="el" href="deterministic-fst-inl_8h_source.html#l00408">ComposeDeterministicOnDemandInverse()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00097">GetInputSymbols()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="grammar-context-fst_8h_source.html#l00230">InverseLeftBiphoneContextFst::SwapIlabelInfo()</a>.</p>

<p class="reference">Referenced by <a class="el" href="grammar-context-fst_8h_source.html#l00090">GetEncodingMultiple()</a>, and <a class="el" href="compile-graph_8cc_source.html#l00032">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                                           {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  vector&lt;int32&gt; disambig_syms(disambig_syms_in);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  std::sort(disambig_syms.begin(), disambig_syms.end());</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  vector&lt;int32&gt; all_syms;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <a class="code" href="namespacefst.html#a497c657ffe831f50f0de2ce5c296beb6">GetInputSymbols</a>(ifst, <span class="keyword">false</span><span class="comment">/*no eps*/</span>, &amp;all_syms);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  std::sort(all_syms.begin(), all_syms.end());</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  vector&lt;int32&gt; phones;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; all_syms.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">if</span> (!std::binary_search(disambig_syms.begin(),</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                            disambig_syms.end(), all_syms[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]) &amp;&amp;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        all_syms[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt; nonterm_phones_offset)</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      phones.push_back(all_syms[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  InverseLeftBiphoneContextFst inv_c(nonterm_phones_offset,</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                                     phones, disambig_syms);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="comment">// The following statement is equivalent to the following</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="comment">// (if FSTs had the &#39;*&#39; operator for composition):</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="comment">//   (*ofst) = inv(inv_c) * (*ifst)</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <a class="code" href="group__deterministic__fst__group.html#ga9f5e73f2d8e2644492db7857d02acfc2">ComposeDeterministicOnDemandInverse</a>(ifst, &amp;inv_c, ofst);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  inv_c.SwapIlabelInfo(ilabels);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div><div class="ttc" id="namespacefst_html_a497c657ffe831f50f0de2ce5c296beb6"><div class="ttname"><a href="namespacefst.html#a497c657ffe831f50f0de2ce5c296beb6">fst::GetInputSymbols</a></div><div class="ttdeci">void GetInputSymbols(const Fst&lt; Arc &gt; &amp;fst, bool include_eps, vector&lt; I &gt; *symbols)</div><div class="ttdoc">GetInputSymbols gets the list of symbols on the input of fst (including epsilon, if include_eps == tr...</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00097">fstext-utils-inl.h:97</a></div></div>
<div class="ttc" id="group__deterministic__fst__group_html_ga9f5e73f2d8e2644492db7857d02acfc2"><div class="ttname"><a href="group__deterministic__fst__group.html#ga9f5e73f2d8e2644492db7857d02acfc2">fst::ComposeDeterministicOnDemandInverse</a></div><div class="ttdeci">void ComposeDeterministicOnDemandInverse(const Fst&lt; Arc &gt; &amp;right, DeterministicOnDemandFst&lt; Arc &gt; *left, MutableFst&lt; Arc &gt; *fst_composed)</div><div class="ttdoc">This function does &amp;#39;*fst_composed = Compose(Inverse(*fst2), fst1)&amp;#39; Note that the arguments are revers...</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-inl_8h_source.html#l00408">deterministic-fst-inl.h:408</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0335ed4b018328470d0d4856837fbefb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0335ed4b018328470d0d4856837fbefb">&#9670;&nbsp;</a></span>ComputeStateInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ComputeStateInfo </td>
          <td>(</td>
          <td class="paramtype">const VectorFst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; char &gt; *&#160;</td>
          <td class="paramname"><em>epsilon_info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function will set epsilon_info to have size equal to the NumStates() of the FST, containing a logical-or of the enum values kStateHasEpsilonArcsEntering, kStateHasNonEpsilonArcsEntering, kStateHasEpsilonArcsLeaving, and kStateHasNonEpsilonArcsLeaving. </p>
<p>The meaning should be obvious. Note: an epsilon arc is defined as an arc where ilabel == olabel == 0. </p>

<p class="definition">Definition at line <a class="el" href="epsilon-property-inl_8h_source.html#l00028">28</a> of file <a class="el" href="epsilon-property-inl_8h_source.html">epsilon-property-inl.h</a>.</p>

<p class="reference">References <a class="el" href="epsilon-property_8h_source.html#l00028">kStateHasEpsilonArcsEntering</a>, <a class="el" href="epsilon-property_8h_source.html#l00030">kStateHasEpsilonArcsLeaving</a>, <a class="el" href="epsilon-property_8h_source.html#l00029">kStateHasNonEpsilonArcsEntering</a>, and <a class="el" href="epsilon-property_8h_source.html#l00031">kStateHasNonEpsilonArcsLeaving</a>.</p>

<p class="reference">Referenced by <a class="el" href="epsilon-property-inl_8h_source.html#l00049">EnsureEpsilonProperty()</a>, and <a class="el" href="epsilon-property-test_8cc_source.html#l00027">TestEnsureEpsilonProperty()</a>.</p>
<div class="fragment"><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;                                                     {</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <span class="keyword">typedef</span> VectorFst&lt;Arc&gt; Fst;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  epsilon_info-&gt;clear();</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  epsilon_info-&gt;resize(<a class="code" href="namespacefst.html">fst</a>.NumStates(), <span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span><span class="keyword">&gt;</span>(0));</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="keywordflow">for</span> (StateId s = 0; s &lt; <a class="code" href="namespacefst.html">fst</a>.NumStates(); s++) {</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="keywordflow">for</span> (ArcIterator&lt;Fst&gt; aiter(<a class="code" href="namespacefst.html">fst</a>, s); !aiter.Done(); aiter.Next()) {</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &amp;arc = aiter.Value();</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;      <span class="keywordflow">if</span> (arc.ilabel == 0 &amp;&amp; arc.olabel == 0) {</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        (*epsilon_info)[arc.nextstate] |= <span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span><span class="keyword">&gt;</span>(<a class="code" href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a1947c0d03bf916c037b4f25cccc92ace">kStateHasEpsilonArcsEntering</a>);</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        (*epsilon_info)[s] |= <span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span><span class="keyword">&gt;</span>(<a class="code" href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a2d3c0fb5e5e5c747c645653b5ce863e7">kStateHasEpsilonArcsLeaving</a>);</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        (*epsilon_info)[arc.nextstate] |= <span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span><span class="keyword">&gt;</span>(<a class="code" href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a3048a708ccd7fc2d37561d3aeb544f63">kStateHasNonEpsilonArcsEntering</a>);</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        (*epsilon_info)[s] |= <span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span><span class="keyword">&gt;</span>(<a class="code" href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a229ce10dbec4dcf7ca9736ee6f3e8467">kStateHasNonEpsilonArcsLeaving</a>);</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;      }</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    }</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  }</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html_abed82baf7f470b522273a3e37c24c600a1947c0d03bf916c037b4f25cccc92ace"><div class="ttname"><a href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a1947c0d03bf916c037b4f25cccc92ace">fst::kStateHasEpsilonArcsEntering</a></div><div class="ttdef"><b>Definition:</b> <a href="epsilon-property_8h_source.html#l00028">epsilon-property.h:28</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_abed82baf7f470b522273a3e37c24c600a2d3c0fb5e5e5c747c645653b5ce863e7"><div class="ttname"><a href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a2d3c0fb5e5e5c747c645653b5ce863e7">fst::kStateHasEpsilonArcsLeaving</a></div><div class="ttdef"><b>Definition:</b> <a href="epsilon-property_8h_source.html#l00030">epsilon-property.h:30</a></div></div>
<div class="ttc" id="namespacefst_html_abed82baf7f470b522273a3e37c24c600a3048a708ccd7fc2d37561d3aeb544f63"><div class="ttname"><a href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a3048a708ccd7fc2d37561d3aeb544f63">fst::kStateHasNonEpsilonArcsEntering</a></div><div class="ttdef"><b>Definition:</b> <a href="epsilon-property_8h_source.html#l00029">epsilon-property.h:29</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_abed82baf7f470b522273a3e37c24c600a229ce10dbec4dcf7ca9736ee6f3e8467"><div class="ttname"><a href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a229ce10dbec4dcf7ca9736ee6f3e8467">fst::kStateHasNonEpsilonArcsLeaving</a></div><div class="ttdef"><b>Definition:</b> <a href="epsilon-property_8h_source.html#l00031">epsilon-property.h:31</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2eee5723a6815835fec137a69485438f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2eee5723a6815835fec137a69485438f">&#9670;&nbsp;</a></span>ConvertFstToLattice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ConvertFstToLattice </td>
          <td>(</td>
          <td class="paramtype">const ExpandedFst&lt; ArcTpl&lt; TropicalWeight &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>ifst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; Real &gt; &gt; &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts TropicalWeight to LatticeWeight (puts all the weight on the first float in the lattice's pair). </p>

<p class="definition">Definition at line <a class="el" href="lattice-utils-inl_8h_source.html#l00266">266</a> of file <a class="el" href="lattice-utils-inl_8h_source.html">lattice-utils-inl.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-utils_8h_source.html#l00114">ConvertLattice()</a>.</p>
<div class="fragment"><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                                                        {</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  int32 num_states_cache = 50000;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  fst::CacheOptions cache_opts(<span class="keyword">true</span>, num_states_cache);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  fst::MapFstOptions mapfst_opts(cache_opts);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  StdToLatticeMapper&lt;Real&gt; mapper;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  MapFst&lt;StdArc, ArcTpl&lt;LatticeWeightTpl&lt;Real&gt; &gt;,</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;         StdToLatticeMapper&lt;Real&gt; &gt; map_fst(ifst, mapper, mapfst_opts);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  *ofst = map_fst;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="abb292eda61ae2a04c5336c88b49ef832"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb292eda61ae2a04c5336c88b49ef832">&#9670;&nbsp;</a></span>ConvertLattice() <span class="overload">[1/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ConvertLattice </td>
          <td>(</td>
          <td class="paramtype">const ExpandedFst&lt; ArcTpl&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>ifst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>, Int &gt; &gt; &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>invert</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert lattice from a normal FST to a CompactLattice FST. </p>
<p>This is a bit like converting to the Gallic semiring, except the semiring behaves in a different way (designed to take the best path). Note: the ilabels end up as the symbols on the arcs of the output acceptor, and the olabels go to the strings. To make it the other way around (useful for the speech-recognition application), set invert=true [the default]. </p>

<p class="definition">Definition at line <a class="el" href="lattice-utils-inl_8h_source.html#l00033">33</a> of file <a class="el" href="lattice-utils-inl_8h_source.html">lattice-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="factor-inl_8h_source.html#l00069">Factor()</a>, and <a class="el" href="kaldi-error_8h_source.html#l00181">KALDI_PARANOID_ASSERT</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-utils_8h_source.html#l00087">ConvertLattice()</a>, <a class="el" href="lattice-oracle_8cc_source.html#l00061">kaldi::ConvertLatticeToUnweightedAcceptor()</a>, <a class="el" href="kaldi-lattice_8cc_source.html#l00029">kaldi::ConvertToCompactLattice()</a>, <a class="el" href="kaldi-lattice_8cc_source.html#l00046">kaldi::ConvertToLattice()</a>, <a class="el" href="nnet-example-functions_8cc_source.html#l00644">DiscriminativeExampleSplitter::CreateOutputLattice()</a>, <a class="el" href="nnet-example-functions_8cc_source.html#l00398">DiscriminativeExampleSplitter::DoExcise()</a>, <a class="el" href="nnet-example-functions_8cc_source.html#l00838">kaldi::nnet2::ExampleToPdfPost()</a>, <a class="el" href="nnet-compute-discriminative_8cc_source.html#l00178">NnetDiscriminativeUpdater::LatticeComputations()</a>, <a class="el" href="gmm-decode-biglm-faster_8cc_source.html#l00068">main()</a>, <a class="el" href="sausages_8cc_source.html#l00318">MinimumBayesRisk::MinimumBayesRisk()</a>, <a class="el" href="nnet-example-functions_8cc_source.html#l00263">DiscriminativeExampleSplitter::PrepareLattice()</a>, <a class="el" href="kaldi-lattice-test_8cc_source.html#l00028">kaldi::RandCompactLattice()</a>, <a class="el" href="confidence_8cc_source.html#l00026">kaldi::SentenceLevelConfidence()</a>, <a class="el" href="kaldi-lattice-test_8cc_source.html#l00069">kaldi::TestCompactLatticeTableCross()</a>, <a class="el" href="lattice-utils-test_8cc_source.html#l00114">TestConvert2()</a>, <a class="el" href="kaldi-lattice-test_8cc_source.html#l00128">kaldi::TestLatticeTableCross()</a>, <a class="el" href="word-align-lattice-lexicon_8cc_source.html#l00927">kaldi::TestWordAlignedLattice()</a>, and <a class="el" href="word-align-lattice-lexicon-test_8cc_source.html#l00173">kaldi::TestWordAlignLatticeLexicon()</a>.</p>
<div class="fragment"><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;                 {</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keyword">typedef</span> ArcTpl&lt;Weight&gt; <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="keyword">typedef</span> CompactLatticeWeightTpl&lt;Weight, Int&gt; CompactWeight;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <span class="keyword">typedef</span> ArcTpl&lt;CompactWeight&gt; CompactArc;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  VectorFst&lt;ArcTpl&lt;Weight&gt; &gt; ffst;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  vector&lt;vector&lt;Int&gt; &gt; labels;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="keywordflow">if</span> (invert) <span class="comment">// normal case: want the ilabels as sequences on the arcs of</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <a class="code" href="namespacefst.html#ab3abe8a6b622b82e751c44cbe46583ae">Factor</a>(ifst, &amp;ffst, &amp;labels);  <span class="comment">// the output... Factor makes seqs of</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                                   <span class="comment">// ilabels.</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    VectorFst&lt;ArcTpl&lt;Weight&gt; &gt; invfst(ifst);</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    Invert(&amp;invfst);</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <a class="code" href="namespacefst.html#ab3abe8a6b622b82e751c44cbe46583ae">Factor</a>(invfst, &amp;ffst,  &amp;labels);</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  }</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  TopSort(&amp;ffst); <span class="comment">// Put the states in ffst in topological order, which is</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="comment">// easier on the eye when reading the text-form lattices and corresponds to</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="comment">// what we get when we generate the lattices in the decoder.</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  ofst-&gt;DeleteStates();</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="comment">// The states will be numbered exactly the same as the original FST.</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="comment">// Add the states to the new FST.</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  StateId num_states = ffst.NumStates();</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keywordflow">for</span> (StateId s = 0; s &lt; num_states; s++) {</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    StateId news = ofst-&gt;AddState();</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    assert(news == s);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  }</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  ofst-&gt;SetStart(ffst.Start());</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keywordflow">for</span> (StateId s = 0; s &lt; num_states; s++) {</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> final_weight = ffst.Final(s);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">if</span> (final_weight != Weight::Zero()) {</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      CompactWeight final_compact_weight(final_weight, vector&lt;Int&gt;());</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      ofst-&gt;SetFinal(s, final_compact_weight);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    }</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordflow">for</span> (ArcIterator&lt;ExpandedFst&lt;Arc&gt; &gt; iter(ffst, s);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;         !iter.Done();</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;         iter.Next()) {</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      <span class="keyword">const</span> Arc &amp;arc = iter.Value();</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      <a class="code" href="group__error__group.html#ga2c852c1a15c7f195ec8021de2ab119a0">KALDI_PARANOID_ASSERT</a>(arc.weight != Weight::Zero());</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;      <span class="comment">// note: zero-weight arcs not allowed anyway so weight should not be zero,</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      <span class="comment">// but no harm in checking.</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      CompactArc compact_arc(arc.olabel, arc.olabel,</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                             CompactWeight(arc.weight, labels[arc.ilabel]),</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                             arc.nextstate);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      ofst-&gt;AddArc(s, compact_arc);</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    }</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  }</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html_ab3abe8a6b622b82e751c44cbe46583ae"><div class="ttname"><a href="namespacefst.html#ab3abe8a6b622b82e751c44cbe46583ae">fst::Factor</a></div><div class="ttdeci">void Factor(const Fst&lt; Arc &gt; &amp;fst, MutableFst&lt; Arc &gt; *ofst, vector&lt; vector&lt; I &gt; &gt; *symbols_out)</div><div class="ttdoc">Factor identifies linear chains of states with an olabel (if any) only on the first arc of the chain...</div><div class="ttdef"><b>Definition:</b> <a href="factor-inl_8h_source.html#l00069">factor-inl.h:69</a></div></div>
<div class="ttc" id="group__error__group_html_ga2c852c1a15c7f195ec8021de2ab119a0"><div class="ttname"><a href="group__error__group.html#ga2c852c1a15c7f195ec8021de2ab119a0">KALDI_PARANOID_ASSERT</a></div><div class="ttdeci">#define KALDI_PARANOID_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00181">kaldi-error.h:181</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a80447060449bf4d9a8abfe9df3e62e55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80447060449bf4d9a8abfe9df3e62e55">&#9670;&nbsp;</a></span>ConvertLattice() <span class="overload">[2/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::ConvertLattice </td>
          <td>(</td>
          <td class="paramtype">const ExpandedFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; <a class="el" href="classfloat.html">float</a> &gt; &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>ifst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; double &gt;, Int &gt; &gt; &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-utils_8h_source.html#l00087">87</a> of file <a class="el" href="lattice-utils_8h_source.html">lattice-utils.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-utils-inl_8h_source.html#l00033">ConvertLattice()</a>.</p>
<div class="fragment"><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                                                                                                        {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  VectorFst&lt;ArcTpl&lt;CompactLatticeWeightTpl&lt;LatticeWeightTpl&lt;float&gt;, Int&gt; &gt; &gt; <a class="code" href="namespacefst.html">fst</a>;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <a class="code" href="namespacefst.html#acda6ebb73ad680ecbc74daabf9436462">ConvertLattice</a>(ifst, &amp;fst);</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <a class="code" href="namespacefst.html#acda6ebb73ad680ecbc74daabf9436462">ConvertLattice</a>(fst, ofst);</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;}</div><div class="ttc" id="namespacefst_html_acda6ebb73ad680ecbc74daabf9436462"><div class="ttname"><a href="namespacefst.html#acda6ebb73ad680ecbc74daabf9436462">fst::ConvertLattice</a></div><div class="ttdeci">void ConvertLattice(const ExpandedFst&lt; ArcTpl&lt; CompactLatticeWeightTpl&lt; LatticeWeightTpl&lt; float &gt;, Int &gt; &gt; &gt; &amp;ifst, MutableFst&lt; ArcTpl&lt; LatticeWeightTpl&lt; double &gt; &gt; &gt; *ofst)</div><div class="ttdoc">Converts CompactLattice with float to Lattice with double. </div><div class="ttdef"><b>Definition:</b> <a href="lattice-utils_8h_source.html#l00114">lattice-utils.h:114</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae9fa068a0ce8f0eaa3710c02d861e9de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9fa068a0ce8f0eaa3710c02d861e9de">&#9670;&nbsp;</a></span>ConvertLattice() <span class="overload">[3/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ConvertLattice </td>
          <td>(</td>
          <td class="paramtype">const ExpandedFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>, Int &gt; &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>ifst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; ArcTpl&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> &gt; &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>invert</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert lattice CompactLattice format to Lattice. </p>
<p>This is a bit like converting from the Gallic semiring. As for any CompactLattice, "ifst" must be an acceptor (i.e., ilabels and olabels should be identical). If invert=false, the labels on "ifst" become the ilabels on "ofst" and the strings in the weights of "ifst" becomes the olabels. If invert=true [default], this is reversed (useful for speech recognition lattices; our standard non-compact format has the words on the output side to match HCLG). </p>

<p class="definition">Definition at line <a class="el" href="lattice-utils-inl_8h_source.html#l00089">89</a> of file <a class="el" href="lattice-utils-inl_8h_source.html">lattice-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">rnnlm::n</a>, and <a class="el" href="basic-filebuf_8h_source.html#l00275">kaldi::swap()</a>.</p>
<div class="fragment"><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                 {</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="keyword">typedef</span> ArcTpl&lt;Weight&gt; <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keyword">typedef</span> CompactLatticeWeightTpl&lt;Weight, Int&gt; CompactWeight;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keyword">typedef</span> ArcTpl&lt;CompactWeight&gt; CompactArc;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  ofst-&gt;DeleteStates();</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="comment">// make the states in the new FST have the same numbers as</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="comment">// the original ones, and add chains of states as necessary</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">// to encode the string-valued weights.</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  StateId num_states = ifst.NumStates();</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keywordflow">for</span> (StateId s = 0; s &lt; num_states; s++) {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    StateId news = ofst-&gt;AddState();</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    assert(news == s);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  ofst-&gt;SetStart(ifst.Start());</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordflow">for</span> (StateId s = 0; s &lt; num_states; s++) {</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    CompactWeight final_weight = ifst.Final(s);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordflow">if</span> (final_weight != CompactWeight::Zero()) {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      StateId cur_state = s;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      <span class="keywordtype">size_t</span> string_length = final_weight.String().size();</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">n</a> = 0; <a class="code" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">n</a> &lt; string_length; <a class="code" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">n</a>++) {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        StateId next_state = ofst-&gt;AddState();</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        Label ilabel = 0;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        Arc arc(ilabel, final_weight.String()[<a class="code" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">n</a>],</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                (<a class="code" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">n</a> == 0 ? final_weight.Weight() : Weight::One()),</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                next_state);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="keywordflow">if</span> (invert) <a class="code" href="namespacekaldi.html#aa3e99328db564bc2bf6397fa1eaee4d7">std::swap</a>(arc.ilabel, arc.olabel);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        ofst-&gt;AddArc(cur_state, arc);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        cur_state = next_state;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      }</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      ofst-&gt;SetFinal(cur_state,</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                     string_length &gt; 0 ? Weight::One() : final_weight.Weight());</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    }</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordflow">for</span> (ArcIterator&lt;ExpandedFst&lt;CompactArc&gt; &gt; iter(ifst, s);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;         !iter.Done();</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;         iter.Next()) {</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      <span class="keyword">const</span> CompactArc &amp;arc = iter.Value();</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      <span class="keywordtype">size_t</span> string_length = arc.weight.String().size();</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      StateId cur_state = s;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <span class="comment">// for all but the last element in the string--</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <span class="comment">// add a temporary state.</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">n</a> = 0 ; <a class="code" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">n</a>+1 &lt; string_length; <a class="code" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">n</a>++) {</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        StateId next_state = ofst-&gt;AddState();</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        Label ilabel = (<a class="code" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">n</a> == 0 ? arc.ilabel : 0),</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            olabel = static_cast&lt;Label&gt;(arc.weight.String()[<a class="code" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">n</a>]);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> weight = (<a class="code" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">n</a> == 0 ? arc.weight.Weight() : Weight::One());</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        Arc new_arc(ilabel, olabel, weight, next_state);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keywordflow">if</span> (invert) <a class="code" href="namespacekaldi.html#aa3e99328db564bc2bf6397fa1eaee4d7">std::swap</a>(new_arc.ilabel, new_arc.olabel);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        ofst-&gt;AddArc(cur_state, new_arc);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        cur_state = next_state;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      }</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      Label ilabel = (string_length &lt;= 1 ? arc.ilabel : 0),</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;          olabel = (string_length &gt; 0 ? arc.weight.String()[string_length-1] : 0);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> weight = (string_length &lt;= 1 ? arc.weight.Weight() : Weight::One());</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      Arc new_arc(ilabel, olabel, weight, arc.nextstate);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <span class="keywordflow">if</span> (invert) <a class="code" href="namespacekaldi.html#aa3e99328db564bc2bf6397fa1eaee4d7">std::swap</a>(new_arc.ilabel, new_arc.olabel);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      ofst-&gt;AddArc(cur_state, new_arc);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    }</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  }</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa3e99328db564bc2bf6397fa1eaee4d7"><div class="ttname"><a href="namespacekaldi.html#aa3e99328db564bc2bf6397fa1eaee4d7">kaldi::swap</a></div><div class="ttdeci">void swap(basic_filebuf&lt; CharT, Traits &gt; &amp;x, basic_filebuf&lt; CharT, Traits &gt; &amp;y)</div><div class="ttdef"><b>Definition:</b> <a href="basic-filebuf_8h_source.html#l00275">basic-filebuf.h:275</a></div></div>
<div class="ttc" id="namespacernnlm_html_ab4871778d570f724a07823e0a2fb9884"><div class="ttname"><a href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">rnnlm::n</a></div><div class="ttdeci">struct rnnlm::@11::@12 n</div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a165cb74b34d2cef5aecb34ebdf9976f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a165cb74b34d2cef5aecb34ebdf9976f0">&#9670;&nbsp;</a></span>ConvertLattice() <span class="overload">[4/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::ConvertLattice </td>
          <td>(</td>
          <td class="paramtype">const ExpandedFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; double &gt; &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>ifst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; <a class="el" href="classfloat.html">float</a> &gt;, Int &gt; &gt; &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-utils_8h_source.html#l00096">96</a> of file <a class="el" href="lattice-utils_8h_source.html">lattice-utils.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-utils-inl_8h_source.html#l00033">ConvertLattice()</a>.</p>
<div class="fragment"><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                                                                                                       {</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  VectorFst&lt;ArcTpl&lt;CompactLatticeWeightTpl&lt;LatticeWeightTpl&lt;double&gt;, Int&gt; &gt; &gt; <a class="code" href="namespacefst.html">fst</a>;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <a class="code" href="namespacefst.html#acda6ebb73ad680ecbc74daabf9436462">ConvertLattice</a>(ifst, &amp;fst);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <a class="code" href="namespacefst.html#acda6ebb73ad680ecbc74daabf9436462">ConvertLattice</a>(fst, ofst);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;}</div><div class="ttc" id="namespacefst_html_acda6ebb73ad680ecbc74daabf9436462"><div class="ttname"><a href="namespacefst.html#acda6ebb73ad680ecbc74daabf9436462">fst::ConvertLattice</a></div><div class="ttdeci">void ConvertLattice(const ExpandedFst&lt; ArcTpl&lt; CompactLatticeWeightTpl&lt; LatticeWeightTpl&lt; float &gt;, Int &gt; &gt; &gt; &amp;ifst, MutableFst&lt; ArcTpl&lt; LatticeWeightTpl&lt; double &gt; &gt; &gt; *ofst)</div><div class="ttdoc">Converts CompactLattice with float to Lattice with double. </div><div class="ttdef"><b>Definition:</b> <a href="lattice-utils_8h_source.html#l00114">lattice-utils.h:114</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab7a8e25686ec7b4cfe080ee0c81cec24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7a8e25686ec7b4cfe080ee0c81cec24">&#9670;&nbsp;</a></span>ConvertLattice() <span class="overload">[5/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::ConvertLattice </td>
          <td>(</td>
          <td class="paramtype">const ExpandedFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; double &gt;, Int &gt; &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>ifst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; <a class="el" href="classfloat.html">float</a> &gt; &gt; &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts CompactLattice with double to Lattice with float. </p>

<p class="definition">Definition at line <a class="el" href="lattice-utils_8h_source.html#l00105">105</a> of file <a class="el" href="lattice-utils_8h_source.html">lattice-utils.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-utils-inl_8h_source.html#l00033">ConvertLattice()</a>.</p>
<div class="fragment"><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                                                                         {</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  VectorFst&lt;ArcTpl&lt;CompactLatticeWeightTpl&lt;LatticeWeightTpl&lt;float&gt;, Int&gt; &gt; &gt; <a class="code" href="namespacefst.html">fst</a>;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <a class="code" href="namespacefst.html#acda6ebb73ad680ecbc74daabf9436462">ConvertLattice</a>(ifst, &amp;fst);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <a class="code" href="namespacefst.html#acda6ebb73ad680ecbc74daabf9436462">ConvertLattice</a>(fst, ofst);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;}</div><div class="ttc" id="namespacefst_html_acda6ebb73ad680ecbc74daabf9436462"><div class="ttname"><a href="namespacefst.html#acda6ebb73ad680ecbc74daabf9436462">fst::ConvertLattice</a></div><div class="ttdeci">void ConvertLattice(const ExpandedFst&lt; ArcTpl&lt; CompactLatticeWeightTpl&lt; LatticeWeightTpl&lt; float &gt;, Int &gt; &gt; &gt; &amp;ifst, MutableFst&lt; ArcTpl&lt; LatticeWeightTpl&lt; double &gt; &gt; &gt; *ofst)</div><div class="ttdoc">Converts CompactLattice with float to Lattice with double. </div><div class="ttdef"><b>Definition:</b> <a href="lattice-utils_8h_source.html#l00114">lattice-utils.h:114</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acda6ebb73ad680ecbc74daabf9436462"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acda6ebb73ad680ecbc74daabf9436462">&#9670;&nbsp;</a></span>ConvertLattice() <span class="overload">[6/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::ConvertLattice </td>
          <td>(</td>
          <td class="paramtype">const ExpandedFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; <a class="el" href="classfloat.html">float</a> &gt;, Int &gt; &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>ifst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; double &gt; &gt; &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts CompactLattice with float to Lattice with double. </p>

<p class="definition">Definition at line <a class="el" href="lattice-utils_8h_source.html#l00114">114</a> of file <a class="el" href="lattice-utils_8h_source.html">lattice-utils.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-utils-inl_8h_source.html#l00266">ConvertFstToLattice()</a>, and <a class="el" href="lattice-utils-inl_8h_source.html#l00033">ConvertLattice()</a>.</p>
<div class="fragment"><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                                                                          {</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  VectorFst&lt;ArcTpl&lt;CompactLatticeWeightTpl&lt;LatticeWeightTpl&lt;double&gt;, Int&gt; &gt; &gt; <a class="code" href="namespacefst.html">fst</a>;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <a class="code" href="namespacefst.html#acda6ebb73ad680ecbc74daabf9436462">ConvertLattice</a>(ifst, &amp;fst);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <a class="code" href="namespacefst.html#acda6ebb73ad680ecbc74daabf9436462">ConvertLattice</a>(fst, ofst);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;}</div><div class="ttc" id="namespacefst_html_acda6ebb73ad680ecbc74daabf9436462"><div class="ttname"><a href="namespacefst.html#acda6ebb73ad680ecbc74daabf9436462">fst::ConvertLattice</a></div><div class="ttdeci">void ConvertLattice(const ExpandedFst&lt; ArcTpl&lt; CompactLatticeWeightTpl&lt; LatticeWeightTpl&lt; float &gt;, Int &gt; &gt; &gt; &amp;ifst, MutableFst&lt; ArcTpl&lt; LatticeWeightTpl&lt; double &gt; &gt; &gt; *ofst)</div><div class="ttdoc">Converts CompactLattice with float to Lattice with double. </div><div class="ttdef"><b>Definition:</b> <a href="lattice-utils_8h_source.html#l00114">lattice-utils.h:114</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5e13b7fb1c17dc85ccc17bed2b047aa7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e13b7fb1c17dc85ccc17bed2b047aa7">&#9670;&nbsp;</a></span>ConvertLattice() <span class="overload">[7/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ConvertLattice </td>
          <td>(</td>
          <td class="paramtype">const ExpandedFst&lt; ArcTpl&lt; WeightIn &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>ifst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; ArcTpl&lt; WeightOut &gt; &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert between CompactLattices and Lattices of different floating point types... </p>
<p>this works between any pair of weight types for which ConvertLatticeWeight is defined (c.f. <a class="el" href="lattice-weight_8h.html">lattice-weight.h</a>), and also includes conversion from LatticeWeight to TropicalWeight. </p>

<p class="definition">Definition at line <a class="el" href="lattice-utils-inl_8h_source.html#l00157">157</a> of file <a class="el" href="lattice-utils-inl_8h_source.html">lattice-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00820">ConvertLatticeWeight()</a>, and <a class="el" href="kaldi-error_8h_source.html#l00181">KALDI_PARANOID_ASSERT</a>.</p>
<div class="fragment"><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                                          {</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keyword">typedef</span> ArcTpl&lt;WeightIn&gt; ArcIn;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keyword">typedef</span> ArcTpl&lt;WeightOut&gt; ArcOut;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">ArcIn::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  ofst-&gt;DeleteStates();</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="comment">// The states will be numbered exactly the same as the original FST.</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="comment">// Add the states to the new FST.</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  StateId num_states = ifst.NumStates();</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keywordflow">for</span> (StateId s = 0; s &lt; num_states; s++) {</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    StateId news = ofst-&gt;AddState();</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    assert(news == s);</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  }</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  ofst-&gt;SetStart(ifst.Start());</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="keywordflow">for</span> (StateId s = 0; s &lt; num_states; s++) {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    WeightIn final_iweight = ifst.Final(s);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">if</span> (final_iweight != WeightIn::Zero()) {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      WeightOut final_oweight;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <a class="code" href="namespacefst.html#a3022c591548796746abd21f94e8eff64">ConvertLatticeWeight</a>(final_iweight, &amp;final_oweight);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      ofst-&gt;SetFinal(s, final_oweight);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    }</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">for</span> (ArcIterator&lt;ExpandedFst&lt;ArcIn&gt; &gt; iter(ifst, s);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;         !iter.Done();</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;         iter.Next()) {</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      ArcIn arc = iter.Value();</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      <a class="code" href="group__error__group.html#ga2c852c1a15c7f195ec8021de2ab119a0">KALDI_PARANOID_ASSERT</a>(arc.weight != WeightIn::Zero());</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      ArcOut oarc;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <a class="code" href="namespacefst.html#a3022c591548796746abd21f94e8eff64">ConvertLatticeWeight</a>(arc.weight, &amp;oarc.weight);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      oarc.ilabel = arc.ilabel;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      oarc.olabel = arc.olabel;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      oarc.nextstate = arc.nextstate;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      ofst-&gt;AddArc(s, oarc);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    }</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  }</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html_a3022c591548796746abd21f94e8eff64"><div class="ttname"><a href="namespacefst.html#a3022c591548796746abd21f94e8eff64">fst::ConvertLatticeWeight</a></div><div class="ttdeci">void ConvertLatticeWeight(const LatticeWeightTpl&lt; Float1 &gt; &amp;w_in, LatticeWeightTpl&lt; Float2 &gt; *w_out)</div><div class="ttdoc">Define some ConvertLatticeWeight functions that are used in various lattice conversions... </div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00820">lattice-weight.h:820</a></div></div>
<div class="ttc" id="group__error__group_html_ga2c852c1a15c7f195ec8021de2ab119a0"><div class="ttname"><a href="group__error__group.html#ga2c852c1a15c7f195ec8021de2ab119a0">KALDI_PARANOID_ASSERT</a></div><div class="ttdeci">#define KALDI_PARANOID_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00181">kaldi-error.h:181</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3022c591548796746abd21f94e8eff64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3022c591548796746abd21f94e8eff64">&#9670;&nbsp;</a></span>ConvertLatticeWeight() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void fst::ConvertLatticeWeight </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; Float1 &gt; &amp;&#160;</td>
          <td class="paramname"><em>w_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; Float2 &gt; *&#160;</td>
          <td class="paramname"><em>w_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Define some ConvertLatticeWeight functions that are used in various lattice conversions... </p>
<p>make them all templates, some with no arguments, since some must be templates. </p>

<p class="definition">Definition at line <a class="el" href="lattice-weight_8h_source.html#l00820">820</a> of file <a class="el" href="lattice-weight_8h_source.html">lattice-weight.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00056">LatticeWeightTpl&lt; FloatType &gt;::SetValue1()</a>, <a class="el" href="lattice-weight_8h_source.html#l00058">LatticeWeightTpl&lt; FloatType &gt;::SetValue2()</a>, <a class="el" href="lattice-weight_8h_source.html#l00052">LatticeWeightTpl&lt; FloatType &gt;::Value1()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00054">LatticeWeightTpl&lt; FloatType &gt;::Value2()</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-utils-inl_8h_source.html#l00157">ConvertLattice()</a>.</p>
<div class="fragment"><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                                     {</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  w_out-&gt;SetValue1(w_in.Value1());</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  w_out-&gt;SetValue2(w_in.Value2());</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="ad8ba8d11c7c95beaaf4b4288aec32d6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8ba8d11c7c95beaaf4b4288aec32d6a">&#9670;&nbsp;</a></span>ConvertLatticeWeight() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void fst::ConvertLatticeWeight </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; Float1 &gt;, Int &gt; &amp;&#160;</td>
          <td class="paramname"><em>w_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; Float2 &gt;, Int &gt; *&#160;</td>
          <td class="paramname"><em>w_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight_8h_source.html#l00828">828</a> of file <a class="el" href="lattice-weight_8h_source.html">lattice-weight.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                                                                   {</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  LatticeWeightTpl&lt;Float2&gt; weight2(w_in.Weight().Value1(),</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                                   w_in.Weight().Value2());</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  w_out-&gt;SetWeight(weight2);</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  w_out-&gt;SetString(w_in.String());</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="ad476963d9a09d93fed7fd09831facffb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad476963d9a09d93fed7fd09831facffb">&#9670;&nbsp;</a></span>ConvertLatticeWeight() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void fst::ConvertLatticeWeight </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; Float1 &gt; &amp;&#160;</td>
          <td class="paramname"><em>w_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TropicalWeightTpl&lt; Float2 &gt; *&#160;</td>
          <td class="paramname"><em>w_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight_8h_source.html#l00839">839</a> of file <a class="el" href="lattice-weight_8h_source.html">lattice-weight.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00363">Times()</a>, <a class="el" href="lattice-weight_8h_source.html#l00052">LatticeWeightTpl&lt; FloatType &gt;::Value1()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00054">LatticeWeightTpl&lt; FloatType &gt;::Value2()</a>.</p>
<div class="fragment"><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                                      {</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  TropicalWeightTpl&lt;Float2&gt; w1(w_in.Value1());</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  TropicalWeightTpl&lt;Float2&gt; w2(w_in.Value2());</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  *w_out = <a class="code" href="namespacefst.html#a7512896457d14cac2dc2804d7200162a">Times</a>(w1, w2);</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;}</div><div class="ttc" id="namespacefst_html_a7512896457d14cac2dc2804d7200162a"><div class="ttname"><a href="namespacefst.html#a7512896457d14cac2dc2804d7200162a">fst::Times</a></div><div class="ttdeci">CompactLatticeWeightTpl&lt; WeightType, IntType &gt; Times(const CompactLatticeWeightTpl&lt; WeightType, IntType &gt; &amp;w1, const CompactLatticeWeightTpl&lt; WeightType, IntType &gt; &amp;w2)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00672">lattice-weight.h:672</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4d1ee0ef9cb443eb0301466050757738"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d1ee0ef9cb443eb0301466050757738">&#9670;&nbsp;</a></span>ConvertNbestToVector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ConvertNbestToVector </td>
          <td>(</td>
          <td class="paramtype">const Fst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; VectorFst&lt; Arc &gt; &gt; *&#160;</td>
          <td class="paramname"><em>fsts_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function converts an FST with a special structure, which is output by the OpenFst functions ShortestPath and RandGen, and converts them into a vector of separate FSTs. </p>
<p>This special structure is that the only state that has more than one (arcs-out or final-prob) is the start state. fsts_out is resized to the appropriate size. </p>

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00221">221</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-to-nbest_8cc_source.html#l00026">main()</a>, <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00279">NbestAsFsts()</a>, and <a class="el" href="word-align-lattice-lexicon-test_8cc_source.html#l00173">kaldi::TestWordAlignLatticeLexicon()</a>.</p>
<div class="fragment"><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                                                             {</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  fsts_out-&gt;clear();</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  StateId start_state = <a class="code" href="namespacefst.html">fst</a>.Start();</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="keywordflow">if</span> (start_state == kNoStateId) <span class="keywordflow">return</span>; <span class="comment">// No output.</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordtype">size_t</span> n_arcs = <a class="code" href="namespacefst.html">fst</a>.NumArcs(start_state);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="keywordtype">bool</span> start_is_final = (<a class="code" href="namespacefst.html">fst</a>.Final(start_state) != Weight::Zero());</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  fsts_out-&gt;reserve(n_arcs + (start_is_final ? 1 : 0));</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordflow">if</span> (start_is_final) {</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    fsts_out-&gt;resize(fsts_out-&gt;size() + 1);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    StateId start_state_out = fsts_out-&gt;back().AddState();</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    fsts_out-&gt;back().SetFinal(start_state_out, <a class="code" href="namespacefst.html">fst</a>.Final(start_state));</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  }</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="keywordflow">for</span> (ArcIterator&lt;Fst&lt;Arc&gt; &gt; start_aiter(<a class="code" href="namespacefst.html">fst</a>, start_state);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;       !start_aiter.Done();</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;       start_aiter.Next()) {</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    fsts_out-&gt;resize(fsts_out-&gt;size() + 1);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    VectorFst&lt;Arc&gt; &amp;ofst = fsts_out-&gt;back();</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &amp;first_arc = start_aiter.Value();</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    StateId cur_state = start_state,</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        cur_ostate = ofst.AddState();</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    ofst.SetStart(cur_ostate);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    StateId next_ostate = ofst.AddState();</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    ofst.AddArc(cur_ostate, <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>(first_arc.ilabel, first_arc.olabel,</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                                first_arc.weight, next_ostate));</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    cur_state = first_arc.nextstate;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    cur_ostate = next_ostate;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">while</span> (1) {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <span class="keywordtype">size_t</span> this_n_arcs = <a class="code" href="namespacefst.html">fst</a>.NumArcs(cur_state);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(this_n_arcs &lt;= 1); <span class="comment">// or it violates our assumptions</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                                      <span class="comment">// about the input.</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <span class="keywordflow">if</span> (this_n_arcs == 1) {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="namespacefst.html">fst</a>.Final(cur_state) == Weight::Zero());</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="comment">// or problem with ShortestPath.</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        ArcIterator&lt;Fst&lt;Arc&gt; &gt; aiter(<a class="code" href="namespacefst.html">fst</a>, cur_state);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &amp;arc = aiter.Value();</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        next_ostate = ofst.AddState();</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        ofst.AddArc(cur_ostate, <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>(arc.ilabel, arc.olabel,</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                                    arc.weight, next_ostate));</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        cur_state = arc.nextstate;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        cur_ostate = next_ostate;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="namespacefst.html">fst</a>.Final(cur_state) != Weight::Zero());</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="comment">// or problem with ShortestPath.</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        ofst.SetFinal(cur_ostate, <a class="code" href="namespacefst.html">fst</a>.Final(cur_state));</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      }</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    }</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  }</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac05b62e18be915dd13b3ff6c7001003c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac05b62e18be915dd13b3ff6c7001003c">&#9670;&nbsp;</a></span>ConvertToCost() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double fst::ConvertToCost </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; Float &gt; &amp;&#160;</td>
          <td class="paramname"><em>w</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight_8h_source.html#l00848">848</a> of file <a class="el" href="lattice-weight_8h_source.html">lattice-weight.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00052">LatticeWeightTpl&lt; FloatType &gt;::Value1()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00054">LatticeWeightTpl&lt; FloatType &gt;::Value2()</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-functions_8cc_source.html#l00532">kaldi::CompactLatticeLimitDepth()</a>, <a class="el" href="lattice-functions_8cc_source.html#l01097">kaldi::CompactLatticeShortestPath()</a>, <a class="el" href="compose-lattice-pruned_8cc_source.html#l00475">PrunedCompactLatticeComposer::ComputeBackwardCosts()</a>, <a class="el" href="determinize-lattice-pruned_8cc_source.html#l01013">LatticeDeterminizerPruned&lt; Weight, IntType &gt;::ComputeBackwardWeight()</a>, <a class="el" href="compose-lattice-pruned_8cc_source.html#l00428">PrunedCompactLatticeComposer::ComputeForwardCosts()</a>, <a class="el" href="lattice-functions_8cc_source.html#l00452">kaldi::ComputeLatticeAlphasAndBetas()</a>, <a class="el" href="compose-lattice-pruned_8cc_source.html#l00578">PrunedCompactLatticeComposer::ComputeLatticeStateInfo()</a>, <a class="el" href="determinize-lattice-pruned_8cc_source.html#l00552">LatticeDeterminizerPruned&lt; Weight, IntType &gt;::InitialToStateId()</a>, <a class="el" href="lattice-functions_8cc_source.html#l00314">kaldi::LatticeForwardBackward()</a>, <a class="el" href="lattice-functions_8cc_source.html#l00794">kaldi::LatticeForwardBackwardMpeVariants()</a>, <a class="el" href="gmm-decode-simple_8cc_source.html#l00035">main()</a>, <a class="el" href="lattice-arc-post_8cc_source.html#l00042">ArcPosteriorComputer::OutputPosteriors()</a>, <a class="el" href="determinize-lattice-pruned_8cc_source.html#l00733">LatticeDeterminizerPruned&lt; Weight, IntType &gt;::ProcessFinal()</a>, <a class="el" href="compose-lattice-pruned_8cc_source.html#l00664">PrunedCompactLatticeComposer::ProcessQueueElement()</a>, <a class="el" href="compose-lattice-pruned_8cc_source.html#l00753">PrunedCompactLatticeComposer::ProcessTransition()</a>, <a class="el" href="determinize-lattice-pruned_8cc_source.html#l00846">LatticeDeterminizerPruned&lt; Weight, IntType &gt;::ProcessTransition()</a>, <a class="el" href="determinize-lattice-pruned_8cc_source.html#l00902">LatticeDeterminizerPruned&lt; Weight, IntType &gt;::ProcessTransitions()</a>, <a class="el" href="lattice-functions_8cc_source.html#l00229">kaldi::PruneLattice()</a>, and <a class="el" href="confidence_8cc_source.html#l00026">kaldi::SentenceLevelConfidence()</a>.</p>
<div class="fragment"><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;                                                              {</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(w.Value1()) + static_cast&lt;double&gt;(w.Value2());</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="acc67d4111308f2990286df01843e9ef6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc67d4111308f2990286df01843e9ef6">&#9670;&nbsp;</a></span>ConvertToCost() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double fst::ConvertToCost </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; Float &gt;, Int &gt; &amp;&#160;</td>
          <td class="paramname"><em>w</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight_8h_source.html#l00853">853</a> of file <a class="el" href="lattice-weight_8h_source.html">lattice-weight.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                                                                                            {</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(w.Weight().Value1()) + static_cast&lt;double&gt;(w.Weight().Value2());</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a1c37a99192155302866beab3f9bd78f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c37a99192155302866beab3f9bd78f0">&#9670;&nbsp;</a></span>ConvertToCost() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double fst::ConvertToCost </td>
          <td>(</td>
          <td class="paramtype">const TropicalWeightTpl&lt; Float &gt; &amp;&#160;</td>
          <td class="paramname"><em>w</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight_8h_source.html#l00858">858</a> of file <a class="el" href="lattice-weight_8h_source.html">lattice-weight.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                                                               {</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <span class="keywordflow">return</span> w.Value();</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a2ce371531425ec7d5049f73d839a16c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ce371531425ec7d5049f73d839a16c1">&#9670;&nbsp;</a></span>CopyToVectorFst()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CopyToVectorFst </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfst_1_1GrammarFst.html">GrammarFst</a> *&#160;</td>
          <td class="paramname"><em>grammar_fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *&#160;</td>
          <td class="paramname"><em>vector_fst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function copies a <a class="el" href="classfst_1_1GrammarFst.html" title="GrammarFst is an FST that is &#39;stitched together&#39; from multiple FSTs, that can recursively incorporate...">GrammarFst</a> to a VectorFst (intended mostly for testing and comparison purposes). </p>
<p><a class="el" href="classfst_1_1GrammarFst.html" title="GrammarFst is an FST that is &#39;stitched together&#39; from multiple FSTs, that can recursively incorporate...">GrammarFst</a> doesn't actually inherit from class Fst, so we can't just construct an FST from the <a class="el" href="classfst_1_1GrammarFst.html" title="GrammarFst is an FST that is &#39;stitched together&#39; from multiple FSTs, that can recursively incorporate...">GrammarFst</a>.</p>
<p>grammar_fst gets expanded by this call, and although we could make it a const reference (because the ArcIterator does actually use const_cast), we make it a non-const pointer to emphasize that this call does change grammar_fst. </p>

<p class="definition">Definition at line <a class="el" href="grammar-fst_8cc_source.html#l00867">867</a> of file <a class="el" href="grammar-fst_8cc_source.html">grammar-fst.cc</a>.</p>

<p class="reference">References <a class="el" href="grammar-fst_8h_source.html#l00532">ArcIterator&lt; GrammarFst &gt;::Done()</a>, <a class="el" href="grammar-fst_8h_source.html#l00162">GrammarFst::Final()</a>, <a class="el" href="grammar-fst_8h_source.html#l00053">GrammarFstArc::ilabel</a>, <a class="el" href="grammar-fst_8h_source.html#l00541">ArcIterator&lt; GrammarFst &gt;::Next()</a>, <a class="el" href="grammar-fst_8h_source.html#l00056">GrammarFstArc::nextstate</a>, <a class="el" href="grammar-fst_8h_source.html#l00054">GrammarFstArc::olabel</a>, <a class="el" href="grammar-fst_8h_source.html#l00156">GrammarFst::Start()</a>, <a class="el" href="grammar-fst_8h_source.html#l00552">ArcIterator&lt; GrammarFst &gt;::Value()</a>, and <a class="el" href="grammar-fst_8h_source.html#l00055">GrammarFstArc::weight</a>.</p>

<p class="reference">Referenced by <a class="el" href="make-grammar-fst_8cc_source.html#l00045">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                                                    {</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">GrammarFstArc::StateId</a> GrammarStateId;  <span class="comment">// int64</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StdArc::StateId</a> StdStateId;  <span class="comment">// int</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">StdArc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">StdArc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  std::vector&lt;std::pair&lt;GrammarStateId, StdStateId&gt; &gt; queue;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  std::unordered_map&lt;GrammarStateId, StdStateId&gt; state_map;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  vector_fst-&gt;DeleteStates();</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  state_map[grammar_fst-&gt;Start()] = vector_fst-&gt;AddState();  <span class="comment">// state 0.</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  vector_fst-&gt;SetStart(0);</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  queue.push_back(</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;      std::pair&lt;GrammarStateId, StdStateId&gt;(grammar_fst-&gt;Start(), 0));</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="keywordflow">while</span> (!queue.empty()) {</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    std::pair&lt;GrammarStateId, StdStateId&gt; p = queue.back();</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    queue.pop_back();</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    GrammarStateId grammar_state = p.first;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    StdStateId std_state = p.second;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    vector_fst-&gt;SetFinal(std_state, grammar_fst-&gt;Final(grammar_state));</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    ArcIterator&lt;GrammarFst&gt; aiter(*grammar_fst, grammar_state);</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <span class="keywordflow">for</span> (; !aiter.Done(); aiter.Next()) {</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      <span class="keyword">const</span> GrammarFstArc &amp;grammar_arc = aiter.Value();</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;      <a class="code" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> std_arc;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;      std_arc.ilabel = grammar_arc.ilabel;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;      std_arc.olabel = grammar_arc.olabel;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      std_arc.weight = grammar_arc.weight;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      GrammarStateId next_grammar_state = grammar_arc.nextstate;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      StdStateId next_std_state;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      std::unordered_map&lt;GrammarStateId, StdStateId&gt;::const_iterator</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;          state_iter = state_map.find(next_grammar_state);</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      <span class="keywordflow">if</span> (state_iter == state_map.end()) {</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        next_std_state = vector_fst-&gt;AddState();</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        state_map[next_grammar_state] = next_std_state;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        queue.push_back(std::pair&lt;GrammarStateId, StdStateId&gt;(</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;            next_grammar_state, next_std_state));</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        next_std_state = state_iter-&gt;second;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      }</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;      std_arc.nextstate = next_std_state;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;      vector_fst-&gt;AddArc(std_state, std_arc);</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    }</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  }</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html_a70478eb2428a9406e4692d19a7a3a97f"><div class="ttname"><a href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">fst::StdArc</a></div><div class="ttdeci">fst::StdArc StdArc</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00053">deterministic-fst-test.cc:53</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9da47640f365f6aa7839e9aff630a3ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9da47640f365f6aa7839e9aff630a3ff">&#9670;&nbsp;</a></span>CreateBackoffFst()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">StdVectorFst</a>* fst::CreateBackoffFst </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="deterministic-fst-test_8cc_source.html#l00061">61</a> of file <a class="el" href="deterministic-fst-test_8cc_source.html">deterministic-fst-test.cc</a>.</p>

<p class="reference">Referenced by <a class="el" href="deterministic-fst-test_8cc_source.html#l00145">TestBackoffAndCache()</a>, and <a class="el" href="deterministic-fst-test_8cc_source.html#l00180">TestCompose()</a>.</p>
<div class="fragment"><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                                 {</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <a class="code" href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">StdVectorFst</a> *<a class="code" href="namespacefst.html">fst</a> = <span class="keyword">new</span> <a class="code" href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">StdVectorFst</a>();</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  fst-&gt;AddState();   <span class="comment">// state 0</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  fst-&gt;SetStart(0);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  fst-&gt;AddArc(0, <a class="code" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a>(10, 10, 0.0, 1));</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  fst-&gt;AddState();    <span class="comment">// state 1</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  fst-&gt;AddArc(1, <a class="code" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a>(12, 12, 0.0, 4));</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  fst-&gt;AddArc(1, <a class="code" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a>(0,0,  0.1,2));  <span class="comment">// backoff from 1 to 2</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  fst-&gt;AddState();    <span class="comment">// state 2</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  fst-&gt;AddArc(2, <a class="code" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a>(13, 13, 0.2, 4));</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  fst-&gt;AddArc(2, <a class="code" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a>(0,0,  0.3,3));  <span class="comment">// backoff from 2 to 3</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  fst-&gt;AddState();     <span class="comment">// state 3</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  fst-&gt;AddArc(3, <a class="code" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a>(14, 14, 0.4, 4));</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  fst-&gt;AddState();    <span class="comment">// state 4</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  fst-&gt;AddArc(4, <a class="code" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a>(15, 15, 0.5, 5));</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  fst-&gt;AddState();     <span class="comment">// state 5</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  fst-&gt;SetFinal(5, 0.6);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keywordflow">return</span> fst;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a70478eb2428a9406e4692d19a7a3a97f"><div class="ttname"><a href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">fst::StdArc</a></div><div class="ttdeci">fst::StdArc StdArc</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00053">deterministic-fst-test.cc:53</a></div></div>
<div class="ttc" id="namespacefst_html_a88a968cc6f6d68c2b3dd6aa90385f65c"><div class="ttname"><a href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">fst::StdVectorFst</a></div><div class="ttdeci">fst::StdVectorFst StdVectorFst</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00056">deterministic-fst-test.cc:56</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6a070610f7a2b12584472be177c162c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a070610f7a2b12584472be177c162c2">&#9670;&nbsp;</a></span>CreateFactorFst()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CreateFactorFst </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; vector&lt; I &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>sequences</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The function CreateFactorFst will create an FST that expands out the "factors" that are the indices of the "sequences" array, into linear sequences of symbols. </p>
<p>There is a single start and end state (state 0), and for each nonzero index i into the array "sequences", there is an arc from state 0 that has output-label i, and enters a chain of states with output epsilons and input labels corresponding to the remaining elements of the sequences, terminating again in state 0. This FST is output-deterministic and sorted on olabel. Composing an FST on the left with the output of this function, should be the same as calling "ExpandInputSequences". Use TableCompose (see <a class="el" href="table-matcher_8h.html">table-matcher.h</a>) for efficiency. </p>

<p class="definition">Definition at line <a class="el" href="factor-inl_8h_source.html#l00250">250</a> of file <a class="el" href="factor-inl_8h_source.html">factor-inl.h</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="kaldi-utils_8h_source.html#l00133">KALDI_ASSERT_IS_INTEGER_TYPE</a>.</p>

<p class="reference">Referenced by <a class="el" href="factor-inl_8h_source.html#l00154">Factor()</a>, and <a class="el" href="factor-test_8cc_source.html#l00032">TestFactor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                                           {</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <a class="code" href="kaldi-utils_8h.html#a61d7854c20dc53362038896af515d2cd">KALDI_ASSERT_IS_INTEGER_TYPE</a>(I);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  assert(<a class="code" href="namespacefst.html">fst</a> != NULL);</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <a class="code" href="namespacefst.html">fst</a>-&gt;DeleteStates();</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  StateId loopstate = <a class="code" href="namespacefst.html">fst</a>-&gt;AddState();</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  assert(loopstate == 0);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <a class="code" href="namespacefst.html">fst</a>-&gt;SetStart(0);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <a class="code" href="namespacefst.html">fst</a>-&gt;SetFinal(0, Weight::One());</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordflow">if</span> (sequences.size() != 0) assert(sequences[0].size() == 0);  <span class="comment">// can&#39;t replace epsilon...</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="keywordflow">for</span> (Label olabel = 1; olabel &lt; static_cast&lt;Label&gt;(sequences.size()); olabel++) {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordtype">size_t</span> len = sequences[olabel].size();</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">if</span> (len == 0) {</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> arc(0, olabel, Weight::One(), loopstate);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <a class="code" href="namespacefst.html">fst</a>-&gt;AddArc(loopstate, arc);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      StateId curstate = loopstate;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; len; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        StateId nextstate = (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> == len-1 ? loopstate : <a class="code" href="namespacefst.html">fst</a>-&gt;AddState());</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> arc(sequences[olabel][<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>], (i == 0 ? olabel : 0), Weight::One(), nextstate);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <a class="code" href="namespacefst.html">fst</a>-&gt;AddArc(curstate, arc);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        curstate = nextstate;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      }</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    }</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  }</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <a class="code" href="namespacefst.html">fst</a>-&gt;SetProperties(kOLabelSorted, kOLabelSorted);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="kaldi-utils_8h_html_a61d7854c20dc53362038896af515d2cd"><div class="ttname"><a href="kaldi-utils_8h.html#a61d7854c20dc53362038896af515d2cd">KALDI_ASSERT_IS_INTEGER_TYPE</a></div><div class="ttdeci">#define KALDI_ASSERT_IS_INTEGER_TYPE(I)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-utils_8h_source.html#l00133">kaldi-utils.h:133</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a76bd95d1410e5c6b51be57717f43fd6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76bd95d1410e5c6b51be57717f43fd6f">&#9670;&nbsp;</a></span>CreateILabelInfoSymbolTable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SymbolTable * CreateILabelInfoSymbolTable </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; vector&lt; int32 &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const SymbolTable &amp;&#160;</td>
          <td class="paramname"><em>phones_symtab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>separator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>initial_disambig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The following function is mainly of use for printing and debugging. </p>

<p class="definition">Definition at line <a class="el" href="context-fst_8cc_source.html#l00344">344</a> of file <a class="el" href="context-fst_8cc_source.html">context-fst.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, and <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstmakecontextsyms_8cc_source.html#l00055">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                                                                     {  <span class="comment">// e.g. separator = &quot;/&quot;, initial-disambig=&quot;#-1&quot;</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(!info.empty() &amp;&amp; !info[0].empty());</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  SymbolTable *ans = <span class="keyword">new</span> SymbolTable(<span class="stringliteral">&quot;ilabel-info-symtab&quot;</span>);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  int64 s = ans-&gt;AddSymbol(phones_symtab.Find(static_cast&lt;int64&gt;(0)));</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  assert(s == 0);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; info.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">if</span> (info[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].size() == 0) {</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Invalid ilabel-info&quot;</span>;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    }</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">if</span> (info[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].size() == 1 &amp;&amp;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;       info[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>][0] &lt;= 0) {</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      <span class="keywordflow">if</span> (info[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>][0] == 0) {  <span class="comment">// special symbol at start that we want to call #-1.</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        s = ans-&gt;AddSymbol(initial_disambig);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keywordflow">if</span> (s != <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;          <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Disambig symbol &quot;</span> &lt;&lt; initial_disambig</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; already in vocab&quot;</span>;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        }</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        std::string disambig_sym = phones_symtab.Find(-info[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>][0]);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="keywordflow">if</span> (disambig_sym == <span class="stringliteral">&quot;&quot;</span>) {</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;          <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Disambig symbol &quot;</span> &lt;&lt; -info[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>][0]</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; not in phone symbol-table&quot;</span>;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        }</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        s = ans-&gt;AddSymbol(disambig_sym);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keywordflow">if</span> (s != i) {</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;          <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Disambig symbol &quot;</span> &lt;&lt; disambig_sym</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; already in vocab&quot;</span>;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        }</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      }</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      <span class="comment">// is a phone-context-window.</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      std::string newsym;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; info[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].size(); <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        std::string phonesym = phones_symtab.Find(info[i][<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>]);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <span class="keywordflow">if</span> (phonesym == <span class="stringliteral">&quot;&quot;</span>) {</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;          <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Symbol &quot;</span> &lt;&lt; info[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>][<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>]</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; not in phone symbol-table&quot;</span>;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        }</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="keywordflow">if</span> (j != 0) newsym += separator;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        newsym += phonesym;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      }</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      int64 s = ans-&gt;AddSymbol(newsym);</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <span class="keywordflow">if</span> (s != static_cast&lt;int64&gt;(i)) {</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Some problem with duplicate symbols&quot;</span>;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      }</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    }</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  }</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="keywordflow">return</span> ans;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;}</div><div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a217df6f5bb354d2513b771a18aed0508"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a217df6f5bb354d2513b771a18aed0508">&#9670;&nbsp;</a></span>CreateMapFst()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CreateMapFst </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; I &gt; &amp;&#160;</td>
          <td class="paramname"><em>symbol_map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>CreateMapFst will create an FST representing this symbol_map. </p>
<p>The FST has a single loop state with single-arc loops with isymbol = symbol_map[i], osymbol = i. The resulting FST applies this map to the input symbols of something we compose with it on the right. Must have symbol_map[0] == 0. </p>

<p class="definition">Definition at line <a class="el" href="factor-inl_8h_source.html#l00285">285</a> of file <a class="el" href="factor-inl_8h_source.html">factor-inl.h</a>.</p>

<p class="reference">References <a class="el" href="kaldi-utils_8h_source.html#l00133">KALDI_ASSERT_IS_INTEGER_TYPE</a>.</p>

<p class="reference">Referenced by <a class="el" href="make-ilabel-transducer_8cc_source.html#l00029">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                                        {</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <a class="code" href="kaldi-utils_8h.html#a61d7854c20dc53362038896af515d2cd">KALDI_ASSERT_IS_INTEGER_TYPE</a>(I);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  assert(<a class="code" href="namespacefst.html">fst</a> != NULL);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <a class="code" href="namespacefst.html">fst</a>-&gt;DeleteStates();</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  StateId loopstate = <a class="code" href="namespacefst.html">fst</a>-&gt;AddState();</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  assert(loopstate == 0);</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <a class="code" href="namespacefst.html">fst</a>-&gt;SetStart(0);</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <a class="code" href="namespacefst.html">fst</a>-&gt;SetFinal(0, Weight::One());</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  assert(symbol_map.empty() || symbol_map[0] == 0);  <span class="comment">// FST cannot map epsilon to something else.</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordflow">for</span> (Label olabel = 1; olabel &lt; static_cast&lt;Label&gt;(symbol_map.size()); olabel++) {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> arc(symbol_map[olabel], olabel, Weight::One(), loopstate);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <a class="code" href="namespacefst.html">fst</a>-&gt;AddArc(loopstate, arc);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  }</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="kaldi-utils_8h_html_a61d7854c20dc53362038896af515d2cd"><div class="ttname"><a href="kaldi-utils_8h.html#a61d7854c20dc53362038896af515d2cd">KALDI_ASSERT_IS_INTEGER_TYPE</a></div><div class="ttdeci">#define KALDI_ASSERT_IS_INTEGER_TYPE(I)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-utils_8h_source.html#l00133">kaldi-utils.h:133</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a414bcae5fa37960a55aa30a8ecad31d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a414bcae5fa37960a55aa30a8ecad31d8">&#9670;&nbsp;</a></span>CreateNewSymbols()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CreateNewSymbols </td>
          <td>(</td>
          <td class="paramtype">SymbolTable *&#160;</td>
          <td class="paramname"><em>input_sym_table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nSym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; <a class="el" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a> &gt; *&#160;</td>
          <td class="paramname"><em>symsOut</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="pre-determinize-inl_8h_source.html#l00581">581</a> of file <a class="el" href="pre-determinize-inl_8h_source.html">pre-determinize-inl.h</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>.</p>

<p class="reference">Referenced by <a class="el" href="pre-determinize-test_8cc_source.html#l00140">TestAddSelfLoops()</a>.</p>
<div class="fragment"><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                                                                                      {</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <span class="comment">// Creates nSym new symbols named (prefix)0, (prefix)1 and so on.</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <span class="comment">// Crashes if it cannot create them because one or more of them were in the symbol</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="comment">// table already.</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  assert(symsOut &amp;&amp; symsOut-&gt;size() == 0);</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; nSym;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    std::stringstream ss; ss &lt;&lt; prefix &lt;&lt; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    std::string str = ss.str();</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">if</span> (input_sym_table-&gt;Find(str) != -1) {  <span class="comment">// should not be present.</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    }</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    assert(symsOut);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    symsOut-&gt;push_back( (<a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>) input_sym_table-&gt;AddSymbol(str));</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  }</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;}</div><div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac445fdfa8473caa38b3bf243f535be69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac445fdfa8473caa38b3bf243f535be69">&#9670;&nbsp;</a></span>CreateResultFst()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">StdVectorFst</a>* fst::CreateResultFst </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="deterministic-fst-test_8cc_source.html#l00088">88</a> of file <a class="el" href="deterministic-fst-test_8cc_source.html">deterministic-fst-test.cc</a>.</p>

<p class="reference">Referenced by <a class="el" href="deterministic-fst-test_8cc_source.html#l00145">TestBackoffAndCache()</a>, and <a class="el" href="deterministic-fst-test_8cc_source.html#l00180">TestCompose()</a>.</p>
<div class="fragment"><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                                {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <a class="code" href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">StdVectorFst</a> *<a class="code" href="namespacefst.html">fst</a> = <span class="keyword">new</span> <a class="code" href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">StdVectorFst</a>();</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  fst-&gt;AddState();   <span class="comment">// state 0</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  fst-&gt;SetStart(0);</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  fst-&gt;AddArc(0, <a class="code" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a>(10, 10, 0.0, 1));</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  fst-&gt;AddState();    <span class="comment">// state 1</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  fst-&gt;AddArc(1, <a class="code" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a>(12, 12, 0.0, 4));</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  fst-&gt;AddArc(1, <a class="code" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a>(13,13,0.3,4));  <span class="comment">// went through 1 backoff</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  fst-&gt;AddArc(1, <a class="code" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a>(14,14,0.8,4));  <span class="comment">// went through 2 backoffs</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  fst-&gt;AddState();    <span class="comment">// state 2</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  fst-&gt;AddState();    <span class="comment">// state 3</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  fst-&gt;AddState();    <span class="comment">// state 4</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  fst-&gt;AddArc(4, <a class="code" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a>(15, 15, 0.5, 5));</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  fst-&gt;AddState();     <span class="comment">// state 5 </span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  fst-&gt;SetFinal(5, 0.6);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  </div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordflow">return</span> fst;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a70478eb2428a9406e4692d19a7a3a97f"><div class="ttname"><a href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">fst::StdArc</a></div><div class="ttdeci">fst::StdArc StdArc</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00053">deterministic-fst-test.cc:53</a></div></div>
<div class="ttc" id="namespacefst_html_a88a968cc6f6d68c2b3dd6aa90385f65c"><div class="ttname"><a href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">fst::StdVectorFst</a></div><div class="ttdeci">fst::StdVectorFst StdVectorFst</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00056">deterministic-fst-test.cc:56</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af612cf218dbb31edf2567bf7cdc70c79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af612cf218dbb31edf2567bf7cdc70c79">&#9670;&nbsp;</a></span>CreateSuperFinal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Arc::StateId CreateSuperFinal </td>
          <td>(</td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>fst</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="pre-determinize-inl_8h_source.html#l00687">687</a> of file <a class="el" href="pre-determinize-inl_8h_source.html">pre-determinize-inl.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="word-align-lattice-lexicon_8cc_source.html#l00285">LatticeLexiconWordAligner::LatticeLexiconWordAligner()</a>, <a class="el" href="phone-align-lattice_8cc_source.html#l00244">LatticePhoneAligner::LatticePhoneAligner()</a>, <a class="el" href="word-align-lattice_8cc_source.html#l00252">LatticeWordAligner::LatticeWordAligner()</a>, <a class="el" href="nnet-get-egs-discriminative_8cc_source.html#l00027">main()</a>, <a class="el" href="pre-determinize-inl_8h_source.html#l00317">PreDeterminize()</a>, and <a class="el" href="sausages_8cc_source.html#l00269">MinimumBayesRisk::PrepareLatticeAndInitStats()</a>.</p>
<div class="fragment"><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                                                           {</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  assert(<a class="code" href="namespacefst.html">fst</a> != NULL);</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  StateId num_states = <a class="code" href="namespacefst.html">fst</a>-&gt;NumStates();</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  StateId num_final = 0;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  vector&lt;StateId&gt; final_states;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <span class="keywordflow">for</span> (StateId s = 0; s &lt; num_states; s++) {</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacefst.html">fst</a>-&gt;Final(s) != Weight::Zero()) {</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      num_final++;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      final_states.push_back(s);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    }</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  }</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <span class="keywordflow">if</span> (final_states.size() == 1) {</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacefst.html">fst</a>-&gt;Final(final_states[0]) == Weight::One()) {</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      ArcIterator&lt;MutableFst&lt;Arc&gt; &gt; iter(*<a class="code" href="namespacefst.html">fst</a>, final_states[0]);</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <span class="keywordflow">if</span> (iter.Done()) {</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        <span class="comment">// We already have a final state w/ no transitions out and unit weight.</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <span class="comment">// So we&#39;re done.</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        <span class="keywordflow">return</span> final_states[0];</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      }</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    }</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  }</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  StateId final_state = <a class="code" href="namespacefst.html">fst</a>-&gt;AddState();</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <a class="code" href="namespacefst.html">fst</a>-&gt;SetFinal(final_state, Weight::One());</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> idx = 0;idx &lt; final_states.size(); idx++) {</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    StateId s = final_states[idx];</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    Weight weight = <a class="code" href="namespacefst.html">fst</a>-&gt;Final(s);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <a class="code" href="namespacefst.html">fst</a>-&gt;SetFinal(s, Weight::Zero());</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> arc;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    arc.ilabel = 0;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    arc.olabel = 0;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    arc.nextstate = final_state;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    arc.weight = weight;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <a class="code" href="namespacefst.html">fst</a>-&gt;AddArc(s, arc);</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  }</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="keywordflow">return</span> final_state;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a295c809e48d355794a9489f0aa35f4bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a295c809e48d355794a9489f0aa35f4bb">&#9670;&nbsp;</a></span>DefaultLatticeScale()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt;vector&lt;double&gt; &gt; fst::DefaultLatticeScale </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a default 2x2 matrix scaling factor for LatticeWeight. </p>

<p class="definition">Definition at line <a class="el" href="lattice-utils_8h_source.html#l00130">130</a> of file <a class="el" href="lattice-utils_8h_source.html">lattice-utils.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-utils-inl_8h_source.html#l00197">ScaleLattice()</a>, and <a class="el" href="lattice-utils-test_8cc_source.html#l00234">TestScalePair()</a>.</p>
<div class="fragment"><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                                                     {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  vector&lt;vector&lt;double&gt; &gt; ans(2);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  ans[0].resize(2, 0.0);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  ans[1].resize(2, 0.0);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  ans[0][0] = ans[1][1] = 1.0;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keywordflow">return</span> ans;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="ad573c7b2172714c534c18d58ec0dd93a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad573c7b2172714c534c18d58ec0dd93a">&#9670;&nbsp;</a></span>DeleteISymbols()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64 DeleteISymbols </td>
          <td>(</td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; typename Arc::Label &gt;&#160;</td>
          <td class="paramname"><em>isyms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="pre-determinize-inl_8h_source.html#l00651">651</a> of file <a class="el" href="pre-determinize-inl_8h_source.html">pre-determinize-inl.h</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>.</p>

<p class="reference">Referenced by <a class="el" href="determinize-star-test_8cc_source.html#l00061">TestDeterminize()</a>, <a class="el" href="determinize-star-test_8cc_source.html#l00280">TestMinimize()</a>, and <a class="el" href="pre-determinize-test_8cc_source.html#l00030">TestPreDeterminize()</a>.</p>
<div class="fragment"><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                                                                            {</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  <span class="comment">// We could do this using the Mapper concept, but this is much easier to understand.</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  int64 num_deleted = 0;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <span class="keywordflow">if</span> (isyms.size() == 0) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  Label  isyms_min = *std::min_element(isyms.begin(), isyms.end()),</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;         isyms_max = *std::max_element(isyms.begin(), isyms.end());</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <span class="keywordtype">bool</span> isyms_consecutive = (isyms_max+1-isyms_min == <span class="keyword">static_cast&lt;</span>Label<span class="keyword">&gt;</span>(isyms.size()));</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  std::set&lt;Label&gt; isyms_set;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="keywordflow">if</span> (!isyms_consecutive)</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; isyms.size();<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      isyms_set.insert(isyms[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <span class="keywordflow">for</span> (StateIterator&lt;MutableFst&lt;Arc&gt; &gt; siter(*<a class="code" href="namespacefst.html">fst</a>); ! siter.Done(); siter.Next()) {</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    StateId state = siter.Value();</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordflow">for</span> (MutableArcIterator&lt;MutableFst&lt;Arc&gt; &gt; aiter(<a class="code" href="namespacefst.html">fst</a>, state); ! aiter.Done(); aiter.Next()) {</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &amp;arc = aiter.Value();</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      <span class="keywordflow">if</span> (arc.ilabel &gt;= isyms_min &amp;&amp; arc.ilabel &lt;= isyms_max) {</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        <span class="keywordflow">if</span> (isyms_consecutive || isyms_set.count(arc.ilabel) != 0) {</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;          num_deleted++;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;          <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> mod_arc (arc);</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;          mod_arc.ilabel = 0;  <span class="comment">// change label to epsilon.</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;          aiter.SetValue(mod_arc);</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        }</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      }</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    }</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  }</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="keywordflow">return</span> num_deleted;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0fbb6852179648a4c70c282a348c74e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fbb6852179648a4c70c282a348c74e3">&#9670;&nbsp;</a></span>DeleteTestFst()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::DeleteTestFst </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">StdVectorFst</a> *&#160;</td>
          <td class="paramname"><em>fst</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="deterministic-fst-test_8cc_source.html#l00111">111</a> of file <a class="el" href="deterministic-fst-test_8cc_source.html">deterministic-fst-test.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                                      {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keyword">delete</span> <a class="code" href="namespacefst.html">fst</a>;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad8a27fbfa6636ccb12785e01bb3ed685"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8a27fbfa6636ccb12785e01bb3ed685">&#9670;&nbsp;</a></span>DeterminizeInLog()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void fst::DeterminizeInLog </td>
          <td>(</td>
          <td class="paramtype">VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *&#160;</td>
          <td class="paramname"><em>fst</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00388">388</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstdeterminizelog_8cc_source.html#l00029">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                                              {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="comment">// DeterminizeInLog determinizes &#39;fst&#39; in the log semiring.</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  ArcSort(<a class="code" href="namespacefst.html">fst</a>, ILabelCompare&lt;StdArc&gt;());  <span class="comment">// helps DeterminizeStar to be faster.</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  VectorFst&lt;LogArc&gt; *fst_log = <span class="keyword">new</span> VectorFst&lt;LogArc&gt;;  <span class="comment">// Want to determinize in log semiring.</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  Cast(*<a class="code" href="namespacefst.html">fst</a>, fst_log);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  VectorFst&lt;StdArc&gt; tmp;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  *<a class="code" href="namespacefst.html">fst</a> = tmp;  <span class="comment">// make fst empty to free up memory. [actually may make no difference..]</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  VectorFst&lt;LogArc&gt; *fst_det_log = <span class="keyword">new</span> VectorFst&lt;LogArc&gt;;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  Determinize(*fst_log, fst_det_log);</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  Cast(*fst_det_log, <a class="code" href="namespacefst.html">fst</a>);</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="keyword">delete</span> fst_log;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keyword">delete</span> fst_det_log;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9e3c8d1359774dca3e2701dfb7a1e00a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e3c8d1359774dca3e2701dfb7a1e00a">&#9670;&nbsp;</a></span>DeterminizeLatticeDeletePhones()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">template void fst::DeterminizeLatticeDeletePhones </td>
          <td>(</td>
          <td class="paramtype">ArcTpl&lt; <a class="el" href="namespacefst.html#a312b29f86c5ef78810556e470635a291">kaldi::LatticeWeight</a> &gt;::<a class="el" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>&#160;</td>
          <td class="paramname"><em>first_phone_label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; ArcTpl&lt; <a class="el" href="namespacefst.html#a312b29f86c5ef78810556e470635a291">kaldi::LatticeWeight</a> &gt; &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a39a43bbc70e62aa9785a53df3cc50cba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39a43bbc70e62aa9785a53df3cc50cba">&#9670;&nbsp;</a></span>DeterminizeLatticePhonePruned< kaldi::LatticeWeight, kaldi::int32 >() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">template <a class="el" href="classbool.html">bool</a> <a class="el" href="group__fst__extensions.html#gae7a66f2c18ebe4f4f00424aad0401bc5">fst::DeterminizeLatticePhonePruned</a>&lt; <a class="el" href="namespacefst.html#a312b29f86c5ef78810556e470635a291">kaldi::LatticeWeight</a>, kaldi::int32 &gt; </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1TransitionModel.html">kaldi::TransitionModel</a> &amp;&#160;</td>
          <td class="paramname"><em>trans_model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ExpandedFst&lt; <a class="el" href="namespacekaldi.html#a417e37822095c5adb9680fa07dffea8d">kaldi::LatticeArc</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>ifst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>prune</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; <a class="el" href="namespacekaldi.html#a33b7ea55be82ee6bab64430dd93cbcba">kaldi::CompactLatticeArc</a> &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfst_1_1DeterminizeLatticePhonePrunedOptions.html">DeterminizeLatticePhonePrunedOptions</a>&#160;</td>
          <td class="paramname"><em>opts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6fa5db2a4df17faa5f07d207f1de2949"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fa5db2a4df17faa5f07d207f1de2949">&#9670;&nbsp;</a></span>DeterminizeLatticePhonePruned< kaldi::LatticeWeight, kaldi::int32 >() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">template <a class="el" href="classbool.html">bool</a> <a class="el" href="group__fst__extensions.html#gae7a66f2c18ebe4f4f00424aad0401bc5">fst::DeterminizeLatticePhonePruned</a>&lt; <a class="el" href="namespacefst.html#a312b29f86c5ef78810556e470635a291">kaldi::LatticeWeight</a>, kaldi::int32 &gt; </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1TransitionModel.html">kaldi::TransitionModel</a> &amp;&#160;</td>
          <td class="paramname"><em>trans_model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; <a class="el" href="namespacekaldi.html#a417e37822095c5adb9680fa07dffea8d">kaldi::LatticeArc</a> &gt; *&#160;</td>
          <td class="paramname"><em>ifst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>prune</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; <a class="el" href="namespacekaldi.html#a33b7ea55be82ee6bab64430dd93cbcba">kaldi::CompactLatticeArc</a> &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfst_1_1DeterminizeLatticePhonePrunedOptions.html">DeterminizeLatticePhonePrunedOptions</a>&#160;</td>
          <td class="paramname"><em>opts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5003d0c78ef934fae8501cf4af8d334a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5003d0c78ef934fae8501cf4af8d334a">&#9670;&nbsp;</a></span>DeterminizeLatticePhonePrunedFirstPass()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> fst::DeterminizeLatticePhonePrunedFirstPass </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1TransitionModel.html">kaldi::TransitionModel</a> &amp;&#160;</td>
          <td class="paramname"><em>trans_model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>beam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; ArcTpl&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> &gt; &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structfst_1_1DeterminizeLatticePrunedOptions.html">DeterminizeLatticePrunedOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>opts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function does a first pass determinization with phone symbols inserted at phone boundary. </p>
<p>It uses a transition model to work out the transition-id to phone map. First, phones will be inserted into the word level lattice. Second, determinization will be applied on top of the phone + word lattice. Finally, the inserted phones will be removed, converting the lattice back to a word level lattice. The output lattice of this pass is not deterministic, since we remove the phone symbols as a last step. It is supposed to be followed by another pass of determinization at the word level. It could also be useful for some other applications such as fMLLR estimation, confidence estimation, discriminative training, etc. </p>

<p class="definition">Definition at line <a class="el" href="determinize-lattice-pruned_8cc_source.html#l01390">1390</a> of file <a class="el" href="determinize-lattice-pruned_8cc_source.html">determinize-lattice-pruned.cc</a>.</p>

<p class="reference">References <a class="el" href="determinize-lattice-pruned_8cc_source.html#l01349">DeterminizeLatticeDeletePhones()</a>, and <a class="el" href="determinize-lattice-pruned_8cc_source.html#l01293">DeterminizeLatticeInsertPhones()</a>.</p>
<div class="fragment"><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;                                                 {</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  <span class="comment">// First, insert the phones.</span></div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">ArcTpl&lt;Weight&gt;::Label</a> first_phone_label =</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;      <a class="code" href="group__fst__extensions.html#gadf1a298863d74aaa793841cdbb3b72fd">DeterminizeLatticeInsertPhones</a>(trans_model, <a class="code" href="namespacefst.html">fst</a>);</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  TopSort(<a class="code" href="namespacefst.html">fst</a>);</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;  <span class="comment">// Second, do determinization with phone inserted.</span></div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;  <span class="keywordtype">bool</span> ans = DeterminizeLatticePruned&lt;Weight&gt;(*<a class="code" href="namespacefst.html">fst</a>, beam, fst, opts);</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;  <span class="comment">// Finally, remove the inserted phones.</span></div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;  <a class="code" href="namespacefst.html#a9e3c8d1359774dca3e2701dfb7a1e00a">DeterminizeLatticeDeletePhones</a>(first_phone_label, fst);</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;  TopSort(fst);</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;  <span class="keywordflow">return</span> ans;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a9e3c8d1359774dca3e2701dfb7a1e00a"><div class="ttname"><a href="namespacefst.html#a9e3c8d1359774dca3e2701dfb7a1e00a">fst::DeterminizeLatticeDeletePhones</a></div><div class="ttdeci">template void DeterminizeLatticeDeletePhones(ArcTpl&lt; kaldi::LatticeWeight &gt;::Label first_phone_label, MutableFst&lt; ArcTpl&lt; kaldi::LatticeWeight &gt; &gt; *fst)</div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="group__fst__extensions_html_gadf1a298863d74aaa793841cdbb3b72fd"><div class="ttname"><a href="group__fst__extensions.html#gadf1a298863d74aaa793841cdbb3b72fd">fst::DeterminizeLatticeInsertPhones</a></div><div class="ttdeci">ArcTpl&lt; Weight &gt;::Label DeterminizeLatticeInsertPhones(const kaldi::TransitionModel &amp;trans_model, MutableFst&lt; ArcTpl&lt; Weight &gt; &gt; *fst)</div><div class="ttdoc">This function takes in lattices and inserts phones at phone boundaries. </div><div class="ttdef"><b>Definition:</b> <a href="determinize-lattice-pruned_8cc_source.html#l01293">determinize-lattice-pruned.cc:1293</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9883ed5858e5968dd42d7ebcbd905750"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9883ed5858e5968dd42d7ebcbd905750">&#9670;&nbsp;</a></span>DeterminizeLatticePruned< kaldi::LatticeWeight >() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">template <a class="el" href="classbool.html">bool</a> <a class="el" href="group__fst__extensions.html#gae37d77a64fdc7c92ad2c44ece0b74f9a">fst::DeterminizeLatticePruned</a>&lt; <a class="el" href="namespacefst.html#a312b29f86c5ef78810556e470635a291">kaldi::LatticeWeight</a> &gt; </td>
          <td>(</td>
          <td class="paramtype">const ExpandedFst&lt; <a class="el" href="namespacekaldi.html#a417e37822095c5adb9680fa07dffea8d">kaldi::LatticeArc</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>ifst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>prune</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; <a class="el" href="namespacekaldi.html#a33b7ea55be82ee6bab64430dd93cbcba">kaldi::CompactLatticeArc</a> &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfst_1_1DeterminizeLatticePrunedOptions.html">DeterminizeLatticePrunedOptions</a>&#160;</td>
          <td class="paramname"><em>opts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4d57029ccc34c07a534562451f65ebff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d57029ccc34c07a534562451f65ebff">&#9670;&nbsp;</a></span>DeterminizeLatticePruned< kaldi::LatticeWeight >() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">template <a class="el" href="classbool.html">bool</a> <a class="el" href="group__fst__extensions.html#gae37d77a64fdc7c92ad2c44ece0b74f9a">fst::DeterminizeLatticePruned</a>&lt; <a class="el" href="namespacefst.html#a312b29f86c5ef78810556e470635a291">kaldi::LatticeWeight</a> &gt; </td>
          <td>(</td>
          <td class="paramtype">const ExpandedFst&lt; <a class="el" href="namespacekaldi.html#a417e37822095c5adb9680fa07dffea8d">kaldi::LatticeArc</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>ifst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>prune</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; <a class="el" href="namespacekaldi.html#a417e37822095c5adb9680fa07dffea8d">kaldi::LatticeArc</a> &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfst_1_1DeterminizeLatticePrunedOptions.html">DeterminizeLatticePrunedOptions</a>&#160;</td>
          <td class="paramname"><em>opts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a97677191e8f55e7ac378d1e4a7e61976"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97677191e8f55e7ac378d1e4a7e61976">&#9670;&nbsp;</a></span>DeterminizeStarInLog()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void DeterminizeStarInLog </td>
          <td>(</td>
          <td class="paramtype">VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfloat.html">float</a>&#160;</td>
          <td class="paramname"><em>delta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a> *&#160;</td>
          <td class="paramname"><em>debug_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_states</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00371">371</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="determinize-star-inl_8h_source.html#l00625">DeterminizeStar()</a>.</p>

<p class="reference">Referenced by <a class="el" href="training-graph-compiler_8cc_source.html#l00073">TrainingGraphCompiler::CompileGraph()</a>, <a class="el" href="training-graph-compiler_8cc_source.html#l00161">TrainingGraphCompiler::CompileGraphs()</a>, and <a class="el" href="compile-graph_8cc_source.html#l00032">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                                                                                                {</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="comment">// DeterminizeStarInLog determinizes &#39;fst&#39; in the log semiring, using</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="comment">// the DeterminizeStar algorithm (which also removes epsilons).</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  ArcSort(<a class="code" href="namespacefst.html">fst</a>, ILabelCompare&lt;StdArc&gt;());  <span class="comment">// helps DeterminizeStar to be faster.</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  VectorFst&lt;LogArc&gt; *fst_log = <span class="keyword">new</span> VectorFst&lt;LogArc&gt;;  <span class="comment">// Want to determinize in log semiring.</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  Cast(*<a class="code" href="namespacefst.html">fst</a>, fst_log);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  VectorFst&lt;StdArc&gt; tmp;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  *<a class="code" href="namespacefst.html">fst</a> = tmp;  <span class="comment">// make fst empty to free up memory. [actually may make no difference..]</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  VectorFst&lt;LogArc&gt; *fst_det_log = <span class="keyword">new</span> VectorFst&lt;LogArc&gt;;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <a class="code" href="group__fst__extensions.html#gac6d4823e83f5353ae5b5ce569a7a29a3">DeterminizeStar</a>(*fst_log, fst_det_log, delta, debug_ptr, max_states);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  Cast(*fst_det_log, <a class="code" href="namespacefst.html">fst</a>);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="keyword">delete</span> fst_log;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="keyword">delete</span> fst_det_log;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="group__fst__extensions_html_gac6d4823e83f5353ae5b5ce569a7a29a3"><div class="ttname"><a href="group__fst__extensions.html#gac6d4823e83f5353ae5b5ce569a7a29a3">fst::DeterminizeStar</a></div><div class="ttdeci">bool DeterminizeStar(F &amp;ifst, MutableFst&lt; typename F::Arc &gt; *ofst, float delta, bool *debug_ptr, int max_states, bool allow_partial)</div><div class="ttdoc">This function implements the normal version of DeterminizeStar, in which the output strings are repre...</div><div class="ttdef"><b>Definition:</b> <a href="determinize-star-inl_8h_source.html#l00625">determinize-star-inl.h:625</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9166fb75b9a515b965d5f68239310018"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9166fb75b9a515b965d5f68239310018">&#9670;&nbsp;</a></span>Divide() <span class="overload">[1/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt;T&gt; fst::Divide </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>w1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>w2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DivideType&#160;</td>
          <td class="paramname"><em>typ</em> = <code>DIVIDE_ANY</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arctic-weight_8h_source.html#l00125">125</a> of file <a class="el" href="arctic-weight_8h_source.html">arctic-weight.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                                                                {</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  T f1 = w1.Value(), f2 = w2.Value();</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keywordflow">if</span> (f2 == -numeric_limits&lt;T&gt;::infinity())</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">return</span> numeric_limits&lt;T&gt;::quiet_NaN();</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (f1 == -numeric_limits&lt;T&gt;::infinity())</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">return</span> -numeric_limits&lt;T&gt;::infinity();</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">return</span> ArcticWeightTpl&lt;T&gt;(f1 - f2);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="aa22137994af0e83470f6eafaa20fba87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa22137994af0e83470f6eafaa20fba87">&#9670;&nbsp;</a></span>Divide() <span class="overload">[2/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt;<a class="el" href="classfloat.html">float</a>&gt; fst::Divide </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; <a class="el" href="classfloat.html">float</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>w1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; <a class="el" href="classfloat.html">float</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>w2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DivideType&#160;</td>
          <td class="paramname"><em>typ</em> = <code>DIVIDE_ANY</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arctic-weight_8h_source.html#l00137">137</a> of file <a class="el" href="arctic-weight_8h_source.html">arctic-weight.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                                                                    {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keywordflow">return</span> Divide&lt;float&gt;(w1, w2, typ);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="ad57489159261565da04b4a30da378c1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad57489159261565da04b4a30da378c1d">&#9670;&nbsp;</a></span>Divide() <span class="overload">[3/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt;double&gt; fst::Divide </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>w1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>w2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DivideType&#160;</td>
          <td class="paramname"><em>typ</em> = <code>DIVIDE_ANY</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arctic-weight_8h_source.html#l00143">143</a> of file <a class="el" href="arctic-weight_8h_source.html">arctic-weight.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                                                                     {</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keywordflow">return</span> Divide&lt;double&gt;(w1, w2, typ);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a694bc33e16bfb9d7a1639f8488508d20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a694bc33e16bfb9d7a1639f8488508d20">&#9670;&nbsp;</a></span>Divide() <span class="overload">[4/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt;FloatType&gt; fst::Divide </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DivideType&#160;</td>
          <td class="paramname"><em>typ</em> = <code>DIVIDE_ANY</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight_8h_source.html#l00371">371</a> of file <a class="el" href="lattice-weight_8h_source.html">lattice-weight.h</a>.</p>

<p class="reference">References <a class="el" href="kaldi-error_8h_source.html#l00129">KALDI_WARN</a>, <a class="el" href="lattice-weight_8h_source.html#l00052">LatticeWeightTpl&lt; FloatType &gt;::Value1()</a>, <a class="el" href="lattice-weight_8h_source.html#l00054">LatticeWeightTpl&lt; FloatType &gt;::Value2()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00076">LatticeWeightTpl&lt; FloatType &gt;::Zero()</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-weight-test_8cc_source.html#l00124">CompactLatticeWeightTest()</a>, <a class="el" href="lattice-weight_8h_source.html#l00690">Divide()</a>, <a class="el" href="lattice-weight-test_8cc_source.html#l00062">LatticeWeightTest()</a>, <a class="el" href="determinize-lattice-pruned_8cc_source.html#l00776">LatticeDeterminizerPruned&lt; Weight, IntType &gt;::NormalizeSubset()</a>, <a class="el" href="determinize-lattice-inl_8h_source.html#l00891">LatticeDeterminizer&lt; Weight, IntType &gt;::NormalizeSubset()</a>, <a class="el" href="determinize-star-inl_8h_source.html#l00989">DeterminizerStar&lt; F &gt;::ProcessTransition()</a>, <a class="el" href="push-lattice_8cc_source.html#l00217">PushCompactLatticeWeights()</a>, <a class="el" href="remove-eps-local-inl_8h_source.html#l00173">RemoveEpsLocalClass&lt; Arc, ReweightPlus &gt;::RemoveEpsPattern1()</a>, <a class="el" href="remove-eps-local-inl_8h_source.html#l00139">RemoveEpsLocalClass&lt; Arc, ReweightPlus &gt;::Reweight()</a>, and <a class="el" href="remove-eps-local-test_8cc_source.html#l00113">TestRemoveEpsLocalSpecial()</a>.</p>
<div class="fragment"><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                                                                       {</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="keyword">typedef</span> FloatType T;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  T a = w1.Value1() - w2.Value1(), b = w1.Value2() - w2.Value2();</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="keywordflow">if</span> (a != a || b != b || a == -numeric_limits&lt;T&gt;::infinity()</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;     || b == -numeric_limits&lt;T&gt;::infinity()) {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;LatticeWeightTpl::Divide, NaN or invalid number produced. &quot;</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;[dividing by zero?]  Returning zero&quot;</span>;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordflow">return</span> LatticeWeightTpl&lt;T&gt;::Zero();</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  }</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="keywordflow">if</span> (a == numeric_limits&lt;T&gt;::infinity() ||</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;     b == numeric_limits&lt;T&gt;::infinity())</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">return</span> LatticeWeightTpl&lt;T&gt;::Zero(); <span class="comment">// not a valid number if only one is infinite.</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="keywordflow">return</span> LatticeWeightTpl&lt;T&gt;(a, b);</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;}</div><div class="ttc" id="group__error__group_html_ga994be213ddf127b5d6f20a43a02b513a"><div class="ttname"><a href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a></div><div class="ttdeci">#define KALDI_WARN</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00129">kaldi-error.h:129</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1ca31d235c7e8f830b3009e25b9a1f24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ca31d235c7e8f830b3009e25b9a1f24">&#9670;&nbsp;</a></span>Divide() <span class="overload">[5/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt;WeightType, IntType&gt; fst::Divide </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DivideType&#160;</td>
          <td class="paramname"><em>div</em> = <code>DIVIDE_ANY</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight_8h_source.html#l00690">690</a> of file <a class="el" href="lattice-weight_8h_source.html">lattice-weight.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00371">Divide()</a>, <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>, <a class="el" href="lattice-weight_8h_source.html#l00450">CompactLatticeWeightTpl&lt; WeightType, IntType &gt;::String()</a>, <a class="el" href="lattice-weight_8h_source.html#l00448">CompactLatticeWeightTpl&lt; WeightType, IntType &gt;::Weight()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00456">CompactLatticeWeightTpl&lt; WeightType, IntType &gt;::Zero()</a>.</p>
<div class="fragment"><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                                                                                       {</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <span class="keywordflow">if</span> (w1.Weight() == WeightType::Zero()) {</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keywordflow">if</span> (w2.Weight() != WeightType::Zero()) {</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      <span class="keywordflow">return</span> CompactLatticeWeightTpl&lt;WeightType, IntType&gt;::Zero();</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Division by zero [0/0]&quot;</span>;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    }</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (w2.Weight() == WeightType::Zero()) {</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Error: division by zero&quot;</span>;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  }</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  WeightType w = <a class="code" href="namespacefst.html#a1ca31d235c7e8f830b3009e25b9a1f24">Divide</a>(w1.Weight(), w2.Weight());</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <span class="keyword">const</span> vector&lt;IntType&gt; v1 = w1.String(), v2 = w2.String();</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <span class="keywordflow">if</span> (v2.size() &gt; v1.size()) {</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Cannot divide, length mismatch&quot;</span>;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  }</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <span class="keyword">typename</span> vector&lt;IntType&gt;::const_iterator v1b = v1.begin(),</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;      v1e = v1.end(), v2b = v2.begin(), v2e = v2.end();</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="keywordflow">if</span> (div == DIVIDE_LEFT) {</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="keywordflow">if</span> (!std::equal(v2b, v2e, v1b)) { <span class="comment">// v2 must be identical to first part of v1.</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Cannot divide, data mismatch&quot;</span>;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    }</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keywordflow">return</span> CompactLatticeWeightTpl&lt;WeightType, IntType&gt;(</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        w, vector&lt;IntType&gt;(v1b+(v2e-v2b), v1e)); <span class="comment">// return last part of v1.</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (div == DIVIDE_RIGHT) {</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="keywordflow">if</span> (!std::equal(v2b, v2e, v1e-(v2e-v2b))) { <span class="comment">// v2 must be identical to last part of v1.</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Cannot divide, data mismatch&quot;</span>;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    }</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="keywordflow">return</span> CompactLatticeWeightTpl&lt;WeightType, IntType&gt;(</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        w, vector&lt;IntType&gt;(v1b, v1e-(v2e-v2b))); <span class="comment">// return first part of v1.</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Cannot divide CompactLatticeWeightTpl with DIVIDE_ANY&quot;</span>;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  }</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <span class="keywordflow">return</span> CompactLatticeWeightTpl&lt;WeightType,IntType&gt;::Zero(); <span class="comment">// keep compiler happy.</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;}</div><div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
<div class="ttc" id="namespacefst_html_a1ca31d235c7e8f830b3009e25b9a1f24"><div class="ttname"><a href="namespacefst.html#a1ca31d235c7e8f830b3009e25b9a1f24">fst::Divide</a></div><div class="ttdeci">CompactLatticeWeightTpl&lt; WeightType, IntType &gt; Divide(const CompactLatticeWeightTpl&lt; WeightType, IntType &gt; &amp;w1, const CompactLatticeWeightTpl&lt; WeightType, IntType &gt; &amp;w2, DivideType div=DIVIDE_ANY)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00690">lattice-weight.h:690</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4164ec8f0eed99fbb144c1e06bf622f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4164ec8f0eed99fbb144c1e06bf622f4">&#9670;&nbsp;</a></span>EnsureEpsilonProperty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EnsureEpsilonProperty </td>
          <td>(</td>
          <td class="paramtype">VectorFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>fst</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function modifies the fst (while maintaining equivalence) in such a way that, after the modification, all states of the FST which have epsilon-arcs entering them, have no non-epsilon arcs entering them, and all states which have epsilon-arcs leaving them, have no non-epsilon arcs leaving them. </p>
<p>It does this by creating extra states and adding extra epsilon transitions. An epsilon arc is defined as an arc where both the ilabel and the olabel are epsilons. This function may fail with KALDI_ASSERT for certain cyclic FSTs, but is safe in the acyclic case. </p>
<p>new_state_vec is for those states that have both epsilon and non-epsilon arcs entering. For these states, we'll create a new state for the non-epsilon arcs to enter and put it in this array, and we'll put an epsilon transition from the new state to the old state.</p>
<p>First modify arcs to point to states in new_state_vec when necessary.</p>
<p>Now handle the situation where states have both epsilon and non-epsilon arcs leaving. </p>

<p class="definition">Definition at line <a class="el" href="epsilon-property-inl_8h_source.html#l00049">49</a> of file <a class="el" href="epsilon-property-inl_8h_source.html">epsilon-property-inl.h</a>.</p>

<p class="reference">References <a class="el" href="epsilon-property-inl_8h_source.html#l00028">ComputeStateInfo()</a>, <a class="el" href="epsilon-property_8h_source.html#l00028">kStateHasEpsilonArcsEntering</a>, <a class="el" href="epsilon-property_8h_source.html#l00030">kStateHasEpsilonArcsLeaving</a>, <a class="el" href="epsilon-property_8h_source.html#l00029">kStateHasNonEpsilonArcsEntering</a>, and <a class="el" href="epsilon-property_8h_source.html#l00031">kStateHasNonEpsilonArcsLeaving</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-to-kws-index_8cc_source.html#l00031">main()</a>, and <a class="el" href="epsilon-property-test_8cc_source.html#l00027">TestEnsureEpsilonProperty()</a>.</p>
<div class="fragment"><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                                                {</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keyword">typedef</span> VectorFst&lt;Arc&gt; Fst;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  std::vector&lt;char&gt; epsilon_info;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <a class="code" href="namespacefst.html#a0335ed4b018328470d0d4856837fbefb">ComputeStateInfo</a>(*<a class="code" href="namespacefst.html">fst</a>, &amp;epsilon_info);</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  StateId num_states_old = <a class="code" href="namespacefst.html">fst</a>-&gt;NumStates();</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  StateId non_coaccessible_state = <a class="code" href="namespacefst.html">fst</a>-&gt;AddState();</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  std::vector&lt;StateId&gt; new_state_vec(num_states_old, kNoStateId);</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keywordflow">for</span> (StateId s = 0; s &lt; num_states_old; s++) {</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">if</span> ((epsilon_info[s] &amp; <a class="code" href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a1947c0d03bf916c037b4f25cccc92ace">kStateHasEpsilonArcsEntering</a>) != 0 &amp;&amp;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        (epsilon_info[s] &amp; <a class="code" href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a3048a708ccd7fc2d37561d3aeb544f63">kStateHasNonEpsilonArcsEntering</a>) != 0) {</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      assert(s != <a class="code" href="namespacefst.html">fst</a>-&gt;Start()); <span class="comment">// a type of cyclic FST we can&#39;t handle</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                                 <span class="comment">// easily.</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      StateId new_state = <a class="code" href="namespacefst.html">fst</a>-&gt;AddState();</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;      new_state_vec[s] = new_state;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      <a class="code" href="namespacefst.html">fst</a>-&gt;AddArc(new_state, <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>(0, 0, Weight::One(), s));</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    }</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  }</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="keywordflow">for</span> (StateId s = 0; s &lt; num_states_old; s++) {</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">for</span> (MutableArcIterator&lt;Fst&gt; aiter(<a class="code" href="namespacefst.html">fst</a>, s);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;         !aiter.Done(); aiter.Next()) {</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> arc = aiter.Value();</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      <span class="keywordflow">if</span> (arc.ilabel != 0 || arc.olabel != 0) { <span class="comment">// non-epsilon arc</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        StateId replacement_state;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="keywordflow">if</span> (arc.nextstate &gt;= 0 &amp;&amp; arc.nextstate &lt; num_states_old &amp;&amp;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            (replacement_state = new_state_vec[arc.nextstate]) !=</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;             kNoStateId) {</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;          arc.nextstate = replacement_state;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;          aiter.SetValue(arc);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        }</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      }</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    }</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  }</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordflow">for</span> (StateId s = 0; s &lt; num_states_old; s++) {</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">if</span> ((epsilon_info[s] &amp; <a class="code" href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a2d3c0fb5e5e5c747c645653b5ce863e7">kStateHasEpsilonArcsLeaving</a>) != 0 &amp;&amp;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        (epsilon_info[s] &amp; <a class="code" href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a229ce10dbec4dcf7ca9736ee6f3e8467">kStateHasNonEpsilonArcsLeaving</a>) != 0) {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      <span class="comment">// state has non-epsilon and epsilon arcs leaving.</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      <span class="comment">// create a new state and move the non-epsilon arcs to leave</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      <span class="comment">// from there instead.</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      StateId new_state = <a class="code" href="namespacefst.html">fst</a>-&gt;AddState();</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      <span class="keywordflow">for</span> (MutableArcIterator&lt;Fst&gt; aiter(<a class="code" href="namespacefst.html">fst</a>, s); !aiter.Done();</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;           aiter.Next()) {</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> arc = aiter.Value();</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keywordflow">if</span> (arc.ilabel != 0 || arc.olabel != 0) { <span class="comment">// non-epsilon arc.</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;          assert(arc.nextstate != s); <span class="comment">// we don&#39;t handle cyclic FSTs.</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;          <span class="comment">// move this arc to leave from the new state:</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;          <a class="code" href="namespacefst.html">fst</a>-&gt;AddArc(new_state, arc); </div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;          arc.nextstate = non_coaccessible_state;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;          aiter.SetValue(arc); <span class="comment">// invalidate the arc, Connect() will remove it.</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        }</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      }</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      <span class="comment">// Create an epsilon arc to the new state.</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      <a class="code" href="namespacefst.html">fst</a>-&gt;AddArc(s, <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>(0, 0, Weight::One(), new_state));</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    }</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  }</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  Connect(<a class="code" href="namespacefst.html">fst</a>); <span class="comment">// Removes arcs to the non-coaccessible state.</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html_abed82baf7f470b522273a3e37c24c600a1947c0d03bf916c037b4f25cccc92ace"><div class="ttname"><a href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a1947c0d03bf916c037b4f25cccc92ace">fst::kStateHasEpsilonArcsEntering</a></div><div class="ttdef"><b>Definition:</b> <a href="epsilon-property_8h_source.html#l00028">epsilon-property.h:28</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a0335ed4b018328470d0d4856837fbefb"><div class="ttname"><a href="namespacefst.html#a0335ed4b018328470d0d4856837fbefb">fst::ComputeStateInfo</a></div><div class="ttdeci">void ComputeStateInfo(const VectorFst&lt; Arc &gt; &amp;fst, std::vector&lt; char &gt; *epsilon_info)</div><div class="ttdoc">This function will set epsilon_info to have size equal to the NumStates() of the FST, containing a logical-or of the enum values kStateHasEpsilonArcsEntering, kStateHasNonEpsilonArcsEntering, kStateHasEpsilonArcsLeaving, and kStateHasNonEpsilonArcsLeaving. </div><div class="ttdef"><b>Definition:</b> <a href="epsilon-property-inl_8h_source.html#l00028">epsilon-property-inl.h:28</a></div></div>
<div class="ttc" id="namespacefst_html_abed82baf7f470b522273a3e37c24c600a2d3c0fb5e5e5c747c645653b5ce863e7"><div class="ttname"><a href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a2d3c0fb5e5e5c747c645653b5ce863e7">fst::kStateHasEpsilonArcsLeaving</a></div><div class="ttdef"><b>Definition:</b> <a href="epsilon-property_8h_source.html#l00030">epsilon-property.h:30</a></div></div>
<div class="ttc" id="namespacefst_html_abed82baf7f470b522273a3e37c24c600a3048a708ccd7fc2d37561d3aeb544f63"><div class="ttname"><a href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a3048a708ccd7fc2d37561d3aeb544f63">fst::kStateHasNonEpsilonArcsEntering</a></div><div class="ttdef"><b>Definition:</b> <a href="epsilon-property_8h_source.html#l00029">epsilon-property.h:29</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacefst_html_abed82baf7f470b522273a3e37c24c600a229ce10dbec4dcf7ca9736ee6f3e8467"><div class="ttname"><a href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a229ce10dbec4dcf7ca9736ee6f3e8467">fst::kStateHasNonEpsilonArcsLeaving</a></div><div class="ttdef"><b>Definition:</b> <a href="epsilon-property_8h_source.html#l00031">epsilon-property.h:31</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fc98c1743a4bd467d655e9634636027"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fc98c1743a4bd467d655e9634636027">&#9670;&nbsp;</a></span>EqualAlign()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> EqualAlign </td>
          <td>(</td>
          <td class="paramtype">const Fst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>ifst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">typename Arc::StateId&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rand_seed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_retries</em> = <code>10</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>EqualAlign is similar to RandGen, but it generates a sequence with exactly "length" input symbols. </p>
<p>It returns true on success, false on failure (failure is partly random but should never happen in practice for normal speech models.) It generates a random path through the input FST, finds out which subset of the states it visits along the way have self-loops with inupt symbols on them, and outputs a path with exactly enough self-loops to have the requested number of input symbols. Note that EqualAlign does not use the probabilities on the FST. It just uses equal probabilities in the first stage of selection (since the output will anyway not be a truly random sample from the FST). The input fst "ifst" must be connected or this may enter an infinite loop. </p>

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00803">803</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="fstext-utils-inl_8h_source.html#l00794">FindSelfLoopWithILabel()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00129">KALDI_WARN</a>, and <a class="el" href="kaldi-math_8cc_source.html#l00094">kaldi::RandInt()</a>.</p>

<p class="reference">Referenced by <a class="el" href="align-equal-compiled_8cc_source.html#l00031">main()</a>, <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>, and <a class="el" href="fstext-utils-test_8cc_source.html#l00333">TestEqualAlign()</a>.</p>
<div class="fragment"><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                                 {</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  srand(rand_seed);</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(ofst-&gt;NumStates() == 0);  <span class="comment">// make sure ofst empty.</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  <span class="comment">// make sure all states can reach final-state (or this algorithm may enter</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <span class="comment">// infinite loop.</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(ifst.Properties(kCoAccessible, <span class="keyword">true</span>) == kCoAccessible);</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <span class="keywordflow">if</span> (ifst.Start() == kNoStateId) {</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;Empty input fst.&quot;</span>;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  }</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  <span class="comment">// First select path through ifst.</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  vector&lt;StateId&gt; path;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  vector&lt;size_t&gt; arc_offsets;  <span class="comment">// arc taken out of each state.</span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  vector&lt;int&gt; nof_ilabels;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  StateId num_ilabels = 0;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <span class="keywordtype">int</span> retry_no = 0;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  <span class="comment">// Under normal circumstances, this will be one-pass-only process</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="comment">// Multiple tries might be needed in special cases, typically when</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  <span class="comment">// the number of frames is close to number of transitions from</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <span class="comment">// the start node to the final node. It usually happens for really</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <span class="comment">// short utterances</span></div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    num_ilabels = 0;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    arc_offsets.clear();</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    path.clear();</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    path.push_back(ifst.Start());</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <span class="keywordflow">while</span> (1) {</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      <span class="comment">// Select either an arc or final-prob.</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      StateId s = path.back();</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      <span class="keywordtype">size_t</span> num_arcs = ifst.NumArcs(s);</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      <span class="keywordtype">size_t</span> num_arcs_tot = num_arcs;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      <span class="keywordflow">if</span> (ifst.Final(s) != Weight::Zero()) num_arcs_tot++;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      <span class="comment">// kaldi::RandInt is a bit like Rand(), but gets around situations</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      <span class="comment">// where RAND_MAX is very small.</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      <span class="comment">// Change this to Rand() % num_arcs_tot if compile issues arise</span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      <span class="keywordtype">size_t</span> arc_offset = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(<a class="code" href="namespacekaldi.html#a0361eab3c5ebb78e6be060e6fa78e1a1">kaldi::RandInt</a>(0, num_arcs_tot-1));</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      <span class="keywordflow">if</span> (arc_offset &lt; num_arcs) {  <span class="comment">// an actual arc.</span></div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        ArcIterator&lt;Fst&lt;Arc&gt; &gt; aiter(ifst, s);</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        aiter.Seek(arc_offset);</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &amp;arc = aiter.Value();</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        <span class="keywordflow">if</span> (arc.nextstate == s) {</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;          <span class="keywordflow">continue</span>;  <span class="comment">// don&#39;t take this self-loop arc</span></div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;          arc_offsets.push_back(arc_offset);</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;          path.push_back(arc.nextstate);</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;          <span class="keywordflow">if</span> (arc.ilabel != 0) num_ilabels++;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        }</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        <span class="keywordflow">break</span>;  <span class="comment">// Chose final-prob.</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      }</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    }</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    nof_ilabels.push_back(num_ilabels);</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  } <span class="keywordflow">while</span> (( ++retry_no &lt; num_retries) &amp;&amp; (num_ilabels &gt; length));</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <span class="keywordflow">if</span> (num_ilabels &gt; length) {</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    std::stringstream ilabel_vec;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    std::copy(nof_ilabels.begin(), nof_ilabels.end(),</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;          std::ostream_iterator&lt;int&gt;(ilabel_vec, <span class="stringliteral">&quot;,&quot;</span>));</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    std::string s = ilabel_vec.str();</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    s.erase(s.end() - 1);</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;EqualAlign: the randomly constructed paths lengths: &quot;</span> &lt;&lt; s;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;EqualAlign: utterance has too few frames &quot;</span> &lt;&lt; length</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;               &lt;&lt; <span class="stringliteral">&quot; to align.&quot;</span>;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// can&#39;t make it shorter by adding self-loops!.</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  }</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  StateId num_self_loops = 0;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  vector&lt;ssize_t&gt; self_loop_offsets(path.size());</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; path.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="keywordflow">if</span> ( (self_loop_offsets[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="namespacefst.html#af575c9b0e1e3a5d30f731f8f3cd027a2">FindSelfLoopWithILabel</a>(ifst, path[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]))</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;         != <span class="keyword">static_cast&lt;</span>ssize_t<span class="keyword">&gt;</span>(-1) )</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;      num_self_loops++;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="keywordflow">if</span> (num_self_loops == 0</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;      &amp;&amp; num_ilabels &lt; length) {</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;No self-loops on chosen path; cannot match length.&quot;</span>;</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// no self-loops to make it longer.</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  }</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  StateId num_extra = length - num_ilabels;  <span class="comment">// Number of self-loops we need.</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  StateId min_num_loops = 0;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <span class="keywordflow">if</span> (num_extra != 0) min_num_loops = num_extra / num_self_loops;  <span class="comment">// prevent div by zero.</span></div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  StateId num_with_one_more_loop = num_extra - (min_num_loops*num_self_loops);</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(num_with_one_more_loop &lt; num_self_loops || num_self_loops == 0);</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  ofst-&gt;AddState();</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  ofst-&gt;SetStart(0);</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  StateId cur_state = 0;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  StateId counter = 0;  <span class="comment">// tell us when we should stop adding one more loop.</span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; path.size(); i++) {</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <span class="comment">// First, add any self-loops that are necessary.</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    StateId num_loops = 0;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="keywordflow">if</span> (self_loop_offsets[i] != static_cast&lt;ssize_t&gt;(-1)) {</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;      num_loops = min_num_loops + (counter &lt; num_with_one_more_loop ? 1 : 0);</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      counter++;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    }</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="keywordflow">for</span> (StateId <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; num_loops; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;      ArcIterator&lt;Fst&lt;Arc&gt; &gt; aiter(ifst, path[i]);</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      aiter.Seek(self_loop_offsets[i]);</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> arc = aiter.Value();</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(arc.nextstate == path[i]</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;             &amp;&amp; arc.ilabel != 0);  <span class="comment">// make sure self-loop with ilabel.</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      StateId next_state = ofst-&gt;AddState();</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;      ofst-&gt;AddArc(cur_state, <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>(arc.ilabel, arc.olabel, arc.weight, next_state));</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;      cur_state = next_state;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    }</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="keywordflow">if</span> (i+1 &lt; path.size()) {  <span class="comment">// add forward transition.</span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;      ArcIterator&lt;Fst&lt;Arc&gt; &gt; aiter(ifst, path[i]);</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;      aiter.Seek(arc_offsets[i]);</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> arc = aiter.Value();</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;      <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(arc.nextstate == path[i+1]);</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;      StateId next_state = ofst-&gt;AddState();</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      ofst-&gt;AddArc(cur_state, <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>(arc.ilabel, arc.olabel, arc.weight, next_state));</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;      cur_state = next_state;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    } <span class="keywordflow">else</span> {  <span class="comment">// add final-prob.</span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;      Weight weight = ifst.Final(path[i]);</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;      <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(weight != Weight::Zero());</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      ofst-&gt;SetFinal(cur_state, weight);</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    }</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  }</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacefst_html_af575c9b0e1e3a5d30f731f8f3cd027a2"><div class="ttname"><a href="namespacefst.html#af575c9b0e1e3a5d30f731f8f3cd027a2">fst::FindSelfLoopWithILabel</a></div><div class="ttdeci">ssize_t FindSelfLoopWithILabel(const Fst&lt; Arc &gt; &amp;fst, typename Arc::StateId s)</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00794">fstext-utils-inl.h:794</a></div></div>
<div class="ttc" id="group__error__group_html_ga994be213ddf127b5d6f20a43a02b513a"><div class="ttname"><a href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a></div><div class="ttdeci">#define KALDI_WARN</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00129">kaldi-error.h:129</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="namespacekaldi_html_a0361eab3c5ebb78e6be060e6fa78e1a1"><div class="ttname"><a href="namespacekaldi.html#a0361eab3c5ebb78e6be060e6fa78e1a1">kaldi::RandInt</a></div><div class="ttdeci">int32 RandInt(int32 min_val, int32 max_val, struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00094">kaldi-math.cc:94</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa3c6893c42fe5672ac65c9588cf53e4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3c6893c42fe5672ac65c9588cf53e4c">&#9670;&nbsp;</a></span>ExpandInputSequences()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ExpandInputSequences </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; vector&lt; I &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>sequences</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ExpandInputSequences expands out the input symbols into sequences of input symbols. </p>
<p>It creates linear chains of states for each arc that had &gt;1 augmented symbol on it. It also sets the input symbol table to NULL, since in case you did have a symbol table there it would no longer be valid. It leaves any weight and output symbols on the first arc of the chain. </p>

<p class="definition">Definition at line <a class="el" href="factor-inl_8h_source.html#l00163">163</a> of file <a class="el" href="factor-inl_8h_source.html">factor-inl.h</a>.</p>

<p class="reference">References <a class="el" href="kaldi-utils_8h_source.html#l00133">KALDI_ASSERT_IS_INTEGER_TYPE</a>, and <a class="el" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">rnnlm::n</a>.</p>

<p class="reference">Referenced by <a class="el" href="factor-test_8cc_source.html#l00032">TestFactor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                                                {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <a class="code" href="kaldi-utils_8h.html#a61d7854c20dc53362038896af515d2cd">KALDI_ASSERT_IS_INTEGER_TYPE</a>(I);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <a class="code" href="namespacefst.html">fst</a>-&gt;SetInputSymbols(NULL);</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keywordtype">size_t</span> size = sequences.size();</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="keywordflow">if</span> (sequences.size() &gt; 0) assert(sequences[0].size() == 0);  <span class="comment">// should be eps.</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  StateId num_states_at_start = <a class="code" href="namespacefst.html">fst</a>-&gt;NumStates();</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="keywordflow">for</span> (StateId s = 0; s &lt; num_states_at_start; s++) {</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    StateId num_arcs = <a class="code" href="namespacefst.html">fst</a>-&gt;NumArcs(s);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">for</span> (StateId aidx = 0; aidx &lt; num_arcs; aidx++) {</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      ArcIterator&lt;MutableFst&lt;Arc&gt; &gt; aiter(*<a class="code" href="namespacefst.html">fst</a>, s);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      aiter.Seek(aidx);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> arc = aiter.Value();</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      Label ilabel = arc.ilabel;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      Label dest_state = arc.nextstate;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      <span class="keywordflow">if</span> (ilabel != 0) {  <span class="comment">// non-eps [nothing to do if eps]...</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        assert(ilabel &lt; static_cast&lt;Label&gt;(size));</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="keywordtype">size_t</span> len = sequences[ilabel].size();</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="keywordflow">if</span> (len &lt;= 1) {</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;          <span class="keywordflow">if</span> (len == 0) arc.ilabel = 0;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;          <span class="keywordflow">else</span> arc.ilabel = sequences[ilabel][0];</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;          MutableArcIterator&lt;MutableFst&lt;Arc&gt; &gt; mut_aiter(<a class="code" href="namespacefst.html">fst</a>, s);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;          mut_aiter.Seek(aidx);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;          mut_aiter.SetValue(arc);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        } <span class="keywordflow">else</span> {  <span class="comment">// len&gt;=2.  Must create new states...</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;          StateId curstate = -1;  <span class="comment">// keep compiler happy: this value never used.</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">n</a> = 0; <a class="code" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">n</a> &lt; len; <a class="code" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">n</a>++) {  <span class="comment">// adding/modifying &quot;len&quot; arcs.</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            StateId nextstate;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">n</a> &lt; len-1) {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;              nextstate = <a class="code" href="namespacefst.html">fst</a>-&gt;AddState();</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;              assert(nextstate &gt;= num_states_at_start);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            } <span class="keywordflow">else</span> nextstate = dest_state;  <span class="comment">// going back to original arc&#39;s</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            <span class="comment">// destination.</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">n</a> == 0) {</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;              arc.ilabel = sequences[ilabel][0];</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;              arc.nextstate = nextstate;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;              MutableArcIterator&lt;MutableFst&lt;Arc&gt; &gt; mut_aiter(<a class="code" href="namespacefst.html">fst</a>, s);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;              mut_aiter.Seek(aidx);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;              mut_aiter.SetValue(arc);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;              arc.ilabel = sequences[ilabel][<a class="code" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">n</a>];</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;              arc.olabel = 0;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;              arc.weight = Weight::One();</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;              arc.nextstate = nextstate;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;              <a class="code" href="namespacefst.html">fst</a>-&gt;AddArc(curstate, arc);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            }</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            curstate = nextstate;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;          }</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    }</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  }</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="kaldi-utils_8h_html_a61d7854c20dc53362038896af515d2cd"><div class="ttname"><a href="kaldi-utils_8h.html#a61d7854c20dc53362038896af515d2cd">KALDI_ASSERT_IS_INTEGER_TYPE</a></div><div class="ttdeci">#define KALDI_ASSERT_IS_INTEGER_TYPE(I)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-utils_8h_source.html#l00133">kaldi-utils.h:133</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacernnlm_html_ab4871778d570f724a07823e0a2fb9884"><div class="ttname"><a href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">rnnlm::n</a></div><div class="ttdeci">struct rnnlm::@11::@12 n</div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab3abe8a6b622b82e751c44cbe46583ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3abe8a6b622b82e751c44cbe46583ae">&#9670;&nbsp;</a></span>Factor() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Factor </td>
          <td>(</td>
          <td class="paramtype">const Fst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; vector&lt; I &gt; &gt; *&#160;</td>
          <td class="paramname"><em>symbols</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Factor identifies linear chains of states with an olabel (if any) only on the first arc of the chain, and possibly a sequence of ilabels; it outputs an FST with different symbols on the input that represent sequences of the original input symbols; it outputs the mapping from the new symbol to sequences of original symbols, as "symbols" [zero is reserved for epsilon]. </p>
<p>As a side effect it also sorts the FST in depth-first order. Factor will usually do the best job when the olabels have been pushed to the left, i.e. if you make a call like</p>
<p>Push&lt;Arc, REWEIGHT_TO_INITIAL&gt;(fsta, &amp;fstb, kPushLabels);</p>
<p>This is because it only creates a chain with olabels on the first arc of the chain (or a chain with no olabels). [it's possible to construct cases where pushing makes things worse, though]. After Factor, the composition of *ofst with the result of calling CreateFactorFst(*symbols) should be equivalent to fst. Alternatively, calling ExpandInputSequences with ofst and *symbols would produce something equivalent to fst. </p>

<p class="definition">Definition at line <a class="el" href="factor-inl_8h_source.html#l00069">69</a> of file <a class="el" href="factor-inl_8h_source.html">factor-inl.h</a>.</p>

<p class="reference">References <a class="el" href="factor-inl_8h_source.html#l00037">GetStateProperties()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-utils_8h_source.html#l00133">KALDI_ASSERT_IS_INTEGER_TYPE</a>, <a class="el" href="factor_8h_source.html#l00115">kStateArcsIn</a>, <a class="el" href="factor_8h_source.html#l00117">kStateArcsOut</a>, <a class="el" href="factor_8h_source.html#l00120">kStateIlabelsOut</a>, and <a class="el" href="lattice-weight_8h_source.html#l00363">Times()</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-utils-inl_8h_source.html#l00033">ConvertLattice()</a>, <a class="el" href="factor-inl_8h_source.html#l00154">Factor()</a>, and <a class="el" href="factor-test_8cc_source.html#l00032">TestFactor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                                                {</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <a class="code" href="kaldi-utils_8h.html#a61d7854c20dc53362038896af515d2cd">KALDI_ASSERT_IS_INTEGER_TYPE</a>(I);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  assert(symbols_out != NULL);</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  ofst-&gt;DeleteStates();</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacefst.html">fst</a>.Start() &lt; 0) <span class="keywordflow">return</span>;  <span class="comment">// empty FST.</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  vector&lt;StateId&gt; order;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  DfsOrderVisitor&lt;Arc&gt; dfs_order_visitor(&amp;order);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  DfsVisit(<a class="code" href="namespacefst.html">fst</a>, &amp;dfs_order_visitor);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  assert(order.size() &gt; 0);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  StateId max_state = *(std::max_element(order.begin(), order.end()));</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  vector&lt;StatePropertiesType&gt; state_properties;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <a class="code" href="namespacefst.html#a89e7aeda4a8ca8ba83a2d13061bbe759">GetStateProperties</a>(<a class="code" href="namespacefst.html">fst</a>, max_state, &amp;state_properties);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  vector&lt;bool&gt; <span class="keyword">remove</span>(max_state+1);  <span class="comment">// if true, will remove this state.</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="comment">// Now identify states that will be removed (made the middle of a chain).</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="comment">// The basic rule is that if the FstStateProperties equals</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="comment">// (kStateArcsIn|kStateArcsOut) or (kStateArcsIn|kStateArcsOut|kStateIlabelsOut),</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="comment">// then it is in the middle of a chain.  This eliminates state with</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="comment">// multiple input or output arcs, final states, and states with arcs out</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="comment">// that have olabels [we assume these are pushed to the left, so occur on the</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="comment">// 1st arc of a chain.</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordflow">for</span> (StateId <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= max_state; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keyword">remove</span>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] = (state_properties[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] == (<a class="code" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907ae21df5d1a918da8755c69c1e49ab3af1">kStateArcsIn</a>|<a class="code" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907a6c9a11fe021867b25e75bb27cba5dbe6">kStateArcsOut</a>)</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                 || state_properties[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] == (<a class="code" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907ae21df5d1a918da8755c69c1e49ab3af1">kStateArcsIn</a>|<a class="code" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907a6c9a11fe021867b25e75bb27cba5dbe6">kStateArcsOut</a>|<a class="code" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907acc7557139cc1096f82c0e08abfcb729f">kStateIlabelsOut</a>));</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  vector&lt;StateId&gt; state_mapping(max_state+1, kNoStateId);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keyword">typedef</span> unordered_map&lt;vector&lt;I&gt;, <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>, <a class="code" href="structkaldi_1_1VectorHasher.html">kaldi::VectorHasher&lt;I&gt;</a> &gt; SymbolMapType;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  SymbolMapType symbol_mapping;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  Label symbol_counter = 0;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  {</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    vector&lt;I&gt; eps;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    symbol_mapping[eps] = symbol_counter++;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  }</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  vector&lt;I&gt; this_sym;  <span class="comment">// a temporary used inside the loop.</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; order.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    StateId state = order[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">if</span> (!<span class="keyword">remove</span>[state]) {  <span class="comment">// Process this state...</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      StateId &amp;new_state = state_mapping[state];</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      <span class="keywordflow">if</span> (new_state == kNoStateId) new_state = ofst-&gt;AddState();</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <span class="keywordflow">for</span> (ArcIterator&lt;Fst&lt;Arc&gt; &gt; aiter(<a class="code" href="namespacefst.html">fst</a>, state); !aiter.Done(); aiter.Next()) {</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> arc = aiter.Value();</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">if</span> (arc.ilabel == 0) this_sym.clear();</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;          this_sym.resize(1);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;          this_sym[0] = arc.ilabel;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        }</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keywordflow">while</span> (<span class="keyword">remove</span>[arc.nextstate]) {</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;          ArcIterator&lt;Fst&lt;Arc&gt; &gt; aiter2(<a class="code" href="namespacefst.html">fst</a>, arc.nextstate);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;          assert(!aiter2.Done());</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;          <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &amp;nextarc = aiter2.Value();</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;          arc.weight = <a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(arc.weight, nextarc.weight);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;          assert(nextarc.olabel == 0);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;          <span class="keywordflow">if</span> (nextarc.ilabel != 0) this_sym.push_back(nextarc.ilabel);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;          assert(static_cast&lt;Label&gt;(static_cast&lt;I&gt;(nextarc.ilabel))</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                 == nextarc.ilabel); <span class="comment">// check within integer range.</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;          arc.nextstate = nextarc.nextstate;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        }</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        StateId &amp;new_nextstate = state_mapping[arc.nextstate];</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keywordflow">if</span> (new_nextstate == kNoStateId) new_nextstate = ofst-&gt;AddState();</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        arc.nextstate = new_nextstate;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">if</span> (symbol_mapping.count(this_sym) != 0) arc.ilabel = symbol_mapping[this_sym];</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordflow">else</span> arc.ilabel = symbol_mapping[this_sym] = symbol_counter++;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        ofst-&gt;AddArc(new_state, arc);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      }</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacefst.html">fst</a>.Final(state) != Weight::Zero())</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        ofst-&gt;SetFinal(new_state, <a class="code" href="namespacefst.html">fst</a>.Final(state));</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    }</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  }</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  ofst-&gt;SetStart(state_mapping[<a class="code" href="namespacefst.html">fst</a>.Start()]);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="comment">// Now output the symbol sequences.</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  symbols_out-&gt;resize(symbol_counter);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">typename</span> SymbolMapType::const_iterator iter = symbol_mapping.begin();</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      iter != symbol_mapping.end(); ++iter) {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    (*symbols_out)[iter-&gt;second] = iter-&gt;first;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  }</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html_a57cc279168f707dd164f9543f1b36907ae21df5d1a918da8755c69c1e49ab3af1"><div class="ttname"><a href="namespacefst.html#a57cc279168f707dd164f9543f1b36907ae21df5d1a918da8755c69c1e49ab3af1">fst::kStateArcsIn</a></div><div class="ttdef"><b>Definition:</b> <a href="factor_8h_source.html#l00115">factor.h:115</a></div></div>
<div class="ttc" id="structkaldi_1_1VectorHasher_html"><div class="ttname"><a href="structkaldi_1_1VectorHasher.html">kaldi::VectorHasher</a></div><div class="ttdoc">A hashing function-object for vectors. </div><div class="ttdef"><b>Definition:</b> <a href="stl-utils_8h_source.html#l00218">stl-utils.h:218</a></div></div>
<div class="ttc" id="kaldi-utils_8h_html_a61d7854c20dc53362038896af515d2cd"><div class="ttname"><a href="kaldi-utils_8h.html#a61d7854c20dc53362038896af515d2cd">KALDI_ASSERT_IS_INTEGER_TYPE</a></div><div class="ttdeci">#define KALDI_ASSERT_IS_INTEGER_TYPE(I)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-utils_8h_source.html#l00133">kaldi-utils.h:133</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a57cc279168f707dd164f9543f1b36907acc7557139cc1096f82c0e08abfcb729f"><div class="ttname"><a href="namespacefst.html#a57cc279168f707dd164f9543f1b36907acc7557139cc1096f82c0e08abfcb729f">fst::kStateIlabelsOut</a></div><div class="ttdef"><b>Definition:</b> <a href="factor_8h_source.html#l00120">factor.h:120</a></div></div>
<div class="ttc" id="namespacefst_html_a89e7aeda4a8ca8ba83a2d13061bbe759"><div class="ttname"><a href="namespacefst.html#a89e7aeda4a8ca8ba83a2d13061bbe759">fst::GetStateProperties</a></div><div class="ttdeci">void GetStateProperties(const Fst&lt; Arc &gt; &amp;fst, typename Arc::StateId max_state, vector&lt; StatePropertiesType &gt; *props)</div><div class="ttdoc">This function works out various properties of the states in the FST, using the bit properties defined...</div><div class="ttdef"><b>Definition:</b> <a href="factor-inl_8h_source.html#l00037">factor-inl.h:37</a></div></div>
<div class="ttc" id="namespacefst_html_a0807071c6ceb397bc35281fce74ff8a7"><div class="ttname"><a href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">fst::Times</a></div><div class="ttdeci">LatticeWeightTpl&lt; FloatType &gt; Times(const LatticeWeightTpl&lt; FloatType &gt; &amp;w1, const LatticeWeightTpl&lt; FloatType &gt; &amp;w2)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00363">lattice-weight.h:363</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacefst_html_a57cc279168f707dd164f9543f1b36907a6c9a11fe021867b25e75bb27cba5dbe6"><div class="ttname"><a href="namespacefst.html#a57cc279168f707dd164f9543f1b36907a6c9a11fe021867b25e75bb27cba5dbe6">fst::kStateArcsOut</a></div><div class="ttdef"><b>Definition:</b> <a href="factor_8h_source.html#l00117">factor.h:117</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0278a2997a1acf3f3c9bf41a4a6fe609"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0278a2997a1acf3f3c9bf41a4a6fe609">&#9670;&nbsp;</a></span>Factor() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Factor </td>
          <td>(</td>
          <td class="paramtype">const Fst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>ofst1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>ofst2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is a more conventional interface of Factor that outputs the result as two FSTs. </p>

<p class="definition">Definition at line <a class="el" href="factor-inl_8h_source.html#l00154">154</a> of file <a class="el" href="factor-inl_8h_source.html">factor-inl.h</a>.</p>

<p class="reference">References <a class="el" href="factor-inl_8h_source.html#l00250">CreateFactorFst()</a>, and <a class="el" href="factor-inl_8h_source.html#l00069">Factor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                                    {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  vector&lt;vector&lt;Label&gt; &gt; symbols;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <a class="code" href="namespacefst.html#a0278a2997a1acf3f3c9bf41a4a6fe609">Factor</a>(<a class="code" href="namespacefst.html">fst</a>, ofst2, &amp;symbols);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <a class="code" href="namespacefst.html#a6a070610f7a2b12584472be177c162c2">CreateFactorFst</a>(symbols, ofst1);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacefst_html_a6a070610f7a2b12584472be177c162c2"><div class="ttname"><a href="namespacefst.html#a6a070610f7a2b12584472be177c162c2">fst::CreateFactorFst</a></div><div class="ttdeci">void CreateFactorFst(const vector&lt; vector&lt; I &gt; &gt; &amp;sequences, MutableFst&lt; Arc &gt; *fst)</div><div class="ttdoc">The function CreateFactorFst will create an FST that expands out the &quot;factors&quot; that are the indices o...</div><div class="ttdef"><b>Definition:</b> <a href="factor-inl_8h_source.html#l00250">factor-inl.h:250</a></div></div>
<div class="ttc" id="namespacefst_html_a0278a2997a1acf3f3c9bf41a4a6fe609"><div class="ttname"><a href="namespacefst.html#a0278a2997a1acf3f3c9bf41a4a6fe609">fst::Factor</a></div><div class="ttdeci">void Factor(const Fst&lt; Arc &gt; &amp;fst, MutableFst&lt; Arc &gt; *ofst1, MutableFst&lt; Arc &gt; *ofst2)</div><div class="ttdoc">This is a more conventional interface of Factor that outputs the result as two FSTs. </div><div class="ttdef"><b>Definition:</b> <a href="factor-inl_8h_source.html#l00154">factor-inl.h:154</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acfc6cd75a3760f2df7d1f1196c90422b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfc6cd75a3760f2df7d1f1196c90422b">&#9670;&nbsp;</a></span>FileExists()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> fst::FileExists </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>strFilename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="deterministic-fst-test_8cc_source.html#l00028">28</a> of file <a class="el" href="deterministic-fst-test_8cc_source.html">deterministic-fst-test.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;                                    { </div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <span class="keyword">struct </span>stat stFileInfo; </div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="keywordtype">bool</span> blnReturn; </div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <span class="keywordtype">int</span> intStat; </div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <span class="comment">// Attempt to get the file attributes </span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  intStat = stat(strFilename.c_str(), &amp;stFileInfo); </div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="keywordflow">if</span> (intStat == 0) { </div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="comment">// We were able to get the file attributes </span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="comment">// so the file obviously exists. </span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    blnReturn = <span class="keyword">true</span>; </div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  } <span class="keywordflow">else</span> { </div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="comment">// We were not able to get the file attributes. </span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="comment">// This may mean that we don&#39;t have permission to </span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="comment">// access the folder which contains this file. If you </span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="comment">// need to do that level of checking, lookup the </span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="comment">// return values of stat which will give you </span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="comment">// more details on why stat failed. </span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    blnReturn = <span class="keyword">false</span>; </div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  } </div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;   </div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="keywordflow">return</span> blnReturn; </div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="af575c9b0e1e3a5d30f731f8f3cd027a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af575c9b0e1e3a5d30f731f8f3cd027a2">&#9670;&nbsp;</a></span>FindSelfLoopWithILabel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t fst::FindSelfLoopWithILabel </td>
          <td>(</td>
          <td class="paramtype">const Fst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">typename Arc::StateId&#160;</td>
          <td class="paramname"><em>s</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00794">794</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstext-utils-inl_8h_source.html#l00803">EqualAlign()</a>.</p>
<div class="fragment"><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                                                                           {</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  <span class="keywordflow">for</span> (ArcIterator&lt;Fst&lt;Arc&gt; &gt; aiter(<a class="code" href="namespacefst.html">fst</a>, s); !aiter.Done(); aiter.Next())</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="keywordflow">if</span> (aiter.Value().nextstate == s</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;       &amp;&amp; aiter.Value().ilabel != 0) <span class="keywordflow">return</span> static_cast&lt;ssize_t&gt;(aiter.Position());</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>ssize_t<span class="keyword">&gt;</span>(-1);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af2dc0a68baac154b98e543310696c92c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2dc0a68baac154b98e543310696c92c">&#9670;&nbsp;</a></span>FollowingInputSymbolsAreSame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> FollowingInputSymbolsAreSame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>end_is_epsilon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Fst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>fst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if and only if the FST is such that the input symbols on arcs exiting any given state all have the same value. </p>
<p>If end_is_epsilon, treat end-state as an epsilon output arc [i.e. ensure end-states cannot have non-epsilon output transitions.] </p>

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00497">497</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="fstext-utils-inl_8h_source.html#l00504">FollowingInputSymbolsAreSameClass()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>, and <a class="el" href="fstext-utils-test_8cc_source.html#l00214">TestMakeSymbolsSame()</a>.</p>
<div class="fragment"><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                                                                            {</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  IdentityFunction&lt;typename Arc::Label&gt; f;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefst.html#ad06fa46b0810d248d45fa67dc07e4293">FollowingInputSymbolsAreSameClass</a>(end_is_epsilon, <a class="code" href="namespacefst.html">fst</a>, f);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_ad06fa46b0810d248d45fa67dc07e4293"><div class="ttname"><a href="namespacefst.html#ad06fa46b0810d248d45fa67dc07e4293">fst::FollowingInputSymbolsAreSameClass</a></div><div class="ttdeci">bool FollowingInputSymbolsAreSameClass(bool end_is_epsilon, const Fst&lt; Arc &gt; &amp;fst, const F &amp;f)</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00504">fstext-utils-inl.h:504</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad06fa46b0810d248d45fa67dc07e4293"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad06fa46b0810d248d45fa67dc07e4293">&#9670;&nbsp;</a></span>FollowingInputSymbolsAreSameClass()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> FollowingInputSymbolsAreSameClass </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>end_is_epsilon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Fst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F &amp;&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00504">504</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstext-utils-inl_8h_source.html#l00497">FollowingInputSymbolsAreSame()</a>, <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>, and <a class="el" href="fstext-utils-test_8cc_source.html#l00251">TestMakeSymbolsSameClass()</a>.</p>
<div class="fragment"><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                                                                                             {</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> F::Result ClassType;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="keyword">const</span> ClassType noClass = f(kNoLabel), epsClass = f(0);</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <span class="keywordflow">for</span> (StateIterator&lt;Fst&lt;Arc&gt; &gt; siter(<a class="code" href="namespacefst.html">fst</a>); !siter.Done(); siter.Next()) {</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    StateId s = siter.Value();</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    ClassType c = noClass;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keywordflow">for</span> (ArcIterator&lt;Fst&lt;Arc&gt; &gt; aiter(<a class="code" href="namespacefst.html">fst</a>, s); !aiter.Done(); aiter.Next()) {</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &amp;arc = aiter.Value();</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      <span class="keywordflow">if</span> (c == noClass)</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        c = f(arc.ilabel);</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="keywordflow">if</span> (c != f(arc.ilabel))</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    }</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">if</span> (end_is_epsilon &amp;&amp; c != noClass &amp;&amp;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;       c != epsClass &amp;&amp; <a class="code" href="namespacefst.html">fst</a>.Final(s) != Weight::Zero())</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  }</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afa276c80715b5925eb3798c97db8a01c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa276c80715b5925eb3798c97db8a01c">&#9670;&nbsp;</a></span>GenAcceptorFromSequence()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static VectorFst&lt;Arc&gt;* fst::GenAcceptorFromSequence </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; typename Arc::Label &gt; &amp;&#160;</td>
          <td class="paramname"><em>symbols</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfloat.html">float</a>&#160;</td>
          <td class="paramname"><em>cost</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="context-fst-test_8cc_source.html#l00033">33</a> of file <a class="el" href="context-fst-test_8cc_source.html">context-fst-test.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                                                                                                     {</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  vector&lt;float&gt; split_cost(symbols.size()+1, 0.0);  <span class="comment">// for #-arcs + end-state.</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  {  <span class="comment">// compute split_cost.  it must sum to &quot;cost&quot;.</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    std::set&lt;int32&gt; indices;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="keywordtype">size_t</span> num_indices = 1 + (<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % split_cost.size());</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keywordflow">while</span> (indices.size() &lt; num_indices) indices.insert(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % split_cost.size());</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="keywordflow">for</span> (std::set&lt;int32&gt;::iterator iter = indices.begin(); iter != indices.end(); ++iter) {</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;      split_cost[*iter] = cost / num_indices;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    }</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  }</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = <span class="keyword">new</span> VectorFst&lt;Arc&gt;();</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  StateId cur_state = fst-&gt;AddState();</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  fst-&gt;SetStart(cur_state);</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; symbols.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    StateId next_state = fst-&gt;AddState();</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> arc;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    arc.ilabel = symbols[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    arc.olabel = symbols[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    arc.nextstate = next_state;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    arc.weight = (<a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>) split_cost[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    fst-&gt;AddArc(cur_state, arc);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    cur_state = next_state;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  }</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  fst-&gt;SetFinal(cur_state, (Weight)split_cost[symbols.size()]);</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keywordflow">return</span> fst;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6a60f55a4e5bc8aef4c3b29df68382e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a60f55a4e5bc8aef4c3b29df68382e7">&#9670;&nbsp;</a></span>GenRandPhoneSeq()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static VectorFst&lt;Arc&gt;* fst::GenRandPhoneSeq </td>
          <td>(</td>
          <td class="paramtype">vector&lt; typename Arc::Label &gt; &amp;&#160;</td>
          <td class="paramname"><em>phone_syms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; typename Arc::Label &gt; &amp;&#160;</td>
          <td class="paramname"><em>disambig_syms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">typename Arc::Label&#160;</td>
          <td class="paramname"><em>subsequential_symbol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_subseq_syms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfloat.html">float</a>&#160;</td>
          <td class="paramname"><em>seq_prob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; typename Arc::Label &gt; *&#160;</td>
          <td class="paramname"><em>phoneseq_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="context-fst-test_8cc_source.html#l00123">123</a> of file <a class="el" href="context-fst-test_8cc_source.html">context-fst-test.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>, and <a class="el" href="kaldi-math_8h_source.html#l00151">kaldi::RandUniform()</a>.</p>
<div class="fragment"><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                                                                                {</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(phoneseq_out != NULL);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="comment">// Generate an FST that is a random phone sequence, ending</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="comment">// with &quot;num_subseq_syms&quot; subsequential symbols.  It will</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="comment">// have disambiguation symbols randomly interspersed throughout.</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="comment">// The number of phones is random (possibly zero).</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keywordtype">size_t</span> len = (<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 4) * (<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 3);  <span class="comment">// up to 3*2=6 phones.</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keywordtype">float</span> disambig_prob = 0.33;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  phoneseq_out-&gt;clear();</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  vector&lt;Label&gt; syms;  <span class="comment">// the phones</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; len; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="namespacekaldi.html#a0c4bcfc10bea5ed0d3e3cf6d74922121">kaldi::RandUniform</a>() &lt; disambig_prob) syms.push_back(disambig_syms[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % disambig_syms.size()]);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    Label phone_id = phone_syms[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % phone_syms.size()];</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    phoneseq_out-&gt;push_back(phone_id);  <span class="comment">// record in output the underlying phone sequence.</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    syms.push_back(phone_id);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  }</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <span class="keyword">static_cast&lt;</span>int32<span class="keyword">&gt;</span>(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) &lt; num_subseq_syms; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="namespacekaldi.html#a0c4bcfc10bea5ed0d3e3cf6d74922121">kaldi::RandUniform</a>() &lt; disambig_prob) syms.push_back(disambig_syms[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % disambig_syms.size()]);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    syms.push_back(subsequential_symbol);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  }</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="namespacekaldi.html#a0c4bcfc10bea5ed0d3e3cf6d74922121">kaldi::RandUniform</a>() &lt; disambig_prob) syms.push_back(disambig_syms[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % disambig_syms.size()]);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="comment">// OK, now have the symbols of the FST as a vector.</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keywordflow">return</span> GenAcceptorFromSequence&lt;Arc&gt;(syms, seq_prob);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;}</div><div class="ttc" id="namespacekaldi_html_a0c4bcfc10bea5ed0d3e3cf6d74922121"><div class="ttname"><a href="namespacekaldi.html#a0c4bcfc10bea5ed0d3e3cf6d74922121">kaldi::RandUniform</a></div><div class="ttdeci">float RandUniform(struct RandomState *state=NULL)</div><div class="ttdoc">Returns a random number strictly between 0 and 1. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00151">kaldi-math.h:151</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4828391bb3d612ffffaf704c14c30d6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4828391bb3d612ffffaf704c14c30d6a">&#9670;&nbsp;</a></span>GetEncodingMultiple()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 fst::GetEncodingMultiple </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>nonterm_phones_offset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="grammar-context-fst_8h_source.html#l00090">90</a> of file <a class="el" href="grammar-context-fst_8h_source.html">grammar-context-fst.h</a>.</p>

<p class="reference">References <a class="el" href="grammar-context-fst_8cc_source.html#l00196">ComposeContextLeftBiphone()</a>, and <a class="el" href="grammar-context-fst_8h_source.html#l00079">kNontermMediumNumber</a>.</p>

<p class="reference">Referenced by <a class="el" href="grammar-fst_8cc_source.html#l00080">GrammarFst::DecodeSymbol()</a>, <a class="el" href="grammar-fst_8cc_source.html#l00173">GrammarFst::ExpandState()</a>, <a class="el" href="grammar-fst_8cc_source.html#l00689">GrammarFstPreparer::FixArcsToFinalStates()</a>, <a class="el" href="grammar-fst_8cc_source.html#l00734">GrammarFstPreparer::GetCategoryOfArc()</a>, <a class="el" href="hmm-utils_8cc_source.html#l00254">kaldi::GetHTransducer()</a>, <a class="el" href="grammar-fst_8cc_source.html#l00713">GrammarFstPreparer::MaybeAddFinalProbToState()</a>, and <a class="el" href="grammar-fst_8cc_source.html#l00602">GrammarFstPreparer::NeedEpsilons()</a>.</p>
<div class="fragment"><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                                                              {</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  int32 medium_number = <span class="keyword">static_cast&lt;</span>int32<span class="keyword">&gt;</span>(<a class="code" href="namespacefst.html#a251b709d87fe58fc66599f483fb98bd2a912e4937034fa71a1d4dc31c523dc351">kNontermMediumNumber</a>);</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keywordflow">return</span> medium_number *</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      ((nonterm_phones_offset + medium_number) / medium_number);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;}</div><div class="ttc" id="namespacefst_html_a251b709d87fe58fc66599f483fb98bd2a912e4937034fa71a1d4dc31c523dc351"><div class="ttname"><a href="namespacefst.html#a251b709d87fe58fc66599f483fb98bd2a912e4937034fa71a1d4dc31c523dc351">fst::kNontermMediumNumber</a></div><div class="ttdef"><b>Definition:</b> <a href="grammar-context-fst_8h_source.html#l00079">grammar-context-fst.h:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a497c657ffe831f50f0de2ce5c296beb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a497c657ffe831f50f0de2ce5c296beb6">&#9670;&nbsp;</a></span>GetInputSymbols()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GetInputSymbols </td>
          <td>(</td>
          <td class="paramtype">const Fst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>include_eps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; I &gt; *&#160;</td>
          <td class="paramname"><em>symbols</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>GetInputSymbols gets the list of symbols on the input of fst (including epsilon, if include_eps == true), as a sorted, unique list. </p>

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00097">97</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="stl-utils_8h_source.html#l00086">kaldi::CopySetToVector()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, and <a class="el" href="kaldi-utils_8h_source.html#l00133">KALDI_ASSERT_IS_INTEGER_TYPE</a>.</p>

<p class="reference">Referenced by <a class="el" href="context-fst_8cc_source.html#l00245">ComposeContext()</a>, <a class="el" href="grammar-context-fst_8cc_source.html#l00196">ComposeContextLeftBiphone()</a>, <a class="el" href="lattice-oracle_8cc_source.html#l00075">kaldi::CreateEditDistance()</a>, <a class="el" href="hmm-utils_8cc_source.html#l01207">kaldi::GetRandomAlignmentForPhone()</a>, and <a class="el" href="fstext-utils-test_8cc_source.html#l00029">TestMakeLinearAcceptor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                                         {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <a class="code" href="kaldi-utils_8h.html#a61d7854c20dc53362038896af515d2cd">KALDI_ASSERT_IS_INTEGER_TYPE</a>(I);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  unordered_set&lt;I&gt; all_syms;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordflow">for</span> (StateIterator&lt;Fst&lt;Arc&gt; &gt; siter(<a class="code" href="namespacefst.html">fst</a>); !siter.Done(); siter.Next()) {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> s = siter.Value();</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">for</span> (ArcIterator&lt;Fst&lt;Arc&gt; &gt; aiter(<a class="code" href="namespacefst.html">fst</a>, s); !aiter.Done();  aiter.Next()) {</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &amp;arc = aiter.Value();</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      all_syms.insert(arc.ilabel);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    }</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  }</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="comment">// Remove epsilon, if instructed.</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordflow">if</span> (!include_eps &amp;&amp; all_syms.count(0) != 0)</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    all_syms.erase(0);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(symbols != NULL);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <a class="code" href="namespacekaldi.html#afaa2d6854352e931e19778f6f8608f2a">kaldi::CopySetToVector</a>(all_syms, symbols);</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  std::sort(symbols-&gt;begin(), symbols-&gt;end());</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacekaldi_html_afaa2d6854352e931e19778f6f8608f2a"><div class="ttname"><a href="namespacekaldi.html#afaa2d6854352e931e19778f6f8608f2a">kaldi::CopySetToVector</a></div><div class="ttdeci">void CopySetToVector(const std::set&lt; T &gt; &amp;s, std::vector&lt; T &gt; *v)</div><div class="ttdoc">Copies the elements of a set to a vector. </div><div class="ttdef"><b>Definition:</b> <a href="stl-utils_8h_source.html#l00086">stl-utils.h:86</a></div></div>
<div class="ttc" id="kaldi-utils_8h_html_a61d7854c20dc53362038896af515d2cd"><div class="ttname"><a href="kaldi-utils_8h.html#a61d7854c20dc53362038896af515d2cd">KALDI_ASSERT_IS_INTEGER_TYPE</a></div><div class="ttdeci">#define KALDI_ASSERT_IS_INTEGER_TYPE(I)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-utils_8h_source.html#l00133">kaldi-utils.h:133</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae14d5a9815e596bfa4a455ce965c2697"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae14d5a9815e596bfa4a455ce965c2697">&#9670;&nbsp;</a></span>GetLinearSymbolSequence()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> GetLinearSymbolSequence </td>
          <td>(</td>
          <td class="paramtype">const Fst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; I &gt; *&#160;</td>
          <td class="paramname"><em>isymbols_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; I &gt; *&#160;</td>
          <td class="paramname"><em>osymbols_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">typename Arc::Weight *&#160;</td>
          <td class="paramname"><em>tot_weight_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>GetLinearSymbolSequence gets the symbol sequence from a linear FST. </p>
<p>If the FST is not just a linear sequence, it returns false. If it is a linear sequence (including the empty FST), it returns true. In this case it outputs the symbol sequences as "isymbols_out" and "osymbols_out" (removing epsilons), and the total weight as "tot_weight". The total weight will be Weight::Zero() if the FST is empty. If any of the output pointers are NULL, it does not create that output. </p>

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00178">178</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00363">Times()</a>.</p>

<p class="reference">Referenced by <a class="el" href="decoder-wrappers_8cc_source.html#l00459">kaldi::AlignUtteranceWrapper()</a>, <a class="el" href="context-fst-test_8cc_source.html#l00070">CheckPhones()</a>, <a class="el" href="gmm-latgen-biglm-faster_8cc_source.html#l00036">kaldi::DecodeUtterance()</a>, <a class="el" href="gmm-decode-faster-regtree-fmllr_8cc_source.html#l00070">DecodeUtterance()</a>, <a class="el" href="decoder-wrappers_8cc_source.html#l00201">kaldi::DecodeUtteranceLatticeFaster()</a>, <a class="el" href="decoder-wrappers_8cc_source.html#l00331">kaldi::DecodeUtteranceLatticeSimple()</a>, <a class="el" href="align-equal-compiled_8cc_source.html#l00031">main()</a>, <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>, <a class="el" href="sausages_8cc_source.html#l00318">MinimumBayesRisk::MinimumBayesRisk()</a>, <a class="el" href="fstext-utils-test_8cc_source.html#l00333">TestEqualAlign()</a>, <a class="el" href="fstext-utils-test_8cc_source.html#l00029">TestMakeLinearAcceptor()</a>, and <a class="el" href="decoder-wrappers_8cc_source.html#l00116">DecodeUtteranceLatticeFasterClass::~DecodeUtteranceLatticeFasterClass()</a>.</p>
<div class="fragment"><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                                                                 {</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  Weight tot_weight = Weight::One();</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  vector&lt;I&gt; ilabel_seq;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  vector&lt;I&gt; olabel_seq;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  StateId cur_state = <a class="code" href="namespacefst.html">fst</a>.Start();</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="keywordflow">if</span> (cur_state == kNoStateId) {  <span class="comment">// empty sequence.</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">if</span> (isymbols_out != NULL) isymbols_out-&gt;clear();</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">if</span> (osymbols_out != NULL) osymbols_out-&gt;clear();</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">if</span> (tot_weight_out != NULL) *tot_weight_out = Weight::Zero();</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  }</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="keywordflow">while</span> (1) {</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    Weight w = <a class="code" href="namespacefst.html">fst</a>.Final(cur_state);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">if</span> (w != Weight::Zero()) {  <span class="comment">// is final..</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      tot_weight = <a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(w, tot_weight);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacefst.html">fst</a>.NumArcs(cur_state) != 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <span class="keywordflow">if</span> (isymbols_out != NULL) *isymbols_out = ilabel_seq;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      <span class="keywordflow">if</span> (osymbols_out != NULL) *osymbols_out = olabel_seq;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      <span class="keywordflow">if</span> (tot_weight_out != NULL) *tot_weight_out = tot_weight;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacefst.html">fst</a>.NumArcs(cur_state) != 1) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      ArcIterator&lt;Fst&lt;Arc&gt; &gt; iter(<a class="code" href="namespacefst.html">fst</a>, cur_state);  <span class="comment">// get the only arc.</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &amp;arc = iter.Value();</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      tot_weight = <a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(arc.weight, tot_weight);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <span class="keywordflow">if</span> (arc.ilabel != 0) ilabel_seq.push_back(arc.ilabel);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <span class="keywordflow">if</span> (arc.olabel != 0) olabel_seq.push_back(arc.olabel);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      cur_state = arc.nextstate;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    }</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a0807071c6ceb397bc35281fce74ff8a7"><div class="ttname"><a href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">fst::Times</a></div><div class="ttdeci">LatticeWeightTpl&lt; FloatType &gt; Times(const LatticeWeightTpl&lt; FloatType &gt; &amp;w1, const LatticeWeightTpl&lt; FloatType &gt; &amp;w2)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00363">lattice-weight.h:363</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a310971f5213d23305ec1bee408aa58ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a310971f5213d23305ec1bee408aa58ad">&#9670;&nbsp;</a></span>GetOutputSymbols()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GetOutputSymbols </td>
          <td>(</td>
          <td class="paramtype">const Fst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>include_eps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; I &gt; *&#160;</td>
          <td class="paramname"><em>symbols</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>GetOutputSymbols gets the list of symbols on the output of fst (including epsilon, if include_eps == true) </p>

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00076">76</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="stl-utils_8h_source.html#l00086">kaldi::CopySetToVector()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, and <a class="el" href="kaldi-utils_8h_source.html#l00133">KALDI_ASSERT_IS_INTEGER_TYPE</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-oracle_8cc_source.html#l00075">kaldi::CreateEditDistance()</a>.</p>
<div class="fragment"><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                                          {</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <a class="code" href="kaldi-utils_8h.html#a61d7854c20dc53362038896af515d2cd">KALDI_ASSERT_IS_INTEGER_TYPE</a>(I);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  std::set&lt;I&gt; all_syms;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordflow">for</span> (StateIterator&lt;Fst&lt;Arc&gt; &gt; siter(<a class="code" href="namespacefst.html">fst</a>); !siter.Done(); siter.Next()) {</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> s = siter.Value();</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">for</span> (ArcIterator&lt;Fst&lt;Arc&gt; &gt; aiter(<a class="code" href="namespacefst.html">fst</a>, s); !aiter.Done();  aiter.Next()) {</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &amp;arc = aiter.Value();</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      all_syms.insert(arc.olabel);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    }</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  }</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="comment">// Remove epsilon, if instructed.</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keywordflow">if</span> (!include_eps &amp;&amp; !all_syms.empty() &amp;&amp; *all_syms.begin() == 0)</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    all_syms.erase(0);</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(symbols != NULL);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <a class="code" href="namespacekaldi.html#afaa2d6854352e931e19778f6f8608f2a">kaldi::CopySetToVector</a>(all_syms, symbols);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacekaldi_html_afaa2d6854352e931e19778f6f8608f2a"><div class="ttname"><a href="namespacekaldi.html#afaa2d6854352e931e19778f6f8608f2a">kaldi::CopySetToVector</a></div><div class="ttdeci">void CopySetToVector(const std::set&lt; T &gt; &amp;s, std::vector&lt; T &gt; *v)</div><div class="ttdoc">Copies the elements of a set to a vector. </div><div class="ttdef"><b>Definition:</b> <a href="stl-utils_8h_source.html#l00086">stl-utils.h:86</a></div></div>
<div class="ttc" id="kaldi-utils_8h_html_a61d7854c20dc53362038896af515d2cd"><div class="ttname"><a href="kaldi-utils_8h.html#a61d7854c20dc53362038896af515d2cd">KALDI_ASSERT_IS_INTEGER_TYPE</a></div><div class="ttdeci">#define KALDI_ASSERT_IS_INTEGER_TYPE(I)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-utils_8h_source.html#l00133">kaldi-utils.h:133</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a89e7aeda4a8ca8ba83a2d13061bbe759"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89e7aeda4a8ca8ba83a2d13061bbe759">&#9670;&nbsp;</a></span>GetStateProperties()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GetStateProperties </td>
          <td>(</td>
          <td class="paramtype">const Fst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">typename Arc::StateId&#160;</td>
          <td class="paramname"><em>max_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; <a class="el" href="namespacefst.html#afde762a4bf33b2bbdc061b074b7d089c">StatePropertiesType</a> &gt; *&#160;</td>
          <td class="paramname"><em>props</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function works out various properties of the states in the FST, using the bit properties defined in StatePropertiesEnum. </p>

<p class="definition">Definition at line <a class="el" href="factor-inl_8h_source.html#l00037">37</a> of file <a class="el" href="factor-inl_8h_source.html">factor-inl.h</a>.</p>

<p class="reference">References <a class="el" href="factor_8h_source.html#l00115">kStateArcsIn</a>, <a class="el" href="factor_8h_source.html#l00117">kStateArcsOut</a>, <a class="el" href="factor_8h_source.html#l00113">kStateFinal</a>, <a class="el" href="factor_8h_source.html#l00120">kStateIlabelsOut</a>, <a class="el" href="factor_8h_source.html#l00114">kStateInitial</a>, <a class="el" href="factor_8h_source.html#l00116">kStateMultipleArcsIn</a>, <a class="el" href="factor_8h_source.html#l00118">kStateMultipleArcsOut</a>, and <a class="el" href="factor_8h_source.html#l00119">kStateOlabelsOut</a>.</p>

<p class="reference">Referenced by <a class="el" href="factor-inl_8h_source.html#l00069">Factor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                                                            {</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  assert(props != NULL);</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  props-&gt;clear();</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacefst.html">fst</a>.Start() &lt; 0) <span class="keywordflow">return</span>;  <span class="comment">// Empty fst.</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  props-&gt;resize(max_state+1, 0);</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  assert(<a class="code" href="namespacefst.html">fst</a>.Start() &lt;= max_state);</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  (*props)[<a class="code" href="namespacefst.html">fst</a>.Start()] |= <a class="code" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907a3d8a6a3ea58a37879916e5cf8571190c">kStateInitial</a>;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keywordflow">for</span> (StateId s = 0; s &lt;= max_state; s++) {</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <a class="code" href="namespacefst.html#afde762a4bf33b2bbdc061b074b7d089c">StatePropertiesType</a> &amp;s_info = (*props)[s];</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keywordflow">for</span> (ArcIterator&lt;Fst&lt;Arc&gt; &gt; aiter(<a class="code" href="namespacefst.html">fst</a>, s); !aiter.Done(); aiter.Next()) {</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &amp;arc = aiter.Value();</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;      <span class="keywordflow">if</span> (arc.ilabel != 0) s_info |= <a class="code" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907acc7557139cc1096f82c0e08abfcb729f">kStateIlabelsOut</a>;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;      <span class="keywordflow">if</span> (arc.olabel != 0) s_info |= <a class="code" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907af992661b1988386d7326c44c731e2441">kStateOlabelsOut</a>;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;      StateId nexts = arc.nextstate;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;      assert(nexts &lt;= max_state);  <span class="comment">// or input was invalid.</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;      <a class="code" href="namespacefst.html#afde762a4bf33b2bbdc061b074b7d089c">StatePropertiesType</a> &amp;nexts_info = (*props)[nexts];</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;      <span class="keywordflow">if</span> (s_info&amp;<a class="code" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907a6c9a11fe021867b25e75bb27cba5dbe6">kStateArcsOut</a>) s_info |= <a class="code" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907aeb2d3e327757068f02d09dee9aa1beb1">kStateMultipleArcsOut</a>;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;      s_info |= <a class="code" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907a6c9a11fe021867b25e75bb27cba5dbe6">kStateArcsOut</a>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;      <span class="keywordflow">if</span> (nexts_info&amp;<a class="code" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907ae21df5d1a918da8755c69c1e49ab3af1">kStateArcsIn</a>) nexts_info |= <a class="code" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907a5116305c68c9e41479ccbcb8d38cdb4b">kStateMultipleArcsIn</a>;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;      nexts_info |= <a class="code" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907ae21df5d1a918da8755c69c1e49ab3af1">kStateArcsIn</a>;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    }</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacefst.html">fst</a>.Final(s) != Weight::Zero())  s_info |= <a class="code" href="namespacefst.html#a57cc279168f707dd164f9543f1b36907ae210c78f45c66eeb3668dacf52ba71b5">kStateFinal</a>;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  }</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html_a57cc279168f707dd164f9543f1b36907ae21df5d1a918da8755c69c1e49ab3af1"><div class="ttname"><a href="namespacefst.html#a57cc279168f707dd164f9543f1b36907ae21df5d1a918da8755c69c1e49ab3af1">fst::kStateArcsIn</a></div><div class="ttdef"><b>Definition:</b> <a href="factor_8h_source.html#l00115">factor.h:115</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a57cc279168f707dd164f9543f1b36907acc7557139cc1096f82c0e08abfcb729f"><div class="ttname"><a href="namespacefst.html#a57cc279168f707dd164f9543f1b36907acc7557139cc1096f82c0e08abfcb729f">fst::kStateIlabelsOut</a></div><div class="ttdef"><b>Definition:</b> <a href="factor_8h_source.html#l00120">factor.h:120</a></div></div>
<div class="ttc" id="namespacefst_html_a57cc279168f707dd164f9543f1b36907aeb2d3e327757068f02d09dee9aa1beb1"><div class="ttname"><a href="namespacefst.html#a57cc279168f707dd164f9543f1b36907aeb2d3e327757068f02d09dee9aa1beb1">fst::kStateMultipleArcsOut</a></div><div class="ttdef"><b>Definition:</b> <a href="factor_8h_source.html#l00118">factor.h:118</a></div></div>
<div class="ttc" id="namespacefst_html_a57cc279168f707dd164f9543f1b36907af992661b1988386d7326c44c731e2441"><div class="ttname"><a href="namespacefst.html#a57cc279168f707dd164f9543f1b36907af992661b1988386d7326c44c731e2441">fst::kStateOlabelsOut</a></div><div class="ttdef"><b>Definition:</b> <a href="factor_8h_source.html#l00119">factor.h:119</a></div></div>
<div class="ttc" id="namespacefst_html_a57cc279168f707dd164f9543f1b36907a5116305c68c9e41479ccbcb8d38cdb4b"><div class="ttname"><a href="namespacefst.html#a57cc279168f707dd164f9543f1b36907a5116305c68c9e41479ccbcb8d38cdb4b">fst::kStateMultipleArcsIn</a></div><div class="ttdef"><b>Definition:</b> <a href="factor_8h_source.html#l00116">factor.h:116</a></div></div>
<div class="ttc" id="namespacefst_html_afde762a4bf33b2bbdc061b074b7d089c"><div class="ttname"><a href="namespacefst.html#afde762a4bf33b2bbdc061b074b7d089c">fst::StatePropertiesType</a></div><div class="ttdeci">unsigned char StatePropertiesType</div><div class="ttdef"><b>Definition:</b> <a href="factor_8h_source.html#l00122">factor.h:122</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacefst_html_a57cc279168f707dd164f9543f1b36907ae210c78f45c66eeb3668dacf52ba71b5"><div class="ttname"><a href="namespacefst.html#a57cc279168f707dd164f9543f1b36907ae210c78f45c66eeb3668dacf52ba71b5">fst::kStateFinal</a></div><div class="ttdef"><b>Definition:</b> <a href="factor_8h_source.html#l00113">factor.h:113</a></div></div>
<div class="ttc" id="namespacefst_html_a57cc279168f707dd164f9543f1b36907a3d8a6a3ea58a37879916e5cf8571190c"><div class="ttname"><a href="namespacefst.html#a57cc279168f707dd164f9543f1b36907a3d8a6a3ea58a37879916e5cf8571190c">fst::kStateInitial</a></div><div class="ttdef"><b>Definition:</b> <a href="factor_8h_source.html#l00114">factor.h:114</a></div></div>
<div class="ttc" id="namespacefst_html_a57cc279168f707dd164f9543f1b36907a6c9a11fe021867b25e75bb27cba5dbe6"><div class="ttname"><a href="namespacefst.html#a57cc279168f707dd164f9543f1b36907a6c9a11fe021867b25e75bb27cba5dbe6">fst::kStateArcsOut</a></div><div class="ttdef"><b>Definition:</b> <a href="factor_8h_source.html#l00117">factor.h:117</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae3901a5f23cec1974cff8cb46c7a787b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3901a5f23cec1974cff8cb46c7a787b">&#9670;&nbsp;</a></span>GetSymbols()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GetSymbols </td>
          <td>(</td>
          <td class="paramtype">const SymbolTable &amp;&#160;</td>
          <td class="paramname"><em>symtab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>include_eps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; I &gt; *&#160;</td>
          <td class="paramname"><em>syms_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00329">329</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstmakecontextfst_8cc_source.html#l00032">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                                     {</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(syms_out != NULL);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  syms_out-&gt;clear();</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordflow">for</span> (SymbolTableIterator iter(symtab);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      !iter.Done();</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      iter.Next()) {</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">if</span> (include_eps || iter.Value() != 0) {</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      syms_out-&gt;push_back(iter.Value());</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(syms_out-&gt;back() == iter.Value());  <span class="comment">// an integer-range thing.</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    }</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  }</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;}</div><div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad9af3b773968edcd5dd94e779dbae7f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9af3b773968edcd5dd94e779dbae7f1">&#9670;&nbsp;</a></span>GraphLatticeScale()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt;vector&lt;double&gt; &gt; fst::GraphLatticeScale </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lmwt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-utils_8h_source.html#l00147">147</a> of file <a class="el" href="lattice-utils_8h_source.html">lattice-utils.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-lmrescore-const-arpa_8cc_source.html#l00028">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                                                              {</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  vector&lt;vector&lt;double&gt; &gt; ans(2);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  ans[0].resize(2, 0.0);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  ans[1].resize(2, 0.0);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  ans[0][0] = lmwt;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  ans[1][1] = 1.0;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keywordflow">return</span> ans;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="ac359ee42978cf57f9c5dfdc50df8fe16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac359ee42978cf57f9c5dfdc50df8fe16">&#9670;&nbsp;</a></span>HighestNumberedInputSymbol()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Arc::Label HighestNumberedInputSymbol </td>
          <td>(</td>
          <td class="paramtype">const Fst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>fst</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the highest numbered input symbol id of the FST (or zero for an empty FST. </p>

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00054">54</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="determinize-lattice-pruned_8cc_source.html#l01293">DeterminizeLatticeInsertPhones()</a>, <a class="el" href="fstaddsubsequentialloop_8cc_source.html#l00037">main()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00357">SafeDeterminizeMinimizeWrapper()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00345">SafeDeterminizeWrapper()</a>, <a class="el" href="fstext-utils-test_8cc_source.html#l00076">TestDeterminizeStarInLog()</a>, and <a class="el" href="pre-determinize-test_8cc_source.html#l00030">TestPreDeterminize()</a>.</p>
<div class="fragment"><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                                                                  {</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> ans = 0;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="keywordflow">for</span> (StateIterator&lt;Fst&lt;Arc&gt; &gt; siter(<a class="code" href="namespacefst.html">fst</a>); !siter.Done(); siter.Next()) {</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> s = siter.Value();</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordflow">for</span> (ArcIterator&lt;Fst&lt;Arc&gt; &gt; aiter(<a class="code" href="namespacefst.html">fst</a>, s); !aiter.Done();  aiter.Next()) {</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &amp;arc = aiter.Value();</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;      ans = std::max(ans, arc.ilabel);</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    }</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  }</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordflow">return</span> ans;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a285e517ce625fdd9db1000ef73c5782b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a285e517ce625fdd9db1000ef73c5782b">&#9670;&nbsp;</a></span>HighestNumberedOutputSymbol()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Arc::Label HighestNumberedOutputSymbol </td>
          <td>(</td>
          <td class="paramtype">const Fst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>fst</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the highest numbered output symbol id of the FST (or zero for an empty FST. </p>

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00041">41</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="word-align-lattice_8cc_source.html#l00252">LatticeWordAligner::LatticeWordAligner()</a>.</p>
<div class="fragment"><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                                                                   {</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> ans = 0;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="keywordflow">for</span> (StateIterator&lt;Fst&lt;Arc&gt; &gt; siter(<a class="code" href="namespacefst.html">fst</a>); !siter.Done(); siter.Next()) {</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> s = siter.Value();</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">for</span> (ArcIterator&lt;Fst&lt;Arc&gt; &gt; aiter(<a class="code" href="namespacefst.html">fst</a>, s); !aiter.Done();  aiter.Next()) {</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &amp;arc = aiter.Value();</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;      ans = std::max(ans, arc.olabel);</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    }</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  }</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="keywordflow">return</span> ans;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a05555697346e1b408792565dde384b77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05555697346e1b408792565dde384b77">&#9670;&nbsp;</a></span>IsStochasticFst() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> IsStochasticFst </td>
          <td>(</td>
          <td class="paramtype">const Fst&lt; LogArc &gt; &amp;&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfloat.html">float</a>&#160;</td>
          <td class="paramname"><em>delta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LogArc::Weight *&#160;</td>
          <td class="paramname"><em>min_sum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LogArc::Weight *&#160;</td>
          <td class="paramname"><em>max_sum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l01173">1173</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00390">ApproxEqual()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00312">Plus()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstext-utils-inl_8h_source.html#l01215">IsStochasticFstInLog()</a>, <a class="el" href="fstisstochastic_8cc_source.html#l00043">main()</a>, <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l01096">RhoCompose()</a>, and <a class="el" href="remove-eps-local-test_8cc_source.html#l00113">TestRemoveEpsLocalSpecial()</a>.</p>
<div class="fragment"><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                                            {</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  <span class="keyword">typedef</span> LogArc <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  <span class="keywordtype">bool</span> first_time = <span class="keyword">true</span>;</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  <span class="keywordtype">bool</span> ans = <span class="keyword">true</span>;</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  <span class="keywordflow">if</span> (min_sum) *min_sum = LogArc::Weight::One();</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  <span class="keywordflow">if</span> (max_sum) *max_sum = LogArc::Weight::One();</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  <span class="keywordflow">for</span> (StateIterator&lt;Fst&lt;Arc&gt; &gt; siter(<a class="code" href="namespacefst.html">fst</a>); !siter.Done(); siter.Next()) {</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    StateId s = siter.Value();</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    Weight sum = <a class="code" href="namespacefst.html">fst</a>.Final(s);</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <span class="keywordflow">for</span> (ArcIterator&lt;Fst&lt;Arc&gt; &gt; aiter(<a class="code" href="namespacefst.html">fst</a>, s); !aiter.Done(); aiter.Next()) {</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;      <span class="keyword">const</span> Arc &amp;arc = aiter.Value();</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;      sum = <a class="code" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a>(sum, arc.weight);</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    }</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">ApproxEqual</a>(Weight::One(), sum, delta)) ans = <span class="keyword">false</span>;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    <span class="keywordflow">if</span> (first_time) {</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;      first_time = <span class="keyword">false</span>;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;      <span class="keywordflow">if</span> (max_sum) *max_sum = sum;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;      <span class="keywordflow">if</span> (min_sum) *min_sum = sum;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;      <span class="comment">// note that max and min are reversed from their normal</span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      <span class="comment">// meanings here (max and min w.r.t. the underlying probabilities).</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;      <span class="keywordflow">if</span> (max_sum &amp;&amp; sum.Value() &lt; max_sum-&gt;Value()) *max_sum = sum;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;      <span class="keywordflow">if</span> (min_sum &amp;&amp; sum.Value() &gt; min_sum-&gt;Value()) *min_sum = sum;</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    }</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  }</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;  <span class="keywordflow">if</span> (first_time) {  <span class="comment">// just avoid NaNs if FST was empty.</span></div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <span class="keywordflow">if</span> (max_sum) *max_sum = Weight::One();</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    <span class="keywordflow">if</span> (min_sum) *min_sum = Weight::One();</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  }</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  <span class="keywordflow">return</span> ans;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_afbb3ae5b68808cb433cc710a7052c4c4"><div class="ttname"><a href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">fst::Plus</a></div><div class="ttdeci">LatticeWeightTpl&lt; FloatType &gt; Plus(const LatticeWeightTpl&lt; FloatType &gt; &amp;w1, const LatticeWeightTpl&lt; FloatType &gt; &amp;w2)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00312">lattice-weight.h:312</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacekaldi_html_a99dcbb9fdaa6c980ba67941d45adf017"><div class="ttname"><a href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">kaldi::ApproxEqual</a></div><div class="ttdeci">static bool ApproxEqual(float a, float b, float relative_tolerance=0.001)</div><div class="ttdoc">return abs(a - b) &lt;= relative_tolerance * (abs(a)+abs(b)). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00264">kaldi-math.h:264</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeadbd8e023bf3b876ee83825235f5869"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeadbd8e023bf3b876ee83825235f5869">&#9670;&nbsp;</a></span>IsStochasticFst() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> IsStochasticFst </td>
          <td>(</td>
          <td class="paramtype">const Fst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfloat.html">float</a>&#160;</td>
          <td class="paramname"><em>delta</em> = <code>kDelta</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">typename Arc::Weight *&#160;</td>
          <td class="paramname"><em>min_sum</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">typename Arc::Weight *&#160;</td>
          <td class="paramname"><em>max_sum</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function returns true if, in the semiring of the FST, the sum (within the semiring) of all the arcs out of each state in the FST is one, to within delta. </p>
<p>After MakeStochasticFst, this should be true (for a connected FST).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fst</td><td>[in] the FST that we are testing. </td></tr>
    <tr><td class="paramname">delta</td><td>[in] the tolerance to within which we test equality to 1. </td></tr>
    <tr><td class="paramname">min_sum</td><td>[out] if non, NULL, contents will be set to the minimum sum of weights. </td></tr>
    <tr><td class="paramname">max_sum</td><td>[out] if non, NULL, contents will be set to the maximum sum of weights. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns true if the FST is stochastic, and false otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l01135">1135</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00390">ApproxEqual()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00312">Plus()</a>.</p>
<div class="fragment"><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                                                  {</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  NaturalLess&lt;Weight&gt; nl;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  <span class="keywordtype">bool</span> first_time = <span class="keyword">true</span>;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <span class="keywordtype">bool</span> ans = <span class="keyword">true</span>;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  <span class="keywordflow">if</span> (min_sum) *min_sum = Arc::Weight::One();</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  <span class="keywordflow">if</span> (max_sum) *max_sum = Arc::Weight::One();</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <span class="keywordflow">for</span> (StateIterator&lt;Fst&lt;Arc&gt; &gt; siter(<a class="code" href="namespacefst.html">fst</a>); !siter.Done(); siter.Next()) {</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    StateId s = siter.Value();</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    Weight sum = <a class="code" href="namespacefst.html">fst</a>.Final(s);</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <span class="keywordflow">for</span> (ArcIterator&lt;Fst&lt;Arc&gt; &gt; aiter(<a class="code" href="namespacefst.html">fst</a>, s); !aiter.Done(); aiter.Next()) {</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &amp;arc = aiter.Value();</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;      sum = <a class="code" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a>(sum, arc.weight);</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    }</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">ApproxEqual</a>(Weight::One(), sum, delta)) ans = <span class="keyword">false</span>;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <span class="keywordflow">if</span> (first_time) {</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      first_time = <span class="keyword">false</span>;</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;      <span class="keywordflow">if</span> (max_sum) *max_sum = sum;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      <span class="keywordflow">if</span> (min_sum) *min_sum = sum;</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;      <span class="keywordflow">if</span> (max_sum &amp;&amp; nl(*max_sum, sum)) *max_sum = sum;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;      <span class="keywordflow">if</span> (min_sum &amp;&amp; nl(sum, *min_sum)) *min_sum = sum;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    }</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  }</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  <span class="keywordflow">if</span> (first_time) {  <span class="comment">// just avoid NaNs if FST was empty.</span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <span class="keywordflow">if</span> (max_sum) *max_sum = Weight::One();</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <span class="keywordflow">if</span> (min_sum) *min_sum = Weight::One();</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  }</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <span class="keywordflow">return</span> ans;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_afbb3ae5b68808cb433cc710a7052c4c4"><div class="ttname"><a href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">fst::Plus</a></div><div class="ttdeci">LatticeWeightTpl&lt; FloatType &gt; Plus(const LatticeWeightTpl&lt; FloatType &gt; &amp;w1, const LatticeWeightTpl&lt; FloatType &gt; &amp;w2)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00312">lattice-weight.h:312</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacekaldi_html_a99dcbb9fdaa6c980ba67941d45adf017"><div class="ttname"><a href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">kaldi::ApproxEqual</a></div><div class="ttdeci">static bool ApproxEqual(float a, float b, float relative_tolerance=0.001)</div><div class="ttdoc">return abs(a - b) &lt;= relative_tolerance * (abs(a)+abs(b)). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00264">kaldi-math.h:264</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a313777cb91faed78bc50fc629a349f66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a313777cb91faed78bc50fc629a349f66">&#9670;&nbsp;</a></span>IsStochasticFstInLog()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> IsStochasticFstInLog </td>
          <td>(</td>
          <td class="paramtype">const Fst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfloat.html">float</a>&#160;</td>
          <td class="paramname"><em>delta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">StdArc::Weight *&#160;</td>
          <td class="paramname"><em>min_sum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">StdArc::Weight *&#160;</td>
          <td class="paramname"><em>max_sum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l01215">1215</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="fstext-utils-inl_8h_source.html#l01173">IsStochasticFst()</a>, and <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstisstochastic_8cc_source.html#l00043">main()</a>, <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>, and <a class="el" href="push-special-test_8cc_source.html#l00031">TestPushSpecial()</a>.</p>
<div class="fragment"><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;                                                 {</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  <span class="keywordtype">bool</span> ans = <span class="keyword">false</span>;</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">LogArc::Weight</a> log_min = LogArc::Weight::One(),</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    log_max = LogArc::Weight::Zero();</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacefst.html">fst</a>.Type() == <span class="stringliteral">&quot;const&quot;</span>) {</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    ConstFst&lt;LogArc&gt; logfst;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    Cast(<span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span>ConstFst&lt;StdArc&gt;&amp;<span class="keyword">&gt;</span>(<a class="code" href="namespacefst.html">fst</a>), &amp;logfst);</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    ans = <a class="code" href="namespacefst.html#aeadbd8e023bf3b876ee83825235f5869">IsStochasticFst</a>(logfst, delta, &amp;log_min, &amp;log_max);</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacefst.html">fst</a>.Type() == <span class="stringliteral">&quot;vector&quot;</span>) {</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    VectorFst&lt;LogArc&gt; logfst;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    Cast(<span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span>VectorFst&lt;StdArc&gt;&amp;<span class="keyword">&gt;</span>(<a class="code" href="namespacefst.html">fst</a>), &amp;logfst);</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    ans = <a class="code" href="namespacefst.html#aeadbd8e023bf3b876ee83825235f5869">IsStochasticFst</a>(logfst, delta, &amp;log_min, &amp;log_max);</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;This version currently supports ConstFst&lt;StdArc&gt; &quot;</span></div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;or VectorFst&lt;StdArc&gt;&quot;</span>;</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  }</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  <span class="keywordflow">if</span> (min_sum) *min_sum = <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">StdArc::Weight</a>(log_min.Value());</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  <span class="keywordflow">if</span> (max_sum) *max_sum = <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">StdArc::Weight</a>(log_max.Value());</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;  <span class="keywordflow">return</span> ans;</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_aeadbd8e023bf3b876ee83825235f5869"><div class="ttname"><a href="namespacefst.html#aeadbd8e023bf3b876ee83825235f5869">fst::IsStochasticFst</a></div><div class="ttdeci">bool IsStochasticFst(const Fst&lt; Arc &gt; &amp;fst, float delta, typename Arc::Weight *min_sum, typename Arc::Weight *max_sum)</div><div class="ttdoc">This function returns true if, in the semiring of the FST, the sum (within the semiring) of all the a...</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l01135">fstext-utils-inl.h:1135</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa46731e5563a36fb8468a287bb913042"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa46731e5563a36fb8468a287bb913042">&#9670;&nbsp;</a></span>LatticeScale()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt;vector&lt;double&gt; &gt; fst::LatticeScale </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lmwt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>acwt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-utils_8h_source.html#l00156">156</a> of file <a class="el" href="lattice-utils_8h_source.html">lattice-utils.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-utils-inl_8h_source.html#l00244">CompactLatticeHasAlignment()</a>, <a class="el" href="lattice-utils-inl_8h_source.html#l00222">RemoveAlignmentsFromCompactLattice()</a>, and <a class="el" href="lattice-utils-inl_8h_source.html#l00197">ScaleLattice()</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-1best_8cc_source.html#l00029">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                                                                      {</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  vector&lt;vector&lt;double&gt; &gt; ans(2);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  ans[0].resize(2, 0.0);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  ans[1].resize(2, 0.0);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  ans[0][0] = lmwt;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  ans[1][1] = acwt;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keywordflow">return</span> ans;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a51e672be16d0d197c24afba5a76916af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51e672be16d0d197c24afba5a76916af">&#9670;&nbsp;</a></span>LatticeWeightTest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::LatticeWeightTest </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight-test_8cc_source.html#l00062">62</a> of file <a class="el" href="lattice-weight-test_8cc_source.html">lattice-weight-test.cc</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00390">ApproxEqual()</a>, <a class="el" href="kaldi-math_8h_source.html#l00275">kaldi::AssertEqual()</a>, <a class="el" href="lattice-weight_8h_source.html#l00295">Compare()</a>, <a class="el" href="lattice-weight_8h_source.html#l00371">Divide()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="lattice-weight_8h_source.html#l00095">LatticeWeightTpl&lt; FloatType &gt;::Member()</a>, <a class="el" href="lattice-weight_8h_source.html#l00081">LatticeWeightTpl&lt; BaseFloat &gt;::One()</a>, <a class="el" href="lattice-weight_8h_source.html#l00312">Plus()</a>, <a class="el" href="lattice-weight_8h_source.html#l00111">LatticeWeightTpl&lt; FloatType &gt;::Quantize()</a>, <a class="el" href="lattice-weight-test_8cc_source.html#l00036">RandomLatticeWeight()</a>, <a class="el" href="lattice-weight_8h_source.html#l00129">LatticeWeightTpl&lt; FloatType &gt;::Read()</a>, <a class="el" href="lattice-weight_8h_source.html#l00072">LatticeWeightTpl&lt; FloatType &gt;::Reverse()</a>, <a class="el" href="lattice-weight_8h_source.html#l00363">Times()</a>, <a class="el" href="lattice-weight_8h_source.html#l00052">LatticeWeightTpl&lt; FloatType &gt;::Value1()</a>, <a class="el" href="lattice-weight_8h_source.html#l00054">LatticeWeightTpl&lt; FloatType &gt;::Value2()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00076">LatticeWeightTpl&lt; BaseFloat &gt;::Zero()</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-weight-test_8cc_source.html#l00191">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                         {</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordflow">for</span>(int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 100; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <a class="code" href="namespacefst.html#a312b29f86c5ef78810556e470635a291">LatticeWeight</a> l1 = <a class="code" href="namespacefst.html#a07194dbde79b19df5faffc996ac69113">RandomLatticeWeight</a>(), l2 = <a class="code" href="namespacefst.html#a07194dbde79b19df5faffc996ac69113">RandomLatticeWeight</a>();</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="namespacefst.html#a312b29f86c5ef78810556e470635a291">LatticeWeight</a> l3 = <a class="code" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a>(l1, l2);</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <a class="code" href="namespacefst.html#a312b29f86c5ef78810556e470635a291">LatticeWeight</a> l4 = <a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(l1, l2);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <a class="code" href="namespacefst.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> f1 = l1.Value1() + l1.Value2(), f2 = l2.Value1() + l2.Value2(), f3 = l3.Value1() + l3.Value2(),</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        f4 = l4.Value1() + l4.Value2();</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <a class="code" href="namespacekaldi.html#aeb6ba6085493e3f15358e49751342177">kaldi::AssertEqual</a>(std::min(f1, f2), f3);</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="namespacekaldi.html#aeb6ba6085493e3f15358e49751342177">kaldi::AssertEqual</a>(f1 + f2, f4);</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a>(l3, l3) == l3);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a>(l1, l2) == <a class="code" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a>(l2, l1)); <span class="comment">// commutativity of plus</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(l1, l2) == <a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(l2, l1)); <span class="comment">// commutativity of Times (true for this semiring, not always)</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a>(l3, LatticeWeight::Zero()) == l3); <span class="comment">// x + 0 = x</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(l3, LatticeWeight::One()) == l3); <span class="comment">// x * 1 = x</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(l3, LatticeWeight::Zero()) == LatticeWeight::Zero()); <span class="comment">// x * 0 = 0</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(l3.Reverse().Reverse() == l3);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    NaturalLess&lt;LatticeWeight&gt; nl;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordtype">bool</span> a = nl(l1, l2);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordtype">bool</span> b = (<a class="code" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a>(l1, l2) == l1 &amp;&amp; l1 != l2);</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(a == b);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    </div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="namespacefst.html#adf747c74695ff3610637fdce3fc3b6a4">Compare</a>(l1, <a class="code" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a>(l1, l2)) != 1); <span class="comment">// so do not have l1 &gt; l1 + l2</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <a class="code" href="namespacefst.html#a312b29f86c5ef78810556e470635a291">LatticeWeight</a> l5 = <a class="code" href="namespacefst.html#a07194dbde79b19df5faffc996ac69113">RandomLatticeWeight</a>(), l6 = <a class="code" href="namespacefst.html#a07194dbde79b19df5faffc996ac69113">RandomLatticeWeight</a>();</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      <a class="code" href="namespacefst.html#a312b29f86c5ef78810556e470635a291">LatticeWeight</a> wa = <a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(<a class="code" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a>(l1, l2), <a class="code" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a>(l5, l6)),</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;          wb =  <a class="code" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a>(<a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(l1, l5), <a class="code" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a>(<a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(l1, l6),</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                                        <a class="code" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a>(<a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(l2, l5), <a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(l2, l6))));</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">ApproxEqual</a>(wa, wb)) {</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;l1 = &quot;</span> &lt;&lt; l1 &lt;&lt; <span class="stringliteral">&quot;, l2 = &quot;</span> &lt;&lt; l2</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                  &lt;&lt; <span class="stringliteral">&quot;, l5 = &quot;</span> &lt;&lt; l5 &lt;&lt; <span class="stringliteral">&quot;, l6 = &quot;</span> &lt;&lt; l6 &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;ERROR: &quot;</span> &lt;&lt; wa &lt;&lt; <span class="stringliteral">&quot; != &quot;</span> &lt;&lt;  wb &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      }</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <span class="comment">// KALDI_ASSERT(Times(Plus(l1, l2), Plus(l5, l6))</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <span class="comment">// == Plus(Times(l1, l5), Plus(Times(l1,l6),</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      <span class="comment">// Plus(Times(l2, l5), Times(l2, l6))))); // * distributes over +</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    }</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(l1.Member() &amp;&amp; l2.Member() &amp;&amp; l3.Member() &amp;&amp; l4.Member()</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                 &amp;&amp; l5.Member() &amp;&amp; l6.Member());</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">if</span> (l2 != LatticeWeight::Zero()) </div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">ApproxEqual</a>(<a class="code" href="namespacefst.html#a694bc33e16bfb9d7a1639f8488508d20">Divide</a>(<a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(l1, l2), l2), l1)); <span class="comment">// (a*b) / b = a if b != 0</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">ApproxEqual</a>(l1, l1.Quantize()));</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    std::ostringstream s1;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    s1 &lt;&lt; l1;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    std::istringstream s2(s1.str());</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    s2 &gt;&gt; l2;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">ApproxEqual</a>(l1, l2, 0.001));</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    std::cout &lt;&lt; s1.str() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      std::ostringstream s1b;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      l1.Write(s1b);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      std::istringstream s2b(s1b.str());</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      l3.Read(s2b);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(l1 == l3);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    }</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  }</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;}</div><div class="ttc" id="namespacefst_html_a694bc33e16bfb9d7a1639f8488508d20"><div class="ttname"><a href="namespacefst.html#a694bc33e16bfb9d7a1639f8488508d20">fst::Divide</a></div><div class="ttdeci">LatticeWeightTpl&lt; FloatType &gt; Divide(const LatticeWeightTpl&lt; FloatType &gt; &amp;w1, const LatticeWeightTpl&lt; FloatType &gt; &amp;w2, DivideType typ=DIVIDE_ANY)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00371">lattice-weight.h:371</a></div></div>
<div class="ttc" id="namespacefst_html_afbb3ae5b68808cb433cc710a7052c4c4"><div class="ttname"><a href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">fst::Plus</a></div><div class="ttdeci">LatticeWeightTpl&lt; FloatType &gt; Plus(const LatticeWeightTpl&lt; FloatType &gt; &amp;w1, const LatticeWeightTpl&lt; FloatType &gt; &amp;w2)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00312">lattice-weight.h:312</a></div></div>
<div class="ttc" id="namespacefst_html_a0807071c6ceb397bc35281fce74ff8a7"><div class="ttname"><a href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">fst::Times</a></div><div class="ttdeci">LatticeWeightTpl&lt; FloatType &gt; Times(const LatticeWeightTpl&lt; FloatType &gt; &amp;w1, const LatticeWeightTpl&lt; FloatType &gt; &amp;w2)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00363">lattice-weight.h:363</a></div></div>
<div class="ttc" id="namespacefst_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacefst.html#aa66ff8367094543664b3b6a13d77c139">fst::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight-test_8cc_source.html#l00026">lattice-weight-test.cc:26</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacefst_html_adf747c74695ff3610637fdce3fc3b6a4"><div class="ttname"><a href="namespacefst.html#adf747c74695ff3610637fdce3fc3b6a4">fst::Compare</a></div><div class="ttdeci">int Compare(const LatticeWeightTpl&lt; FloatType &gt; &amp;w1, const LatticeWeightTpl&lt; FloatType &gt; &amp;w2)</div><div class="ttdoc">Compare returns -1 if w1 &lt; w2, +1 if w1 &gt; w2, and 0 if w1 == w2. </div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00295">lattice-weight.h:295</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="namespacefst_html_a07194dbde79b19df5faffc996ac69113"><div class="ttname"><a href="namespacefst.html#a07194dbde79b19df5faffc996ac69113">fst::RandomLatticeWeight</a></div><div class="ttdeci">LatticeWeight RandomLatticeWeight()</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight-test_8cc_source.html#l00036">lattice-weight-test.cc:36</a></div></div>
<div class="ttc" id="namespacekaldi_html_aeb6ba6085493e3f15358e49751342177"><div class="ttname"><a href="namespacekaldi.html#aeb6ba6085493e3f15358e49751342177">kaldi::AssertEqual</a></div><div class="ttdeci">static void AssertEqual(float a, float b, float relative_tolerance=0.001)</div><div class="ttdoc">assert abs(a - b) &lt;= relative_tolerance * (abs(a)+abs(b)) </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00275">kaldi-math.h:275</a></div></div>
<div class="ttc" id="namespacefst_html_a312b29f86c5ef78810556e470635a291"><div class="ttname"><a href="namespacefst.html#a312b29f86c5ef78810556e470635a291">fst::LatticeWeight</a></div><div class="ttdeci">LatticeWeightTpl&lt; BaseFloat &gt; LatticeWeight</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight-test_8cc_source.html#l00028">lattice-weight-test.cc:28</a></div></div>
<div class="ttc" id="namespacekaldi_html_a99dcbb9fdaa6c980ba67941d45adf017"><div class="ttname"><a href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">kaldi::ApproxEqual</a></div><div class="ttdeci">static bool ApproxEqual(float a, float b, float relative_tolerance=0.001)</div><div class="ttdoc">return abs(a - b) &lt;= relative_tolerance * (abs(a)+abs(b)). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00264">kaldi-math.h:264</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aae7df766b7e70cce07586d03bbbb3da7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae7df766b7e70cce07586d03bbbb3da7">&#9670;&nbsp;</a></span>MakeFollowingInputSymbolsSame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MakeFollowingInputSymbolsSame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>end_is_epsilon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>MakeFollowingInputSymbolsSame ensures that all arcs exiting any given fst state have the same input symbol. </p>
<p>It does this by detecting states that have differing input symbols on arcs that exit it, and inserting, for each of the following arcs with non-epsilon input symbol, a new dummy state that has an input-epsilon link from the fst state. The output symbol and weight stay on the link to the dummy state (in order to keep the FST output-deterministic and stochastic, if it already was). If end_is_epsilon, treat "being a final-state" like having an epsilon output link. </p>

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00610">610</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="fstext-utils-inl_8h_source.html#l00616">MakeFollowingInputSymbolsSameClass()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>, and <a class="el" href="fstext-utils-test_8cc_source.html#l00214">TestMakeSymbolsSame()</a>.</p>
<div class="fragment"><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                                                                              {</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  IdentityFunction&lt;typename Arc::Label&gt; f;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <a class="code" href="namespacefst.html#ad5e20d7135997de882b0a0e0ccdc1e99">MakeFollowingInputSymbolsSameClass</a>(end_is_epsilon, <a class="code" href="namespacefst.html">fst</a>, f);</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_ad5e20d7135997de882b0a0e0ccdc1e99"><div class="ttname"><a href="namespacefst.html#ad5e20d7135997de882b0a0e0ccdc1e99">fst::MakeFollowingInputSymbolsSameClass</a></div><div class="ttdeci">void MakeFollowingInputSymbolsSameClass(bool end_is_epsilon, MutableFst&lt; Arc &gt; *fst, const F &amp;f)</div><div class="ttdoc">As MakeFollowingInputSymbolsSame, but takes a functor object that maps labels to classes. </div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00616">fstext-utils-inl.h:616</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad5e20d7135997de882b0a0e0ccdc1e99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5e20d7135997de882b0a0e0ccdc1e99">&#9670;&nbsp;</a></span>MakeFollowingInputSymbolsSameClass()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MakeFollowingInputSymbolsSameClass </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>end_is_epsilon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F &amp;&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>As MakeFollowingInputSymbolsSame, but takes a functor object that maps labels to classes. </p>

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00616">616</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>.</p>

<p class="reference">Referenced by <a class="el" href="hmm-utils_8cc_source.html#l00555">kaldi::AddSelfLoopsNoReorder()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00610">MakeFollowingInputSymbolsSame()</a>, <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>, and <a class="el" href="fstext-utils-test_8cc_source.html#l00251">TestMakeSymbolsSameClass()</a>.</p>
<div class="fragment"><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                                                                                               {</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> F::Result ClassType;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  vector&lt;StateId&gt; bad_states;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  ClassType noClass = f(kNoLabel);</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  ClassType epsClass = f(0);</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="keywordflow">for</span> (StateIterator&lt;Fst&lt;Arc&gt; &gt; siter(*<a class="code" href="namespacefst.html">fst</a>); !siter.Done(); siter.Next()) {</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    StateId s = siter.Value();</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    ClassType c = noClass;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordtype">bool</span> bad = <span class="keyword">false</span>;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keywordflow">for</span> (ArcIterator&lt;Fst&lt;Arc&gt; &gt; aiter(*<a class="code" href="namespacefst.html">fst</a>, s); !aiter.Done(); aiter.Next()) {</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &amp;arc = aiter.Value();</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      <span class="keywordflow">if</span> (c == noClass)</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        c = f(arc.ilabel);</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        <span class="keywordflow">if</span> (c != f(arc.ilabel)) {</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;          bad = <span class="keyword">true</span>;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        }</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    }</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">if</span> (end_is_epsilon &amp;&amp; c != noClass &amp;&amp;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;       c != epsClass &amp;&amp; <a class="code" href="namespacefst.html">fst</a>-&gt;Final(s) != Weight::Zero())</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      bad = <span class="keyword">true</span>;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordflow">if</span> (bad)</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      bad_states.push_back(s);</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  }</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  vector&lt;Arc&gt; my_arcs;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; bad_states.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    StateId s = bad_states[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    my_arcs.clear();</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="keywordflow">for</span> (ArcIterator&lt;MutableFst&lt;Arc&gt; &gt; aiter(*<a class="code" href="namespacefst.html">fst</a>, s); !aiter.Done(); aiter.Next())</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      my_arcs.push_back(aiter.Value());</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; my_arcs.size(); <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &amp;arc = my_arcs[<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>];</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      <span class="keywordflow">if</span> (arc.ilabel != 0) {</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        StateId newstate = <a class="code" href="namespacefst.html">fst</a>-&gt;AddState();</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        <span class="comment">// Create a new state for each non-eps arc in original FST, out of each bad state.</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        <span class="comment">// Not as optimal as it could be, but does avoid some complicated weight-pushing</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        <span class="comment">// issues in which, to maintain stochasticity, we would have to know which semiring</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        <span class="comment">// we want to maintain stochasticity in.</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        <a class="code" href="namespacefst.html">fst</a>-&gt;AddArc(newstate, <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>(arc.ilabel, 0, Weight::One(), arc.nextstate));</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        MutableArcIterator&lt;MutableFst&lt;Arc&gt; &gt; maiter(<a class="code" href="namespacefst.html">fst</a>, s);</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        maiter.Seek(<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>);</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        maiter.SetValue(<a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>(0, arc.olabel, arc.weight, newstate));</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      }</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    }</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  }</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af6c2fc5eefdb3342cce42b1c0cd6340a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6c2fc5eefdb3342cce42b1c0cd6340a">&#9670;&nbsp;</a></span>MakeLinearAcceptor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MakeLinearAcceptor </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; I &gt; &amp;&#160;</td>
          <td class="paramname"><em>labels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates unweighted linear acceptor from symbol sequence. </p>

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00311">311</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>.</p>

<p class="reference">Referenced by <a class="el" href="training-graph-compiler_8cc_source.html#l00064">TrainingGraphCompiler::CompileGraphFromText()</a>, <a class="el" href="training-graph-compiler_8cc_source.html#l00145">TrainingGraphCompiler::CompileGraphsFromText()</a>, <a class="el" href="phones-to-prons_8cc_source.html#l00062">main()</a>, <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>, and <a class="el" href="fstext-utils-test_8cc_source.html#l00029">TestMakeLinearAcceptor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                                                                        {</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  ofst-&gt;DeleteStates();</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  StateId cur_state = ofst-&gt;AddState();</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  ofst-&gt;SetStart(cur_state);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; labels.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    StateId next_state = ofst-&gt;AddState();</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> arc(labels[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>], labels[i], Weight::One(), next_state);</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    ofst-&gt;AddArc(cur_state, arc);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    cur_state = next_state;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  }</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  ofst-&gt;SetFinal(cur_state, Weight::One());</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae983e979663bbc2561d06a540ba49470"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae983e979663bbc2561d06a540ba49470">&#9670;&nbsp;</a></span>MakeLinearAcceptorWithAlternatives()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MakeLinearAcceptorWithAlternatives </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; vector&lt; I &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>labels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates an unweighted acceptor with a linear structure, with alternatives at each position. </p>
<p>Epsilon is treated like a normal symbol here. Each position in "labels" must have at least one alternative. </p>

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00290">290</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>, and <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>.</p>
<div class="fragment"><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                                                               {</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  ofst-&gt;DeleteStates();</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  StateId cur_state = ofst-&gt;AddState();</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  ofst-&gt;SetStart(cur_state);</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; labels.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(labels[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].size() != 0);</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    StateId next_state = ofst-&gt;AddState();</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; labels[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].size(); <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> arc(labels[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>][<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>], labels[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>][j], Weight::One(), next_state);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      ofst-&gt;AddArc(cur_state, arc);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    }</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    cur_state = next_state;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  }</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  ofst-&gt;SetFinal(cur_state, Weight::One());</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3b99f77992383006bda67038a91191de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b99f77992383006bda67038a91191de">&#9670;&nbsp;</a></span>MakeLoopFst()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VectorFst&lt; Arc &gt; * MakeLoopFst </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; const ExpandedFst&lt; Arc &gt; * &gt; &amp;&#160;</td>
          <td class="paramname"><em>fsts</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>MakeLoopFst creates an FST that has a state that is both initial and final (weight == Weight::One()), and for each non-NULL pointer fsts[i], it has an arc out whose output-symbol is i and which goes to a sub-graph whose input language is equivalent to fsts[i], where the final-state becomes a transition to the loop-state. </p>
<p>Each fst in "fsts" should be an acceptor. The fst MakeLoopFst returns is output-deterministic, but not output-epsilon free necessarily, and arcs are sorted on output label. Note: if some of the pointers in the input vector "fsts" have the same value, "MakeLoopFst" uses this to speed up the computation. Formally: suppose I is the set of indexes i such that fsts[i] != NULL. Let L[i] be the language that the acceptor fsts[i] accepts. Let the language K be the set of input-output pairs i:l such that i in I and l in L[i]. Then the FST returned by MakeLoopFst accepts the language K*, where * is the Kleene closure (CLOSURE_STAR) of K. We could have implemented this via a combination of "project", "concat", "union" and "closure". But that FST would have been less well optimized and would have a lot of final-states. </p>

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00669">669</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>.</p>

<p class="reference">Referenced by <a class="el" href="hmm-utils_8cc_source.html#l00254">kaldi::GetHTransducer()</a>, <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>, and <a class="el" href="fstext-utils-test_8cc_source.html#l00302">TestMakeLoopFst()</a>.</p>
<div class="fragment"><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                                                                          {</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  VectorFst&lt;Arc&gt; *ans = <span class="keyword">new</span> VectorFst&lt;Arc&gt;;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  StateId loop_state = ans-&gt;AddState();  <span class="comment">// = 0.</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  ans-&gt;SetStart(loop_state);</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  ans-&gt;SetFinal(loop_state, Weight::One());</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <span class="comment">// &quot;cache&quot; is used as an optimization when some of the pointers in &quot;fsts&quot;</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="comment">// may have the same value.</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  unordered_map&lt;const ExpandedFst&lt;Arc&gt; *, <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>&gt; cache;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="keywordflow">for</span> (Label <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; i &lt; static_cast&lt;Label&gt;(fsts.size()); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="keyword">const</span> ExpandedFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = fsts[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keywordflow">if</span> (fst == NULL) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    { <span class="comment">// optimization with cache: helpful if some members of &quot;fsts&quot; may</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      <span class="comment">// contain the same pointer value (e.g. in GetHTransducer).</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      <span class="keyword">typename</span> unordered_map&lt;const ExpandedFst&lt;Arc&gt; *, <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>&gt;::iterator</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;          iter = cache.find(fst);</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      <span class="keywordflow">if</span> (iter != cache.end()) {</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> arc = iter-&gt;second;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        arc.olabel = <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        ans-&gt;AddArc(0, arc);</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      }</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    }</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(fst-&gt;Properties(kAcceptor, <span class="keyword">true</span>) == kAcceptor);  <span class="comment">// expect acceptor.</span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    StateId fst_num_states = fst-&gt;NumStates();</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    StateId fst_start_state = fst-&gt;Start();</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="keywordflow">if</span> (fst_start_state == kNoStateId)</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      <span class="keywordflow">continue</span>;  <span class="comment">// empty fst.</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="keywordtype">bool</span> share_start_state =</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        fst-&gt;Properties(kInitialAcyclic, <span class="keyword">true</span>) == kInitialAcyclic</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        &amp;&amp; fst-&gt;NumArcs(fst_start_state) == 1</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        &amp;&amp; fst-&gt;Final(fst_start_state) == Weight::Zero();</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    vector&lt;StateId&gt; state_map(fst_num_states);  <span class="comment">// fst state -&gt; ans state</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="keywordflow">for</span> (StateId s = 0; s &lt; fst_num_states; s++) {</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      <span class="keywordflow">if</span> (s == fst_start_state &amp;&amp; share_start_state) state_map[s] = loop_state;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      <span class="keywordflow">else</span> state_map[s] = ans-&gt;AddState();</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    }</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="keywordflow">if</span> (!share_start_state) {</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;      <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> arc(0, <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>, Weight::One(), state_map[fst_start_state]);</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      cache[fst] = arc;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;      ans-&gt;AddArc(0, arc);</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    }</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="keywordflow">for</span> (StateId s = 0; s &lt; fst_num_states; s++) {</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      <span class="comment">// Add arcs out of state s.</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      <span class="keywordflow">for</span> (ArcIterator&lt;ExpandedFst&lt;Arc&gt; &gt; aiter(*fst, s); !aiter.Done(); aiter.Next()) {</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &amp;arc = aiter.Value();</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        Label olabel = (s == fst_start_state &amp;&amp; share_start_state ? <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> : 0);</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> newarc(arc.ilabel, olabel, arc.weight, state_map[arc.nextstate]);</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        ans-&gt;AddArc(state_map[s], newarc);</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        <span class="keywordflow">if</span> (s == fst_start_state &amp;&amp; share_start_state)</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;          cache[fst] = newarc;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      }</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      <span class="keywordflow">if</span> (fst-&gt;Final(s) != Weight::Zero()) {</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(!(s == fst_start_state &amp;&amp; share_start_state));</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        ans-&gt;AddArc(state_map[s], <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>(0, 0, fst-&gt;Final(s), loop_state));</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      }</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    }</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  }</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <span class="keywordflow">return</span> ans;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a799ce7ea4de106861f51d6821a88bf04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a799ce7ea4de106861f51d6821a88bf04">&#9670;&nbsp;</a></span>MakeLoopFstCompare()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VectorFst&lt;Arc&gt;* fst::MakeLoopFstCompare </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; const ExpandedFst&lt; Arc &gt; *&gt; &amp;&#160;</td>
          <td class="paramname"><em>fsts</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils-test_8cc_source.html#l00278">278</a> of file <a class="el" href="fstext-utils-test_8cc_source.html">fstext-utils-test.cc</a>.</p>

<p class="reference">References <a class="el" href="fstext-utils-inl_8h_source.html#l00742">ClearSymbols()</a>, <a class="el" href="pre-determinize-inl_8h_source.html#l00291">fst::pre_determinize_helpers::Closure()</a>, and <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstext-utils-test_8cc_source.html#l00302">TestMakeLoopFst()</a>.</p>
<div class="fragment"><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                                                                                 {</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  VectorFst&lt;Arc&gt; *ans = <span class="keyword">new</span> VectorFst&lt;Arc&gt;;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="keywordflow">for</span> (Label <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;  fsts.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">if</span> (fsts[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] != NULL) {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      VectorFst&lt;Arc&gt; i_fst;  <span class="comment">// accepts symbol i on output.</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      i_fst.AddState(); i_fst.AddState();</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      i_fst.SetStart(0); i_fst.SetFinal(1, Weight::One());</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      i_fst.AddArc(0, <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>(0, <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>, Weight::One(), 1));</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      VectorFst&lt;Arc&gt; other_fst(*(fsts[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]));  <span class="comment">// copy it.</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      <a class="code" href="namespacefst.html#ada6ce1dc40d3ae27883d689f916fc3f7">ClearSymbols</a>(<span class="keyword">false</span>, <span class="keyword">true</span>, &amp;other_fst);  <span class="comment">// Clear output symbols so symbols</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      <span class="comment">// are on input side.</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      Concat(&amp;i_fst, other_fst);  <span class="comment">// now i_fst is &quot;i_fst [concat] other_fst&quot;.</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      Union(ans, i_fst);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    }</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  }</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <a class="code" href="namespacefst_1_1pre__determinize__helpers.html#a69947845c459f941d97f6ff285fe0147">Closure</a>(ans, CLOSURE_STAR);</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="keywordflow">return</span> ans;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_1_1pre__determinize__helpers_html_a69947845c459f941d97f6ff285fe0147"><div class="ttname"><a href="namespacefst_1_1pre__determinize__helpers.html#a69947845c459f941d97f6ff285fe0147">fst::pre_determinize_helpers::Closure</a></div><div class="ttdeci">void Closure(MutableFst&lt; Arc &gt; *fst, std::set&lt; typename Arc::StateId &gt; *S, const vector&lt; bool &gt; &amp;pVec)</div><div class="ttdef"><b>Definition:</b> <a href="pre-determinize-inl_8h_source.html#l00291">pre-determinize-inl.h:291</a></div></div>
<div class="ttc" id="namespacefst_html_ada6ce1dc40d3ae27883d689f916fc3f7"><div class="ttname"><a href="namespacefst.html#ada6ce1dc40d3ae27883d689f916fc3f7">fst::ClearSymbols</a></div><div class="ttdeci">void ClearSymbols(bool clear_input, bool clear_output, MutableFst&lt; Arc &gt; *fst)</div><div class="ttdoc">ClearSymbols sets all the symbols on the input and/or output side of the FST to zero, as specified. </div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00742">fstext-utils-inl.h:742</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2e9ae1bd1915d71003df02534ccb75ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e9ae1bd1915d71003df02534ccb75ba">&#9670;&nbsp;</a></span>MakePrecedingInputSymbolsSame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MakePrecedingInputSymbolsSame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>start_is_epsilon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>MakePrecedingInputSymbolsSame ensures that all arcs entering any given fst state have the same input symbol. </p>
<p>It does this by detecting states that have differing input symbols going in, and inserting, for each of the preceding arcs with non-epsilon input symbol, a new dummy state that has an epsilon link to the fst state. If "start_is_epsilon", ensure that start-state can have only epsilon-links into it. </p>

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00528">528</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="fstext-utils-inl_8h_source.html#l00534">MakePrecedingInputSymbolsSameClass()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>, and <a class="el" href="fstext-utils-test_8cc_source.html#l00214">TestMakeSymbolsSame()</a>.</p>
<div class="fragment"><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                                                                                {</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  IdentityFunction&lt;typename Arc::Label&gt; f;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <a class="code" href="namespacefst.html#a87c0ca5c61cd0edbda6ec7cd416e2c6a">MakePrecedingInputSymbolsSameClass</a>(start_is_epsilon, <a class="code" href="namespacefst.html">fst</a>, f);</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a87c0ca5c61cd0edbda6ec7cd416e2c6a"><div class="ttname"><a href="namespacefst.html#a87c0ca5c61cd0edbda6ec7cd416e2c6a">fst::MakePrecedingInputSymbolsSameClass</a></div><div class="ttdeci">void MakePrecedingInputSymbolsSameClass(bool start_is_epsilon, MutableFst&lt; Arc &gt; *fst, const F &amp;f)</div><div class="ttdoc">As MakePrecedingInputSymbolsSame, but takes a functor object that maps labels to classes. </div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00534">fstext-utils-inl.h:534</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a87c0ca5c61cd0edbda6ec7cd416e2c6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87c0ca5c61cd0edbda6ec7cd416e2c6a">&#9670;&nbsp;</a></span>MakePrecedingInputSymbolsSameClass()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MakePrecedingInputSymbolsSameClass </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>start_is_epsilon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F &amp;&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>As MakePrecedingInputSymbolsSame, but takes a functor object that maps labels to classes. </p>

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00534">534</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="const-integer-set-inl_8h_source.html#l00062">ConstIntegerSet&lt; I &gt;::count()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>.</p>

<p class="reference">Referenced by <a class="el" href="hmm-utils_8cc_source.html#l00472">kaldi::AddSelfLoopsReorder()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00528">MakePrecedingInputSymbolsSame()</a>, <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>, and <a class="el" href="fstext-utils-test_8cc_source.html#l00251">TestMakeSymbolsSameClass()</a>.</p>
<div class="fragment"><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                                                                                                 {</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> F::Result ClassType;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  vector&lt;ClassType&gt; classes;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  ClassType noClass = f(kNoLabel);</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  ClassType epsClass = f(0);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <span class="keywordflow">if</span> (start_is_epsilon) {  <span class="comment">// treat having-start-state as epsilon in-transition.</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    StateId start_state = <a class="code" href="namespacefst.html">fst</a>-&gt;Start();</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordflow">if</span> (start_state &lt; 0 || start_state == kNoStateId) <span class="comment">// empty FST.</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    classes.resize(start_state+1, noClass);</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    classes[start_state] = epsClass;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  }</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="comment">// Find bad states (states with multiple input-symbols into them).</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  std::set&lt;StateId&gt; bad_states;  <span class="comment">// states that we need to change.</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="keywordflow">for</span> (StateIterator&lt;Fst&lt;Arc&gt; &gt; siter(*<a class="code" href="namespacefst.html">fst</a>); !siter.Done(); siter.Next()) {</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    StateId s = siter.Value();</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordflow">for</span> (ArcIterator&lt;Fst&lt;Arc&gt; &gt; aiter(*<a class="code" href="namespacefst.html">fst</a>, s); !aiter.Done(); aiter.Next()) {</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &amp;arc = aiter.Value();</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <span class="keywordflow">if</span> (classes.size() &lt;= <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(arc.nextstate))</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        classes.resize(arc.nextstate+1, noClass);</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      <span class="keywordflow">if</span> (classes[arc.nextstate] == noClass)</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        classes[arc.nextstate] = f(arc.ilabel);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="keywordflow">if</span> (classes[arc.nextstate] != f(arc.ilabel))</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;          bad_states.insert(arc.nextstate);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    }</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  }</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="keywordflow">if</span> (bad_states.empty()) <span class="keywordflow">return</span>;  <span class="comment">// Nothing to do.</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <a class="code" href="classkaldi_1_1ConstIntegerSet.html">kaldi::ConstIntegerSet&lt;StateId&gt;</a> bad_states_ciset(bad_states);  <span class="comment">// faster lookup.</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="comment">// Work out list of arcs we have to change as (state, arc-offset).</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <span class="comment">// Can&#39;t do the actual changes in this pass, since we have to add new</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="comment">// states which invalidates the iterators.</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  vector&lt;pair&lt;StateId, size_t&gt; &gt; arcs_to_change;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="keywordflow">for</span> (StateIterator&lt;Fst&lt;Arc&gt; &gt; siter(*<a class="code" href="namespacefst.html">fst</a>); !siter.Done(); siter.Next()) {</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    StateId s = siter.Value();</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="keywordflow">for</span> (ArcIterator&lt;Fst&lt;Arc&gt; &gt; aiter(*<a class="code" href="namespacefst.html">fst</a>, s); !aiter.Done(); aiter.Next()) {</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &amp;arc = aiter.Value();</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      <span class="keywordflow">if</span> (arc.ilabel != 0 &amp;&amp;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;         bad_states_ciset.count(arc.nextstate) != 0)</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        arcs_to_change.push_back(std::make_pair(s, aiter.Position()));</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    }</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  }</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(!arcs_to_change.empty());  <span class="comment">// since !bad_states.empty().</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  std::map&lt;pair&lt;StateId, ClassType&gt;, StateId&gt; state_map;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <span class="comment">// state_map is a map from (bad-state, input-symbol-class) to dummy-state.</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; arcs_to_change.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    StateId s = arcs_to_change[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].first;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    ArcIterator&lt;MutableFst&lt;Arc&gt; &gt; aiter(*<a class="code" href="namespacefst.html">fst</a>, s);</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    aiter.Seek(arcs_to_change[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].second);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> arc = aiter.Value();</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="comment">// Transition is non-eps transition to &quot;bad&quot; state.  Introduce new state (or find</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="comment">// existing one).</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    pair&lt;StateId, ClassType&gt; p(arc.nextstate, f(arc.ilabel));</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordflow">if</span> (state_map.count(p) == 0) {</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      StateId newstate = state_map[p] = <a class="code" href="namespacefst.html">fst</a>-&gt;AddState();</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      <a class="code" href="namespacefst.html">fst</a>-&gt;AddArc(newstate, <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>(0, 0, Weight::One(), arc.nextstate));</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    }</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    StateId dst_state = state_map[p];</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    arc.nextstate = dst_state;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="comment">// Initialize the MutableArcIterator only now, as the call to NewState()</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="comment">// may have invalidated the first arc iterator.</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    MutableArcIterator&lt;MutableFst&lt;Arc&gt; &gt; maiter(<a class="code" href="namespacefst.html">fst</a>, s);</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    maiter.Seek(arcs_to_change[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].second);</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    maiter.SetValue(arc);</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  }</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="classkaldi_1_1ConstIntegerSet_html"><div class="ttname"><a href="classkaldi_1_1ConstIntegerSet.html">kaldi::ConstIntegerSet</a></div><div class="ttdef"><b>Definition:</b> <a href="const-integer-set_8h_source.html#l00043">const-integer-set.h:43</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adf280c4ca1442b10be12d6006bd0c325"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf280c4ca1442b10be12d6006bd0c325">&#9670;&nbsp;</a></span>MapInputSymbols()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MapInputSymbols </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; I &gt; &amp;&#160;</td>
          <td class="paramname"><em>symbol_mapping</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00168">168</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="kaldi-utils_8h_source.html#l00133">KALDI_ASSERT_IS_INTEGER_TYPE</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>, and <a class="el" href="factor-test_8cc_source.html#l00032">TestFactor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                                           {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <a class="code" href="kaldi-utils_8h.html#a61d7854c20dc53362038896af515d2cd">KALDI_ASSERT_IS_INTEGER_TYPE</a>(I);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="comment">// false == don&#39;t copy the &quot;symbol_mapping&quot;, retain pointer--</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="comment">// safe since short-lived object.</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  MapInputSymbolsMapper&lt;Arc, I&gt; mapper(symbol_mapping, <span class="keyword">false</span>);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  Map(<a class="code" href="namespacefst.html">fst</a>, mapper);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;}</div><div class="ttc" id="kaldi-utils_8h_html_a61d7854c20dc53362038896af515d2cd"><div class="ttname"><a href="kaldi-utils_8h.html#a61d7854c20dc53362038896af515d2cd">KALDI_ASSERT_IS_INTEGER_TYPE</a></div><div class="ttdeci">#define KALDI_ASSERT_IS_INTEGER_TYPE(I)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-utils_8h_source.html#l00133">kaldi-utils.h:133</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae1fb399f92c63d329f3bdf7bb03b9313"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1fb399f92c63d329f3bdf7bb03b9313">&#9670;&nbsp;</a></span>MinimizeCompactLattice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> MinimizeCompactLattice </td>
          <td>(</td>
          <td class="paramtype">MutableFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>, IntType &gt; &gt; &gt; *&#160;</td>
          <td class="paramname"><em>clat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfloat.html">float</a>&#160;</td>
          <td class="paramname"><em>delta</em> = <code>fst::kDelta</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function minimizes the compact lattice. </p>
<p>It is to be called after determinization (see ./determinize-lattice-pruned.h) and pushing (see ./push-lattice.h). If the lattice is not determinized and pushed this function will not combine as many states as it could, but it won't crash. Returns true on success, and false if it failed due to topological sorting failing. The output will be topologically sorted. </p>

<p class="definition">Definition at line <a class="el" href="minimize-lattice_8cc_source.html#l00274">274</a> of file <a class="el" href="minimize-lattice_8cc_source.html">minimize-lattice.cc</a>.</p>

<p class="reference">References <a class="el" href="minimize-lattice_8cc_source.html#l00050">CompactLatticeMinimizer&lt; Weight, IntType &gt;::Minimize()</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-determinize-non-compact_8cc_source.html#l00095">main()</a>, <a class="el" href="lattice-determinize-pruned-parallel_8cc_source.html#l00046">DeterminizeLatticeTask::operator()()</a>, and <a class="el" href="minimize-lattice-test_8cc_source.html#l00047">kaldi::TestMinimizeCompactLattice()</a>.</p>
<div class="fragment"><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                 {</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  CompactLatticeMinimizer&lt;Weight, IntType&gt; minimizer(clat, delta);</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="keywordflow">return</span> minimizer.Minimize();</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="ae5ae7b490c5efde5e1770a34335ca81a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5ae7b490c5efde5e1770a34335ca81a">&#9670;&nbsp;</a></span>MinimizeCompactLattice< kaldi::LatticeWeight, kaldi::int32 >()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">template <a class="el" href="classbool.html">bool</a> <a class="el" href="namespacefst.html#ae1fb399f92c63d329f3bdf7bb03b9313">fst::MinimizeCompactLattice</a>&lt; <a class="el" href="namespacefst.html#a312b29f86c5ef78810556e470635a291">kaldi::LatticeWeight</a>, kaldi::int32 &gt; </td>
          <td>(</td>
          <td class="paramtype">MutableFst&lt; <a class="el" href="namespacekaldi.html#a33b7ea55be82ee6bab64430dd93cbcba">kaldi::CompactLatticeArc</a> &gt; *&#160;</td>
          <td class="paramname"><em>clat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfloat.html">float</a>&#160;</td>
          <td class="paramname"><em>delta</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="afb4020188382e3aa0dafe317df145765"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb4020188382e3aa0dafe317df145765">&#9670;&nbsp;</a></span>MinimizeEncoded()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::MinimizeEncoded </td>
          <td>(</td>
          <td class="paramtype">VectorFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfloat.html">float</a>&#160;</td>
          <td class="paramname"><em>delta</em> = <code>kDelta</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils_8h_source.html#l00114">114</a> of file <a class="el" href="fstext-utils_8h_source.html">fstext-utils.h</a>.</p>

<p class="reference">References <a class="el" href="fstext-utils-inl_8h_source.html#l00771">ApplyProbabilityScale()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00221">ConvertNbestToVector()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00803">EqualAlign()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00497">FollowingInputSymbolsAreSame()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00504">FollowingInputSymbolsAreSameClass()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00178">GetLinearSymbolSequence()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l01173">IsStochasticFst()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l01215">IsStochasticFstInLog()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00610">MakeFollowingInputSymbolsSame()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00616">MakeFollowingInputSymbolsSameClass()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00311">MakeLinearAcceptor()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00290">MakeLinearAcceptorWithAlternatives()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00669">MakeLoopFst()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00528">MakePrecedingInputSymbolsSame()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00534">MakePrecedingInputSymbolsSameClass()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00168">MapInputSymbols()</a>, <a class="el" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">rnnlm::n</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00279">NbestAsFsts()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l01021">PhiCompose()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00460">PrecedingInputSymbolsAreSame()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00466">PrecedingInputSymbolsAreSameClass()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l01084">PropagateFinal()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00119">RemoveSomeInputSymbols()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00950">RemoveUselessArcs()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00434">RemoveWeights()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l01096">RhoCompose()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00357">SafeDeterminizeMinimizeWrapper()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00408">SafeDeterminizeMinimizeWrapperInLog()</a>, and <a class="el" href="fstext-utils-inl_8h_source.html#l00345">SafeDeterminizeWrapper()</a>.</p>

<p class="reference">Referenced by <a class="el" href="training-graph-compiler_8cc_source.html#l00073">TrainingGraphCompiler::CompileGraph()</a>, <a class="el" href="training-graph-compiler_8cc_source.html#l00161">TrainingGraphCompiler::CompileGraphs()</a>, <a class="el" href="compile-graph_8cc_source.html#l00032">main()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00357">SafeDeterminizeMinimizeWrapper()</a>, and <a class="el" href="fstext-utils-inl_8h_source.html#l00408">SafeDeterminizeMinimizeWrapperInLog()</a>.</p>
<div class="fragment"><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                                                                {</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  Map(<a class="code" href="namespacefst.html">fst</a>, QuantizeMapper&lt;Arc&gt;(delta));</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  EncodeMapper&lt;Arc&gt; encoder(kEncodeLabels | kEncodeWeights, ENCODE);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  Encode(<a class="code" href="namespacefst.html">fst</a>, &amp;encoder);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  internal::AcceptorMinimize(<a class="code" href="namespacefst.html">fst</a>);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  Decode(<a class="code" href="namespacefst.html">fst</a>, encoder);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a42a4066a7a87381f4c3af10420cf46b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42a4066a7a87381f4c3af10420cf46b8">&#9670;&nbsp;</a></span>NbestAsFsts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NbestAsFsts </td>
          <td>(</td>
          <td class="paramtype">const Fst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classsize__t.html">size_t</a>&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; VectorFst&lt; Arc &gt; &gt; *&#160;</td>
          <td class="paramname"><em>fsts_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Takes the n-shortest-paths (using ShortestPath), but outputs the result as a vector of up to n fsts. </p>
<p>This function will size the "fsts_out" vector to however many paths it got (which will not exceed n). n must be &gt;= 1. </p>

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00279">279</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="fstext-utils-inl_8h_source.html#l00221">ConvertNbestToVector()</a>, and <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>, <a class="el" href="confidence_8cc_source.html#l00026">kaldi::SentenceLevelConfidence()</a>, and <a class="el" href="fstext-utils-test_8cc_source.html#l00029">TestMakeLinearAcceptor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                                                    {</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(n &gt; 0);</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(fsts_out != NULL);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  VectorFst&lt;Arc&gt; nbest_fst;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  ShortestPath(<a class="code" href="namespacefst.html">fst</a>, &amp;nbest_fst, n);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <a class="code" href="namespacefst.html#a4d1ee0ef9cb443eb0301466050757738">ConvertNbestToVector</a>(nbest_fst, fsts_out);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a4d1ee0ef9cb443eb0301466050757738"><div class="ttname"><a href="namespacefst.html#a4d1ee0ef9cb443eb0301466050757738">fst::ConvertNbestToVector</a></div><div class="ttdeci">void ConvertNbestToVector(const Fst&lt; Arc &gt; &amp;fst, vector&lt; VectorFst&lt; Arc &gt; &gt; *fsts_out)</div><div class="ttdoc">This function converts an FST with a special structure, which is output by the OpenFst functions Shor...</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00221">fstext-utils-inl.h:221</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9fa1b835ccb140bdedccdff9d7a70dc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fa1b835ccb140bdedccdff9d7a70dc1">&#9670;&nbsp;</a></span>NumArcs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Arc::StateId NumArcs </td>
          <td>(</td>
          <td class="paramtype">const ExpandedFst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>fst</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the total number of arcs in an FST. </p>

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00067">67</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-determinize-non-compact_8cc_source.html#l00038">kaldi::DeterminizeLatticeWrapper()</a>, <a class="el" href="lattice-prune_8cc_source.html#l00028">main()</a>, and <a class="el" href="trivial-factor-weight_8h_source.html#l00189">TrivialFactorWeightFstImpl&lt; A, F &gt;::NumArcs()</a>.</p>
<div class="fragment"><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                                                         {</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  StateId num_arcs = 0;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="keywordflow">for</span> (StateId s = 0; s &lt; <a class="code" href="namespacefst.html">fst</a>.NumStates(); s++)</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    num_arcs += <a class="code" href="namespacefst.html">fst</a>.NumArcs(s);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keywordflow">return</span> num_arcs;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6c494f444664668fce163b8a450a279c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c494f444664668fce163b8a450a279c">&#9670;&nbsp;</a></span>operator!=() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> fst::operator!= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;&#160;</td>
          <td class="paramname"><em>wa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;&#160;</td>
          <td class="paramname"><em>wb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight_8h_source.html#l00278">278</a> of file <a class="el" href="lattice-weight_8h_source.html">lattice-weight.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00052">LatticeWeightTpl&lt; FloatType &gt;::Value1()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00054">LatticeWeightTpl&lt; FloatType &gt;::Value2()</a>.</p>
<div class="fragment"><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                                                              {</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="comment">// Volatile qualifier thwarts over-aggressive compiler optimizations</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="comment">// that lead to problems esp. with NaturalLess().</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keyword">volatile</span> FloatType va1 = wa.Value1(), va2 = wa.Value2(),</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      vb1 = wb.Value1(), vb2 = wb.Value2();</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="keywordflow">return</span> (va1 != vb1 || va2 != vb2);</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="aefe372ac9ec0c6f5cc104406d770c8cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefe372ac9ec0c6f5cc104406d770c8cd">&#9670;&nbsp;</a></span>operator!=() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> fst::operator!= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight_8h_source.html#l00565">565</a> of file <a class="el" href="lattice-weight_8h_source.html">lattice-weight.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00450">CompactLatticeWeightTpl&lt; WeightType, IntType &gt;::String()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00448">CompactLatticeWeightTpl&lt; WeightType, IntType &gt;::Weight()</a>.</p>
<div class="fragment"><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                                                                               {</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="keywordflow">return</span> (w1.Weight() != w2.Weight() || w1.String() != w2.String());</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="aa5fc44752f14df7daff770c77fd93fec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5fc44752f14df7daff770c77fd93fec">&#9670;&nbsp;</a></span>operator<<() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ostream &amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">ostream &amp;&#160;</td>
          <td class="paramname"><em>strm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight_8h_source.html#l00398">398</a> of file <a class="el" href="lattice-weight_8h_source.html">lattice-weight.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00162">LatticeWeightTpl&lt; FloatType &gt;::WriteFloatType()</a>.</p>
<div class="fragment"><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                                                                                 {</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  LatticeWeightTpl&lt;FloatType&gt;::WriteFloatType(strm, w.Value1());</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  CHECK(FLAGS_fst_weight_separator.size() == 1);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  strm &lt;&lt; FLAGS_fst_weight_separator[0]; <span class="comment">// comma by default;</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="comment">// may or may not be settable from Kaldi programs.</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  LatticeWeightTpl&lt;FloatType&gt;::WriteFloatType(strm, w.Value2());</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="keywordflow">return</span> strm;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="aa306277eef4aa59876984dfeb605f3e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa306277eef4aa59876984dfeb605f3e5">&#9670;&nbsp;</a></span>operator<<() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ostream&amp; fst::operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">ostream &amp;&#160;</td>
          <td class="paramname"><em>strm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight_8h_source.html#l00730">730</a> of file <a class="el" href="lattice-weight_8h_source.html">lattice-weight.h</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>.</p>
<div class="fragment"><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                                                                                                  {</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  strm &lt;&lt; w.Weight();</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  CHECK(FLAGS_fst_weight_separator.size() == 1);</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  strm &lt;&lt; FLAGS_fst_weight_separator[0]; <span class="comment">// comma by default.</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; w.String().size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    strm &lt;&lt; w.String()[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>+1 &lt; w.String().size())</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      strm &lt;&lt; kStringSeparator; <span class="comment">// &#39;_&#39;; defined in string-weight.h in OpenFst code.</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  }</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="keywordflow">return</span> strm;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;}</div><div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af4490313abee604c0fea7b0e6999b1d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4490313abee604c0fea7b0e6999b1d6">&#9670;&nbsp;</a></span>operator==() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> fst::operator== </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;&#160;</td>
          <td class="paramname"><em>wa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;&#160;</td>
          <td class="paramname"><em>wb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight_8h_source.html#l00268">268</a> of file <a class="el" href="lattice-weight_8h_source.html">lattice-weight.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00052">LatticeWeightTpl&lt; FloatType &gt;::Value1()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00054">LatticeWeightTpl&lt; FloatType &gt;::Value2()</a>.</p>

<p class="reference">Referenced by <a class="el" href="discriminative-supervision_8h_source.html#l00106">DiscriminativeSupervision::DiscriminativeSupervision()</a>, and <a class="el" href="arpa-lm-compiler_8cc_source.html#l00037">ArpaLmCompilerImplInterface::~ArpaLmCompilerImplInterface()</a>.</p>
<div class="fragment"><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                                                              {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="comment">// Volatile qualifier thwarts over-aggressive compiler optimizations</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="comment">// that lead to problems esp. with NaturalLess().</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="keyword">volatile</span> FloatType va1 = wa.Value1(), va2 = wa.Value2(),</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      vb1 = wb.Value1(), vb2 = wb.Value2();</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="keywordflow">return</span> (va1 == vb1 &amp;&amp; va2 == vb2);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a0b73dbb23e6e1f8aea156ed9dc905c22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b73dbb23e6e1f8aea156ed9dc905c22">&#9670;&nbsp;</a></span>operator==() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> fst::operator== </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight_8h_source.html#l00559">559</a> of file <a class="el" href="lattice-weight_8h_source.html">lattice-weight.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00450">CompactLatticeWeightTpl&lt; WeightType, IntType &gt;::String()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00448">CompactLatticeWeightTpl&lt; WeightType, IntType &gt;::Weight()</a>.</p>
<div class="fragment"><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                                                                               {</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <span class="keywordflow">return</span> (w1.Weight() == w2.Weight() &amp;&amp; w1.String() == w2.String());</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="aeafae94f54edef21078094a831826afe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeafae94f54edef21078094a831826afe">&#9670;&nbsp;</a></span>operator>>() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">istream &amp; operator&gt;&gt; </td>
          <td>(</td>
          <td class="paramtype">istream &amp;&#160;</td>
          <td class="paramname"><em>strm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight_8h_source.html#l00408">408</a> of file <a class="el" href="lattice-weight_8h_source.html">lattice-weight.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00194">LatticeWeightTpl&lt; FloatType &gt;::ReadNoParen()</a>.</p>
<div class="fragment"><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                                                                            {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  CHECK(FLAGS_fst_weight_separator.size() == 1);</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="comment">// separator defaults to &#39;,&#39;</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="keywordflow">return</span> w1.ReadNoParen(strm, FLAGS_fst_weight_separator[0]);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="ac6b23838b36a6a7b0ada0e968ff42455"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6b23838b36a6a7b0ada0e968ff42455">&#9670;&nbsp;</a></span>operator>>() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">istream&amp; fst::operator&gt;&gt; </td>
          <td>(</td>
          <td class="paramtype">istream &amp;&#160;</td>
          <td class="paramname"><em>strm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight_8h_source.html#l00743">743</a> of file <a class="el" href="lattice-weight_8h_source.html">lattice-weight.h</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="lattice-weight_8h_source.html#l00454">CompactLatticeWeightTpl&lt; WeightType, IntType &gt;::SetString()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00452">CompactLatticeWeightTpl&lt; WeightType, IntType &gt;::SetWeight()</a>.</p>
<div class="fragment"><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                                                                                            {</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  std::string s;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  strm &gt;&gt; s;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="keywordflow">if</span> (strm.fail()) {</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keywordflow">return</span> strm;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  }</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  CHECK(FLAGS_fst_weight_separator.size() == 1);</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  <span class="keywordtype">size_t</span> pos = s.find_last_of(FLAGS_fst_weight_separator); <span class="comment">// normally &quot;,&quot;</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <span class="keywordflow">if</span> (pos == std::string::npos) {</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    strm.clear(std::ios::badbit);</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="keywordflow">return</span> strm;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  }</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <span class="comment">// get parts of str before and after the separator (default: &#39;,&#39;);</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  std::string s1(s, 0, pos), s2(s, pos+1);</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  std::istringstream strm1(s1);</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  WeightType weight;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  strm1 &gt;&gt; weight;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  w.SetWeight(weight);</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  <span class="keywordflow">if</span> (strm1.fail() || !strm1.eof()) {</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    strm.clear(std::ios::badbit);</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="keywordflow">return</span> strm;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  }</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <span class="comment">// read string part.</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  vector&lt;IntType&gt; string;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *c = s2.c_str();</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  <span class="keywordflow">while</span>(*c != <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <span class="keywordflow">if</span> (*c == kStringSeparator) <span class="comment">// &#39;_&#39;</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      c++;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keywordtype">char</span> *c2;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="keywordtype">long</span> <span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = strtol(c, &amp;c2, 10);</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="keywordflow">if</span> (c2 == c || static_cast&lt;long int&gt;(static_cast&lt;IntType&gt;(i)) != i) {</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      strm.clear(std::ios::badbit);</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      <span class="keywordflow">return</span> strm;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    }</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    c = c2;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="keywordtype">string</span>.push_back(static_cast&lt;IntType&gt;(i));</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  }</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  w.SetString(<span class="keywordtype">string</span>);</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <span class="keywordflow">return</span> strm;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;}</div><div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9b59f132a1a8b78f70da3ac74d981b93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b59f132a1a8b78f70da3ac74d981b93">&#9670;&nbsp;</a></span>PenalizeArcsWithSomeInputSymbols()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::PenalizeArcsWithSomeInputSymbols </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; I &gt; &amp;&#160;</td>
          <td class="paramname"><em>symbols_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfloat.html">float</a>&#160;</td>
          <td class="paramname"><em>penalty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VectorFst&lt; <a class="el" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstrmsymbols_8cc_source.html#l00058">58</a> of file <a class="el" href="fstrmsymbols_8cc_source.html">fstrmsymbols.cc</a>.</p>

<p class="reference">References <a class="el" href="const-integer-set-inl_8h_source.html#l00062">ConstIntegerSet&lt; I &gt;::count()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00363">Times()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstrmsymbols_8cc_source.html#l00085">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                                                           {</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  Weight penalty_weight(penalty);</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <a class="code" href="classkaldi_1_1ConstIntegerSet.html">kaldi::ConstIntegerSet&lt;I&gt;</a> symbol_set(symbols_in);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  StateId num_states = <a class="code" href="namespacefst.html">fst</a>-&gt;NumStates();</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="keywordflow">for</span> (StateId s = 0; s &lt; num_states; s++) {</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">for</span> (MutableArcIterator&lt;VectorFst&lt;Arc&gt; &gt; iter(<a class="code" href="namespacefst.html">fst</a>, s);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;         !iter.Done(); iter.Next()) {</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      <span class="keywordflow">if</span> (symbol_set.count(iter.Value().ilabel) != 0) {</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> arc = iter.Value();</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        arc.weight = <a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(arc.weight, penalty_weight);</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        iter.SetValue(arc);</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      }</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    }</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  }</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a0807071c6ceb397bc35281fce74ff8a7"><div class="ttname"><a href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">fst::Times</a></div><div class="ttdeci">LatticeWeightTpl&lt; FloatType &gt; Times(const LatticeWeightTpl&lt; FloatType &gt; &amp;w1, const LatticeWeightTpl&lt; FloatType &gt; &amp;w2)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00363">lattice-weight.h:363</a></div></div>
<div class="ttc" id="classkaldi_1_1ConstIntegerSet_html"><div class="ttname"><a href="classkaldi_1_1ConstIntegerSet.html">kaldi::ConstIntegerSet</a></div><div class="ttdef"><b>Definition:</b> <a href="const-integer-set_8h_source.html#l00043">const-integer-set.h:43</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a67b9ceed91eb95e8f3beeb42563e4c4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67b9ceed91eb95e8f3beeb42563e4c4b">&#9670;&nbsp;</a></span>PhiCompose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PhiCompose </td>
          <td>(</td>
          <td class="paramtype">const Fst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>fst1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Fst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>fst2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">typename Arc::Label&#160;</td>
          <td class="paramname"><em>phi_label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l01021">1021</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstphicompose_8cc_source.html#l00080">main()</a>, and <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>.</p>
<div class="fragment"><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                                       {</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(phi_label != kNoLabel); <span class="comment">// just use regular compose in this case.</span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <span class="keyword">typedef</span> Fst&lt;Arc&gt; F;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  <span class="keyword">typedef</span> PhiMatcher&lt;SortedMatcher&lt;F&gt; &gt; PM;</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  <a class="code" href="classCacheOptions.html">CacheOptions</a> base_opts;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  base_opts.gc_limit = 0; <span class="comment">// Cache only the last state for fastest copy.</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  <span class="comment">// ComposeFstImplOptions templated on matcher for fst1, matcher for fst2.</span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  <span class="comment">// The matcher for fst1 doesn&#39;t matter; we&#39;ll use fst2&#39;s matcher.</span></div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  ComposeFstImplOptions&lt;SortedMatcher&lt;F&gt;, PM&gt; impl_opts(base_opts);</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  <span class="comment">// the false below is something called phi_loop which is something I don&#39;t</span></div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  <span class="comment">// fully understand, but I don&#39;t think we want it.</span></div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  <span class="comment">// These pointers are taken ownership of, by ComposeFst.</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  PM *phi_matcher =</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;      <span class="keyword">new</span> PM(fst2, MATCH_INPUT, phi_label, <span class="keyword">false</span>);</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  SortedMatcher&lt;F&gt; *sorted_matcher =</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      <span class="keyword">new</span> SortedMatcher&lt;F&gt;(fst1, MATCH_NONE); <span class="comment">// tell it</span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  <span class="comment">// not to use this matcher, as this would mean we would</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  <span class="comment">// not follow phi transitions.</span></div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  impl_opts.matcher1 = sorted_matcher;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  impl_opts.matcher2 = phi_matcher;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  *ofst = ComposeFst&lt;Arc&gt;(fst1, fst2, impl_opts);</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;  Connect(ofst);</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;}</div><div class="ttc" id="classCacheOptions_html"><div class="ttname"><a href="classCacheOptions.html">CacheOptions</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afce56ea11d9bebca73684091f028dfb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afce56ea11d9bebca73684091f028dfb0">&#9670;&nbsp;</a></span>Plus() <span class="overload">[1/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt;T&gt; fst::Plus </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>w1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>w2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arctic-weight_8h_source.html#l00087">87</a> of file <a class="el" href="arctic-weight_8h_source.html">arctic-weight.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                                                               {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keywordflow">return</span> w1.Value() &gt; w2.Value() ? w1 : w2;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a91e18687a38d30d41d40c8932108b1c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91e18687a38d30d41d40c8932108b1c4">&#9670;&nbsp;</a></span>Plus() <span class="overload">[2/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt;<a class="el" href="classfloat.html">float</a>&gt; fst::Plus </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; <a class="el" href="classfloat.html">float</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>w1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; <a class="el" href="classfloat.html">float</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>w2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arctic-weight_8h_source.html#l00092">92</a> of file <a class="el" href="arctic-weight_8h_source.html">arctic-weight.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                                                                       {</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="keywordflow">return</span> Plus&lt;float&gt;(w1, w2);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a9f450d9bf13077e5ce36b62857d25c2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f450d9bf13077e5ce36b62857d25c2c">&#9670;&nbsp;</a></span>Plus() <span class="overload">[3/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt;double&gt; fst::Plus </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>w1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>w2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arctic-weight_8h_source.html#l00097">97</a> of file <a class="el" href="arctic-weight_8h_source.html">arctic-weight.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                                                                         {</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keywordflow">return</span> Plus&lt;double&gt;(w1, w2);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="afbb3ae5b68808cb433cc710a7052c4c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbb3ae5b68808cb433cc710a7052c4c4">&#9670;&nbsp;</a></span>Plus() <span class="overload">[4/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt;FloatType&gt; fst::Plus </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight_8h_source.html#l00312">312</a> of file <a class="el" href="lattice-weight_8h_source.html">lattice-weight.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00295">Compare()</a>.</p>

<p class="reference">Referenced by <a class="el" href="determinize-star-inl_8h_source.html#l00746">DeterminizerStar&lt; F &gt;::EpsilonClosure::AddOneElement()</a>, <a class="el" href="lattice-weight-test_8cc_source.html#l00124">CompactLatticeWeightTest()</a>, <a class="el" href="determinize-star-inl_8h_source.html#l00652">DeterminizerStar&lt; F &gt;::EpsilonClosure::GetEpsilonClosure()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l01135">IsStochasticFst()</a>, <a class="el" href="lattice-weight-test_8cc_source.html#l00062">LatticeWeightTest()</a>, <a class="el" href="determinize-lattice-pruned_8cc_source.html#l00776">LatticeDeterminizerPruned&lt; Weight, IntType &gt;::NormalizeSubset()</a>, <a class="el" href="determinize-lattice-inl_8h_source.html#l00891">LatticeDeterminizer&lt; Weight, IntType &gt;::NormalizeSubset()</a>, <a class="el" href="remove-eps-local-inl_8h_source.html#l00030">ReweightPlusDefault&lt; Weight &gt;::operator()()</a>, <a class="el" href="remove-eps-local-inl_8h_source.html#l00036">ReweightPlusLogArc::operator()()</a>, <a class="el" href="lattice-weight_8h_source.html#l00789">CompactLatticeWeightCommonDivisorTpl&lt; BaseWeightType, IntType &gt;::operator()()</a>, <a class="el" href="phone-align-lattice_8cc_source.html#l00163">LatticePhoneAligner::ProcessFinal()</a>, <a class="el" href="word-align-lattice_8cc_source.html#l00172">LatticeWordAligner::ProcessFinal()</a>, <a class="el" href="determinize-star-inl_8h_source.html#l00435">DeterminizerStar&lt; F &gt;::ProcessFinal()</a>, <a class="el" href="determinize-star-inl_8h_source.html#l00989">DeterminizerStar&lt; F &gt;::ProcessTransition()</a>, <a class="el" href="push-lattice_8cc_source.html#l00217">PushCompactLatticeWeights()</a>, <a class="el" href="remove-eps-local-inl_8h_source.html#l00173">RemoveEpsLocalClass&lt; Arc, ReweightPlus &gt;::RemoveEpsPattern1()</a>, <a class="el" href="remove-eps-local-inl_8h_source.html#l00234">RemoveEpsLocalClass&lt; Arc, ReweightPlus &gt;::RemoveEpsPattern2()</a>, <a class="el" href="push-lattice-test_8cc_source.html#l00077">kaldi::TestPushCompactLatticeWeights()</a>, <a class="el" href="remove-eps-local-test_8cc_source.html#l00113">TestRemoveEpsLocalSpecial()</a>, and <a class="el" href="matrix-lib-test_8cc_source.html#l01136">kaldi::UnitTestAddOuterProductPlusMinus()</a>.</p>
<div class="fragment"><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                                                                               {</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="namespacefst.html#a5cd0f5b5b35f6273907ef74cb7a7e8d2">Compare</a>(w1, w2) &gt;= 0 ? w1 : w2);</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;}</div><div class="ttc" id="namespacefst_html_a5cd0f5b5b35f6273907ef74cb7a7e8d2"><div class="ttname"><a href="namespacefst.html#a5cd0f5b5b35f6273907ef74cb7a7e8d2">fst::Compare</a></div><div class="ttdeci">int Compare(const TropicalWeight &amp;w1, const TropicalWeight &amp;w2)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00654">lattice-weight.h:654</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a18e7585d41664b22aac30309645bdbac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18e7585d41664b22aac30309645bdbac">&#9670;&nbsp;</a></span>Plus() <span class="overload">[5/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt;WeightType, IntType&gt; fst::Plus </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight_8h_source.html#l00665">665</a> of file <a class="el" href="lattice-weight_8h_source.html">lattice-weight.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00295">Compare()</a>.</p>
<div class="fragment"><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                                                            {</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="namespacefst.html#a5cd0f5b5b35f6273907ef74cb7a7e8d2">Compare</a>(w1, w2) &gt;= 0 ? w1 : w2);</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;}</div><div class="ttc" id="namespacefst_html_a5cd0f5b5b35f6273907ef74cb7a7e8d2"><div class="ttname"><a href="namespacefst.html#a5cd0f5b5b35f6273907ef74cb7a7e8d2">fst::Compare</a></div><div class="ttdeci">int Compare(const TropicalWeight &amp;w1, const TropicalWeight &amp;w2)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00654">lattice-weight.h:654</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ace144ccc7af6b1c4be3e4d932ff2325a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace144ccc7af6b1c4be3e4d932ff2325a">&#9670;&nbsp;</a></span>PrecedingInputSymbolsAreSame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> PrecedingInputSymbolsAreSame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>start_is_epsilon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Fst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>fst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if and only if the FST is such that the input symbols on arcs entering any given state all have the same value. </p>
<p>if "start_is_epsilon", treat start-state as an epsilon input arc [i.e. ensure only epsilon can enter start-state]. </p>

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00460">460</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="fstext-utils-inl_8h_source.html#l00466">PrecedingInputSymbolsAreSameClass()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>, and <a class="el" href="fstext-utils-test_8cc_source.html#l00214">TestMakeSymbolsSame()</a>.</p>
<div class="fragment"><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                                                                              {</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  IdentityFunction&lt;typename Arc::Label&gt; f;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefst.html#a766eb5d44ddf7e0d45a4ddc85f632138">PrecedingInputSymbolsAreSameClass</a>(start_is_epsilon, <a class="code" href="namespacefst.html">fst</a>, f);</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a766eb5d44ddf7e0d45a4ddc85f632138"><div class="ttname"><a href="namespacefst.html#a766eb5d44ddf7e0d45a4ddc85f632138">fst::PrecedingInputSymbolsAreSameClass</a></div><div class="ttdeci">bool PrecedingInputSymbolsAreSameClass(bool start_is_epsilon, const Fst&lt; Arc &gt; &amp;fst, const F &amp;f)</div><div class="ttdoc">This is as PrecedingInputSymbolsAreSame, but with a functor f that maps labels to classes...</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00466">fstext-utils-inl.h:466</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a766eb5d44ddf7e0d45a4ddc85f632138"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a766eb5d44ddf7e0d45a4ddc85f632138">&#9670;&nbsp;</a></span>PrecedingInputSymbolsAreSameClass()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> PrecedingInputSymbolsAreSameClass </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>start_is_epsilon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Fst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F &amp;&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is as PrecedingInputSymbolsAreSame, but with a functor f that maps labels to classes. </p>
<p>The function tests whether the symbols preceding any given state are in the same class. Formally, f is of a type F that has an operator of type F::Result F::operator() (F::Arg a) const; where F::Result is an integer type and F::Arc can be constructed from Arc::Label. this must apply to valid labels and also to kNoLabel (so we can have a marker for the invalid labels. </p>

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00466">466</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00460">PrecedingInputSymbolsAreSame()</a>, and <a class="el" href="fstext-utils-test_8cc_source.html#l00251">TestMakeSymbolsSameClass()</a>.</p>
<div class="fragment"><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                                                                                               {</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> F::Result ClassType;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  vector&lt;ClassType&gt; classes;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  ClassType noClass = f(kNoLabel);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <span class="keywordflow">if</span> (start_is_epsilon) {</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    StateId start_state = <a class="code" href="namespacefst.html">fst</a>.Start();</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">if</span> (start_state &lt; 0 || start_state == kNoStateId)</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;  <span class="comment">// empty fst-- doesn&#39;t matter.</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    classes.resize(start_state+1, noClass);</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    classes[start_state] = 0;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  }</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <span class="keywordflow">for</span> (StateIterator&lt;Fst&lt;Arc&gt; &gt; siter(<a class="code" href="namespacefst.html">fst</a>); !siter.Done(); siter.Next()) {</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    StateId s = siter.Value();</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordflow">for</span> (ArcIterator&lt;Fst&lt;Arc&gt; &gt; aiter(<a class="code" href="namespacefst.html">fst</a>, s); !aiter.Done(); aiter.Next()) {</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &amp;arc = aiter.Value();</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      <span class="keywordflow">if</span> (classes.size() &lt;= arc.nextstate)</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        classes.resize(arc.nextstate+1, noClass);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      <span class="keywordflow">if</span> (classes[arc.nextstate] == noClass)</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        classes[arc.nextstate] = f(arc.ilabel);</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="keywordflow">if</span> (classes[arc.nextstate] != f(arc.ilabel))</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    }</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  }</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaf75c786b2e62e985ace7739c5e58e77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf75c786b2e62e985ace7739c5e58e77">&#9670;&nbsp;</a></span>PreDeterminize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PreDeterminize </td>
          <td>(</td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">typename Arc::Label&#160;</td>
          <td class="paramname"><em>first_new_sym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; Int &gt; *&#160;</td>
          <td class="paramname"><em>symsOut</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="pre-determinize-inl_8h_source.html#l00317">317</a> of file <a class="el" href="pre-determinize-inl_8h_source.html">pre-determinize-inl.h</a>.</p>

<p class="reference">References <a class="el" href="pre-determinize-inl_8h_source.html#l00291">fst::pre_determinize_helpers::Closure()</a>, <a class="el" href="pre-determinize-inl_8h_source.html#l00256">fst::pre_determinize_helpers::CopySetToVector()</a>, <a class="el" href="pre-determinize-inl_8h_source.html#l00687">CreateSuperFinal()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="pre-determinize-inl_8h_source.html#l00271">fst::pre_determinize_helpers::InsertMember()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>, <a class="el" href="kaldi-error_8h_source.html#l00135">KALDI_VLOG</a>, and <a class="el" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">rnnlm::n</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstext-utils-inl_8h_source.html#l00357">SafeDeterminizeMinimizeWrapper()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00345">SafeDeterminizeWrapper()</a>, <a class="el" href="determinize-star-test_8cc_source.html#l00061">TestDeterminize()</a>, <a class="el" href="fstext-utils-test_8cc_source.html#l00076">TestDeterminizeStarInLog()</a>, <a class="el" href="trivial-factor-weight-test_8cc_source.html#l00031">TestFactor()</a>, <a class="el" href="determinize-star-test_8cc_source.html#l00280">TestMinimize()</a>, <a class="el" href="pre-determinize-test_8cc_source.html#l00030">TestPreDeterminize()</a>, and <a class="el" href="determinize-star-test_8cc_source.html#l00202">TestPush()</a>.</p>
<div class="fragment"><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                                          {</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="keyword">typedef</span> <span class="keywordtype">size_t</span> ArcId;  <span class="comment">// Our own typedef, not standard OpenFst.  Use size_t</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="comment">// for compatibility with argument of ArcIterator::Seek().</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  assert(first_new_sym &gt; 0);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  assert(<a class="code" href="namespacefst.html">fst</a> != NULL);</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacefst.html">fst</a>-&gt;Start() == kNoStateId) <span class="keywordflow">return</span>;  <span class="comment">// for empty FST, nothing to do.</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  assert(symsOut != NULL &amp;&amp; symsOut-&gt;size() == 0);  <span class="comment">// we will output the symbols we add into this.</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  {  <span class="comment">// (D)(i)(a): check is trim (i.e. connected, in OpenFST parlance).</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <a class="code" href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a>(2) &lt;&lt;  <span class="stringliteral">&quot;PreDeterminize: Checking FST properties&quot;</span>;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    uint64 props = <a class="code" href="namespacefst.html">fst</a>-&gt;Properties(kAccessible|kCoAccessible, <span class="keyword">true</span>);  <span class="comment">// true-&gt; computes properties if unknown at time when called.</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordflow">if</span> (props != (kAccessible|kCoAccessible)) {  <span class="comment">// All states are not both accessible and co-accessible...</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;PreDeterminize: FST is not trim&quot;</span>;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    }</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  }</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  {  <span class="comment">// (D)(i)(b): make single final state.</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <a class="code" href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a>(2) &lt;&lt;  <span class="stringliteral">&quot;PreDeterminize: creating single final state&quot;</span>;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <a class="code" href="namespacefst.html#af612cf218dbb31edf2567bf7cdc70c79">CreateSuperFinal</a>(<a class="code" href="namespacefst.html">fst</a>);</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  }</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  {  <span class="comment">// (D)(i)(c): sort arcs on input.</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <a class="code" href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a>(2) &lt;&lt;  <span class="stringliteral">&quot;PreDeterminize: sorting arcs on input&quot;</span>;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    ILabelCompare&lt;Arc&gt; icomp;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    ArcSort(<a class="code" href="namespacefst.html">fst</a>, icomp);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  }</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  StateId n_states = 0, max_state = 0;  <span class="comment">// Compute n_states, max_state = highest-numbered state.</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  {  <span class="comment">// compute nStates, maxStates.</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">for</span> (StateIterator&lt;MutableFst&lt;Arc&gt; &gt; iter(*<a class="code" href="namespacefst.html">fst</a>); ! iter.Done(); iter.Next()) {</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      StateId state = iter.Value();</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      assert(state&gt;=0);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      n_states++;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <span class="keywordflow">if</span> (state &gt; max_state) max_state = state;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    }</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <a class="code" href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a>(2) &lt;&lt;  <span class="stringliteral">&quot;PreDeterminize: n_states = &quot;</span>&lt;&lt;(n_states)&lt;&lt;<span class="stringliteral">&quot;, max_state =&quot;</span>&lt;&lt;(max_state);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  }</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  vector&lt;bool&gt; p_vec(max_state+1, <span class="keyword">false</span>);  <span class="comment">// compute this next.</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  {  <span class="comment">// D(ii): computing the array p. [&quot;problematic states, i.e. states with &gt;1 input transition,</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="comment">// counting being the initial state as an input transition&quot;].</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    vector&lt;bool&gt; seen_vec(max_state+1, <span class="keyword">false</span>);  <span class="comment">// rather than counting incoming transitions we just have a bool that says we saw at least one.</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    seen_vec[<a class="code" href="namespacefst.html">fst</a>-&gt;Start()] = <span class="keyword">true</span>;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">for</span> (StateIterator&lt;MutableFst&lt;Arc&gt; &gt; siter(*<a class="code" href="namespacefst.html">fst</a>); ! siter.Done(); siter.Next()) {</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <span class="keywordflow">for</span> (ArcIterator&lt;MutableFst&lt;Arc&gt; &gt; aiter(*<a class="code" href="namespacefst.html">fst</a>, siter.Value()); ! aiter.Done(); aiter.Next()) {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &amp;arc = aiter.Value();</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        assert(arc.nextstate&gt;=0&amp;&amp;arc.nextstate&lt;max_state+1);</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="keywordflow">if</span> (seen_vec[arc.nextstate])</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;          p_vec[arc.nextstate] = <span class="keyword">true</span>;  <span class="comment">// now have &gt;1 transition in, so problematic.</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;          seen_vec[arc.nextstate] = <span class="keyword">true</span>;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      }</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    }</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  }</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="comment">// D(iii): set up m(a)</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  std::map&lt;pair&lt;StateId, ArcId&gt;, <span class="keywordtype">size_t</span>&gt; m_map;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="comment">// This is the array m, indexed by arcs.  It maps to the index of the symbol we add.</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="comment">// WARNING: we should be sure to clean up this memory before exiting.  Do not return</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="comment">// or throw an exception from this function, later than this point, without cleaning up!</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="comment">// Note that the vectors are shared between Q and S (they &quot;belong to&quot; S.</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  vector&lt;vector&lt;StateId&gt;* &gt; S(max_state+1, (vector&lt;StateId&gt;*)(<span class="keywordtype">void</span>*)0);</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  vector&lt;pair&lt;vector&lt;StateId&gt;*, <span class="keywordtype">size_t</span>&gt; &gt; Q;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="comment">// D(iv): initialize S and Q.</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  {</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    vector&lt;StateId&gt; all_seed_states;  <span class="comment">// all &quot;problematic&quot; states, plus initial state (if not problematic).</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordflow">if</span> (!p_vec[<a class="code" href="namespacefst.html">fst</a>-&gt;Start()])</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      all_seed_states.push_back(<a class="code" href="namespacefst.html">fst</a>-&gt;Start());</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordflow">for</span> (StateId s = 0;s&lt;=max_state; s++)</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <span class="keywordflow">if</span> (p_vec[s]) all_seed_states.push_back(s);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> idx = 0;idx &lt; all_seed_states.size(); idx++) {</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      StateId s = all_seed_states[idx];</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      std::set&lt;StateId&gt; closure_s;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      closure_s.insert(s);  <span class="comment">// insert &quot;seed&quot; state.</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      <a class="code" href="namespacefst_1_1pre__determinize__helpers.html#a69947845c459f941d97f6ff285fe0147">pre_determinize_helpers::Closure</a>(<a class="code" href="namespacefst.html">fst</a>, &amp;closure_s, p_vec);  <span class="comment">// follow epsilons to non-problematic states.</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      <span class="comment">// Closure in this case whis will usually not add anything, for typical topologies in speech</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      vector&lt;StateId&gt; closure_s_vec;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      <a class="code" href="namespacefst_1_1pre__determinize__helpers.html#ab00ccb06ca21f747255430b7b892d866">pre_determinize_helpers::CopySetToVector</a>(closure_s, &amp;closure_s_vec);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(closure_s_vec.size() != 0);</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      vector&lt;StateId&gt; *ptr = <a class="code" href="namespacefst_1_1pre__determinize__helpers.html#a03967baf68484dea6746504377c347a9">pre_determinize_helpers::InsertMember</a>(closure_s_vec, &amp;S);</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(ptr != NULL);  <span class="comment">// Or conceptual bug or programming error.</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      Q.push_back(pair&lt;vector&lt;StateId&gt;*, <span class="keywordtype">size_t</span>&gt;(ptr, 0));</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    }</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  }</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  vector&lt;bool&gt; d_vec(max_state+1, <span class="keyword">false</span>);  <span class="comment">// &quot;done vector&quot;.  Purely for debugging.</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="keywordtype">size_t</span> num_extra_det_states = 0;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="comment">// (D)(v)</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="keywordflow">while</span> (Q.size() != 0) {</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="comment">// (D)(v)(a)</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    pair&lt;vector&lt;StateId&gt;*, <span class="keywordtype">size_t</span>&gt; cur_pair(Q.back());</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    Q.pop_back();</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keyword">const</span> vector&lt;StateId&gt; &amp;A(*cur_pair.first);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">n</a> =cur_pair.second;  <span class="comment">// next special symbol to add.</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="comment">// (D)(v)(b)</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> idx = 0;idx &lt; A.size(); idx++) {</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      assert(d_vec[A[idx]] == <span class="keyword">false</span> &amp;&amp; <span class="stringliteral">&quot;This state has been seen before.  Algorithm error.&quot;</span>);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      d_vec[A[idx]] = <span class="keyword">true</span>;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    }</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="comment">// From here is (D)(v)(c).  We work out S_\eps and S_t (for t\neq eps)</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment">// simultaneously at first.</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    map&lt;Label, set&lt;pair&lt;pair&lt;StateId, ArcId&gt;, StateId&gt; &gt; &gt; arc_hash;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="comment">// arc_hash is a hash with info of all arcs from states in the set A to</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="comment">// non-problematic states.</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="comment">// It is a map from ilabel to pair(pair(start-state, arc-offset), end-state).</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="comment">// Here, arc-offset reflects the order in which we accessed the arc using the</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="comment">// ArcIterator (zero for the first arc).</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    {  <span class="comment">// This block sets up arc_hash</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> idx = 0;idx &lt; A.size(); idx++) {</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        StateId s = A[idx];</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        assert(s&gt;=0 &amp;&amp; s&lt;=max_state);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        ArcId arc_id = 0;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="keywordflow">for</span> (ArcIterator&lt;MutableFst&lt;Arc&gt; &gt; aiter(*<a class="code" href="namespacefst.html">fst</a>, s); ! aiter.Done(); aiter.Next(), ++arc_id) {</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;          <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &amp;arc = aiter.Value();</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;          pair&lt;pair&lt;StateId, ArcId&gt;, StateId&gt;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;              this_pair(pair&lt;StateId, ArcId&gt;(s, arc_id), arc.nextstate);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;          <span class="keywordtype">bool</span> inserted = (arc_hash[arc.ilabel].insert(this_pair)).second;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;          assert(inserted);  <span class="comment">// Otherwise we had a duplicate.</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        }</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      }</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    }</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="comment">// (D)(v)(d)</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="keywordflow">if</span> (arc_hash.count(0) == 1) {  <span class="comment">// We have epsilon transitions out.</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      set&lt;pair&lt;pair&lt;StateId, ArcId&gt;, StateId&gt; &gt;  &amp;eps_set = arc_hash[0];</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      <span class="keyword">typedef</span> <span class="keyword">typename</span> set&lt;pair&lt;pair&lt;StateId, ArcId&gt;, StateId&gt; &gt;::iterator set_iter_t;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      <span class="keywordflow">for</span> (set_iter_t siter = eps_set.begin(); siter != eps_set.end(); ++siter) {</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="keyword">const</span> pair&lt;pair&lt;StateId, ArcId&gt;, StateId&gt;  &amp;this_pr = *siter;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <span class="keywordflow">if</span> (p_vec[this_pr.second]) {  <span class="comment">// Eps-transition to problematic state.</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;          assert(m_map.count(this_pr.first) == 0);</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;          m_map[this_pr.first] = <a class="code" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">n</a>;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;          n++;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        }</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      }</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    }</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="comment">// (D)(v)(e)</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    {</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      <span class="keyword">typedef</span> <span class="keyword">typename</span> map&lt;Label, set&lt;pair&lt;pair&lt;StateId, ArcId&gt;, StateId&gt; &gt; &gt;::iterator map_iter_t;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <span class="keyword">typedef</span> <span class="keyword">typename</span> set&lt;pair&lt;pair&lt;StateId, ArcId&gt;, StateId&gt; &gt;::iterator set_iter_t2;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <span class="keywordflow">for</span> (map_iter_t miter = arc_hash.begin(); miter != arc_hash.end(); ++miter) {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        Label t = miter-&gt;first;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        set&lt;pair&lt;pair&lt;StateId, ArcId&gt;, StateId&gt; &gt;  &amp;S_t = miter-&gt;second;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="keywordflow">if</span> (t != 0) {  <span class="comment">// For t != epsilon,</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;          set&lt;StateId&gt; V_t;  <span class="comment">// set of destination non-problem states.  Will create this set now.</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;          <span class="comment">// exists_noproblem is true iff |U_t| &gt; 0.</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;          <span class="keywordtype">size_t</span> k = 0;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;          <span class="comment">// First loop &quot;for each transition a in T_t&quot; (i.e. transitions to problematic states)</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;          <span class="comment">// The if-statement if (|S_t|&gt;1) is pushed inside the loop, as the loop also computes</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;          <span class="comment">// the set V_t.</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;          <span class="keywordflow">for</span> (set_iter_t2 siter = S_t.begin(); siter != S_t.end(); ++siter) {</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            <span class="keyword">const</span> pair&lt;pair&lt;StateId, ArcId&gt;, StateId&gt;  &amp;this_pr = *siter;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            <span class="keywordflow">if</span> (p_vec[this_pr.second]) {  <span class="comment">// only consider problematic states (just set T_t)</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;              <span class="keywordflow">if</span> (S_t.size() &gt; 1) {  <span class="comment">// This is where we pushed the if-statement in.</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                assert(m_map.count(this_pr.first) == 0);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                m_map[this_pr.first] = k;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                k++;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                num_extra_det_states++;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;              }</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            } <span class="keywordflow">else</span> {  <span class="comment">// Create the set V_t.</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;              V_t.insert(this_pr.second);</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            }</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;          }</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;          <span class="keywordflow">if</span> (V_t.size() != 0) {</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            <a class="code" href="namespacefst_1_1pre__determinize__helpers.html#a69947845c459f941d97f6ff285fe0147">pre_determinize_helpers::Closure</a>(<a class="code" href="namespacefst.html">fst</a>, &amp;V_t, p_vec);  <span class="comment">// follow epsilons to non-problematic states.</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            vector&lt;StateId&gt; closure_V_t_vec;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            <a class="code" href="namespacefst_1_1pre__determinize__helpers.html#ab00ccb06ca21f747255430b7b892d866">pre_determinize_helpers::CopySetToVector</a>(V_t, &amp;closure_V_t_vec);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            vector&lt;StateId&gt; *ptr = <a class="code" href="namespacefst_1_1pre__determinize__helpers.html#a03967baf68484dea6746504377c347a9">pre_determinize_helpers::InsertMember</a>(closure_V_t_vec, &amp;S);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            <span class="keywordflow">if</span> (ptr != NULL) {  <span class="comment">// was inserted.</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;              Q.push_back(pair&lt;vector&lt;StateId&gt;*, <span class="keywordtype">size_t</span>&gt;(ptr, k));</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            }</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;          }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        }</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      }</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    }</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  } <span class="comment">// end while (Q.size() != 0)</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  {  <span class="comment">// (D)(vi): Check that for each state in the FST, d(s) = true.</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordflow">for</span> (StateIterator&lt;MutableFst&lt;Arc&gt; &gt; siter(*<a class="code" href="namespacefst.html">fst</a>); ! siter.Done(); siter.Next()) {</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      StateId val = siter.Value();</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;      assert(d_vec[val] == <span class="keyword">true</span>);</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    }</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  }</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  {  <span class="comment">// (D)(vii): compute symbol-table ID&#39;s.</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="comment">// sets up symsOut array.</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    int64 n = -1;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">typename</span> map&lt;pair&lt;StateId, ArcId&gt;, <span class="keywordtype">size_t</span>&gt;::iterator m_iter = m_map.begin();</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        m_iter != m_map.end();</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        ++m_iter) {</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      n = std::max(n, (int64) m_iter-&gt;second);  <span class="comment">// m_iter-&gt;second is of type size_t.</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    }</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="comment">// At this point n is the highest symbol-id (type size_t) of symbols we must add.</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    n++;  <span class="comment">// This is now the number of symbols we must add.</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<span class="keyword">static_cast&lt;</span>int64<span class="keyword">&gt;</span>(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>)&lt;n;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) symsOut-&gt;push_back(first_new_sym + <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  }</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="comment">// (D)(viii): set up hash.</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  map&lt;pair&lt;StateId, size_t&gt;, StateId&gt; h_map;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  {  <span class="comment">// D(ix): add extra symbols!  This is where the work gets done.</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="comment">// Core part of this is below, search for (*)</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordtype">size_t</span> n_states_added = 0;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">typename</span> map&lt;pair&lt;StateId, ArcId&gt;, <span class="keywordtype">size_t</span>&gt;::iterator m_iter = m_map.begin();</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        m_iter != m_map.end();</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        ++m_iter) {</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      StateId state = m_iter-&gt;first.first;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      ArcId arcpos = m_iter-&gt;first.second;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      <span class="keywordtype">size_t</span> m_a = m_iter-&gt;second;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      MutableArcIterator&lt;MutableFst&lt;Arc&gt; &gt; aiter(<a class="code" href="namespacefst.html">fst</a>, state);</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      aiter.Seek(arcpos);</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> arc = aiter.Value();</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="comment">// (*) core part here.</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <span class="keywordflow">if</span> (arc.ilabel == 0)</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        arc.ilabel = (*symsOut)[m_a];</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        pair&lt;StateId, size_t&gt; pr(arc.nextstate, m_a);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <span class="keywordflow">if</span> (!h_map.count(pr)) {</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;          n_states_added++;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;          StateId newstate = <a class="code" href="namespacefst.html">fst</a>-&gt;AddState();</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;          assert(newstate&gt;=0);</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;          <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> new_arc( (*symsOut)[m_a], (Label)0, Weight::One(), arc.nextstate);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;          <a class="code" href="namespacefst.html">fst</a>-&gt;AddArc(newstate, new_arc);</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;          h_map[pr] = newstate;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        }</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        arc.nextstate = h_map[pr];</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      }</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      aiter.SetValue(arc);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    }</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <a class="code" href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a>(2) &lt;&lt;  <span class="stringliteral">&quot;Added &quot;</span> &lt;&lt;(n_states_added)&lt;&lt;<span class="stringliteral">&quot; new states and added/changed &quot;</span>&lt;&lt;(m_map.size())&lt;&lt;<span class="stringliteral">&quot; arcs&quot;</span>;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  }</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <span class="comment">// Now free up memory.</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; S.size();<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keyword">delete</span> S[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;} <span class="comment">// end function PreDeterminize</span></div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_1_1pre__determinize__helpers_html_a69947845c459f941d97f6ff285fe0147"><div class="ttname"><a href="namespacefst_1_1pre__determinize__helpers.html#a69947845c459f941d97f6ff285fe0147">fst::pre_determinize_helpers::Closure</a></div><div class="ttdeci">void Closure(MutableFst&lt; Arc &gt; *fst, std::set&lt; typename Arc::StateId &gt; *S, const vector&lt; bool &gt; &amp;pVec)</div><div class="ttdef"><b>Definition:</b> <a href="pre-determinize-inl_8h_source.html#l00291">pre-determinize-inl.h:291</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacernnlm_html_ab4871778d570f724a07823e0a2fb9884"><div class="ttname"><a href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">rnnlm::n</a></div><div class="ttdeci">struct rnnlm::@11::@12 n</div></div>
<div class="ttc" id="namespacefst_html_af612cf218dbb31edf2567bf7cdc70c79"><div class="ttname"><a href="namespacefst.html#af612cf218dbb31edf2567bf7cdc70c79">fst::CreateSuperFinal</a></div><div class="ttdeci">Arc::StateId CreateSuperFinal(MutableFst&lt; Arc &gt; *fst)</div><div class="ttdef"><b>Definition:</b> <a href="pre-determinize-inl_8h_source.html#l00687">pre-determinize-inl.h:687</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacefst_1_1pre__determinize__helpers_html_a03967baf68484dea6746504377c347a9"><div class="ttname"><a href="namespacefst_1_1pre__determinize__helpers.html#a03967baf68484dea6746504377c347a9">fst::pre_determinize_helpers::InsertMember</a></div><div class="ttdeci">vector&lt; T &gt; * InsertMember(const vector&lt; T &gt; m, vector&lt; vector&lt; T &gt; *&gt; *S)</div><div class="ttdef"><b>Definition:</b> <a href="pre-determinize-inl_8h_source.html#l00271">pre-determinize-inl.h:271</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="group__error__group_html_ga16c81ec6ff3ba04c6ff96fdaed9d854e"><div class="ttname"><a href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a></div><div class="ttdeci">#define KALDI_VLOG(v)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00135">kaldi-error.h:135</a></div></div>
<div class="ttc" id="namespacefst_1_1pre__determinize__helpers_html_ab00ccb06ca21f747255430b7b892d866"><div class="ttname"><a href="namespacefst_1_1pre__determinize__helpers.html#ab00ccb06ca21f747255430b7b892d866">fst::pre_determinize_helpers::CopySetToVector</a></div><div class="ttdeci">void CopySetToVector(const std::set&lt; T &gt; s, vector&lt; T &gt; *v)</div><div class="ttdef"><b>Definition:</b> <a href="pre-determinize-inl_8h_source.html#l00256">pre-determinize-inl.h:256</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acbbeb727f9b9258b2830e83c89dbedda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbbeb727f9b9258b2830e83c89dbedda">&#9670;&nbsp;</a></span>PrepareForGrammarFst()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PrepareForGrammarFst </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>nonterm_phones_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function prepares 'ifst' for use in <a class="el" href="classfst_1_1GrammarFst.html" title="GrammarFst is an FST that is &#39;stitched together&#39; from multiple FSTs, that can recursively incorporate...">GrammarFst</a>: it ensures that it has the expected properties, changing it slightly as needed. </p>
<p>'ifst' is expected to be a fully compiled HCLG graph that is intended to be used in <a class="el" href="classfst_1_1GrammarFst.html" title="GrammarFst is an FST that is &#39;stitched together&#39; from multiple FSTs, that can recursively incorporate...">GrammarFst</a>. The user will most likely want to copy it to the ConstFst type after calling this function.</p>
<p>The following describes what this function does, and the reasons why it has to do these things:</p>
<ul>
<li>To keep the ArcIterator code simple (to avoid branches in loops), even for expanded states we store the destination fst-instance index separately per state, not per arc. This requires that any transitions across FST boundaries from a single FST must be to a single destination FST (for a given source state). We fix this problem by introducing epsilon arcs and new states whenever we find a state that would cause a problem for the above.</li>
<li>In order to signal to the <a class="el" href="classfst_1_1GrammarFst.html" title="GrammarFst is an FST that is &#39;stitched together&#39; from multiple FSTs, that can recursively incorporate...">GrammarFst</a> code that a particular state has cross-FST-boundary transitions, we set the final-prob to a nonzero value on that state. Specifically, we use a weight with Value() == 4096.0. When the <a class="el" href="classfst_1_1GrammarFst.html" title="GrammarFst is an FST that is &#39;stitched together&#39; from multiple FSTs, that can recursively incorporate...">GrammarFst</a> code sees that value it knows that it was not a 'real' final-prob. Prior to doing this we ensure, by adding epsilon transitions as needed, that the state did not previously have a final-prob.</li>
<li>For arcs that are final arcs in an FST that represents a nonterminal (these arcs would have #nonterm_exit on them), we ensure that the states that they transition to have unit final-prob (i.e. final-prob equal to One()), by incorporating any final-prob into the arc itself. This avoids the <a class="el" href="classfst_1_1GrammarFst.html" title="GrammarFst is an FST that is &#39;stitched together&#39; from multiple FSTs, that can recursively incorporate...">GrammarFst</a> code having to inspect those final-probs when expanding states.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nonterm_phones_offset</td><td>The integer id of the symbols #nonterm_bos in the phones.txt file. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">fst</td><td>The FST to be (slightly) modified. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="grammar-fst_8cc_source.html#l00861">861</a> of file <a class="el" href="grammar-fst_8cc_source.html">grammar-fst.cc</a>.</p>

<p class="reference">References <a class="el" href="grammar-fst_8cc_source.html#l00462">GrammarFstPreparer::Prepare()</a>.</p>

<p class="reference">Referenced by <a class="el" href="compile-graph_8cc_source.html#l00032">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                                                  {</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  GrammarFstPreparer p(nonterm_phones_offset, <a class="code" href="namespacefst.html">fst</a>);</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  p.Prepare();</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaadd097e429dad191dd0e94ee35cc90e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaadd097e429dad191dd0e94ee35cc90e">&#9670;&nbsp;</a></span>Print()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::Print </td>
          <td>(</td>
          <td class="paramtype">const Fst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils-test_8cc_source.html#l00359">359</a> of file <a class="el" href="fstext-utils-test_8cc_source.html">fstext-utils-test.cc</a>.</p>

<p class="reference">Referenced by <a class="el" href="transition-model_8h_source.html#l00194">TransitionModel::GetPhones()</a>, <a class="el" href="nnet-compute-discriminative_8h_source.html#l00080">NnetDiscriminativeStats::NnetDiscriminativeStats()</a>, <a class="el" href="discriminative-training_8h_source.html#l00169">DiscriminativeObjectiveInfo::PrintAll()</a>, <a class="el" href="nnet-example-functions_8h_source.html#l00133">SplitExampleStats::SplitExampleStats()</a>, and <a class="el" href="nnet-descriptor_8h_source.html#l00629">GeneralDescriptor::~GeneralDescriptor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                                                                       {</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  std::cout &lt;&lt; message &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  FstPrinter&lt;Arc&gt; fstprinter(<a class="code" href="namespacefst.html">fst</a>, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8a8abb0a8a2f9bbee7e71c82dac30840"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a8abb0a8a2f9bbee7e71c82dac30840">&#9670;&nbsp;</a></span>PrintProxyFstPath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> PrintProxyFstPath </td>
          <td>(</td>
          <td class="paramtype">const VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>proxy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; vector&lt; StdArc::Label &gt; &gt; *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; StdArc::Weight &gt; *&#160;</td>
          <td class="paramname"><em>weight</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">StdArc::StateId&#160;</td>
          <td class="paramname"><em>cur_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; StdArc::Label &gt;&#160;</td>
          <td class="paramname"><em>cur_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">StdArc::Weight&#160;</td>
          <td class="paramname"><em>cur_weight</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="generate-proxy-keywords_8cc_source.html#l00029">29</a> of file <a class="el" href="generate-proxy-keywords_8cc_source.html">generate-proxy-keywords.cc</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00363">Times()</a>.</p>

<p class="reference">Referenced by <a class="el" href="generate-proxy-keywords_8cc_source.html#l00057">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;                                                {</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="keywordflow">if</span> (proxy.Final(cur_state) != StdArc::Weight::Zero()) {</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="comment">// Assumes only final state has non-zero weight.</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    cur_weight = <a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(proxy.Final(cur_state), cur_weight);</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    path-&gt;push_back(cur_path);</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    weight-&gt;push_back(cur_weight);</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  }</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="keywordflow">for</span> (ArcIterator&lt;StdFst&gt; aiter(proxy, cur_state);</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;       !aiter.Done(); aiter.Next()) {</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keyword">const</span> <a class="code" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &amp;arc = aiter.Value();</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">StdArc::Weight</a> temp_weight = <a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(arc.weight, cur_weight);</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    cur_path.push_back(arc.ilabel);</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <a class="code" href="namespacefst.html#a8a8abb0a8a2f9bbee7e71c82dac30840">PrintProxyFstPath</a>(proxy, path, weight,</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                      arc.nextstate, cur_path, temp_weight);</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    cur_path.pop_back();</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  }</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;}</div><div class="ttc" id="namespacefst_html_a70478eb2428a9406e4692d19a7a3a97f"><div class="ttname"><a href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">fst::StdArc</a></div><div class="ttdeci">fst::StdArc StdArc</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00053">deterministic-fst-test.cc:53</a></div></div>
<div class="ttc" id="namespacefst_html_a0807071c6ceb397bc35281fce74ff8a7"><div class="ttname"><a href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">fst::Times</a></div><div class="ttdeci">LatticeWeightTpl&lt; FloatType &gt; Times(const LatticeWeightTpl&lt; FloatType &gt; &amp;w1, const LatticeWeightTpl&lt; FloatType &gt; &amp;w2)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00363">lattice-weight.h:363</a></div></div>
<div class="ttc" id="namespacefst_html_a8a8abb0a8a2f9bbee7e71c82dac30840"><div class="ttname"><a href="namespacefst.html#a8a8abb0a8a2f9bbee7e71c82dac30840">fst::PrintProxyFstPath</a></div><div class="ttdeci">bool PrintProxyFstPath(const VectorFst&lt; StdArc &gt; &amp;proxy, vector&lt; vector&lt; StdArc::Label &gt; &gt; *path, vector&lt; StdArc::Weight &gt; *weight, StdArc::StateId cur_state, vector&lt; StdArc::Label &gt; cur_path, StdArc::Weight cur_weight)</div><div class="ttdef"><b>Definition:</b> <a href="generate-proxy-keywords_8cc_source.html#l00029">generate-proxy-keywords.cc:29</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae0eae40426db120dd1fd95a8ce9ea908"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0eae40426db120dd1fd95a8ce9ea908">&#9670;&nbsp;</a></span>PropagateFinal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PropagateFinal </td>
          <td>(</td>
          <td class="paramtype">typename Arc::Label&#160;</td>
          <td class="paramname"><em>phi_label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l01084">1084</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="kaldi-error_8h_source.html#l00129">KALDI_WARN</a>, and <a class="el" href="fstext-utils-inl_8h_source.html#l01051">PropagateFinalInternal()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstphicompose_8cc_source.html#l00080">main()</a>, and <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>.</p>
<div class="fragment"><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                                          {</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacefst.html">fst</a>-&gt;Properties(kIEpsilons, <span class="keyword">true</span>)) <span class="comment">// just warn.</span></div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;PropagateFinal: this may not work as desired &quot;</span></div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        <span class="stringliteral">&quot;since your FST has input epsilons.&quot;</span>;</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  StateId num_states = <a class="code" href="namespacefst.html">fst</a>-&gt;NumStates();</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  <span class="keywordflow">for</span> (StateId s = 0; s &lt; num_states; s++)</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <a class="code" href="namespacefst.html#a53cbf1caf23dd66f4b9d2ec6a03bf65e">PropagateFinalInternal</a>(phi_label, s, <a class="code" href="namespacefst.html">fst</a>);</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="group__error__group_html_ga994be213ddf127b5d6f20a43a02b513a"><div class="ttname"><a href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a></div><div class="ttdeci">#define KALDI_WARN</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00129">kaldi-error.h:129</a></div></div>
<div class="ttc" id="namespacefst_html_a53cbf1caf23dd66f4b9d2ec6a03bf65e"><div class="ttname"><a href="namespacefst.html#a53cbf1caf23dd66f4b9d2ec6a03bf65e">fst::PropagateFinalInternal</a></div><div class="ttdeci">void PropagateFinalInternal(typename Arc::Label phi_label, typename Arc::StateId s, MutableFst&lt; Arc &gt; *fst)</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l01051">fstext-utils-inl.h:1051</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a53cbf1caf23dd66f4b9d2ec6a03bf65e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53cbf1caf23dd66f4b9d2ec6a03bf65e">&#9670;&nbsp;</a></span>PropagateFinalInternal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::PropagateFinalInternal </td>
          <td>(</td>
          <td class="paramtype">typename Arc::Label&#160;</td>
          <td class="paramname"><em>phi_label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">typename Arc::StateId&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l01051">1051</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, and <a class="el" href="lattice-weight_8h_source.html#l00363">Times()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstext-utils-inl_8h_source.html#l01084">PropagateFinal()</a>.</p>
<div class="fragment"><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                          {</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacefst.html">fst</a>-&gt;Final(s) == Weight::Zero()) {</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="comment">// search for phi transition.  We assume there</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="comment">// is just one-- phi nondeterminism is not allowed</span></div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <span class="comment">// anyway.</span></div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <span class="keywordtype">int</span> num_phis = 0;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <span class="keywordflow">for</span> (ArcIterator&lt;Fst&lt;Arc&gt; &gt; aiter(*<a class="code" href="namespacefst.html">fst</a>, s);</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;         !aiter.Done(); aiter.Next()) {</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &amp;arc = aiter.Value();</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;      <span class="keywordflow">if</span> (arc.ilabel == phi_label) {</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        num_phis++;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;        <span class="keywordflow">if</span> (arc.nextstate == s) <span class="keywordflow">continue</span>; <span class="comment">// don&#39;t expect</span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        <span class="comment">// phi loops but ignore them anyway.</span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        <span class="comment">// If this recurses infinitely, it means there</span></div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        <span class="comment">// are loops of phi transitions, which there should</span></div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        <span class="comment">// not be in a normal backoff LM.  We could make this</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        <span class="comment">// routine work for this case, but currently there is</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        <span class="comment">// no need.</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        <a class="code" href="namespacefst.html#a53cbf1caf23dd66f4b9d2ec6a03bf65e">PropagateFinalInternal</a>(phi_label, arc.nextstate, <a class="code" href="namespacefst.html">fst</a>);</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacefst.html">fst</a>-&gt;Final(arc.nextstate) != Weight::Zero())</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;          <a class="code" href="namespacefst.html">fst</a>-&gt;SetFinal(s, <a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(<a class="code" href="namespacefst.html">fst</a>-&gt;Final(arc.nextstate), arc.weight));</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      }</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;      <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(num_phis &lt;= 1 &amp;&amp; <span class="stringliteral">&quot;Phi nondeterminism found&quot;</span>);</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    }</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  }</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a0807071c6ceb397bc35281fce74ff8a7"><div class="ttname"><a href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">fst::Times</a></div><div class="ttdeci">LatticeWeightTpl&lt; FloatType &gt; Times(const LatticeWeightTpl&lt; FloatType &gt; &amp;w1, const LatticeWeightTpl&lt; FloatType &gt; &amp;w2)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00363">lattice-weight.h:363</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="namespacefst_html_a53cbf1caf23dd66f4b9d2ec6a03bf65e"><div class="ttname"><a href="namespacefst.html#a53cbf1caf23dd66f4b9d2ec6a03bf65e">fst::PropagateFinalInternal</a></div><div class="ttdeci">void PropagateFinalInternal(typename Arc::Label phi_label, typename Arc::StateId s, MutableFst&lt; Arc &gt; *fst)</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l01051">fstext-utils-inl.h:1051</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3f59fcf7c002f200801612c0d7f9e13c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f59fcf7c002f200801612c0d7f9e13c">&#9670;&nbsp;</a></span>PruneCompactLattice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::PruneCompactLattice </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>&#160;</td>
          <td class="paramname"><em>beam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>, Int &gt; &gt; &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="lattice-utils_8h_source.html#l00242">LatticeToStdMapper&lt; Real &gt;::Properties()</a>.</p>

</div>
</div>
<a id="a2078f30f8e57480c6c0aa2208d35a2eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2078f30f8e57480c6c0aa2208d35a2eb">&#9670;&nbsp;</a></span>PruneSpecial()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PruneSpecial </td>
          <td>(</td>
          <td class="paramtype">const Fst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>ifst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VectorFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">typename Arc::Weight&#160;</td>
          <td class="paramname"><em>beam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classsize__t.html">size_t</a>&#160;</td>
          <td class="paramname"><em>max_states</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The function PruneSpecial is like the standard OpenFst function "prune", except it does not expand the entire "ifst"- this is useful for cases where ifst is an on-demand FST such as a ComposeFst and we don't want to visit it all. </p>
<p>It supports pruning either to a specified beam (if beam is not One()), or to a specified max_states (if max_states is &gt; 0). One of the two must be specified.</p>
<p>Requirements:</p><ul>
<li>Costs must be non-negative (equivalently, weights must not be greater than One()).</li>
<li>There must be a Compare(a, b) function that compares two weights and returns (-1,0,1) if (a&lt;b, a=b, a&gt;b). We define this in Kaldi, for TropicalWeight, LogWeight (I think), and LatticeWeight... also CompactLatticeWeight, but we doubt that will be used here; better to use <a class="el" href="namespacefst.html#a3f59fcf7c002f200801612c0d7f9e13c">PruneCompactLattice()</a>. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="prune-special-inl_8h_source.html#l00161">161</a> of file <a class="el" href="prune-special-inl_8h_source.html">prune-special-inl.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="generate-proxy-keywords_8cc_source.html#l00057">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                                     {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  PruneSpecialClass&lt;Arc&gt; c(ifst, ofst, beam, max_states);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a078fe1718d6f8404f60b5ee10132af09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a078fe1718d6f8404f60b5ee10132af09">&#9670;&nbsp;</a></span>PushCompactLatticeStrings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> PushCompactLatticeStrings </td>
          <td>(</td>
          <td class="paramtype">MutableFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>, IntType &gt; &gt; &gt; *&#160;</td>
          <td class="paramname"><em>clat</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function pushes the transition-ids as far towards the start as they will go. </p>
<p>It can be useful prior to lattice-align-words (for non-linear lattices). We can't use the generic OpenFst "push" function because it uses the sum as the divisor, which is not appropriate in this case (a+b generally won't divide a or b in this semiring). It returns true on success, false if it failed due to TopSort failing, which should never happen, but we handle it gracefully by just leaving the lattice the same. This function used to be called just PushCompactLattice. </p>

<p class="definition">Definition at line <a class="el" href="push-lattice_8cc_source.html#l00210">210</a> of file <a class="el" href="push-lattice_8cc_source.html">push-lattice.cc</a>.</p>

<p class="reference">References <a class="el" href="push-lattice_8cc_source.html#l00038">CompactLatticePusher&lt; Weight, IntType &gt;::Push()</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-determinize-non-compact_8cc_source.html#l00095">main()</a>, <a class="el" href="lattice-determinize-pruned-parallel_8cc_source.html#l00046">DeterminizeLatticeTask::operator()()</a>, <a class="el" href="minimize-lattice-test_8cc_source.html#l00047">kaldi::TestMinimizeCompactLattice()</a>, and <a class="el" href="push-lattice-test_8cc_source.html#l00039">kaldi::TestPushCompactLatticeStrings()</a>.</p>
<div class="fragment"><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                                                                          {</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  CompactLatticePusher&lt;Weight, IntType&gt; pusher(clat);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordflow">return</span> pusher.Push();</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a3aee1a1cfc436ca1909b419f09a3380e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3aee1a1cfc436ca1909b419f09a3380e">&#9670;&nbsp;</a></span>PushCompactLatticeStrings< kaldi::LatticeWeight, kaldi::int32 >()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">template <a class="el" href="classbool.html">bool</a> <a class="el" href="namespacefst.html#a078fe1718d6f8404f60b5ee10132af09">fst::PushCompactLatticeStrings</a>&lt; <a class="el" href="namespacefst.html#a312b29f86c5ef78810556e470635a291">kaldi::LatticeWeight</a>, kaldi::int32 &gt; </td>
          <td>(</td>
          <td class="paramtype">MutableFst&lt; <a class="el" href="namespacekaldi.html#a33b7ea55be82ee6bab64430dd93cbcba">kaldi::CompactLatticeArc</a> &gt; *&#160;</td>
          <td class="paramname"><em>clat</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4287e92b8b0cfc580bb8b516d8108ff5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4287e92b8b0cfc580bb8b516d8108ff5">&#9670;&nbsp;</a></span>PushCompactLatticeWeights()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> PushCompactLatticeWeights </td>
          <td>(</td>
          <td class="paramtype">MutableFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>, IntType &gt; &gt; &gt; *&#160;</td>
          <td class="paramname"><em>clat</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function pushes the weights in the CompactLattice so that all states except possibly the start state, have Weight components (of type LatticeWeight) that "sum to one" in the LatticeWeight (i.e. </p>
<p>interpreting the weights as negated log-probs). It returns true on success, false if it failed due to TopSort failing, which should never happen, but we handle it gracefully by just leaving the lattice the same. </p>

<p class="definition">Definition at line <a class="el" href="push-lattice_8cc_source.html#l00217">217</a> of file <a class="el" href="push-lattice_8cc_source.html">push-lattice.cc</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00371">Divide()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00129">KALDI_WARN</a>, <a class="el" href="lattice-weight_8h_source.html#l00312">Plus()</a>, <a class="el" href="lattice-weight_8h_source.html#l00363">Times()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00456">CompactLatticeWeightTpl&lt; WeightType, IntType &gt;::Zero()</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-determinize-non-compact_8cc_source.html#l00095">main()</a>, <a class="el" href="lattice-determinize-pruned-parallel_8cc_source.html#l00046">DeterminizeLatticeTask::operator()()</a>, <a class="el" href="minimize-lattice-test_8cc_source.html#l00047">kaldi::TestMinimizeCompactLattice()</a>, and <a class="el" href="push-lattice-test_8cc_source.html#l00077">kaldi::TestPushCompactLatticeWeights()</a>.</p>
<div class="fragment"><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                                                                         {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keywordflow">if</span> (clat-&gt;Properties(kTopSorted, <span class="keyword">true</span>) == 0) {</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">if</span> (!TopSort(clat)) {</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;Topological sorting of state-level lattice failed &quot;</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;          <span class="stringliteral">&quot;(probably your lexicon has empty words or your LM has epsilon cycles; this &quot;</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;          <span class="stringliteral">&quot; is a bad idea.)&quot;</span>;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    }</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  }</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="keyword">typedef</span> CompactLatticeWeightTpl&lt;Weight, IntType&gt; CompactWeight;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keyword">typedef</span> ArcTpl&lt;CompactWeight&gt; CompactArc;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">CompactArc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  StateId num_states = clat-&gt;NumStates();</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordflow">if</span> (num_states == 0) {</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;Pushing weights of empty compact lattice&quot;</span>;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// this is technically success because an empty</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                 <span class="comment">// lattice is already pushed.</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  }</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  std::vector&lt;Weight&gt; weight_to_end(num_states); <span class="comment">// Note: LatticeWeight</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                                                 <span class="comment">// contains two floats.</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keywordflow">for</span> (StateId s = num_states - 1; s &gt;= 0; s--) {</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> this_weight_to_end = clat-&gt;Final(s).Weight();</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">for</span> (ArcIterator&lt;MutableFst&lt;CompactArc&gt; &gt; aiter(*clat, s);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;         !aiter.Done(); aiter.Next()) {</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <span class="keyword">const</span> CompactArc &amp;arc = aiter.Value();</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(arc.nextstate &gt; s &amp;&amp; <span class="stringliteral">&quot;Cyclic lattices not allowed.&quot;</span>);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      this_weight_to_end = <a class="code" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a>(this_weight_to_end,</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                                <a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(aiter.Value().weight.Weight(),</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                                      weight_to_end[arc.nextstate]));</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    }</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">if</span> (this_weight_to_end == Weight::Zero()) {</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;Lattice has non-coaccessible states.&quot;</span>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    }</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    weight_to_end[s] = this_weight_to_end;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  }</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  weight_to_end[0] = Weight::One(); <span class="comment">// We leave the &quot;leftover weight&quot; on</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                                    <span class="comment">// the start state, which won&#39;t</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                                    <span class="comment">// necessarily end up summing to one.</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keywordflow">for</span> (StateId s = 0; s &lt; num_states; s++) {</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> this_weight_to_end = weight_to_end[s];</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">if</span> (this_weight_to_end == Weight::Zero())</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">for</span> (MutableArcIterator&lt;MutableFst&lt;CompactArc&gt; &gt; aiter(clat, s);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;         !aiter.Done(); aiter.Next()) {</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      CompactArc arc = aiter.Value();</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> next_weight_to_end = weight_to_end[arc.nextstate];</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <span class="keywordflow">if</span> (next_weight_to_end != Weight::Zero()) {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        arc.weight.SetWeight(<a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(arc.weight.Weight(),</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                                   <a class="code" href="namespacefst.html#a694bc33e16bfb9d7a1639f8488508d20">Divide</a>(next_weight_to_end,</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                                          this_weight_to_end)));</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        aiter.SetValue(arc);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      }</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    }</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    CompactWeight final_weight = clat-&gt;Final(s);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">if</span> (final_weight != CompactWeight::Zero()) {</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      final_weight.SetWeight(<a class="code" href="namespacefst.html#a694bc33e16bfb9d7a1639f8488508d20">Divide</a>(final_weight.Weight(), this_weight_to_end));</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      clat-&gt;SetFinal(s, final_weight);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  }</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  </div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html_a694bc33e16bfb9d7a1639f8488508d20"><div class="ttname"><a href="namespacefst.html#a694bc33e16bfb9d7a1639f8488508d20">fst::Divide</a></div><div class="ttdeci">LatticeWeightTpl&lt; FloatType &gt; Divide(const LatticeWeightTpl&lt; FloatType &gt; &amp;w1, const LatticeWeightTpl&lt; FloatType &gt; &amp;w2, DivideType typ=DIVIDE_ANY)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00371">lattice-weight.h:371</a></div></div>
<div class="ttc" id="namespacefst_html_afbb3ae5b68808cb433cc710a7052c4c4"><div class="ttname"><a href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">fst::Plus</a></div><div class="ttdeci">LatticeWeightTpl&lt; FloatType &gt; Plus(const LatticeWeightTpl&lt; FloatType &gt; &amp;w1, const LatticeWeightTpl&lt; FloatType &gt; &amp;w2)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00312">lattice-weight.h:312</a></div></div>
<div class="ttc" id="namespacefst_html_a0807071c6ceb397bc35281fce74ff8a7"><div class="ttname"><a href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">fst::Times</a></div><div class="ttdeci">LatticeWeightTpl&lt; FloatType &gt; Times(const LatticeWeightTpl&lt; FloatType &gt; &amp;w1, const LatticeWeightTpl&lt; FloatType &gt; &amp;w2)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00363">lattice-weight.h:363</a></div></div>
<div class="ttc" id="group__error__group_html_ga994be213ddf127b5d6f20a43a02b513a"><div class="ttname"><a href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a></div><div class="ttdeci">#define KALDI_WARN</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00129">kaldi-error.h:129</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a43dd002ffe6f8c6446a0890dc8fa822d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43dd002ffe6f8c6446a0890dc8fa822d">&#9670;&nbsp;</a></span>PushCompactLatticeWeights< kaldi::LatticeWeight, kaldi::int32 >()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">template <a class="el" href="classbool.html">bool</a> <a class="el" href="namespacefst.html#a4287e92b8b0cfc580bb8b516d8108ff5">fst::PushCompactLatticeWeights</a>&lt; <a class="el" href="namespacefst.html#a312b29f86c5ef78810556e470635a291">kaldi::LatticeWeight</a>, kaldi::int32 &gt; </td>
          <td>(</td>
          <td class="paramtype">MutableFst&lt; <a class="el" href="namespacekaldi.html#a33b7ea55be82ee6bab64430dd93cbcba">kaldi::CompactLatticeArc</a> &gt; *&#160;</td>
          <td class="paramname"><em>clat</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a501146ab32fb0880facd197485bd2d0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a501146ab32fb0880facd197485bd2d0f">&#9670;&nbsp;</a></span>PushInLog()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::PushInLog </td>
          <td>(</td>
          <td class="paramtype">VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>ptype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfloat.html">float</a>&#160;</td>
          <td class="paramname"><em>delta</em> = <code>kDelta</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils_8h_source.html#l00091">91</a> of file <a class="el" href="fstext-utils_8h_source.html">fstext-utils.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                                                                           {</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="comment">// PushInLog pushes the FST</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="comment">// and returns a new pushed FST (labels and weights pushed to the left).</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  VectorFst&lt;LogArc&gt; *fst_log = <span class="keyword">new</span> VectorFst&lt;LogArc&gt;;  <span class="comment">// Want to determinize in log semiring.</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  Cast(*<a class="code" href="namespacefst.html">fst</a>, fst_log);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  VectorFst&lt;StdArc&gt; tmp;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  *<a class="code" href="namespacefst.html">fst</a> = tmp;  <span class="comment">// free up memory.</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  VectorFst&lt;LogArc&gt; *fst_pushed_log = <span class="keyword">new</span> VectorFst&lt;LogArc&gt;;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  Push&lt;LogArc, rtype&gt;(*fst_log, fst_pushed_log, ptype, delta);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  Cast(*fst_pushed_log, <a class="code" href="namespacefst.html">fst</a>);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keyword">delete</span> fst_log;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keyword">delete</span> fst_pushed_log;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aebe0ba379ba5033e6e26084d5b7ae59f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebe0ba379ba5033e6e26084d5b7ae59f">&#9670;&nbsp;</a></span>PushSpecial()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PushSpecial </td>
          <td>(</td>
          <td class="paramtype">VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfloat.html">float</a>&#160;</td>
          <td class="paramname"><em>delta</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="push-special_8cc_source.html#l00226">226</a> of file <a class="el" href="push-special_8cc_source.html">push-special.cc</a>.</p>

<p class="reference">Referenced by <a class="el" href="compile-graph_8cc_source.html#l00032">main()</a>, and <a class="el" href="push-special-test_8cc_source.html#l00031">TestPushSpecial()</a>.</p>
<div class="fragment"><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                                                      {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacefst.html">fst</a>-&gt;NumStates() &gt; 0)</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    PushSpecialClass c(<a class="code" href="namespacefst.html">fst</a>, delta); <span class="comment">// all the work</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="comment">// gets done in the initializer.</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6eaeadc75ec86fd77287ad5ee75af9ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6eaeadc75ec86fd77287ad5ee75af9ce">&#9670;&nbsp;</a></span>RandFst()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VectorFst&lt;Arc&gt;* fst::RandFst </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfst_1_1RandFstOptions.html">RandFstOptions</a>&#160;</td>
          <td class="paramname"><em>opts</em> = <code><a class="el" href="structfst_1_1RandFstOptions.html">RandFstOptions</a>()</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a random FST. </p>
<p>Useful for randomized algorithm testing. Only works if weight can be constructed from float. </p>

<p class="definition">Definition at line <a class="el" href="rand-fst_8h_source.html#l00056">56</a> of file <a class="el" href="rand-fst_8h_source.html">rand-fst.h</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>, and <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                                                                                     {</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = <span class="keyword">new</span> VectorFst&lt;Arc&gt;();</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; start:</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="comment">// Create states.</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  vector&lt;StateId&gt; all_states;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)opts.n_states;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    StateId this_state = fst-&gt;AddState();</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> == 0) fst-&gt;SetStart(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    all_states.push_back(this_state);</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  }</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="comment">// Set final states.</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0;<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)opts.n_final;<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    StateId <span class="keywordtype">id</span> = all_states[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % opts.n_states];</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    Weight weight = (<a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>)(opts.weight_multiplier*(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5));</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    fst-&gt;SetFinal(<span class="keywordtype">id</span>, weight);</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  }</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="comment">// Create arcs.</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)opts.n_arcs;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> a;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    StateId start_state;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">if</span>(!opts.acyclic) { <span class="comment">// no restriction on arcs.</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      start_state = all_states[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % opts.n_states];</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      a.nextstate = all_states[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % opts.n_states];</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      start_state = all_states[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % (opts.n_states-1)];</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      a.nextstate = start_state + 1 + (<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % (opts.n_states-start_state-1));</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    }</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    a.ilabel = <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % opts.n_syms;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    a.olabel = <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % opts.n_syms;  <span class="comment">// same input+output vocab.</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    a.weight = (<a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>) (opts.weight_multiplier*(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 4));</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    </div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    fst-&gt;AddArc(start_state, a);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  }</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="comment">// Trim resulting FST.</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  Connect(fst);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordflow">if</span> (opts.acyclic)</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    assert(fst-&gt;Properties(kAcyclic, <span class="keyword">true</span>) &amp; kAcyclic);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keywordflow">if</span> (fst-&gt;Start() == kNoStateId &amp;&amp; !opts.allow_empty) {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordflow">goto</span> start;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  }</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordflow">return</span> fst;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="classsize__t_html"><div class="ttname"><a href="classsize__t.html">size_t</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a01daf43f2d78080986c9140e239b11db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01daf43f2d78080986c9140e239b11db">&#9670;&nbsp;</a></span>RandomCompactLatticeWeight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacefst.html#a4b96c2715539a4b5008546dbe9d5085b">CompactLatticeWeight</a> fst::RandomCompactLatticeWeight </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight-test_8cc_source.html#l00049">49</a> of file <a class="el" href="lattice-weight-test_8cc_source.html">lattice-weight-test.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>, <a class="el" href="lattice-weight-test_8cc_source.html#l00036">RandomLatticeWeight()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00076">LatticeWeightTpl&lt; BaseFloat &gt;::Zero()</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-weight-test_8cc_source.html#l00124">CompactLatticeWeightTest()</a>.</p>
<div class="fragment"><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                                                  {</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <a class="code" href="namespacefst.html#a312b29f86c5ef78810556e470635a291">LatticeWeight</a> w = <a class="code" href="namespacefst.html#a07194dbde79b19df5faffc996ac69113">RandomLatticeWeight</a>();</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="keywordflow">if</span> (w == LatticeWeight::Zero()) {</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefst.html#a4b96c2715539a4b5008546dbe9d5085b">CompactLatticeWeight</a>(w, vector&lt;int32&gt;());</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    int32 len = <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 4;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    vector&lt;int32&gt; str;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordflow">for</span>(int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; len; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;      str.push_back(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 10 + 1);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefst.html#a4b96c2715539a4b5008546dbe9d5085b">CompactLatticeWeight</a>(w, str);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  }</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;}</div><div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacefst_html_a07194dbde79b19df5faffc996ac69113"><div class="ttname"><a href="namespacefst.html#a07194dbde79b19df5faffc996ac69113">fst::RandomLatticeWeight</a></div><div class="ttdeci">LatticeWeight RandomLatticeWeight()</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight-test_8cc_source.html#l00036">lattice-weight-test.cc:36</a></div></div>
<div class="ttc" id="namespacefst_html_a312b29f86c5ef78810556e470635a291"><div class="ttname"><a href="namespacefst.html#a312b29f86c5ef78810556e470635a291">fst::LatticeWeight</a></div><div class="ttdeci">LatticeWeightTpl&lt; BaseFloat &gt; LatticeWeight</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight-test_8cc_source.html#l00028">lattice-weight-test.cc:28</a></div></div>
<div class="ttc" id="namespacefst_html_a4b96c2715539a4b5008546dbe9d5085b"><div class="ttname"><a href="namespacefst.html#a4b96c2715539a4b5008546dbe9d5085b">fst::CompactLatticeWeight</a></div><div class="ttdeci">CompactLatticeWeightTpl&lt; LatticeWeight, int32 &gt; CompactLatticeWeight</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight-test_8cc_source.html#l00030">lattice-weight-test.cc:30</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a07194dbde79b19df5faffc996ac69113"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07194dbde79b19df5faffc996ac69113">&#9670;&nbsp;</a></span>RandomLatticeWeight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacefst.html#a312b29f86c5ef78810556e470635a291">LatticeWeight</a> fst::RandomLatticeWeight </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight-test_8cc_source.html#l00036">36</a> of file <a class="el" href="lattice-weight-test_8cc_source.html">lattice-weight-test.cc</a>.</p>

<p class="reference">References <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>, <a class="el" href="kaldi-math_8h_source.html#l00155">kaldi::RandGauss()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00076">LatticeWeightTpl&lt; BaseFloat &gt;::Zero()</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-weight-test_8cc_source.html#l00062">LatticeWeightTest()</a>, and <a class="el" href="lattice-weight-test_8cc_source.html#l00049">RandomCompactLatticeWeight()</a>.</p>
<div class="fragment"><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;                                    {</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keywordtype">int</span> tmp = <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 4;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="keywordflow">if</span> (tmp == 0) {</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="keywordflow">return</span> LatticeWeight::Zero();</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tmp == 1) {</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefst.html#a312b29f86c5ef78810556e470635a291">LatticeWeight</a>( 1, 2);  <span class="comment">// sometimes return special values..</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tmp == 2) {</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefst.html#a312b29f86c5ef78810556e470635a291">LatticeWeight</a>( 2, 1);  <span class="comment">// this tests more thoroughly certain properties...</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefst.html#a312b29f86c5ef78810556e470635a291">LatticeWeight</a>( 100 * <a class="code" href="namespacekaldi.html#a3871a9c94a69d8807ea4c1d94e2d4ab9">kaldi::RandGauss</a>(), 100 * <a class="code" href="namespacekaldi.html#a3871a9c94a69d8807ea4c1d94e2d4ab9">kaldi::RandGauss</a>());</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  }</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;}</div><div class="ttc" id="namespacekaldi_html_a3871a9c94a69d8807ea4c1d94e2d4ab9"><div class="ttname"><a href="namespacekaldi.html#a3871a9c94a69d8807ea4c1d94e2d4ab9">kaldi::RandGauss</a></div><div class="ttdeci">float RandGauss(struct RandomState *state=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00155">kaldi-math.h:155</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacefst_html_a312b29f86c5ef78810556e470635a291"><div class="ttname"><a href="namespacefst.html#a312b29f86c5ef78810556e470635a291">fst::LatticeWeight</a></div><div class="ttdeci">LatticeWeightTpl&lt; BaseFloat &gt; LatticeWeight</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight-test_8cc_source.html#l00028">lattice-weight-test.cc:28</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a59098866f3e0da7502de95eba3c7f35d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59098866f3e0da7502de95eba3c7f35d">&#9670;&nbsp;</a></span>RandPairFst()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VectorFst&lt;Arc&gt;* fst::RandPairFst </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfst_1_1RandFstOptions.html">RandFstOptions</a>&#160;</td>
          <td class="paramname"><em>opts</em> = <code><a class="el" href="structfst_1_1RandFstOptions.html">RandFstOptions</a>()</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a random FST. </p>
<p>Useful for randomized algorithm testing. Only works if weight can be constructed from a pair of floats </p>

<p class="definition">Definition at line <a class="el" href="rand-fst_8h_source.html#l00108">108</a> of file <a class="el" href="rand-fst_8h_source.html">rand-fst.h</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>, and <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                                                                                         {</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = <span class="keyword">new</span> VectorFst&lt;Arc&gt;();</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; start:</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="comment">// Create states.</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  vector&lt;StateId&gt; all_states;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)opts.n_states;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    StateId this_state = fst-&gt;AddState();</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> == 0) fst-&gt;SetStart(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    all_states.push_back(this_state);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  }</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="comment">// Set final states.</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)opts.n_final;<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    StateId <span class="keywordtype">id</span> = all_states[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % opts.n_states];</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    Weight weight (opts.weight_multiplier*(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5), opts.weight_multiplier*(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5));</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    fst-&gt;SetFinal(<span class="keywordtype">id</span>, weight);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  }</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="comment">// Create arcs.</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)opts.n_arcs;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> a;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    StateId start_state;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">if</span>(!opts.acyclic) { <span class="comment">// no restriction on arcs.</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      start_state = all_states[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % opts.n_states];</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      a.nextstate = all_states[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % opts.n_states];</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      start_state = all_states[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % (opts.n_states-1)];</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      a.nextstate = start_state + 1 + (<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % (opts.n_states-start_state-1));</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    }</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    a.ilabel = <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % opts.n_syms;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    a.olabel = <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % opts.n_syms;  <span class="comment">// same input+output vocab.</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    a.weight = <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> (opts.weight_multiplier*(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 4), opts.weight_multiplier*(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 4));</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    </div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    fst-&gt;AddArc(start_state, a);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  }</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="comment">// Trim resulting FST.</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  Connect(fst);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keywordflow">if</span> (opts.acyclic)</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    assert(fst-&gt;Properties(kAcyclic, <span class="keyword">true</span>) &amp; kAcyclic);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="keywordflow">if</span> (fst-&gt;Start() == kNoStateId &amp;&amp; !opts.allow_empty) {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">goto</span> start;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  }</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="keywordflow">return</span> fst;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="classsize__t_html"><div class="ttname"><a href="classsize__t.html">size_t</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6ebaa75f10ff622221ca4bac4104592a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ebaa75f10ff622221ca4bac4104592a">&#9670;&nbsp;</a></span>ReadAndPrepareLmFst()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fst::VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">fst::StdArc</a> &gt; * ReadAndPrepareLmFst </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>rxfilename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="kaldi-fst-io_8cc_source.html#l00125">125</a> of file <a class="el" href="kaldi-fst-io_8cc_source.html">kaldi-fst-io.cc</a>.</p>

<p class="reference">References <a class="el" href="kaldi-fst-io-inl_8h_source.html#l00073">ReadFstKaldi()</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-lmrescore-kaldi-rnnlm-pruned_8cc_source.html#l00032">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                                                                   {</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="comment">// ReadFstKaldi() will die with exception on failure.</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  fst::VectorFst&lt;fst::StdArc&gt; *ans = <a class="code" href="namespacefst.html#a477c0ccbc8a9560e60fccc00526e1a62">fst::ReadFstKaldi</a>(rxfilename);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="keywordflow">if</span> (ans-&gt;Properties(fst::kAcceptor, <span class="keyword">true</span>) == 0) {</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="comment">// If it&#39;s not already an acceptor, project on the output, i.e. copy olabels</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="comment">// to ilabels.  Generally the G.fst&#39;s on disk will have the disambiguation</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="comment">// symbol #0 on the input symbols of the backoff arc, and projection will</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="comment">// replace them with epsilons which is what is on the output symbols of</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="comment">// those arcs.</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    fst::Project(ans, fst::PROJECT_OUTPUT);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  }</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keywordflow">if</span> (ans-&gt;Properties(fst::kILabelSorted, <span class="keyword">true</span>) == 0) {</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment">// Make sure LM is sorted on ilabel.</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    fst::ILabelCompare&lt;fst::StdArc&gt; ilabel_comp;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    fst::ArcSort(ans, ilabel_comp);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  }</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordflow">return</span> ans;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;}</div><div class="ttc" id="namespacefst_html_a477c0ccbc8a9560e60fccc00526e1a62"><div class="ttname"><a href="namespacefst.html#a477c0ccbc8a9560e60fccc00526e1a62">fst::ReadFstKaldi</a></div><div class="ttdeci">void ReadFstKaldi(std::istream &amp;is, bool binary, VectorFst&lt; Arc &gt; *fst)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-fst-io-inl_8h_source.html#l00073">kaldi-fst-io-inl.h:73</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7a60c55abd6353cbe457f1d7babbd557"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a60c55abd6353cbe457f1d7babbd557">&#9670;&nbsp;</a></span>ReadAsConstFst()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ConstFst&lt;<a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a>&gt;* fst::ReadAsConstFst </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>rxfilename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="make-grammar-fst_8cc_source.html#l00032">32</a> of file <a class="el" href="make-grammar-fst_8cc_source.html">make-grammar-fst.cc</a>.</p>

<p class="reference">References <a class="el" href="kaldi-fst-io_8cc_source.html#l00045">ReadFstKaldiGeneric()</a>.</p>

<p class="reference">Referenced by <a class="el" href="make-grammar-fst_8cc_source.html#l00045">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;                                                       {</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <span class="comment">// the following call will throw if there is an error.</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  Fst&lt;StdArc&gt; *<a class="code" href="namespacefst.html">fst</a> = <a class="code" href="namespacefst.html#a7191fa1ffa0b81bd49b98feb94a95fe6">ReadFstKaldiGeneric</a>(rxfilename);</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  ConstFst&lt;StdArc&gt; *const_fst = <span class="keyword">dynamic_cast&lt;</span>ConstFst&lt;StdArc&gt;* <span class="keyword">&gt;</span>(fst);</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <span class="keywordflow">if</span> (!const_fst) {</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    const_fst = <span class="keyword">new</span> ConstFst&lt;StdArc&gt;(*fst);</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="keyword">delete</span> fst;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  }</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <span class="keywordflow">return</span> const_fst;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;}</div><div class="ttc" id="namespacefst_html_a7191fa1ffa0b81bd49b98feb94a95fe6"><div class="ttname"><a href="namespacefst.html#a7191fa1ffa0b81bd49b98feb94a95fe6">fst::ReadFstKaldiGeneric</a></div><div class="ttdeci">Fst&lt; StdArc &gt; * ReadFstKaldiGeneric(std::string rxfilename, bool throw_on_err)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-fst-io_8cc_source.html#l00045">kaldi-fst-io.cc:45</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a279c469277315d755bd9ed37d718c377"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a279c469277315d755bd9ed37d718c377">&#9670;&nbsp;</a></span>ReadConstFstFromStream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ConstFst&lt;<a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a>&gt;* fst::ReadConstFstFromStream </td>
          <td>(</td>
          <td class="paramtype">std::istream &amp;&#160;</td>
          <td class="paramname"><em>is</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="grammar-fst_8cc_source.html#l00404">404</a> of file <a class="el" href="grammar-fst_8cc_source.html">grammar-fst.cc</a>.</p>

<p class="reference">References <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>.</p>

<p class="reference">Referenced by <a class="el" href="grammar-fst_8cc_source.html#l00418">GrammarFst::Read()</a>.</p>
<div class="fragment"><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                                                                {</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  fst::FstHeader hdr;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  std::string stream_name(<span class="stringliteral">&quot;unknown&quot;</span>);</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="keywordflow">if</span> (!hdr.Read(is, stream_name))</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Reading FST: error reading FST header&quot;</span>;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  FstReadOptions ropts(<span class="stringliteral">&quot;&lt;unspecified&gt;&quot;</span>, &amp;hdr);</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  ConstFst&lt;StdArc&gt; *ans = ConstFst&lt;StdArc&gt;::Read(is, ropts);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="keywordflow">if</span> (!ans)</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Could not read ConstFst from stream.&quot;</span>;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="keywordflow">return</span> ans;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;}</div><div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad918f04119d515cf5a9cdb726f8ca996"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad918f04119d515cf5a9cdb726f8ca996">&#9670;&nbsp;</a></span>ReadFstKaldi() <span class="overload">[1/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; * ReadFstKaldi </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>rxfilename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="kaldi-fst-io_8cc_source.html#l00029">29</a> of file <a class="el" href="kaldi-fst-io_8cc_source.html">kaldi-fst-io.cc</a>.</p>

<p class="reference">References <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>, <a class="el" href="kaldi-io_8cc_source.html#l00061">kaldi::PrintableRxfilename()</a>, and <a class="el" href="kaldi-io_8cc_source.html#l00826">Input::Stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;                                                      {</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="keywordflow">if</span> (rxfilename == <span class="stringliteral">&quot;&quot;</span>) rxfilename = <span class="stringliteral">&quot;-&quot;</span>; <span class="comment">// interpret &quot;&quot; as stdin,</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <span class="comment">// for compatibility with OpenFst conventions.</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <a class="code" href="classkaldi_1_1Input.html">kaldi::Input</a> ki(rxfilename);</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  fst::FstHeader hdr;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="keywordflow">if</span> (!hdr.Read(ki.Stream(), rxfilename))</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Reading FST: error reading FST header from &quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;              &lt;&lt; <a class="code" href="group__io__group.html#gae9f938256b45b2f604f47abaa9890f45">kaldi::PrintableRxfilename</a>(rxfilename);</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  FstReadOptions ropts(<span class="stringliteral">&quot;&lt;unspecified&gt;&quot;</span>, &amp;hdr);</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  VectorFst&lt;StdArc&gt; *<a class="code" href="namespacefst.html">fst</a> = VectorFst&lt;StdArc&gt;::Read(ki.Stream(), ropts);</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="keywordflow">if</span> (!fst)</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Could not read fst from &quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;              &lt;&lt; <a class="code" href="group__io__group.html#gae9f938256b45b2f604f47abaa9890f45">kaldi::PrintableRxfilename</a>(rxfilename);</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="keywordflow">return</span> fst;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;}</div><div class="ttc" id="classkaldi_1_1Input_html"><div class="ttname"><a href="classkaldi_1_1Input.html">kaldi::Input</a></div><div class="ttdef"><b>Definition:</b> <a href="kaldi-io_8h_source.html#l00190">kaldi-io.h:190</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="group__io__group_html_gae9f938256b45b2f604f47abaa9890f45"><div class="ttname"><a href="group__io__group.html#gae9f938256b45b2f604f47abaa9890f45">kaldi::PrintableRxfilename</a></div><div class="ttdeci">std::string PrintableRxfilename(std::string rxfilename)</div><div class="ttdoc">PrintableRxfilename turns the rxfilename into a more human-readable form for error reporting...</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-io_8cc_source.html#l00061">kaldi-io.cc:61</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a102791361028fd97ce07cca6f2c26c82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a102791361028fd97ce07cca6f2c26c82">&#9670;&nbsp;</a></span>ReadFstKaldi() <span class="overload">[2/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::ReadFstKaldi </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>rxfilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a477c0ccbc8a9560e60fccc00526e1a62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a477c0ccbc8a9560e60fccc00526e1a62">&#9670;&nbsp;</a></span>ReadFstKaldi() <span class="overload">[3/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ReadFstKaldi </td>
          <td>(</td>
          <td class="paramtype">std::istream &amp;&#160;</td>
          <td class="paramname"><em>is</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>binary</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VectorFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="kaldi-fst-io-inl_8h_source.html#l00073">73</a> of file <a class="el" href="kaldi-fst-io-inl_8h_source.html">kaldi-fst-io-inl.h</a>.</p>

<p class="reference">References <a class="el" href="text-utils_8h_source.html#l00118">kaldi::ConvertStringToInteger()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00064">rnnlm::d</a>, <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>, <a class="el" href="text-utils_8h_source.html#l00068">kaldi::SplitStringToIntegers()</a>, <a class="el" href="text-utils_8cc_source.html#l00063">kaldi::SplitStringToVector()</a>, and <a class="el" href="kaldi-fst-io-inl_8h_source.html#l00063">StrToWeight()</a>.</p>

<p class="reference">Referenced by <a class="el" href="align-equal_8cc_source.html#l00031">main()</a>, <a class="el" href="kaldi-fst-io-inl_8h_source.html#l00180">VectorFstTplHolder&lt; Arc &gt;::Read()</a>, <a class="el" href="kaldi-fst-io_8cc_source.html#l00125">ReadAndPrepareLmFst()</a>, and <a class="el" href="kaldi-fst-io_8cc_source.html#l00109">ReadFstKaldi()</a>.</p>
<div class="fragment"><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                                       {</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keywordflow">if</span> (binary) {</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment">// We don&#39;t have access to the filename here, so write [unknown].</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    VectorFst&lt;Arc&gt; *ans =</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        VectorFst&lt;Arc&gt;::Read(is, fst::FstReadOptions(std::string(<span class="stringliteral">&quot;[unknown]&quot;</span>)));</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">if</span> (ans == NULL) {</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Error reading FST from stream.&quot;</span>;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    }</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    *<a class="code" href="namespacefst.html">fst</a> = *ans;  <span class="comment">// shallow copy.</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keyword">delete</span> ans;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="comment">// Consume the \r on Windows, the \n that the text-form FST format starts</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="comment">// with, and any extra spaces that might have got in there somehow.</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">while</span> (std::isspace(is.peek()) &amp;&amp; is.peek() != <span class="charliteral">&#39;\n&#39;</span>) is.get();</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">if</span> (is.peek() == <span class="charliteral">&#39;\n&#39;</span>) is.get(); <span class="comment">// consume the newline.</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">else</span> { <span class="comment">// saw spaces but no newline.. this is not expected.</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Reading FST: unexpected sequence of spaces &quot;</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                &lt;&lt; <span class="stringliteral">&quot; at file position &quot;</span> &lt;&lt; is.tellg();</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    }</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keyword">using</span> std::string;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keyword">using</span> std::vector;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keyword">using</span> <a class="code" href="namespacekaldi.html#ae95740f87fc2fb79419753e21396c647">kaldi::SplitStringToIntegers</a>;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keyword">using</span> <a class="code" href="namespacekaldi.html#a39eb3f7ce5fab6dbbcb396b3f8e196f4">kaldi::ConvertStringToInteger</a>;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <a class="code" href="namespacefst.html">fst</a>-&gt;DeleteStates();</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordtype">string</span> line;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordtype">size_t</span> nline = 0;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordtype">string</span> separator = FLAGS_fst_field_separator + <span class="stringliteral">&quot;\r\n&quot;</span>;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">while</span> (std::getline(is, line)) {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      nline++;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      vector&lt;string&gt; col;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      <span class="comment">// on Windows we&#39;ll write in text and read in binary mode.</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      <a class="code" href="namespacekaldi.html#ac332ce23fcf74c011cfa83276cd08477">kaldi::SplitStringToVector</a>(line, separator.c_str(), <span class="keyword">true</span>, &amp;col);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <span class="keywordflow">if</span> (col.size() == 0) <span class="keywordflow">break</span>; <span class="comment">// Empty line is a signal to stop, in our</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <span class="comment">// archive format.</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <span class="keywordflow">if</span> (col.size() &gt; 5) {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Bad line in FST: &quot;</span> &lt;&lt; line;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      }</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      StateId s;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacekaldi.html#a39eb3f7ce5fab6dbbcb396b3f8e196f4">ConvertStringToInteger</a>(col[0], &amp;s)) {</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Bad line in FST: &quot;</span> &lt;&lt; line;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      }</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      <span class="keywordflow">while</span> (s &gt;= <a class="code" href="namespacefst.html">fst</a>-&gt;NumStates())</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <a class="code" href="namespacefst.html">fst</a>-&gt;AddState();</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      <span class="keywordflow">if</span> (nline == 1) <a class="code" href="namespacefst.html">fst</a>-&gt;SetStart(s);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> arc;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      Weight w;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      StateId <a class="code" href="namespacernnlm.html#a873684cefeb665f3d5e6b495de57fc0d">d</a> = s;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <span class="keywordflow">switch</span> (col.size()) {</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;          <a class="code" href="namespacefst.html">fst</a>-&gt;SetFinal(s, Weight::One());</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="namespacefst.html#a7f846d9d9f15191161529f06a5c8909c">StrToWeight</a>(col[1], <span class="keyword">true</span>, &amp;w)) ok = <span class="keyword">false</span>;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;          <span class="keywordflow">else</span> <a class="code" href="namespacefst.html">fst</a>-&gt;SetFinal(s, w);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keywordflow">case</span> 3: <span class="comment">// 3 columns not ok for Lattice format; it&#39;s not an acceptor.</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;          ok = <span class="keyword">false</span>;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordflow">case</span> 4:</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;          ok = <a class="code" href="namespacekaldi.html#a39eb3f7ce5fab6dbbcb396b3f8e196f4">ConvertStringToInteger</a>(col[1], &amp;arc.nextstate) &amp;&amp;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;              <a class="code" href="namespacekaldi.html#a39eb3f7ce5fab6dbbcb396b3f8e196f4">ConvertStringToInteger</a>(col[2], &amp;arc.ilabel) &amp;&amp;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;              <a class="code" href="namespacekaldi.html#a39eb3f7ce5fab6dbbcb396b3f8e196f4">ConvertStringToInteger</a>(col[3], &amp;arc.olabel);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;          <span class="keywordflow">if</span> (ok) {</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            d = arc.nextstate;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            arc.weight = Weight::One();</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            <a class="code" href="namespacefst.html">fst</a>-&gt;AddArc(s, arc);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;          }</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordflow">case</span> 5:</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;          ok = <a class="code" href="namespacekaldi.html#a39eb3f7ce5fab6dbbcb396b3f8e196f4">ConvertStringToInteger</a>(col[1], &amp;arc.nextstate) &amp;&amp;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;              <a class="code" href="namespacekaldi.html#a39eb3f7ce5fab6dbbcb396b3f8e196f4">ConvertStringToInteger</a>(col[2], &amp;arc.ilabel) &amp;&amp;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;              <a class="code" href="namespacekaldi.html#a39eb3f7ce5fab6dbbcb396b3f8e196f4">ConvertStringToInteger</a>(col[3], &amp;arc.olabel) &amp;&amp;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;              <a class="code" href="namespacefst.html#a7f846d9d9f15191161529f06a5c8909c">StrToWeight</a>(col[4], <span class="keyword">false</span>, &amp;arc.weight);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;          <span class="keywordflow">if</span> (ok) {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            d = arc.nextstate;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            <a class="code" href="namespacefst.html">fst</a>-&gt;AddArc(s, arc);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;          }</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;          ok = <span class="keyword">false</span>;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      }</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <span class="keywordflow">while</span> (d &gt;= <a class="code" href="namespacefst.html">fst</a>-&gt;NumStates()) <a class="code" href="namespacefst.html">fst</a>-&gt;AddState();</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <span class="keywordflow">if</span> (!ok)</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Bad line in FST: &quot;</span> &lt;&lt; line;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    }</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  }</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacekaldi_html_a39eb3f7ce5fab6dbbcb396b3f8e196f4"><div class="ttname"><a href="namespacekaldi.html#a39eb3f7ce5fab6dbbcb396b3f8e196f4">kaldi::ConvertStringToInteger</a></div><div class="ttdeci">bool ConvertStringToInteger(const std::string &amp;str, Int *out)</div><div class="ttdoc">Converts a string into an integer via strtoll and returns false if there was any kind of problem (i...</div><div class="ttdef"><b>Definition:</b> <a href="text-utils_8h_source.html#l00118">text-utils.h:118</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacekaldi_html_ae95740f87fc2fb79419753e21396c647"><div class="ttname"><a href="namespacekaldi.html#ae95740f87fc2fb79419753e21396c647">kaldi::SplitStringToIntegers</a></div><div class="ttdeci">bool SplitStringToIntegers(const std::string &amp;full, const char *delim, bool omit_empty_strings, std::vector&lt; I &gt; *out)</div><div class="ttdoc">Split a string (e.g. </div><div class="ttdef"><b>Definition:</b> <a href="text-utils_8h_source.html#l00068">text-utils.h:68</a></div></div>
<div class="ttc" id="namespacekaldi_html_ac332ce23fcf74c011cfa83276cd08477"><div class="ttname"><a href="namespacekaldi.html#ac332ce23fcf74c011cfa83276cd08477">kaldi::SplitStringToVector</a></div><div class="ttdeci">void SplitStringToVector(const std::string &amp;full, const char *delim, bool omit_empty_strings, std::vector&lt; std::string &gt; *out)</div><div class="ttdoc">Split a string using any of the single character delimiters. </div><div class="ttdef"><b>Definition:</b> <a href="text-utils_8cc_source.html#l00063">text-utils.cc:63</a></div></div>
<div class="ttc" id="namespacefst_html_a7f846d9d9f15191161529f06a5c8909c"><div class="ttname"><a href="namespacefst.html#a7f846d9d9f15191161529f06a5c8909c">fst::StrToWeight</a></div><div class="ttdeci">bool StrToWeight(const std::string &amp;s, bool allow_zero, W *w)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-fst-io-inl_8h_source.html#l00063">kaldi-fst-io-inl.h:63</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_a873684cefeb665f3d5e6b495de57fc0d"><div class="ttname"><a href="namespacernnlm.html#a873684cefeb665f3d5e6b495de57fc0d">rnnlm::d</a></div><div class="ttdeci">double d</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00064">mikolov-rnnlm-lib.cc:64</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4af6995bca3f3fb53439405f42165c19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4af6995bca3f3fb53439405f42165c19">&#9670;&nbsp;</a></span>ReadFstKaldi() <span class="overload">[4/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::ReadFstKaldi </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>rxfilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">fst::StdVectorFst</a> *&#160;</td>
          <td class="paramname"><em>ofst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="kaldi-fst-io_8cc_source.html#l00109">109</a> of file <a class="el" href="kaldi-fst-io_8cc_source.html">kaldi-fst-io.cc</a>.</p>

<p class="reference">References <a class="el" href="kaldi-fst-io-inl_8h_source.html#l00073">ReadFstKaldi()</a>.</p>
<div class="fragment"><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                                                               {</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <a class="code" href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">fst::StdVectorFst</a> *<a class="code" href="namespacefst.html">fst</a> = <a class="code" href="namespacefst.html#a4af6995bca3f3fb53439405f42165c19">ReadFstKaldi</a>(rxfilename);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  *ofst = *fst;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keyword">delete</span> fst;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a88a968cc6f6d68c2b3dd6aa90385f65c"><div class="ttname"><a href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">fst::StdVectorFst</a></div><div class="ttdeci">fst::StdVectorFst StdVectorFst</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00056">deterministic-fst-test.cc:56</a></div></div>
<div class="ttc" id="namespacefst_html_a4af6995bca3f3fb53439405f42165c19"><div class="ttname"><a href="namespacefst.html#a4af6995bca3f3fb53439405f42165c19">fst::ReadFstKaldi</a></div><div class="ttdeci">void ReadFstKaldi(std::string rxfilename, fst::StdVectorFst *ofst)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-fst-io_8cc_source.html#l00109">kaldi-fst-io.cc:109</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7191fa1ffa0b81bd49b98feb94a95fe6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7191fa1ffa0b81bd49b98feb94a95fe6">&#9670;&nbsp;</a></span>ReadFstKaldiGeneric()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Fst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; * ReadFstKaldiGeneric </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>rxfilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>throw_on_err</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="kaldi-fst-io_8cc_source.html#l00045">45</a> of file <a class="el" href="kaldi-fst-io_8cc_source.html">kaldi-fst-io.cc</a>.</p>

<p class="reference">References <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>, <a class="el" href="kaldi-error_8h_source.html#l00129">KALDI_WARN</a>, <a class="el" href="kaldi-io_8cc_source.html#l00061">kaldi::PrintableRxfilename()</a>, and <a class="el" href="kaldi-io_8cc_source.html#l00826">Input::Stream()</a>.</p>

<p class="reference">Referenced by <a class="el" href="latgen-faster-mapped-parallel_8cc_source.html#l00034">main()</a>, and <a class="el" href="make-grammar-fst_8cc_source.html#l00032">ReadAsConstFst()</a>.</p>
<div class="fragment"><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                                                                          {</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keywordflow">if</span> (rxfilename == <span class="stringliteral">&quot;&quot;</span>) rxfilename = <span class="stringliteral">&quot;-&quot;</span>; <span class="comment">// interpret &quot;&quot; as stdin,</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="comment">// for compatibility with OpenFst conventions.</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <a class="code" href="classkaldi_1_1Input.html">kaldi::Input</a> ki(rxfilename);</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  fst::FstHeader hdr;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="comment">// Read FstHeader which contains the type of FST</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="keywordflow">if</span> (!hdr.Read(ki.Stream(), rxfilename)) {</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keywordflow">if</span>(throw_on_err) {</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;      <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Reading FST: error reading FST header from &quot;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                &lt;&lt; <a class="code" href="group__io__group.html#gae9f938256b45b2f604f47abaa9890f45">kaldi::PrintableRxfilename</a>(rxfilename);</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;      <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;We fail to read FST header from &quot;</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                 &lt;&lt; <a class="code" href="group__io__group.html#gae9f938256b45b2f604f47abaa9890f45">kaldi::PrintableRxfilename</a>(rxfilename)</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot;. A NULL pointer is returned.&quot;</span>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    }</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  }</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="comment">// Check the type of Arc</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordflow">if</span> (hdr.ArcType() != fst::StdArc::Type()) {</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keywordflow">if</span>(throw_on_err) {</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;      <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;FST with arc type &quot;</span> &lt;&lt; hdr.ArcType() &lt;&lt; <span class="stringliteral">&quot; is not supported.&quot;</span>;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;      <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;Fst with arc type&quot;</span> &lt;&lt; hdr.ArcType()</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot; is not supported. A NULL pointer is returned.&quot;</span>;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    }</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  }</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="comment">// Read the FST</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  FstReadOptions ropts(<span class="stringliteral">&quot;&lt;unspecified&gt;&quot;</span>, &amp;hdr);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  Fst&lt;StdArc&gt; *<a class="code" href="namespacefst.html">fst</a> = NULL;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="keywordflow">if</span> (hdr.FstType() == <span class="stringliteral">&quot;const&quot;</span>) {</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    fst = ConstFst&lt;StdArc&gt;::Read(ki.Stream(), ropts);</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hdr.FstType() == <span class="stringliteral">&quot;vector&quot;</span>) {</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    fst = VectorFst&lt;StdArc&gt;::Read(ki.Stream(), ropts);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  }</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="keywordflow">if</span> (!fst) {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">if</span>(throw_on_err) {</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;     <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Could not read fst from &quot;</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;               &lt;&lt; <a class="code" href="group__io__group.html#gae9f938256b45b2f604f47abaa9890f45">kaldi::PrintableRxfilename</a>(rxfilename);</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;Could not read fst from &quot;</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                 &lt;&lt; <a class="code" href="group__io__group.html#gae9f938256b45b2f604f47abaa9890f45">kaldi::PrintableRxfilename</a>(rxfilename)</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot;. A NULL pointer is returned.&quot;</span>;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    }</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  }</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">return</span> fst;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;}</div><div class="ttc" id="classkaldi_1_1Input_html"><div class="ttname"><a href="classkaldi_1_1Input.html">kaldi::Input</a></div><div class="ttdef"><b>Definition:</b> <a href="kaldi-io_8h_source.html#l00190">kaldi-io.h:190</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="group__io__group_html_gae9f938256b45b2f604f47abaa9890f45"><div class="ttname"><a href="group__io__group.html#gae9f938256b45b2f604f47abaa9890f45">kaldi::PrintableRxfilename</a></div><div class="ttdeci">std::string PrintableRxfilename(std::string rxfilename)</div><div class="ttdoc">PrintableRxfilename turns the rxfilename into a more human-readable form for error reporting...</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-io_8cc_source.html#l00061">kaldi-io.cc:61</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
<div class="ttc" id="group__error__group_html_ga994be213ddf127b5d6f20a43a02b513a"><div class="ttname"><a href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a></div><div class="ttdeci">#define KALDI_WARN</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00129">kaldi-error.h:129</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a05f4ee704ff98edc7675f37d91649bdb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05f4ee704ff98edc7675f37d91649bdb">&#9670;&nbsp;</a></span>ReadILabelInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ReadILabelInfo </td>
          <td>(</td>
          <td class="paramtype">std::istream &amp;&#160;</td>
          <td class="paramname"><em>is</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>binary</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; vector&lt; int32 &gt; &gt; *&#160;</td>
          <td class="paramname"><em>info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Utility function for reading ilabel-info vectors from disk. </p>

<p class="definition">Definition at line <a class="el" href="context-fst_8cc_source.html#l00334">334</a> of file <a class="el" href="context-fst_8cc_source.html">context-fst.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="io-funcs-inl_8h_source.html#l00055">kaldi::ReadBasicType()</a>, and <a class="el" href="io-funcs-inl_8h_source.html#l00232">kaldi::ReadIntegerVector()</a>.</p>

<p class="reference">Referenced by <a class="el" href="make-h-transducer_8cc_source.html#l00029">main()</a>, and <a class="el" href="context-fst-test_8cc_source.html#l00157">TestContextFst()</a>.</p>
<div class="fragment"><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                                                  {</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  int32 size = info-&gt;size();</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga1bd1af0ef712b76f2332febcec8d095a">kaldi::ReadBasicType</a>(is, binary, &amp;size);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  info-&gt;resize(size);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; size; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <a class="code" href="group__io__funcs__basic.html#ga0e0391048fe585c1e97b4d65d59d32bc">kaldi::ReadIntegerVector</a>(is, binary, &amp;((*info)[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]));</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  }</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;}</div><div class="ttc" id="group__io__funcs__basic_html_ga1bd1af0ef712b76f2332febcec8d095a"><div class="ttname"><a href="group__io__funcs__basic.html#ga1bd1af0ef712b76f2332febcec8d095a">kaldi::ReadBasicType</a></div><div class="ttdeci">void ReadBasicType(std::istream &amp;is, bool binary, T *t)</div><div class="ttdoc">ReadBasicType is the name of the read function for bool, integer types, and floating-point types...</div><div class="ttdef"><b>Definition:</b> <a href="io-funcs-inl_8h_source.html#l00055">io-funcs-inl.h:55</a></div></div>
<div class="ttc" id="group__io__funcs__basic_html_ga0e0391048fe585c1e97b4d65d59d32bc"><div class="ttname"><a href="group__io__funcs__basic.html#ga0e0391048fe585c1e97b4d65d59d32bc">kaldi::ReadIntegerVector</a></div><div class="ttdeci">void ReadIntegerVector(std::istream &amp;is, bool binary, std::vector&lt; T &gt; *v)</div><div class="ttdoc">Function for reading STL vector of integer types. </div><div class="ttdef"><b>Definition:</b> <a href="io-funcs-inl_8h_source.html#l00232">io-funcs-inl.h:232</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a47b707ba4aef86613621869006abe99a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47b707ba4aef86613621869006abe99a">&#9670;&nbsp;</a></span>RemoveAlignmentsFromCompactLattice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RemoveAlignmentsFromCompactLattice </td>
          <td>(</td>
          <td class="paramtype">MutableFst&lt; ArcTpl&lt; <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>, Int &gt; &gt; &gt; *&#160;</td>
          <td class="paramname"><em>fst</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes state-level alignments (the strings that are part of the weights). </p>

<p class="definition">Definition at line <a class="el" href="lattice-utils-inl_8h_source.html#l00222">222</a> of file <a class="el" href="lattice-utils-inl_8h_source.html">lattice-utils-inl.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-utils_8h_source.html#l00156">LatticeScale()</a>, <a class="el" href="lattice-interp_8cc_source.html#l00026">main()</a>, and <a class="el" href="sausages_8cc_source.html#l00318">MinimumBayesRisk::MinimumBayesRisk()</a>.</p>
<div class="fragment"><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                                                                     {</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="keyword">typedef</span> CompactLatticeWeightTpl&lt;Weight, Int&gt; W;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keyword">typedef</span> ArcTpl&lt;W&gt; <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keyword">typedef</span> MutableFst&lt;Arc&gt; Fst;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  StateId num_states = <a class="code" href="namespacefst.html">fst</a>-&gt;NumStates();</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="keywordflow">for</span> (StateId s = 0; s &lt; num_states; s++) {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">for</span> (MutableArcIterator&lt;Fst&gt; aiter(<a class="code" href="namespacefst.html">fst</a>, s);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;         !aiter.Done();</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;         aiter.Next()) {</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      Arc arc = aiter.Value();</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      arc.weight = W(arc.weight.Weight(), std::vector&lt;Int&gt;());</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      aiter.SetValue(arc);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    }</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    W final_weight = <a class="code" href="namespacefst.html">fst</a>-&gt;Final(s);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">if</span> (final_weight != W::Zero())</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <a class="code" href="namespacefst.html">fst</a>-&gt;SetFinal(s, W(final_weight.Weight(), std::vector&lt;Int&gt;()));</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  }</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a33d579cd05b334089d57b2a7ccd1ecc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33d579cd05b334089d57b2a7ccd1ecc8">&#9670;&nbsp;</a></span>RemoveArcsWithSomeInputSymbols()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::RemoveArcsWithSomeInputSymbols </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; I &gt; &amp;&#160;</td>
          <td class="paramname"><em>symbols_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VectorFst&lt; <a class="el" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstrmsymbols_8cc_source.html#l00033">33</a> of file <a class="el" href="fstrmsymbols_8cc_source.html">fstrmsymbols.cc</a>.</p>

<p class="reference">References <a class="el" href="const-integer-set-inl_8h_source.html#l00062">ConstIntegerSet&lt; I &gt;::count()</a>, and <a class="el" href="kaldi-error_8h_source.html#l00129">KALDI_WARN</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstrmsymbols_8cc_source.html#l00085">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;                                                         {</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <a class="code" href="classkaldi_1_1ConstIntegerSet.html">kaldi::ConstIntegerSet&lt;I&gt;</a> symbol_set(symbols_in);</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  StateId num_states = <a class="code" href="namespacefst.html">fst</a>-&gt;NumStates();</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  StateId dead_state = <a class="code" href="namespacefst.html">fst</a>-&gt;AddState();</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="keywordflow">for</span> (StateId s = 0; s &lt; num_states; s++) {</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="keywordflow">for</span> (MutableArcIterator&lt;VectorFst&lt;Arc&gt; &gt; iter(<a class="code" href="namespacefst.html">fst</a>, s);</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;         !iter.Done(); iter.Next()) {</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;      <span class="keywordflow">if</span> (symbol_set.count(iter.Value().ilabel) != 0) {</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> arc = iter.Value();</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        arc.nextstate = dead_state;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        iter.SetValue(arc);</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;      }</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    }</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  }</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="comment">// Connect() will actually remove the arcs, and the dead state.</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  Connect(<a class="code" href="namespacefst.html">fst</a>);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacefst.html">fst</a>-&gt;NumStates() == 0)</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;After Connect(), fst was empty.&quot;</span>;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="classkaldi_1_1ConstIntegerSet_html"><div class="ttname"><a href="classkaldi_1_1ConstIntegerSet.html">kaldi::ConstIntegerSet</a></div><div class="ttdef"><b>Definition:</b> <a href="const-integer-set_8h_source.html#l00043">const-integer-set.h:43</a></div></div>
<div class="ttc" id="group__error__group_html_ga994be213ddf127b5d6f20a43a02b513a"><div class="ttname"><a href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a></div><div class="ttdeci">#define KALDI_WARN</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00129">kaldi-error.h:129</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa21bb5fdd25868b9fd813a15f37aef8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa21bb5fdd25868b9fd813a15f37aef8e">&#9670;&nbsp;</a></span>RemoveEpsLocal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RemoveEpsLocal </td>
          <td>(</td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>fst</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>RemoveEpsLocal remove some (but not necessarily all) epsilons in an FST, using an algorithm that is guaranteed to never increase the number of arcs in the FST (and will also never increase the number of states). </p>
<p>The algorithm is not optimal but is reasonably clever. It does not just remove epsilon arcs;it also combines pairs of input-epsilon and output-epsilon arcs into one. The algorithm preserves equivalence and stochasticity in the given semiring. If you want to preserve stochasticity in a different semiring (e.g. log), then use RemoveEpsLocalSpecial, which only words for StdArc but which preserves stochasticity, where possible (*) in the LogArc sense. The reason that we can't just cast to a different semiring is that in that case we would no longer be able to guarantee equivalence in the original semiring (this arises from what happens when we combine identical arcs). (*) by "where possible".. there are situations where we wouldn't be able to preserve stochasticity in the LogArc sense while maintaining equivalence in the StdArc sense, so in these situations we maintain equivalence. </p>

<p class="definition">Definition at line <a class="el" href="remove-eps-local-inl_8h_source.html#l00309">309</a> of file <a class="el" href="remove-eps-local-inl_8h_source.html">remove-eps-local-inl.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="training-graph-compiler_8cc_source.html#l00073">TrainingGraphCompiler::CompileGraph()</a>, <a class="el" href="training-graph-compiler_8cc_source.html#l00161">TrainingGraphCompiler::CompileGraphs()</a>, <a class="el" href="simple-decoder_8cc_source.html#l00123">SimpleDecoder::GetBestPath()</a>, <a class="el" href="faster-decoder_8cc_source.html#l00087">FasterDecoder::GetBestPath()</a>, <a class="el" href="biglm-faster-decoder_8h_source.html#l00115">BiglmFasterDecoder::GetBestPath()</a>, <a class="el" href="hmm-utils_8cc_source.html#l00032">kaldi::GetHmmAsFsa()</a>, <a class="el" href="compile-graph_8cc_source.html#l00032">main()</a>, <a class="el" href="arpa-lm-compiler_8cc_source.html#l00323">ArpaLmCompiler::RemoveRedundantStates()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00357">SafeDeterminizeMinimizeWrapper()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00408">SafeDeterminizeMinimizeWrapperInLog()</a>, and <a class="el" href="remove-eps-local-test_8cc_source.html#l00033">TestRemoveEpsLocal()</a>.</p>
<div class="fragment"><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                                          {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  RemoveEpsLocalClass&lt;Arc&gt; c(<a class="code" href="namespacefst.html">fst</a>);  <span class="comment">// work gets done in initializer.</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aae64b4835d6f9be3bcf646e644542ef8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae64b4835d6f9be3bcf646e644542ef8">&#9670;&nbsp;</a></span>RemoveEpsLocalSpecial()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void RemoveEpsLocalSpecial </td>
          <td>(</td>
          <td class="paramtype">MutableFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *&#160;</td>
          <td class="paramname"><em>fst</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>As RemoveEpsLocal but takes care to preserve stochasticity when cast to LogArc. </p>

<p class="definition">Definition at line <a class="el" href="remove-eps-local-inl_8h_source.html#l00314">314</a> of file <a class="el" href="remove-eps-local-inl_8h_source.html">remove-eps-local-inl.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstrmepslocal_8cc_source.html#l00045">main()</a>, and <a class="el" href="remove-eps-local-test_8cc_source.html#l00113">TestRemoveEpsLocalSpecial()</a>.</p>
<div class="fragment"><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                                                    {</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="comment">// work gets done in initializer.</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  RemoveEpsLocalClass&lt;StdArc, ReweightPlusLogArc&gt; c(<a class="code" href="namespacefst.html">fst</a>);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a954ae05d3b7066bd26c09cf13c3a5d4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a954ae05d3b7066bd26c09cf13c3a5d4d">&#9670;&nbsp;</a></span>RemoveSomeInputSymbols()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RemoveSomeInputSymbols </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; I &gt; &amp;&#160;</td>
          <td class="paramname"><em>to_remove</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>RemoveSomeInputSymbols removes any symbol that appears in "to_remove", from the input side of the FST, replacing them with epsilon. </p>

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00119">119</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="kaldi-utils_8h_source.html#l00133">KALDI_ASSERT_IS_INTEGER_TYPE</a>.</p>

<p class="reference">Referenced by <a class="el" href="training-graph-compiler_8cc_source.html#l00073">TrainingGraphCompiler::CompileGraph()</a>, <a class="el" href="training-graph-compiler_8cc_source.html#l00161">TrainingGraphCompiler::CompileGraphs()</a>, <a class="el" href="compile-graph_8cc_source.html#l00032">main()</a>, <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>, <a class="el" href="word-align-lattice_8cc_source.html#l00293">LatticeWordAligner::RemoveEpsilonsFromLattice()</a>, <a class="el" href="word-align-lattice-lexicon_8cc_source.html#l00308">LatticeLexiconWordAligner::RemoveEpsilonsFromLattice()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00357">SafeDeterminizeMinimizeWrapper()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00345">SafeDeterminizeWrapper()</a>, and <a class="el" href="word-align-lattice_8cc_source.html#l00891">WordAlignedLatticeTester::TestEquivalent()</a>.</p>
<div class="fragment"><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                                                  {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <a class="code" href="kaldi-utils_8h.html#a61d7854c20dc53362038896af515d2cd">KALDI_ASSERT_IS_INTEGER_TYPE</a>(I);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  RemoveSomeInputSymbolsMapper&lt;Arc, I&gt; mapper(to_remove);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  Map(<a class="code" href="namespacefst.html">fst</a>, mapper);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;}</div><div class="ttc" id="kaldi-utils_8h_html_a61d7854c20dc53362038896af515d2cd"><div class="ttname"><a href="kaldi-utils_8h.html#a61d7854c20dc53362038896af515d2cd">KALDI_ASSERT_IS_INTEGER_TYPE</a></div><div class="ttdeci">#define KALDI_ASSERT_IS_INTEGER_TYPE(I)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-utils_8h_source.html#l00133">kaldi-utils.h:133</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adfb3de4d04cbaf233f99b259362eeba2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfb3de4d04cbaf233f99b259362eeba2">&#9670;&nbsp;</a></span>RemoveUselessArcs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RemoveUselessArcs </td>
          <td>(</td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>fst</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00950">950</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, and <a class="el" href="kaldi-error_8h_source.html#l00135">KALDI_VLOG</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>, and <a class="el" href="fstext-utils-test_8cc_source.html#l00367">TestRemoveUselessArcs()</a>.</p>
<div class="fragment"><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                                             {</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  NaturalLess&lt;Weight&gt; nl;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  StateId non_coacc_state = kNoStateId;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  <span class="keywordtype">size_t</span> num_arcs_removed = 0, tot_arcs = 0;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  <span class="keywordflow">for</span> (StateIterator&lt;MutableFst&lt;Arc&gt; &gt; siter(*<a class="code" href="namespacefst.html">fst</a>);</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;      !siter.Done();</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      siter.Next()) {</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    vector&lt;size_t&gt; arcs_to_delete;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    vector&lt;Arc&gt; arcs;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <span class="comment">// pair2arclist lets us look up the arcs</span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    std::map&lt;pair&lt;Label, StateId&gt;, vector&lt;size_t&gt; &gt; pair2arclist;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    StateId state = siter.Value();</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <span class="keywordflow">for</span> (ArcIterator&lt;MutableFst&lt;Arc&gt; &gt; aiter(*<a class="code" href="namespacefst.html">fst</a>, state);</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        !aiter.Done();</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        aiter.Next()) {</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;      <span class="keywordtype">size_t</span> pos = arcs.size();</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &amp;arc = aiter.Value();</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;      arcs.push_back(arc);</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;      pair2arclist[std::make_pair(arc.ilabel, arc.nextstate)].push_back(pos);</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    }</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <span class="keyword">typename</span> std::map&lt;pair&lt;Label, StateId&gt;, vector&lt;size_t&gt; &gt;::iterator</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        iter = pair2arclist.begin(), end = pair2arclist.end();</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <span class="keywordflow">for</span> (; iter!= end; ++iter) {</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      <span class="keyword">const</span> vector&lt;size_t&gt; &amp;poslist = iter-&gt;second;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      <span class="keywordflow">if</span> (poslist.size() &gt; 1) {  <span class="comment">// &gt;1 arc with same ilabel, dest-state</span></div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        <span class="keywordtype">size_t</span> best_pos = poslist[0];</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        Weight best_weight = arcs[best_pos].weight;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 1; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; poslist.size(); <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;          <span class="keywordtype">size_t</span> pos = poslist[<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>];</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;          Weight this_weight = arcs[pos].weight;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;          <span class="keywordflow">if</span> (nl(this_weight, best_weight)) {  <span class="comment">// NaturalLess seems to be somehow</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;            <span class="comment">// &quot;backwards&quot;.</span></div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;            best_weight = this_weight;  <span class="comment">// found a better one.</span></div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;            best_pos = pos;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;          }</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        }</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; poslist.size(); <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++)</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;          <span class="keywordflow">if</span> (poslist[<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>] != best_pos)</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;            arcs_to_delete.push_back(poslist[<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>]);</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(poslist.size() == 1);</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        <span class="keywordtype">size_t</span> pos = poslist[0];</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> &amp;arc = arcs[pos];</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        <span class="keywordflow">if</span> (arc.ilabel == 0 &amp;&amp; arc.nextstate == state)</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;          arcs_to_delete.push_back(pos);</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;      }</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    }</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    tot_arcs += arcs.size();</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <span class="keywordflow">if</span> (arcs_to_delete.size() != 0) {</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;      num_arcs_removed += arcs_to_delete.size();</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;      <span class="keywordflow">if</span> (non_coacc_state == kNoStateId)</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        non_coacc_state = <a class="code" href="namespacefst.html">fst</a>-&gt;AddState();</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;      MutableArcIterator&lt;MutableFst&lt;Arc&gt; &gt; maiter(<a class="code" href="namespacefst.html">fst</a>, state);</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; arcs_to_delete.size(); <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;        <span class="keywordtype">size_t</span> pos = arcs_to_delete[<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>];</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        maiter.Seek(pos);</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        arcs[pos].nextstate = non_coacc_state;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        maiter.SetValue(arcs[pos]);</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;      }</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    }</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  }</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  <span class="keywordflow">if</span> (non_coacc_state != kNoStateId)</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    Connect(<a class="code" href="namespacefst.html">fst</a>);</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  <a class="code" href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a>(1) &lt;&lt; <span class="stringliteral">&quot;removed &quot;</span> &lt;&lt; num_arcs_removed &lt;&lt; <span class="stringliteral">&quot; of &quot;</span> &lt;&lt; tot_arcs</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                &lt;&lt; <span class="stringliteral">&quot;arcs.&quot;</span>;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="group__error__group_html_ga16c81ec6ff3ba04c6ff96fdaed9d854e"><div class="ttname"><a href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a></div><div class="ttdeci">#define KALDI_VLOG(v)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00135">kaldi-error.h:135</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a27e110281b5adb2eea46d8470385d31f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27e110281b5adb2eea46d8470385d31f">&#9670;&nbsp;</a></span>RemoveWeights()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RemoveWeights </td>
          <td>(</td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>ifst</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00434">434</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-difference_8cc_source.html#l00026">main()</a>, <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>, and <a class="el" href="fstext-utils-test_8cc_source.html#l00195">TestAcceptorMinimize()</a>.</p>
<div class="fragment"><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                                          {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="keywordflow">for</span> (StateIterator&lt;MutableFst&lt;Arc&gt; &gt; siter(*ifst); !siter.Done(); siter.Next()) {</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    StateId s = siter.Value();</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordflow">for</span> (MutableArcIterator&lt;MutableFst&lt;Arc&gt; &gt;  aiter(ifst, s); !aiter.Done(); aiter.Next()) {</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> arc(aiter.Value());</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      arc.weight = Weight::One();</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      aiter.SetValue(arc);</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    }</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordflow">if</span> (ifst-&gt;Final(s) != Weight::Zero())</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      ifst-&gt;SetFinal(s, Weight::One());</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  }</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  ifst-&gt;SetProperties(kUnweighted, kUnweighted);</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7b73c3b912ae5971263216fb1c988b2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b73c3b912ae5971263216fb1c988b2b">&#9670;&nbsp;</a></span>RhoCompose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RhoCompose </td>
          <td>(</td>
          <td class="paramtype">const Fst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>fst1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Fst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>fst2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">typename Arc::Label&#160;</td>
          <td class="paramname"><em>rho_label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l01096">1096</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="fstext-utils-inl_8h_source.html#l01173">IsStochasticFst()</a>, and <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>.</p>
<div class="fragment"><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;                                       {</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(rho_label != kNoLabel); <span class="comment">// just use regular compose in this case.</span></div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  <span class="keyword">typedef</span> Fst&lt;Arc&gt; F;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  <span class="keyword">typedef</span> RhoMatcher&lt;SortedMatcher&lt;F&gt; &gt; RM;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <a class="code" href="classCacheOptions.html">CacheOptions</a> base_opts;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  base_opts.gc_limit = 0; <span class="comment">// Cache only the last state for fastest copy.</span></div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  <span class="comment">// ComposeFstImplOptions templated on matcher for fst1, matcher for fst2.</span></div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;  <span class="comment">// The matcher for fst1 doesn&#39;t matter; we&#39;ll use fst2&#39;s matcher.</span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  ComposeFstImplOptions&lt;SortedMatcher&lt;F&gt;, RM&gt; impl_opts(base_opts);</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  <span class="comment">// the false below is something called rho_loop which is something I don&#39;t</span></div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <span class="comment">// fully understand, but I don&#39;t think we want it.</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  <span class="comment">// These pointers are taken ownership of, by ComposeFst.</span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  RM *rho_matcher =</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;      <span class="keyword">new</span> RM(fst2, MATCH_INPUT, rho_label);</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  SortedMatcher&lt;F&gt; *sorted_matcher =</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;      <span class="keyword">new</span> SortedMatcher&lt;F&gt;(fst1, MATCH_NONE); <span class="comment">// tell it</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <span class="comment">// not to use this matcher, as this would mean we would</span></div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  <span class="comment">// not follow rho transitions.</span></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  impl_opts.matcher1 = sorted_matcher;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  impl_opts.matcher2 = rho_matcher;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  *ofst = ComposeFst&lt;Arc&gt;(fst1, fst2, impl_opts);</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  Connect(ofst);</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;}</div><div class="ttc" id="classCacheOptions_html"><div class="ttname"><a href="classCacheOptions.html">CacheOptions</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae8879829362d7a0f0117247ded14e19f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8879829362d7a0f0117247ded14e19f">&#9670;&nbsp;</a></span>SafeDeterminizeMinimizeWrapper()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SafeDeterminizeMinimizeWrapper </td>
          <td>(</td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>ifst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VectorFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfloat.html">float</a>&#160;</td>
          <td class="paramname"><em>delta</em> = <code>kDelta</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SafeDeterminizeMinimizeWapper is as SafeDeterminizeWrapper except that it also minimizes (encoded minimization, which is safe). </p>
<p>This algorithm will destroy "ifst". </p>

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00357">357</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="determinize-star-inl_8h_source.html#l00625">DeterminizeStar()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00054">HighestNumberedInputSymbol()</a>, <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>, <a class="el" href="pre-determinize-inl_8h_source.html#l00317">PreDeterminize()</a>, <a class="el" href="remove-eps-local-inl_8h_source.html#l00309">RemoveEpsLocal()</a>, and <a class="el" href="fstext-utils-inl_8h_source.html#l00119">RemoveSomeInputSymbols()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>, and <a class="el" href="fstext-utils-test_8cc_source.html#l00087">TestSafeDeterminizeWrapper()</a>.</p>
<div class="fragment"><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                                                                                              {</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> highest_sym = <a class="code" href="namespacefst.html#ac359ee42978cf57f9c5dfdc50df8fe16">HighestNumberedInputSymbol</a>(*ifst);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  vector&lt;typename Arc::Label&gt; extra_syms;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <a class="code" href="namespacefst.html#aaf75c786b2e62e985ace7739c5e58e77">PreDeterminize</a>(ifst,</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                 (<span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a>)(highest_sym+1),</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                 &amp;extra_syms);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <a class="code" href="group__fst__extensions.html#gac6d4823e83f5353ae5b5ce569a7a29a3">DeterminizeStar</a>(*ifst, ofst, delta);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <a class="code" href="namespacefst.html#a954ae05d3b7066bd26c09cf13c3a5d4d">RemoveSomeInputSymbols</a>(extra_syms, ofst);  <span class="comment">// remove the extra symbols.</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <a class="code" href="namespacefst.html#aa21bb5fdd25868b9fd813a15f37aef8e">RemoveEpsLocal</a>(ofst);  <span class="comment">// this is &quot;safe&quot; and will never hurt.</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <a class="code" href="namespacefst.html#afb4020188382e3aa0dafe317df145765">MinimizeEncoded</a>(ofst, delta);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;}</div><div class="ttc" id="namespacefst_html_aa21bb5fdd25868b9fd813a15f37aef8e"><div class="ttname"><a href="namespacefst.html#aa21bb5fdd25868b9fd813a15f37aef8e">fst::RemoveEpsLocal</a></div><div class="ttdeci">void RemoveEpsLocal(MutableFst&lt; Arc &gt; *fst)</div><div class="ttdoc">RemoveEpsLocal remove some (but not necessarily all) epsilons in an FST, using an algorithm that is g...</div><div class="ttdef"><b>Definition:</b> <a href="remove-eps-local-inl_8h_source.html#l00309">remove-eps-local-inl.h:309</a></div></div>
<div class="ttc" id="namespacefst_html_a954ae05d3b7066bd26c09cf13c3a5d4d"><div class="ttname"><a href="namespacefst.html#a954ae05d3b7066bd26c09cf13c3a5d4d">fst::RemoveSomeInputSymbols</a></div><div class="ttdeci">void RemoveSomeInputSymbols(const vector&lt; I &gt; &amp;to_remove, MutableFst&lt; Arc &gt; *fst)</div><div class="ttdoc">RemoveSomeInputSymbols removes any symbol that appears in &quot;to_remove&quot;, from the input side of the FST...</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00119">fstext-utils-inl.h:119</a></div></div>
<div class="ttc" id="namespacefst_html_afb4020188382e3aa0dafe317df145765"><div class="ttname"><a href="namespacefst.html#afb4020188382e3aa0dafe317df145765">fst::MinimizeEncoded</a></div><div class="ttdeci">void MinimizeEncoded(VectorFst&lt; Arc &gt; *fst, float delta=kDelta)</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils_8h_source.html#l00114">fstext-utils.h:114</a></div></div>
<div class="ttc" id="namespacefst_html_aaf75c786b2e62e985ace7739c5e58e77"><div class="ttname"><a href="namespacefst.html#aaf75c786b2e62e985ace7739c5e58e77">fst::PreDeterminize</a></div><div class="ttdeci">void PreDeterminize(MutableFst&lt; Arc &gt; *fst, typename Arc::Label first_new_sym, vector&lt; Int &gt; *symsOut)</div><div class="ttdef"><b>Definition:</b> <a href="pre-determinize-inl_8h_source.html#l00317">pre-determinize-inl.h:317</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacefst_html_ac359ee42978cf57f9c5dfdc50df8fe16"><div class="ttname"><a href="namespacefst.html#ac359ee42978cf57f9c5dfdc50df8fe16">fst::HighestNumberedInputSymbol</a></div><div class="ttdeci">Arc::Label HighestNumberedInputSymbol(const Fst&lt; Arc &gt; &amp;fst)</div><div class="ttdoc">Returns the highest numbered input symbol id of the FST (or zero for an empty FST. </div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00054">fstext-utils-inl.h:54</a></div></div>
<div class="ttc" id="group__fst__extensions_html_gac6d4823e83f5353ae5b5ce569a7a29a3"><div class="ttname"><a href="group__fst__extensions.html#gac6d4823e83f5353ae5b5ce569a7a29a3">fst::DeterminizeStar</a></div><div class="ttdeci">bool DeterminizeStar(F &amp;ifst, MutableFst&lt; typename F::Arc &gt; *ofst, float delta, bool *debug_ptr, int max_states, bool allow_partial)</div><div class="ttdoc">This function implements the normal version of DeterminizeStar, in which the output strings are repre...</div><div class="ttdef"><b>Definition:</b> <a href="determinize-star-inl_8h_source.html#l00625">determinize-star-inl.h:625</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa3220461ade577911b4400996626a4f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3220461ade577911b4400996626a4f0">&#9670;&nbsp;</a></span>SafeDeterminizeMinimizeWrapperInLog()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SafeDeterminizeMinimizeWrapperInLog </td>
          <td>(</td>
          <td class="paramtype">VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *&#160;</td>
          <td class="paramname"><em>ifst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfloat.html">float</a>&#160;</td>
          <td class="paramname"><em>delta</em> = <code>kDelta</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>SafeDeterminizeMinimizeWapperInLog is as SafeDeterminizeMinimizeWrapper except it first casts tothe log semiring. </p>

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00408">408</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>, <a class="el" href="remove-eps-local-inl_8h_source.html#l00309">RemoveEpsLocal()</a>, and <a class="el" href="fstext-utils-inl_8h_source.html#l00345">SafeDeterminizeWrapper()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>, and <a class="el" href="fstext-utils-test_8cc_source.html#l00087">TestSafeDeterminizeWrapper()</a>.</p>
<div class="fragment"><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                                                                                                        {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  VectorFst&lt;LogArc&gt; *ifst_log = <span class="keyword">new</span> VectorFst&lt;LogArc&gt;;  <span class="comment">// Want to determinize in log semiring.</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  Cast(*ifst, ifst_log);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  VectorFst&lt;LogArc&gt; *ofst_log = <span class="keyword">new</span> VectorFst&lt;LogArc&gt;;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <a class="code" href="namespacefst.html#a603f9590e0369ac80054f72e18fc3ab0">SafeDeterminizeWrapper</a>(ifst_log, ofst_log, delta);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  Cast(*ofst_log, ofst);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="keyword">delete</span> ifst_log;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keyword">delete</span> ofst_log;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <a class="code" href="namespacefst.html#aa21bb5fdd25868b9fd813a15f37aef8e">RemoveEpsLocal</a>(ofst);  <span class="comment">// this is &quot;safe&quot; and will never hurt.  Do this in tropical, which is important.</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <a class="code" href="namespacefst.html#afb4020188382e3aa0dafe317df145765">MinimizeEncoded</a>(ofst, delta);  <span class="comment">// Non-deterministic minimization will fail in log semiring so do it with StdARc.</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;}</div><div class="ttc" id="namespacefst_html_aa21bb5fdd25868b9fd813a15f37aef8e"><div class="ttname"><a href="namespacefst.html#aa21bb5fdd25868b9fd813a15f37aef8e">fst::RemoveEpsLocal</a></div><div class="ttdeci">void RemoveEpsLocal(MutableFst&lt; Arc &gt; *fst)</div><div class="ttdoc">RemoveEpsLocal remove some (but not necessarily all) epsilons in an FST, using an algorithm that is g...</div><div class="ttdef"><b>Definition:</b> <a href="remove-eps-local-inl_8h_source.html#l00309">remove-eps-local-inl.h:309</a></div></div>
<div class="ttc" id="namespacefst_html_afb4020188382e3aa0dafe317df145765"><div class="ttname"><a href="namespacefst.html#afb4020188382e3aa0dafe317df145765">fst::MinimizeEncoded</a></div><div class="ttdeci">void MinimizeEncoded(VectorFst&lt; Arc &gt; *fst, float delta=kDelta)</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils_8h_source.html#l00114">fstext-utils.h:114</a></div></div>
<div class="ttc" id="namespacefst_html_a603f9590e0369ac80054f72e18fc3ab0"><div class="ttname"><a href="namespacefst.html#a603f9590e0369ac80054f72e18fc3ab0">fst::SafeDeterminizeWrapper</a></div><div class="ttdeci">void SafeDeterminizeWrapper(MutableFst&lt; Arc &gt; *ifst, MutableFst&lt; Arc &gt; *ofst, float delta)</div><div class="ttdoc">Does PreDeterminize and DeterminizeStar and then removes the disambiguation symbols. </div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00345">fstext-utils-inl.h:345</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a603f9590e0369ac80054f72e18fc3ab0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a603f9590e0369ac80054f72e18fc3ab0">&#9670;&nbsp;</a></span>SafeDeterminizeWrapper()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SafeDeterminizeWrapper </td>
          <td>(</td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>ifst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfloat.html">float</a>&#160;</td>
          <td class="paramname"><em>delta</em> = <code>kDelta</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Does PreDeterminize and DeterminizeStar and then removes the disambiguation symbols. </p>
<p>This is a form of determinization that will never blow up. Note that ifst is non-const and can be considered to be destroyed by this operation. Does not do epsilon removal (RemoveEpsLocal)&ndash; this is so it's safe to cast to log and do this, and maintain equivalence in tropical. </p>

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00345">345</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="determinize-star-inl_8h_source.html#l00625">DeterminizeStar()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00054">HighestNumberedInputSymbol()</a>, <a class="el" href="pre-determinize-inl_8h_source.html#l00317">PreDeterminize()</a>, and <a class="el" href="fstext-utils-inl_8h_source.html#l00119">RemoveSomeInputSymbols()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstext-utils_8h_source.html#l00114">MinimizeEncoded()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00408">SafeDeterminizeMinimizeWrapperInLog()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00421">SafeDeterminizeWrapperInLog()</a>, and <a class="el" href="fstext-utils-test_8cc_source.html#l00087">TestSafeDeterminizeWrapper()</a>.</p>
<div class="fragment"><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                                                                                       {</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> highest_sym = <a class="code" href="namespacefst.html#ac359ee42978cf57f9c5dfdc50df8fe16">HighestNumberedInputSymbol</a>(*ifst);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  vector&lt;typename Arc::Label&gt; extra_syms;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <a class="code" href="namespacefst.html#aaf75c786b2e62e985ace7739c5e58e77">PreDeterminize</a>(ifst,</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                 (<span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a>)(highest_sym+1),</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                 &amp;extra_syms);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <a class="code" href="group__fst__extensions.html#gac6d4823e83f5353ae5b5ce569a7a29a3">DeterminizeStar</a>(*ifst, ofst, delta);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <a class="code" href="namespacefst.html#a954ae05d3b7066bd26c09cf13c3a5d4d">RemoveSomeInputSymbols</a>(extra_syms, ofst);  <span class="comment">// remove the extra symbols.</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;}</div><div class="ttc" id="namespacefst_html_a954ae05d3b7066bd26c09cf13c3a5d4d"><div class="ttname"><a href="namespacefst.html#a954ae05d3b7066bd26c09cf13c3a5d4d">fst::RemoveSomeInputSymbols</a></div><div class="ttdeci">void RemoveSomeInputSymbols(const vector&lt; I &gt; &amp;to_remove, MutableFst&lt; Arc &gt; *fst)</div><div class="ttdoc">RemoveSomeInputSymbols removes any symbol that appears in &quot;to_remove&quot;, from the input side of the FST...</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00119">fstext-utils-inl.h:119</a></div></div>
<div class="ttc" id="namespacefst_html_aaf75c786b2e62e985ace7739c5e58e77"><div class="ttname"><a href="namespacefst.html#aaf75c786b2e62e985ace7739c5e58e77">fst::PreDeterminize</a></div><div class="ttdeci">void PreDeterminize(MutableFst&lt; Arc &gt; *fst, typename Arc::Label first_new_sym, vector&lt; Int &gt; *symsOut)</div><div class="ttdef"><b>Definition:</b> <a href="pre-determinize-inl_8h_source.html#l00317">pre-determinize-inl.h:317</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacefst_html_ac359ee42978cf57f9c5dfdc50df8fe16"><div class="ttname"><a href="namespacefst.html#ac359ee42978cf57f9c5dfdc50df8fe16">fst::HighestNumberedInputSymbol</a></div><div class="ttdeci">Arc::Label HighestNumberedInputSymbol(const Fst&lt; Arc &gt; &amp;fst)</div><div class="ttdoc">Returns the highest numbered input symbol id of the FST (or zero for an empty FST. </div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00054">fstext-utils-inl.h:54</a></div></div>
<div class="ttc" id="group__fst__extensions_html_gac6d4823e83f5353ae5b5ce569a7a29a3"><div class="ttname"><a href="group__fst__extensions.html#gac6d4823e83f5353ae5b5ce569a7a29a3">fst::DeterminizeStar</a></div><div class="ttdeci">bool DeterminizeStar(F &amp;ifst, MutableFst&lt; typename F::Arc &gt; *ofst, float delta, bool *debug_ptr, int max_states, bool allow_partial)</div><div class="ttdoc">This function implements the normal version of DeterminizeStar, in which the output strings are repre...</div><div class="ttdef"><b>Definition:</b> <a href="determinize-star-inl_8h_source.html#l00625">determinize-star-inl.h:625</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acb7d66e9308748eca3f2eb1f818ae1d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb7d66e9308748eca3f2eb1f818ae1d5">&#9670;&nbsp;</a></span>SafeDeterminizeWrapperInLog()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void fst::SafeDeterminizeWrapperInLog </td>
          <td>(</td>
          <td class="paramtype">VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *&#160;</td>
          <td class="paramname"><em>ifst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfloat.html">float</a>&#160;</td>
          <td class="paramname"><em>delta</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils-inl_8h_source.html#l00421">421</a> of file <a class="el" href="fstext-utils-inl_8h_source.html">fstext-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="fstext-utils-inl_8h_source.html#l00345">SafeDeterminizeWrapper()</a>.</p>
<div class="fragment"><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                                                                                                {</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  VectorFst&lt;LogArc&gt; *ifst_log = <span class="keyword">new</span> VectorFst&lt;LogArc&gt;;  <span class="comment">// Want to determinize in log semiring.</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  Cast(*ifst, ifst_log);</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  VectorFst&lt;LogArc&gt; *ofst_log = <span class="keyword">new</span> VectorFst&lt;LogArc&gt;;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <a class="code" href="namespacefst.html#a603f9590e0369ac80054f72e18fc3ab0">SafeDeterminizeWrapper</a>(ifst_log, ofst_log, delta);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  Cast(*ofst_log, ofst);</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="keyword">delete</span> ifst_log;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="keyword">delete</span> ofst_log;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;}</div><div class="ttc" id="namespacefst_html_a603f9590e0369ac80054f72e18fc3ab0"><div class="ttname"><a href="namespacefst.html#a603f9590e0369ac80054f72e18fc3ab0">fst::SafeDeterminizeWrapper</a></div><div class="ttdeci">void SafeDeterminizeWrapper(MutableFst&lt; Arc &gt; *ifst, MutableFst&lt; Arc &gt; *ofst, float delta)</div><div class="ttdoc">Does PreDeterminize and DeterminizeStar and then removes the disambiguation symbols. </div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00345">fstext-utils-inl.h:345</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a43c0c2263cc58499e55a8e00176c3dc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43c0c2263cc58499e55a8e00176c3dc4">&#9670;&nbsp;</a></span>ScaleLattice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ScaleLattice </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; vector&lt; ScaleFloat &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; ArcTpl&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> &gt; &gt; *&#160;</td>
          <td class="paramname"><em>fst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Scales the pairs of weights in LatticeWeight or CompactLatticeWeight by viewing the pair (a, b) as a 2-vector and pre-multiplying by the 2x2 matrix in "scale". </p>
<p>E.g. typically scale would equal [ 1 0; 0 acwt ] if we want to scale the acoustics by "acwt". </p>

<p class="definition">Definition at line <a class="el" href="lattice-utils-inl_8h_source.html#l00197">197</a> of file <a class="el" href="lattice-utils-inl_8h_source.html">lattice-utils-inl.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-utils_8h_source.html#l00130">DefaultLatticeScale()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00233">ScaleTupleWeight()</a>.</p>

<p class="reference">Referenced by <a class="el" href="discriminative-supervision_8cc_source.html#l00232">DiscriminativeSupervisionSplitter::CreateRangeLattice()</a>, <a class="el" href="gmm-latgen-biglm-faster_8cc_source.html#l00036">kaldi::DecodeUtterance()</a>, <a class="el" href="decoder-wrappers_8cc_source.html#l00201">kaldi::DecodeUtteranceLatticeFaster()</a>, <a class="el" href="decoder-wrappers_8cc_source.html#l00331">kaldi::DecodeUtteranceLatticeSimple()</a>, <a class="el" href="lattice-utils_8h_source.html#l00156">LatticeScale()</a>, <a class="el" href="gmm-decode-biglm-faster_8cc_source.html#l00068">main()</a>, <a class="el" href="lattice-determinize-phone-pruned-parallel_8cc_source.html#l00046">DeterminizeLatticeTask::operator()()</a>, <a class="el" href="decoder-wrappers_8cc_source.html#l00064">DecodeUtteranceLatticeFasterClass::operator()()</a>, <a class="el" href="discriminative-supervision_8cc_source.html#l00362">DiscriminativeSupervisionSplitter::PrepareLattice()</a>, and <a class="el" href="lattice-utils-test_8cc_source.html#l00234">TestScalePair()</a>.</p>
<div class="fragment"><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                                      {</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  assert(scale.size() == 2 &amp;&amp; scale[0].size() == 2 &amp;&amp; scale[1].size() == 2);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="keywordflow">if</span> (scale == <a class="code" href="namespacefst.html#a295c809e48d355794a9489f0aa35f4bb">DefaultLatticeScale</a>()) <span class="comment">// nothing to do.</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keyword">typedef</span> ArcTpl&lt;Weight&gt; <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keyword">typedef</span> MutableFst&lt;Arc&gt; Fst;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  StateId num_states = <a class="code" href="namespacefst.html">fst</a>-&gt;NumStates();</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="keywordflow">for</span> (StateId s = 0; s &lt; num_states; s++) {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">for</span> (MutableArcIterator&lt;Fst&gt; aiter(<a class="code" href="namespacefst.html">fst</a>, s);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;         !aiter.Done();</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;         aiter.Next()) {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      Arc arc = aiter.Value();</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      arc.weight = <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>(<a class="code" href="namespacefst.html#a9ce7436781aadfd93c45023d1791826b">ScaleTupleWeight</a>(arc.weight, scale));</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      aiter.SetValue(arc);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    }</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> final_weight = <a class="code" href="namespacefst.html">fst</a>-&gt;Final(s);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">if</span> (final_weight != Weight::Zero())</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <a class="code" href="namespacefst.html">fst</a>-&gt;SetFinal(s, <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>(<a class="code" href="namespacefst.html#a9ce7436781aadfd93c45023d1791826b">ScaleTupleWeight</a>(final_weight, scale)));</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  }</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html_a9ce7436781aadfd93c45023d1791826b"><div class="ttname"><a href="namespacefst.html#a9ce7436781aadfd93c45023d1791826b">fst::ScaleTupleWeight</a></div><div class="ttdeci">LatticeWeightTpl&lt; FloatType &gt; ScaleTupleWeight(const LatticeWeightTpl&lt; FloatType &gt; &amp;w, const vector&lt; vector&lt; ScaleFloatType &gt; &gt; &amp;scale)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00233">lattice-weight.h:233</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a295c809e48d355794a9489f0aa35f4bb"><div class="ttname"><a href="namespacefst.html#a295c809e48d355794a9489f0aa35f4bb">fst::DefaultLatticeScale</a></div><div class="ttdeci">vector&lt; vector&lt; double &gt; &gt; DefaultLatticeScale()</div><div class="ttdoc">Returns a default 2x2 matrix scaling factor for LatticeWeight. </div><div class="ttdef"><b>Definition:</b> <a href="lattice-utils_8h_source.html#l00130">lattice-utils.h:130</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9ce7436781aadfd93c45023d1791826b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ce7436781aadfd93c45023d1791826b">&#9670;&nbsp;</a></span>ScaleTupleWeight() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt;FloatType&gt; fst::ScaleTupleWeight </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vector&lt; vector&lt; ScaleFloatType &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>scale</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight_8h_source.html#l00233">233</a> of file <a class="el" href="lattice-weight_8h_source.html">lattice-weight.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00052">LatticeWeightTpl&lt; FloatType &gt;::Value1()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00054">LatticeWeightTpl&lt; FloatType &gt;::Value2()</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-utils-inl_8h_source.html#l00197">ScaleLattice()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00809">ScaleTupleWeight()</a>.</p>
<div class="fragment"><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                                                  {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="comment">// Without the next special case we&#39;d get NaNs from infinity * 0</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keywordflow">if</span> (w.Value1() == numeric_limits&lt;FloatType&gt;::infinity())</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">return</span> LatticeWeightTpl&lt;FloatType&gt;::Zero();</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keywordflow">return</span> LatticeWeightTpl&lt;FloatType&gt;(scale[0][0] * w.Value1() + scale[0][1] * w.Value2(),</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                                     scale[1][0] * w.Value1() + scale[1][1] * w.Value2());</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a57c26dbd9293618187cd15a031f8a72b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57c26dbd9293618187cd15a031f8a72b">&#9670;&nbsp;</a></span>ScaleTupleWeight() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">PairWeight&lt;TropicalWeightTpl&lt;FloatType&gt;, TropicalWeightTpl&lt;FloatType&gt; &gt; fst::ScaleTupleWeight </td>
          <td>(</td>
          <td class="paramtype">const PairWeight&lt; TropicalWeightTpl&lt; FloatType &gt;, TropicalWeightTpl&lt; FloatType &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vector&lt; vector&lt; ScaleFloatType &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>scale</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight_8h_source.html#l00250">250</a> of file <a class="el" href="lattice-weight_8h_source.html">lattice-weight.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                                                                    {</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keyword">typedef</span> TropicalWeightTpl&lt;FloatType&gt; BaseType;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keyword">typedef</span> PairWeight&lt;BaseType, BaseType&gt; PairType;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="keyword">const</span> BaseType zero = BaseType::Zero();</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="comment">// Without the next special case we&#39;d get NaNs from infinity * 0</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keywordflow">if</span> (w.Value1() == zero || w.Value2() == zero)</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">return</span> PairType(zero, zero);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  FloatType f1 = w.Value1().Value(), f2 = w.Value2().Value();</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="keywordflow">return</span> PairType(BaseType(scale[0][0] * f1 + scale[0][1] * f2),</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                  BaseType(scale[1][0] * f1 + scale[1][1] * f2));</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a77b6227fe3877df652306b8b797324e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77b6227fe3877df652306b8b797324e7">&#9670;&nbsp;</a></span>ScaleTupleWeight() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt;<a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>, IntType&gt; fst::ScaleTupleWeight </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; <a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>, IntType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vector&lt; vector&lt; ScaleFloatType &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>scale</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Scales the pair (a, b) of floating-point weights inside a CompactLatticeWeight by premultiplying it (viewed as a vector) by a 2x2 matrix "scale". </p>
<p>Assumes there is a ScaleTupleWeight function that applies to "Weight"; this currently only works if Weight equals LatticeWeightTpl&lt;FloatType&gt; for some FloatType. </p>

<p class="definition">Definition at line <a class="el" href="lattice-weight_8h_source.html#l00809">809</a> of file <a class="el" href="lattice-weight_8h_source.html">lattice-weight.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00233">ScaleTupleWeight()</a>, <a class="el" href="lattice-weight_8h_source.html#l00450">CompactLatticeWeightTpl&lt; WeightType, IntType &gt;::String()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00448">CompactLatticeWeightTpl&lt; WeightType, IntType &gt;::Weight()</a>.</p>
<div class="fragment"><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                                                  {</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  <span class="keywordflow">return</span> CompactLatticeWeightTpl&lt;Weight, IntType&gt;(</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>(<a class="code" href="namespacefst.html#a77b6227fe3877df652306b8b797324e7">ScaleTupleWeight</a>(w.Weight(), scale)), w.String());</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;}</div><div class="ttc" id="namespacefst_html_a77b6227fe3877df652306b8b797324e7"><div class="ttname"><a href="namespacefst.html#a77b6227fe3877df652306b8b797324e7">fst::ScaleTupleWeight</a></div><div class="ttdeci">CompactLatticeWeightTpl&lt; Weight, IntType &gt; ScaleTupleWeight(const CompactLatticeWeightTpl&lt; Weight, IntType &gt; &amp;w, const vector&lt; vector&lt; ScaleFloatType &gt; &gt; &amp;scale)</div><div class="ttdoc">Scales the pair (a, b) of floating-point weights inside a CompactLatticeWeight by premultiplying it (...</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00809">lattice-weight.h:809</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7f846d9d9f15191161529f06a5c8909c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f846d9d9f15191161529f06a5c8909c">&#9670;&nbsp;</a></span>StrToWeight()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> fst::StrToWeight </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>allow_zero</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">W *&#160;</td>
          <td class="paramname"><em>w</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="kaldi-fst-io-inl_8h_source.html#l00063">63</a> of file <a class="el" href="kaldi-fst-io-inl_8h_source.html">kaldi-fst-io-inl.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="kaldi-fst-io-inl_8h_source.html#l00073">ReadFstKaldi()</a>.</p>
<div class="fragment"><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                                                                   {</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  std::istringstream strm(s);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  strm &gt;&gt; *w;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keywordflow">if</span> (strm.fail() || (!allow_zero &amp;&amp; *w == W::Zero())) {</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  }</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="aa4121807cfc94de5efb2420716093ca6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4121807cfc94de5efb2420716093ca6">&#9670;&nbsp;</a></span>TableCompose() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TableCompose </td>
          <td>(</td>
          <td class="paramtype">const Fst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>ifst1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Fst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>ifst2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structfst_1_1TableComposeOptions.html">TableComposeOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>opts</em> = <code><a class="el" href="structfst_1_1TableComposeOptions.html">TableComposeOptions</a>()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="table-matcher_8h_source.html#l00315">315</a> of file <a class="el" href="table-matcher_8h_source.html">table-matcher.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="training-graph-compiler_8cc_source.html#l00073">TrainingGraphCompiler::CompileGraph()</a>, <a class="el" href="training-graph-compiler_8cc_source.html#l00161">TrainingGraphCompiler::CompileGraphs()</a>, <a class="el" href="compile-graph_8cc_source.html#l00032">main()</a>, <a class="el" href="table-matcher-test_8cc_source.html#l00028">TestTableMatcher()</a>, <a class="el" href="table-matcher-test_8cc_source.html#l00104">TestTableMatcherCacheLeft()</a>, and <a class="el" href="table-matcher-test_8cc_source.html#l00173">TestTableMatcherCacheRight()</a>.</p>
<div class="fragment"><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                                                                           {</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="keyword">typedef</span> Fst&lt;Arc&gt; F;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <a class="code" href="classCacheOptions.html">CacheOptions</a> nopts;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  nopts.gc_limit = 0;  <span class="comment">// Cache only the last state for fastest copy.</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="keywordflow">if</span> (opts.table_match_type == MATCH_OUTPUT) {</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="comment">// ComposeFstImplOptions templated on matcher for fst1, matcher for fst2.</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    ComposeFstImplOptions&lt;TableMatcher&lt;F&gt;, SortedMatcher&lt;F&gt; &gt; impl_opts(nopts);</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    impl_opts.matcher1 = <span class="keyword">new</span> TableMatcher&lt;F&gt;(ifst1, MATCH_OUTPUT, opts);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    *ofst = ComposeFst&lt;Arc&gt;(ifst1, ifst2, impl_opts);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    assert(opts.table_match_type == MATCH_INPUT) ;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="comment">// ComposeFstImplOptions templated on matcher for fst1, matcher for fst2.</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    ComposeFstImplOptions&lt;SortedMatcher&lt;F&gt;, TableMatcher&lt;F&gt; &gt; impl_opts(nopts);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    impl_opts.matcher2 = <span class="keyword">new</span> TableMatcher&lt;F&gt;(ifst2, MATCH_INPUT, opts);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    *ofst = ComposeFst&lt;Arc&gt;(ifst1, ifst2, impl_opts);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="keywordflow">if</span> (opts.connect) Connect(ofst);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;}</div><div class="ttc" id="classCacheOptions_html"><div class="ttname"><a href="classCacheOptions.html">CacheOptions</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaa5f211f4b0291079c1b4e42f3b419f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa5f211f4b0291079c1b4e42f3b419f1">&#9670;&nbsp;</a></span>TableCompose() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TableCompose </td>
          <td>(</td>
          <td class="paramtype">const Fst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>ifst1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Fst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>ifst2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MutableFst&lt; Arc &gt; *&#160;</td>
          <td class="paramname"><em>ofst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfst_1_1TableComposeCache.html">TableComposeCache</a>&lt; Fst&lt; Arc &gt; &gt; *&#160;</td>
          <td class="paramname"><em>cache</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="table-matcher_8h_source.html#l00348">348</a> of file <a class="el" href="table-matcher_8h_source.html">table-matcher.h</a>.</p>

<p class="reference">References <a class="el" href="table-matcher_8h_source.html#l00282">TableMatcher&lt; F, BackoffMatcher &gt;::Copy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                                                       {</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="keyword">typedef</span> Fst&lt;Arc&gt; F;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  assert(cache != NULL);</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <a class="code" href="classCacheOptions.html">CacheOptions</a> nopts;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  nopts.gc_limit = 0;  <span class="comment">// Cache only the last state for fastest copy.</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="keywordflow">if</span> (cache-&gt;opts.table_match_type == MATCH_OUTPUT) {</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    ComposeFstImplOptions&lt;TableMatcher&lt;F&gt;, SortedMatcher&lt;F&gt; &gt; impl_opts(nopts);</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordflow">if</span> (cache-&gt;matcher == NULL)</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      cache-&gt;matcher = <span class="keyword">new</span> TableMatcher&lt;F&gt;(ifst1, MATCH_OUTPUT, cache-&gt;opts);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    impl_opts.matcher1 = cache-&gt;matcher-&gt;Copy();  <span class="comment">// not passing &quot;safe&quot;: may not</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="comment">// be thread-safe-- anway I don&#39;t understand this part.</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    *ofst = ComposeFst&lt;Arc&gt;(ifst1, ifst2, impl_opts);</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    assert(cache-&gt;opts.table_match_type == MATCH_INPUT) ;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    ComposeFstImplOptions&lt;SortedMatcher&lt;F&gt;, TableMatcher&lt;F&gt; &gt; impl_opts(nopts);</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordflow">if</span> (cache-&gt;matcher == NULL)</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      cache-&gt;matcher = <span class="keyword">new</span> TableMatcher&lt;F&gt;(ifst2, MATCH_INPUT, cache-&gt;opts);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    impl_opts.matcher2 = cache-&gt;matcher-&gt;Copy();</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    *ofst = ComposeFst&lt;Arc&gt;(ifst1, ifst2, impl_opts);</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  }</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="keywordflow">if</span> (cache-&gt;opts.connect) Connect(ofst);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;}</div><div class="ttc" id="classCacheOptions_html"><div class="ttname"><a href="classCacheOptions.html">CacheOptions</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a46cc54bb3eb71e64f7d163ab55be9da4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46cc54bb3eb71e64f7d163ab55be9da4">&#9670;&nbsp;</a></span>TestAcceptorMinimize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestAcceptorMinimize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils-test_8cc_source.html#l00195">195</a> of file <a class="el" href="fstext-utils-test_8cc_source.html">fstext-utils-test.cc</a>.</p>

<p class="reference">References <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>, and <a class="el" href="fstext-utils-inl_8h_source.html#l00434">RemoveWeights()</a>.</p>
<div class="fragment"><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                                                 {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = RandFst&lt;Arc&gt;();</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  Project(fst, PROJECT_INPUT);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <a class="code" href="namespacefst.html#a27e110281b5adb2eea46d8470385d31f">RemoveWeights</a>(fst);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  VectorFst&lt;Arc&gt; fst2(*fst);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  internal::AcceptorMinimize(&amp;fst2);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  assert(RandEquivalent(*fst, fst2, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keyword">delete</span> fst;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacefst_html_a27e110281b5adb2eea46d8470385d31f"><div class="ttname"><a href="namespacefst.html#a27e110281b5adb2eea46d8470385d31f">fst::RemoveWeights</a></div><div class="ttdeci">void RemoveWeights(MutableFst&lt; Arc &gt; *ifst)</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00434">fstext-utils-inl.h:434</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6f7eda522e7cfe853fd685bc06ccc159"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f7eda522e7cfe853fd685bc06ccc159">&#9670;&nbsp;</a></span>TestAddSelfLoops()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestAddSelfLoops </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="pre-determinize-test_8cc_source.html#l00140">140</a> of file <a class="el" href="pre-determinize-test_8cc_source.html">pre-determinize-test.cc</a>.</p>

<p class="reference">References <a class="el" href="pre-determinize-inl_8h_source.html#l00599">AddSelfLoops()</a>, <a class="el" href="pre-determinize-inl_8h_source.html#l00581">CreateNewSymbols()</a>, and <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                                             {</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = <span class="keyword">new</span> VectorFst&lt;Arc&gt;();</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  SymbolTable *ilabels = <span class="keyword">new</span> SymbolTable(<span class="stringliteral">&quot;my-symbol-table&quot;</span>);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  SymbolTable *olabels = <span class="keyword">new</span> SymbolTable(<span class="stringliteral">&quot;my-symbol-table-2&quot;</span>);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  Label i0 = ilabels-&gt;AddSymbol(<span class="stringliteral">&quot;&lt;eps&gt;&quot;</span>);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  Label i1 = ilabels-&gt;AddSymbol(<span class="stringliteral">&quot;1&quot;</span>);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  Label i2 = ilabels-&gt;AddSymbol(<span class="stringliteral">&quot;2&quot;</span>);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  Label o0 = olabels-&gt;AddSymbol(<span class="stringliteral">&quot;&lt;eps&gt;&quot;</span>);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  Label o1 = olabels-&gt;AddSymbol(<span class="stringliteral">&quot;1&quot;</span>);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  assert(i0 == 0 &amp;&amp; o0 == 0);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  StateId s0 = fst-&gt;AddState(), s1 = fst-&gt;AddState(), s2 = fst-&gt;AddState();</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  fst-&gt;SetStart(s0);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  assert(s0 == 0);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  fst-&gt;SetFinal(s2, (Weight)2);  <span class="comment">// state 2 is final.</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> arc;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    arc.ilabel = i1;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    arc.olabel = o0;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    arc.nextstate = 1;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    arc.weight = (<a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>)1;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    fst-&gt;AddArc(s0, arc);  <span class="comment">// arc from 0 to 1 with epsilon out.</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  }</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> arc;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    arc.ilabel = i2;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    arc.olabel = o1;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    arc.nextstate = 2;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    arc.weight = (<a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>)2;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    fst-&gt;AddArc(s1, arc);  <span class="comment">// arc from 1 to 2 with &quot;1&quot; out.</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  }</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing before adding self-loops\n&quot;</span>;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  {</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(*fst, ilabels, olabels, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  }</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="comment">// So states 1 and 2 should have self-loops on.</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordtype">size_t</span> num_extra = <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  vector&lt;Label&gt; extra_ilabels, extra_olabels;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <a class="code" href="namespacefst.html#a414bcae5fa37960a55aa30a8ecad31d8">CreateNewSymbols</a>(ilabels,  num_extra, <span class="stringliteral">&quot;in#&quot;</span>, &amp;extra_ilabels);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <a class="code" href="namespacefst.html#a414bcae5fa37960a55aa30a8ecad31d8">CreateNewSymbols</a>(olabels,  num_extra, <span class="stringliteral">&quot;out#&quot;</span>, &amp;extra_olabels);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <a class="code" href="namespacefst.html#a7181b1bceae5beb0147d81bc611d5207">AddSelfLoops</a>(fst, extra_ilabels, extra_olabels);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  assert(fst-&gt;NumArcs(0) == 1);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  assert(fst-&gt;NumArcs(1) == 1 + num_extra);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  assert(fst-&gt;NumArcs(2) == num_extra);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing after adding self-loops\n&quot;</span>;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  {</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(*fst, ilabels, olabels, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="keyword">delete</span> fst;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keyword">delete</span> ilabels;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keyword">delete</span> olabels;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html_a414bcae5fa37960a55aa30a8ecad31d8"><div class="ttname"><a href="namespacefst.html#a414bcae5fa37960a55aa30a8ecad31d8">fst::CreateNewSymbols</a></div><div class="ttdeci">void CreateNewSymbols(SymbolTable *input_sym_table, int nSym, std::string prefix, vector&lt; Label &gt; *symsOut)</div><div class="ttdef"><b>Definition:</b> <a href="pre-determinize-inl_8h_source.html#l00581">pre-determinize-inl.h:581</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacefst_html_a7181b1bceae5beb0147d81bc611d5207"><div class="ttname"><a href="namespacefst.html#a7181b1bceae5beb0147d81bc611d5207">fst::AddSelfLoops</a></div><div class="ttdeci">void AddSelfLoops(MutableFst&lt; Arc &gt; *fst, vector&lt; typename Arc::Label &gt; &amp;isyms, vector&lt; typename Arc::Label &gt; &amp;osyms)</div><div class="ttdoc">AddSelfLoops is a function you will probably want to use alongside PreDeterminize, to add self-loops to any FSTs that you compose on the left hand side of the one modified by PreDeterminize. </div><div class="ttdef"><b>Definition:</b> <a href="pre-determinize-inl_8h_source.html#l00599">pre-determinize-inl.h:599</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab149c8a8436671a737bb63e2f55d24d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab149c8a8436671a737bb63e2f55d24d7">&#9670;&nbsp;</a></span>TestBackoffAndCache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestBackoffAndCache </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="deterministic-fst-test_8cc_source.html#l00145">145</a> of file <a class="el" href="deterministic-fst-test_8cc_source.html">deterministic-fst-test.cc</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00390">ApproxEqual()</a>, <a class="el" href="deterministic-fst-test_8cc_source.html#l00061">CreateBackoffFst()</a>, <a class="el" href="deterministic-fst-test_8cc_source.html#l00088">CreateResultFst()</a>, <a class="el" href="deterministic-fst_8h_source.html#l00243">CacheDeterministicOnDemandFst&lt; Arc &gt;::Final()</a>, and <a class="el" href="deterministic-fst-inl_8h_source.html#l00234">CacheDeterministicOnDemandFst&lt; Arc &gt;::GetArc()</a>.</p>

<p class="reference">Referenced by <a class="el" href="deterministic-fst-test_8cc_source.html#l00224">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                           {</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="comment">// Build from existing fst</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  cout &lt;&lt; <span class="stringliteral">&quot;Test with single generated backoff FST&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <a class="code" href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">StdVectorFst</a> *nfst = <a class="code" href="namespacefst.html#a9da47640f365f6aa7839e9aff630a3ff">CreateBackoffFst</a>();</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <a class="code" href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">StdVectorFst</a> *rfst = <a class="code" href="namespacefst.html#ac445fdfa8473caa38b3bf243f535be69">CreateResultFst</a>();</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="comment">// before using, make sure that it is input sorted</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  ArcSort(nfst, StdILabelCompare());</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <a class="code" href="classfst_1_1BackoffDeterministicOnDemandFst.html">BackoffDeterministicOnDemandFst&lt;StdArc&gt;</a> dfst1a(*nfst);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <a class="code" href="classfst_1_1CacheDeterministicOnDemandFst.html">CacheDeterministicOnDemandFst&lt;StdArc&gt;</a> dfst1(&amp;dfst1a);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  </div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="comment">// Compare all arcs in dfst1 with expected result</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="keywordflow">for</span> (StateIterator&lt;StdVectorFst&gt; riter(*rfst); !riter.Done(); riter.Next()) {</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a> rsrc = riter.Value();</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">// verify that states have same weight (or final status)</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    assert(<a class="code" href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">ApproxEqual</a>(rfst-&gt;Final(rsrc), dfst1.Final(rsrc)));</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">for</span> (ArcIterator&lt;StdVectorFst&gt; aiter(*rfst, rsrc); !aiter.Done(); aiter.Next()) {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <a class="code" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> rarc = aiter.Value();</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <a class="code" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> darc;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      <span class="keywordflow">if</span> (dfst1.GetArc(rsrc, rarc.ilabel, &amp;darc)) {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        assert(<a class="code" href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">ApproxEqual</a>(rarc.weight, darc.weight, 0.001));</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        assert(rarc.ilabel==darc.ilabel);</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        assert(rarc.olabel==darc.olabel);</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        assert(rarc.nextstate == darc.nextstate);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        cerr &lt;&lt; <span class="stringliteral">&quot;  Got same arc at state &quot;</span>&lt;&lt;rsrc&lt;&lt;<span class="stringliteral">&quot;: &quot;</span>&lt;&lt;rarc.ilabel&lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;darc.ilabel&lt;&lt;endl;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        cerr &lt;&lt; <span class="stringliteral">&quot;Couldn&#39;t find arc &quot;</span>&lt;&lt;rarc.ilabel&lt;&lt;<span class="stringliteral">&quot; for state &quot;</span>&lt;&lt;rsrc&lt;&lt;endl;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        exit(1);</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      }</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    }</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  }</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="keyword">delete</span> nfst;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="keyword">delete</span> rfst;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;}</div><div class="ttc" id="classfst_1_1BackoffDeterministicOnDemandFst_html"><div class="ttname"><a href="classfst_1_1BackoffDeterministicOnDemandFst.html">fst::BackoffDeterministicOnDemandFst</a></div><div class="ttdoc">This class wraps an Fst, representing a language model, using the interface for &quot;BackoffDeterministic...</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst_8h_source.html#l00100">deterministic-fst.h:100</a></div></div>
<div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html_a70478eb2428a9406e4692d19a7a3a97f"><div class="ttname"><a href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">fst::StdArc</a></div><div class="ttdeci">fst::StdArc StdArc</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00053">deterministic-fst-test.cc:53</a></div></div>
<div class="ttc" id="namespacefst_html_a88a968cc6f6d68c2b3dd6aa90385f65c"><div class="ttname"><a href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">fst::StdVectorFst</a></div><div class="ttdeci">fst::StdVectorFst StdVectorFst</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00056">deterministic-fst-test.cc:56</a></div></div>
<div class="ttc" id="classfst_1_1CacheDeterministicOnDemandFst_html"><div class="ttname"><a href="classfst_1_1CacheDeterministicOnDemandFst.html">fst::CacheDeterministicOnDemandFst</a></div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst_8h_source.html#l00230">deterministic-fst.h:230</a></div></div>
<div class="ttc" id="namespacefst_html_a9da47640f365f6aa7839e9aff630a3ff"><div class="ttname"><a href="namespacefst.html#a9da47640f365f6aa7839e9aff630a3ff">fst::CreateBackoffFst</a></div><div class="ttdeci">StdVectorFst * CreateBackoffFst()</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00061">deterministic-fst-test.cc:61</a></div></div>
<div class="ttc" id="namespacefst_html_ac445fdfa8473caa38b3bf243f535be69"><div class="ttname"><a href="namespacefst.html#ac445fdfa8473caa38b3bf243f535be69">fst::CreateResultFst</a></div><div class="ttdeci">StdVectorFst * CreateResultFst()</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00088">deterministic-fst-test.cc:88</a></div></div>
<div class="ttc" id="namespacekaldi_html_a99dcbb9fdaa6c980ba67941d45adf017"><div class="ttname"><a href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">kaldi::ApproxEqual</a></div><div class="ttdeci">static bool ApproxEqual(float a, float b, float relative_tolerance=0.001)</div><div class="ttdoc">return abs(a - b) &lt;= relative_tolerance * (abs(a)+abs(b)). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00264">kaldi-math.h:264</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a11a0d94e814f77dba6ce57e5057226b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11a0d94e814f77dba6ce57e5057226b3">&#9670;&nbsp;</a></span>TestCompose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestCompose </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="deterministic-fst-test_8cc_source.html#l00180">180</a> of file <a class="el" href="deterministic-fst-test_8cc_source.html">deterministic-fst-test.cc</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00390">ApproxEqual()</a>, <a class="el" href="deterministic-fst-test_8cc_source.html#l00061">CreateBackoffFst()</a>, <a class="el" href="deterministic-fst-test_8cc_source.html#l00088">CreateResultFst()</a>, <a class="el" href="deterministic-fst-inl_8h_source.html#l00272">LmExampleDeterministicOnDemandFst&lt; Arc &gt;::Final()</a>, <a class="el" href="deterministic-fst-inl_8h_source.html#l00282">LmExampleDeterministicOnDemandFst&lt; Arc &gt;::GetArc()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="deterministic-fst_8h_source.html#l00240">CacheDeterministicOnDemandFst&lt; Arc &gt;::Start()</a>, <a class="el" href="deterministic-fst_8h_source.html#l00273">LmExampleDeterministicOnDemandFst&lt; Arc &gt;::Start()</a>, and <a class="el" href="deterministic-fst-test_8cc_source.html#l00117">WalkSinglePath()</a>.</p>

<p class="reference">Referenced by <a class="el" href="deterministic-fst-test_8cc_source.html#l00224">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                   {</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  cout &lt;&lt; <span class="stringliteral">&quot;Test with single generated backoff FST&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <a class="code" href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">StdVectorFst</a> *nfst = <a class="code" href="namespacefst.html#a9da47640f365f6aa7839e9aff630a3ff">CreateBackoffFst</a>();</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <a class="code" href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">StdVectorFst</a> *rfst = <a class="code" href="namespacefst.html#ac445fdfa8473caa38b3bf243f535be69">CreateResultFst</a>();</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <a class="code" href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">StdVectorFst</a> composed_fst;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  Compose(*rfst, *rfst, &amp;composed_fst);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="comment">// before using, make sure that it is input sorted</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  ArcSort(nfst, StdILabelCompare());</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <a class="code" href="classfst_1_1BackoffDeterministicOnDemandFst.html">BackoffDeterministicOnDemandFst&lt;StdArc&gt;</a> dfst1a(*nfst);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <a class="code" href="classfst_1_1ComposeDeterministicOnDemandFst.html">ComposeDeterministicOnDemandFst&lt;StdArc&gt;</a> dfst1b(&amp;dfst1a, &amp;dfst1a);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <a class="code" href="classfst_1_1CacheDeterministicOnDemandFst.html">CacheDeterministicOnDemandFst&lt;StdArc&gt;</a> dfst1(&amp;dfst1b);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StdArc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  std::map&lt;StateId, StateId&gt; state_map;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  state_map[composed_fst.Start()] = dfst1.Start();</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  VectorFst&lt;StdArc&gt; path_fst;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  ShortestPath(composed_fst, &amp;path_fst);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  </div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <a class="code" href="classfst_1_1BackoffDeterministicOnDemandFst.html">BackoffDeterministicOnDemandFst&lt;StdArc&gt;</a> dfst2(composed_fst);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  </div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> w1 = <a class="code" href="namespacefst.html#a323c3df81cbbe8508ef1609aaa2ba7d3">WalkSinglePath</a>(&amp;path_fst, &amp;dfst1),</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      w2 = <a class="code" href="namespacefst.html#a323c3df81cbbe8508ef1609aaa2ba7d3">WalkSinglePath</a>(&amp;path_fst, &amp;dfst2);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">ApproxEqual</a>(w1, w2));</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="keyword">delete</span> rfst;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="keyword">delete</span> nfst;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  { <span class="comment">// Mostly checking for compilation errors here.</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <a class="code" href="classfst_1_1LmExampleDeterministicOnDemandFst.html">LmExampleDeterministicOnDemandFst&lt;StdArc&gt;</a> lm_eg(NULL, 2, 3);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(lm_eg.Start() == 0);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(lm_eg.Final(0).Value() == 0.5); <span class="comment">// I made it this value.</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <a class="code" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> arc;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordtype">bool</span> b = lm_eg.GetArc(0, 100, &amp;arc);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(b &amp;&amp; arc.nextstate == 1 &amp;&amp; arc.ilabel == 100 &amp;&amp; arc.olabel == 100</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                 &amp;&amp; arc.weight.Value() == 0.25);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  }</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;}</div><div class="ttc" id="classfst_1_1BackoffDeterministicOnDemandFst_html"><div class="ttname"><a href="classfst_1_1BackoffDeterministicOnDemandFst.html">fst::BackoffDeterministicOnDemandFst</a></div><div class="ttdoc">This class wraps an Fst, representing a language model, using the interface for &quot;BackoffDeterministic...</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst_8h_source.html#l00100">deterministic-fst.h:100</a></div></div>
<div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="classfst_1_1LmExampleDeterministicOnDemandFst_html"><div class="ttname"><a href="classfst_1_1LmExampleDeterministicOnDemandFst.html">fst::LmExampleDeterministicOnDemandFst</a></div><div class="ttdoc">This class is for didactic purposes, it does not really do anything. </div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst_8h_source.html#l00262">deterministic-fst.h:262</a></div></div>
<div class="ttc" id="namespacefst_html_a70478eb2428a9406e4692d19a7a3a97f"><div class="ttname"><a href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">fst::StdArc</a></div><div class="ttdeci">fst::StdArc StdArc</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00053">deterministic-fst-test.cc:53</a></div></div>
<div class="ttc" id="namespacefst_html_a88a968cc6f6d68c2b3dd6aa90385f65c"><div class="ttname"><a href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">fst::StdVectorFst</a></div><div class="ttdeci">fst::StdVectorFst StdVectorFst</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00056">deterministic-fst-test.cc:56</a></div></div>
<div class="ttc" id="classfst_1_1CacheDeterministicOnDemandFst_html"><div class="ttname"><a href="classfst_1_1CacheDeterministicOnDemandFst.html">fst::CacheDeterministicOnDemandFst</a></div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst_8h_source.html#l00230">deterministic-fst.h:230</a></div></div>
<div class="ttc" id="namespacefst_html_a323c3df81cbbe8508ef1609aaa2ba7d3"><div class="ttname"><a href="namespacefst.html#a323c3df81cbbe8508ef1609aaa2ba7d3">fst::WalkSinglePath</a></div><div class="ttdeci">Weight WalkSinglePath(StdVectorFst *ifst, DeterministicOnDemandFst&lt; StdArc &gt; *dfst)</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00117">deterministic-fst-test.cc:117</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacefst_html_a9da47640f365f6aa7839e9aff630a3ff"><div class="ttname"><a href="namespacefst.html#a9da47640f365f6aa7839e9aff630a3ff">fst::CreateBackoffFst</a></div><div class="ttdeci">StdVectorFst * CreateBackoffFst()</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00061">deterministic-fst-test.cc:61</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classfst_1_1ComposeDeterministicOnDemandFst_html"><div class="ttname"><a href="classfst_1_1ComposeDeterministicOnDemandFst.html">fst::ComposeDeterministicOnDemandFst</a></div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst_8h_source.html#l00199">deterministic-fst.h:199</a></div></div>
<div class="ttc" id="namespacefst_html_ac445fdfa8473caa38b3bf243f535be69"><div class="ttname"><a href="namespacefst.html#ac445fdfa8473caa38b3bf243f535be69">fst::CreateResultFst</a></div><div class="ttdeci">StdVectorFst * CreateResultFst()</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00088">deterministic-fst-test.cc:88</a></div></div>
<div class="ttc" id="namespacekaldi_html_a99dcbb9fdaa6c980ba67941d45adf017"><div class="ttname"><a href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">kaldi::ApproxEqual</a></div><div class="ttdeci">static bool ApproxEqual(float a, float b, float relative_tolerance=0.001)</div><div class="ttdoc">return abs(a - b) &lt;= relative_tolerance * (abs(a)+abs(b)). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00264">kaldi-math.h:264</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a03dd82498371cccad5dcc5d9b3962660"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03dd82498371cccad5dcc5d9b3962660">&#9670;&nbsp;</a></span>TestContextFst()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void fst::TestContextFst </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>verbose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>use_matcher</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="context-fst-test_8cc_source.html#l00157">157</a> of file <a class="el" href="context-fst-test_8cc_source.html">context-fst-test.cc</a>.</p>

<p class="reference">References <a class="el" href="kaldi-math_8h_source.html#l00275">kaldi::AssertEqual()</a>, <a class="el" href="deterministic-fst-inl_8h_source.html#l00408">ComposeDeterministicOnDemandInverse()</a>, <a class="el" href="stl-utils_8h_source.html#l00086">kaldi::CopySetToVector()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="context-fst_8h_source.html#l00194">InverseContextFst::IlabelInfo()</a>, <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>, <a class="el" href="kaldi-math_8h_source.html#l00151">kaldi::RandUniform()</a>, <a class="el" href="context-fst_8cc_source.html#l00334">ReadILabelInfo()</a>, <a class="el" href="kaldi-io_8cc_source.html#l00826">Input::Stream()</a>, and <a class="el" href="context-fst_8cc_source.html#l00324">WriteILabelInfo()</a>.</p>

<p class="reference">Referenced by <a class="el" href="context-fst-test_8cc_source.html#l00248">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                                                           {</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="comment">// Generate a random set of phones.</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordtype">size_t</span> num_phones = 1 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 10;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  std::set&lt;int32&gt; phones_set;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="keywordflow">while</span> (phones_set.size() &lt; num_phones) phones_set.insert(1 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % (num_phones + 5));  <span class="comment">// don&#39;t use 0 [== epsilon]</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  vector&lt;int32&gt; phones;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <a class="code" href="namespacekaldi.html#afaa2d6854352e931e19778f6f8608f2a">kaldi::CopySetToVector</a>(phones_set, &amp;phones);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keywordtype">int</span> N = 1 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 4;  <span class="comment">// Context size, in range 1..4.</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="keywordtype">int</span> P = <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % N;  <span class="comment">// 1.. N-1.</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="keywordflow">if</span> (verbose) std::cout &lt;&lt; <span class="stringliteral">&quot;N = &quot;</span>&lt;&lt; N &lt;&lt; <span class="stringliteral">&quot;, P = &quot;</span>&lt;&lt;P&lt;&lt;<span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  Label subsequential_symbol = 1000;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  vector&lt;int32&gt; disambig_syms;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> =0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 5; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) disambig_syms.push_back(500 + <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  vector&lt;int32&gt; phone_syms;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; phones.size();<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) phone_syms.push_back(phones[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  InverseContextFst inv_cfst(subsequential_symbol,</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                             phones, disambig_syms,</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                             N, P);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="comment">/* Now create random phone-sequences and compose them with the context FST.</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> p = 0; p &lt; 10; p++) {</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    vector&lt;int32&gt; phone_seq;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordtype">int</span> num_subseq = N - P - 1;  <span class="comment">// zero if P == N-1, i.e. P is last element, i.e. left-context only.</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordtype">float</span> tot_cost = 20.0 * <a class="code" href="namespacekaldi.html#a0c4bcfc10bea5ed0d3e3cf6d74922121">kaldi::RandUniform</a>();</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    VectorFst&lt;Arc&gt; *f = GenRandPhoneSeq&lt;Arc&gt;(phone_syms, disambig_syms, subsequential_symbol, num_subseq, tot_cost, &amp;phone_seq);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">if</span> (verbose) {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      std::cout &lt;&lt; <span class="stringliteral">&quot;Sequence FST is:\n&quot;</span>;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      {  <span class="comment">// Try to print the fst.</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        FstPrinter&lt;Arc&gt; fstprinter(*f, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      }</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    VectorFst&lt;Arc&gt; fst_composed;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <a class="code" href="group__deterministic__fst__group.html#ga9f5e73f2d8e2644492db7857d02acfc2">ComposeDeterministicOnDemandInverse</a>(*f,  &amp;inv_cfst, &amp;fst_composed);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">// Testing WriteILabelInfo and ReadILabelInfo.</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <span class="keywordtype">bool</span> binary = (<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 2 == 0);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <a class="code" href="namespacefst.html#a34bd956ade7a51e8051267bf5c2519cb">WriteILabelInfo</a>(<a class="code" href="classkaldi_1_1Output.html">kaldi::Output</a>(<span class="stringliteral">&quot;tmpf&quot;</span>, binary).Stream(),</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                      binary, inv_cfst.IlabelInfo());</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <span class="keywordtype">bool</span> binary_in;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      vector&lt;vector&lt;int32&gt; &gt; ilabel_info;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <a class="code" href="classkaldi_1_1Input.html">kaldi::Input</a> ki(<span class="stringliteral">&quot;tmpf&quot;</span>, &amp;binary_in);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <a class="code" href="namespacefst.html#a05f4ee704ff98edc7675f37d91649bdb">ReadILabelInfo</a>(ki.Stream(),</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                     binary_in, &amp;ilabel_info);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      assert(ilabel_info == inv_cfst.IlabelInfo());</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">if</span> (verbose) {</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      std::cout &lt;&lt; <span class="stringliteral">&quot;Composed FST is:\n&quot;</span>;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      {  <span class="comment">// Try to print the fst.</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        FstPrinter&lt;Arc&gt; fstprinter(fst_composed, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      }</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="comment">// now check the composed FST.</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordtype">float</span> tot_cost_check = CheckPhones&lt;Arc&gt;(fst_composed,</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                                            phone_syms,</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                                            disambig_syms,</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                                            phone_seq,</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                                            inv_cfst.IlabelInfo(),</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                                            N, P);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <a class="code" href="namespacekaldi.html#aeb6ba6085493e3f15358e49751342177">kaldi::AssertEqual</a>(tot_cost, tot_cost_check);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keyword">delete</span> f;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  }</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  unlink(<span class="stringliteral">&quot;tmpf&quot;</span>);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacekaldi_html_afaa2d6854352e931e19778f6f8608f2a"><div class="ttname"><a href="namespacekaldi.html#afaa2d6854352e931e19778f6f8608f2a">kaldi::CopySetToVector</a></div><div class="ttdeci">void CopySetToVector(const std::set&lt; T &gt; &amp;s, std::vector&lt; T &gt; *v)</div><div class="ttdoc">Copies the elements of a set to a vector. </div><div class="ttdef"><b>Definition:</b> <a href="stl-utils_8h_source.html#l00086">stl-utils.h:86</a></div></div>
<div class="ttc" id="classkaldi_1_1Input_html"><div class="ttname"><a href="classkaldi_1_1Input.html">kaldi::Input</a></div><div class="ttdef"><b>Definition:</b> <a href="kaldi-io_8h_source.html#l00190">kaldi-io.h:190</a></div></div>
<div class="ttc" id="namespacekaldi_html_a0c4bcfc10bea5ed0d3e3cf6d74922121"><div class="ttname"><a href="namespacekaldi.html#a0c4bcfc10bea5ed0d3e3cf6d74922121">kaldi::RandUniform</a></div><div class="ttdeci">float RandUniform(struct RandomState *state=NULL)</div><div class="ttdoc">Returns a random number strictly between 0 and 1. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00151">kaldi-math.h:151</a></div></div>
<div class="ttc" id="namespacefst_html_a05f4ee704ff98edc7675f37d91649bdb"><div class="ttname"><a href="namespacefst.html#a05f4ee704ff98edc7675f37d91649bdb">fst::ReadILabelInfo</a></div><div class="ttdeci">void ReadILabelInfo(std::istream &amp;is, bool binary, vector&lt; vector&lt; int32 &gt; &gt; *info)</div><div class="ttdoc">Utility function for reading ilabel-info vectors from disk. </div><div class="ttdef"><b>Definition:</b> <a href="context-fst_8cc_source.html#l00334">context-fst.cc:334</a></div></div>
<div class="ttc" id="namespacefst_html_a70478eb2428a9406e4692d19a7a3a97f"><div class="ttname"><a href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">fst::StdArc</a></div><div class="ttdeci">fst::StdArc StdArc</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00053">deterministic-fst-test.cc:53</a></div></div>
<div class="ttc" id="group__deterministic__fst__group_html_ga9f5e73f2d8e2644492db7857d02acfc2"><div class="ttname"><a href="group__deterministic__fst__group.html#ga9f5e73f2d8e2644492db7857d02acfc2">fst::ComposeDeterministicOnDemandInverse</a></div><div class="ttdeci">void ComposeDeterministicOnDemandInverse(const Fst&lt; Arc &gt; &amp;right, DeterministicOnDemandFst&lt; Arc &gt; *left, MutableFst&lt; Arc &gt; *fst_composed)</div><div class="ttdoc">This function does &amp;#39;*fst_composed = Compose(Inverse(*fst2), fst1)&amp;#39; Note that the arguments are revers...</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-inl_8h_source.html#l00408">deterministic-fst-inl.h:408</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacekaldi_html_aeb6ba6085493e3f15358e49751342177"><div class="ttname"><a href="namespacekaldi.html#aeb6ba6085493e3f15358e49751342177">kaldi::AssertEqual</a></div><div class="ttdeci">static void AssertEqual(float a, float b, float relative_tolerance=0.001)</div><div class="ttdoc">assert abs(a - b) &lt;= relative_tolerance * (abs(a)+abs(b)) </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00275">kaldi-math.h:275</a></div></div>
<div class="ttc" id="classkaldi_1_1Output_html"><div class="ttname"><a href="classkaldi_1_1Output.html">kaldi::Output</a></div><div class="ttdef"><b>Definition:</b> <a href="kaldi-io_8h_source.html#l00124">kaldi-io.h:124</a></div></div>
<div class="ttc" id="namespacefst_html_a34bd956ade7a51e8051267bf5c2519cb"><div class="ttname"><a href="namespacefst.html#a34bd956ade7a51e8051267bf5c2519cb">fst::WriteILabelInfo</a></div><div class="ttdeci">void WriteILabelInfo(std::ostream &amp;os, bool binary, const vector&lt; vector&lt; int32 &gt; &gt; &amp;info)</div><div class="ttdoc">Utility function for writing ilabel-info vectors to disk. </div><div class="ttdef"><b>Definition:</b> <a href="context-fst_8cc_source.html#l00324">context-fst.cc:324</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2ad8889af98283110c8339214a6b988d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ad8889af98283110c8339214a6b988d">&#9670;&nbsp;</a></span>TestConvert()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestConvert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>invert</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-utils-test_8cc_source.html#l00026">26</a> of file <a class="el" href="lattice-utils-test_8cc_source.html">lattice-utils-test.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;                                                                {</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  <span class="keyword">typedef</span> ArcTpl&lt;Weight&gt; <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  <span class="keyword">typedef</span> ArcTpl&lt;CompactLatticeWeightTpl&lt;Weight, Int&gt; &gt; CompactArc;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 5; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = RandFst&lt;Arc&gt;();</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;FST before converting to compact-arc is:\n&quot;</span>;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    {</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;      FstPrinter&lt;Arc&gt; fstprinter(*fst, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;      fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    }</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    VectorFst&lt;CompactArc&gt; ofst;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    ConvertLattice&lt;Weight, Int&gt;(*fst, &amp;ofst, invert);</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;FST after converting is:\n&quot;</span>;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    {</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;      FstPrinter&lt;CompactArc&gt; fstprinter(ofst, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;      fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    }</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    VectorFst&lt;Arc&gt; origfst;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    ConvertLattice&lt;Weight, Int&gt;(ofst, &amp;origfst, invert);</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;FST after back conversion is:\n&quot;</span>;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    {</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;      FstPrinter&lt;Arc&gt; fstprinter(origfst, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;      fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    }</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    assert(RandEquivalent(*fst, origfst, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keyword">delete</span> fst;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  }</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a364b2973f58e8056e089a7ad98d0283a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a364b2973f58e8056e089a7ad98d0283a">&#9670;&nbsp;</a></span>TestConvert2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestConvert2 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-utils-test_8cc_source.html#l00114">114</a> of file <a class="el" href="lattice-utils-test_8cc_source.html">lattice-utils-test.cc</a>.</p>

<p class="reference">References <a class="el" href="lattice-utils-inl_8h_source.html#l00033">ConvertLattice()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                                        {</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="keyword">typedef</span> ArcTpl&lt;LatticeWeightTpl&lt;float&gt; &gt; ArcF;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keyword">typedef</span> ArcTpl&lt;LatticeWeightTpl&lt;double&gt; &gt; ArcD;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="keyword">typedef</span> ArcTpl&lt;CompactLatticeWeightTpl&lt;LatticeWeightTpl&lt;float&gt;, Int&gt; &gt; CArcF;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keyword">typedef</span> ArcTpl&lt;CompactLatticeWeightTpl&lt;LatticeWeightTpl&lt;double&gt;, Int&gt; &gt; CArcD;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 2; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    {</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      VectorFst&lt;ArcF&gt; *fst1 = RandPairFst&lt;ArcF&gt;();</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      VectorFst&lt;ArcD&gt; fst2;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      VectorFst&lt;ArcF&gt; fst3;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <a class="code" href="namespacefst.html#abb292eda61ae2a04c5336c88b49ef832">ConvertLattice</a>(*fst1, &amp;fst2);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <a class="code" href="namespacefst.html#abb292eda61ae2a04c5336c88b49ef832">ConvertLattice</a>(fst2, &amp;fst3);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      assert(RandEquivalent(*fst1, fst3, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      <span class="keyword">delete</span> fst1;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    }</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    {</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      VectorFst&lt;ArcF&gt; *fst1 = RandPairFst&lt;ArcF&gt;();</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      VectorFst&lt;CArcF&gt; cfst1, cfst3;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      <a class="code" href="namespacefst.html#abb292eda61ae2a04c5336c88b49ef832">ConvertLattice</a>(*fst1, &amp;cfst1);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      VectorFst&lt;CArcD&gt; cfst2;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      <a class="code" href="namespacefst.html#abb292eda61ae2a04c5336c88b49ef832">ConvertLattice</a>(cfst1, &amp;cfst2);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <a class="code" href="namespacefst.html#abb292eda61ae2a04c5336c88b49ef832">ConvertLattice</a>(cfst2, &amp;cfst3);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      assert(RandEquivalent(cfst1, cfst3, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <span class="keyword">delete</span> fst1;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    }</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    {</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      VectorFst&lt;ArcF&gt; *fst1 = RandPairFst&lt;ArcF&gt;();</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      VectorFst&lt;CArcD&gt; cfst1, cfst3;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <a class="code" href="namespacefst.html#abb292eda61ae2a04c5336c88b49ef832">ConvertLattice</a>(*fst1, &amp;cfst1);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      VectorFst&lt;CArcF&gt; cfst2;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <a class="code" href="namespacefst.html#abb292eda61ae2a04c5336c88b49ef832">ConvertLattice</a>(cfst1, &amp;cfst2);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <a class="code" href="namespacefst.html#abb292eda61ae2a04c5336c88b49ef832">ConvertLattice</a>(cfst2, &amp;cfst3);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      assert(RandEquivalent(cfst1, cfst3, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      <span class="keyword">delete</span> fst1;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    }</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      VectorFst&lt;ArcD&gt; *fst1 = RandPairFst&lt;ArcD&gt;();</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      VectorFst&lt;CArcD&gt; cfst1, cfst3;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      <a class="code" href="namespacefst.html#abb292eda61ae2a04c5336c88b49ef832">ConvertLattice</a>(*fst1, &amp;cfst1);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      VectorFst&lt;CArcF&gt; cfst2;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <a class="code" href="namespacefst.html#abb292eda61ae2a04c5336c88b49ef832">ConvertLattice</a>(cfst1, &amp;cfst2);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <a class="code" href="namespacefst.html#abb292eda61ae2a04c5336c88b49ef832">ConvertLattice</a>(cfst2, &amp;cfst3);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      assert(RandEquivalent(cfst1, cfst3, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <span class="keyword">delete</span> fst1;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    }</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    {</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      VectorFst&lt;ArcD&gt; *fst1 = RandPairFst&lt;ArcD&gt;();</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      VectorFst&lt;CArcF&gt; cfst1;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <a class="code" href="namespacefst.html#abb292eda61ae2a04c5336c88b49ef832">ConvertLattice</a>(*fst1, &amp;cfst1);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      VectorFst&lt;ArcD&gt; fst2;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <a class="code" href="namespacefst.html#abb292eda61ae2a04c5336c88b49ef832">ConvertLattice</a>(cfst1, &amp;fst2);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      assert(RandEquivalent(*fst1, fst2, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      <span class="keyword">delete</span> fst1;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    }</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    {</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      VectorFst&lt;ArcF&gt; *fst1 = RandPairFst&lt;ArcF&gt;();</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      VectorFst&lt;CArcD&gt; cfst1;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      <a class="code" href="namespacefst.html#abb292eda61ae2a04c5336c88b49ef832">ConvertLattice</a>(*fst1, &amp;cfst1);</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      VectorFst&lt;ArcF&gt; fst2;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      <a class="code" href="namespacefst.html#abb292eda61ae2a04c5336c88b49ef832">ConvertLattice</a>(cfst1, &amp;fst2);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      assert(RandEquivalent(*fst1, fst2, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      <span class="keyword">delete</span> fst1;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    }</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    {</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      VectorFst&lt;ArcD&gt; *fst1 = RandPairFst&lt;ArcD&gt;();</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      VectorFst&lt;CArcF&gt; cfst1;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <a class="code" href="namespacefst.html#abb292eda61ae2a04c5336c88b49ef832">ConvertLattice</a>(*fst1, &amp;cfst1);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      VectorFst&lt;ArcD&gt; fst2;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <a class="code" href="namespacefst.html#abb292eda61ae2a04c5336c88b49ef832">ConvertLattice</a>(cfst1, &amp;fst2);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      assert(RandEquivalent(*fst1, fst2, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      <span class="keyword">delete</span> fst1;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    }</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  }</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;}</div><div class="ttc" id="namespacefst_html_abb292eda61ae2a04c5336c88b49ef832"><div class="ttname"><a href="namespacefst.html#abb292eda61ae2a04c5336c88b49ef832">fst::ConvertLattice</a></div><div class="ttdeci">void ConvertLattice(const ExpandedFst&lt; ArcTpl&lt; Weight &gt; &gt; &amp;ifst, MutableFst&lt; ArcTpl&lt; CompactLatticeWeightTpl&lt; Weight, Int &gt; &gt; &gt; *ofst, bool invert)</div><div class="ttdoc">Convert lattice from a normal FST to a CompactLattice FST. </div><div class="ttdef"><b>Definition:</b> <a href="lattice-utils-inl_8h_source.html#l00033">lattice-utils-inl.h:33</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a36836a85df74b54af3ea2d5005e41f3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36836a85df74b54af3ea2d5005e41f3a">&#9670;&nbsp;</a></span>TestConvertPair()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestConvertPair </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>invert</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-utils-test_8cc_source.html#l00200">200</a> of file <a class="el" href="lattice-utils-test_8cc_source.html">lattice-utils-test.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                                                                    {</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="keyword">typedef</span> ArcTpl&lt;Weight&gt; <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="keyword">typedef</span> ArcTpl&lt;CompactLatticeWeightTpl&lt;Weight, Int&gt; &gt; CompactArc;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 2; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = RandPairFst&lt;Arc&gt;();</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="comment">/*std::cout &lt;&lt; &quot;FST before converting to compact-arc is:\n&quot;;</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">    {</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">      FstPrinter&lt;Arc&gt; fstprinter(*fst, NULL, NULL, NULL, false, true);</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">      fstprinter.Print(&amp;std::cout, &quot;standard output&quot;);</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">      }*/</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    VectorFst&lt;CompactArc&gt; ofst;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    ConvertLattice&lt;Weight, Int&gt;(*fst, &amp;ofst, invert);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">/*std::cout &lt;&lt; &quot;FST after converting is:\n&quot;;</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">    {</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">      FstPrinter&lt;CompactArc&gt; fstprinter(ofst, NULL, NULL, NULL, false, true);</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">      fstprinter.Print(&amp;std::cout, &quot;standard output&quot;);</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">      }*/</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    VectorFst&lt;Arc&gt; origfst;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    ConvertLattice&lt;Weight, Int&gt;(ofst, &amp;origfst, invert);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="comment">/*std::cout &lt;&lt; &quot;FST after back conversion is:\n&quot;;</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">    {</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">      FstPrinter&lt;Arc&gt; fstprinter(origfst, NULL, NULL, NULL, false, true);</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">      fstprinter.Print(&amp;std::cout, &quot;standard output&quot;);</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">      }*/</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    assert(RandEquivalent(*fst, origfst, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keyword">delete</span> fst;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa21f847efaffea553f9fd1db201106f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa21f847efaffea553f9fd1db201106f1">&#9670;&nbsp;</a></span>TestDeterminize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestDeterminize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="determinize-star-test_8cc_source.html#l00061">61</a> of file <a class="el" href="determinize-star-test_8cc_source.html">determinize-star-test.cc</a>.</p>

<p class="reference">References <a class="el" href="pre-determinize-inl_8h_source.html#l00651">DeleteISymbols()</a>, <a class="el" href="determinize-star-inl_8h_source.html#l00625">DeterminizeStar()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>, <a class="el" href="pre-determinize-inl_8h_source.html#l00317">PreDeterminize()</a>, and <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                                            {</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = <span class="keyword">new</span> VectorFst&lt;Arc&gt;();</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keywordtype">int</span> n_syms = 2 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5, n_states = 3 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 10, n_arcs = 5 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 30, n_final = 1 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()%3;  <span class="comment">// Up to 2 unique symbols.</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  cout &lt;&lt; <span class="stringliteral">&quot;Testing pre-determinize with &quot;</span>&lt;&lt;n_syms&lt;&lt;<span class="stringliteral">&quot; symbols, &quot;</span>&lt;&lt;n_states&lt;&lt;<span class="stringliteral">&quot; states and &quot;</span>&lt;&lt;n_arcs&lt;&lt;<span class="stringliteral">&quot; arcs and &quot;</span>&lt;&lt;n_final&lt;&lt;<span class="stringliteral">&quot; final states.\n&quot;</span>;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  SymbolTable *sptr = NULL;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  vector&lt;Label&gt; all_syms;  <span class="comment">// including epsilon.</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="comment">// Put symbols in the symbol table from 1..n_syms-1.</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)n_syms;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    all_syms.push_back(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="comment">// Create states.</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  vector&lt;StateId&gt; all_states;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)n_states;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    StateId this_state = fst-&gt;AddState();</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> == 0) fst-&gt;SetStart(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    all_states.push_back(this_state);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  }</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="comment">// Set final states.</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0;<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)n_final;<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    StateId <span class="keywordtype">id</span> = all_states[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_states];</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    Weight weight = (<a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>)(0.33*(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5) );</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    printf(<span class="stringliteral">&quot;calling SetFinal with %d and %f\n&quot;</span>, <span class="keywordtype">id</span>, weight.Value());</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    fst-&gt;SetFinal(<span class="keywordtype">id</span>, weight);</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  }</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="comment">// Create arcs.</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)n_arcs;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> a;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    a.nextstate = all_states[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_states];</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    a.ilabel = all_syms[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_syms];</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    a.olabel = all_syms[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_syms];  <span class="comment">// same input+output vocab.</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    a.weight = (<a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>) (0.33*(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 2));</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    StateId start_state = all_states[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_states];</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    fst-&gt;AddArc(start_state, a);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  }</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing before trimming\n&quot;</span>;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(*fst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  }</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="comment">// Trim resulting FST.</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  Connect(fst);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing after trimming\n&quot;</span>;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(*fst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  }</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  VectorFst&lt;Arc&gt; *fst_copy_orig = <span class="keyword">new</span> VectorFst&lt;Arc&gt;(*fst);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  vector&lt;Label&gt; extra_syms;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordflow">if</span> (fst-&gt;Start() != kNoStateId) {  <span class="comment">// &quot;Connect&quot; did not make it empty....</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="namespacefst.html#aaf75c786b2e62e985ace7739c5e58e77">PreDeterminize</a>(fst, 1000, &amp;extra_syms);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  }</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing after predeterminization\n&quot;</span>;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  {</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(*fst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  }</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  {  <span class="comment">// Remove epsilon.  All default args.</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordtype">bool</span> connect = <span class="keyword">true</span>;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    Weight weight_threshold = Weight::Zero();</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    int64 nstate = -1;  <span class="comment">// Relates to pruning.</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordtype">double</span> delta = kDelta;  <span class="comment">// I think a small weight value.  Relates to some kind of pruning,</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="comment">// I guess.  But with no epsilon cycles, probably doensn&#39;t matter.</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    RmEpsilon(fst, connect,  weight_threshold, nstate, delta);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  }</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing after epsilon removal\n&quot;</span>;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(*fst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  }</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  VectorFst&lt;Arc&gt; ofst_orig;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  VectorFst&lt;Arc&gt; ofst_star;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  {</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    printf(<span class="stringliteral">&quot;Determinizing with baseline\n&quot;</span>);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    DeterminizeOptions&lt;Arc&gt; opts;  <span class="comment">// Default options.</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    Determinize(*fst, &amp;ofst_orig, opts);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  }</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    printf(<span class="stringliteral">&quot;Determinizing with DeterminizeStar\n&quot;</span>);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="group__fst__extensions.html#gac6d4823e83f5353ae5b5ce569a7a29a3">DeterminizeStar</a>(*fst, &amp;ofst_star);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  }</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  {</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    std::cout &lt;&lt;<span class="stringliteral">&quot; printing after determinization [baseline]\n&quot;</span>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(ofst_orig, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    assert(ofst_orig.Properties(kIDeterministic, <span class="keyword">true</span>) == kIDeterministic);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  }</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    std::cout &lt;&lt;<span class="stringliteral">&quot; printing after determinization [star]\n&quot;</span>;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(ofst_star, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    assert(ofst_star.Properties(kIDeterministic, <span class="keyword">true</span>) == kIDeterministic);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  }</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  assert(RandEquivalent(ofst_orig, ofst_star, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  int64 num_removed = <a class="code" href="namespacefst.html#ad573c7b2172714c534c18d58ec0dd93a">DeleteISymbols</a>(&amp;ofst_star, extra_syms);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing after removing &quot;</span>&lt;&lt;num_removed&lt;&lt;<span class="stringliteral">&quot; instances of extra symbols\n&quot;</span>;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  {</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(ofst_star, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  }</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; Checking equivalent to original FST.\n&quot;</span>;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="comment">// giving Rand() as a seed stops the random number generator from always being reset to</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="comment">// the same point each time, while maintaining determinism of the test.</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  assert(RandEquivalent(ofst_star, *fst_copy_orig, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keyword">delete</span> fst;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="keyword">delete</span> fst_copy_orig;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="classsize__t_html"><div class="ttname"><a href="classsize__t.html">size_t</a></div></div>
<div class="ttc" id="namespacefst_html_aaf75c786b2e62e985ace7739c5e58e77"><div class="ttname"><a href="namespacefst.html#aaf75c786b2e62e985ace7739c5e58e77">fst::PreDeterminize</a></div><div class="ttdeci">void PreDeterminize(MutableFst&lt; Arc &gt; *fst, typename Arc::Label first_new_sym, vector&lt; Int &gt; *symsOut)</div><div class="ttdef"><b>Definition:</b> <a href="pre-determinize-inl_8h_source.html#l00317">pre-determinize-inl.h:317</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_ad573c7b2172714c534c18d58ec0dd93a"><div class="ttname"><a href="namespacefst.html#ad573c7b2172714c534c18d58ec0dd93a">fst::DeleteISymbols</a></div><div class="ttdeci">int64 DeleteISymbols(MutableFst&lt; Arc &gt; *fst, vector&lt; typename Arc::Label &gt; isyms)</div><div class="ttdef"><b>Definition:</b> <a href="pre-determinize-inl_8h_source.html#l00651">pre-determinize-inl.h:651</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__fst__extensions_html_gac6d4823e83f5353ae5b5ce569a7a29a3"><div class="ttname"><a href="group__fst__extensions.html#gac6d4823e83f5353ae5b5ce569a7a29a3">fst::DeterminizeStar</a></div><div class="ttdeci">bool DeterminizeStar(F &amp;ifst, MutableFst&lt; typename F::Arc &gt; *ofst, float delta, bool *debug_ptr, int max_states, bool allow_partial)</div><div class="ttdoc">This function implements the normal version of DeterminizeStar, in which the output strings are repre...</div><div class="ttdef"><b>Definition:</b> <a href="determinize-star-inl_8h_source.html#l00625">determinize-star-inl.h:625</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa818c9146194433029e33fa52ac2daeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa818c9146194433029e33fa52ac2daeb">&#9670;&nbsp;</a></span>TestDeterminize2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestDeterminize2 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="determinize-star-test_8cc_source.html#l00190">190</a> of file <a class="el" href="determinize-star-test_8cc_source.html">determinize-star-test.cc</a>.</p>

<p class="reference">References <a class="el" href="rand-fst_8h_source.html#l00040">RandFstOptions::acyclic</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                                             {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 10; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    RandFstOptions opts;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    opts.acyclic = <span class="keyword">true</span>;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    VectorFst&lt;Arc&gt; *ifst = RandFst&lt;Arc&gt;(opts);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    VectorFst&lt;Arc&gt; ofst;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    Determinize(*ifst, &amp;ofst);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    assert(RandEquivalent(*ifst, ofst, 5, 0.01, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>(), 100));</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keyword">delete</span> ifst;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  }</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;}</div><div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a795c6de075960cbd396c9d32323381b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a795c6de075960cbd396c9d32323381b2">&#9670;&nbsp;</a></span>TestDeterminizeGeneral()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestDeterminizeGeneral </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="determinize-star-test_8cc_source.html#l00034">34</a> of file <a class="el" href="determinize-star-test_8cc_source.html">determinize-star-test.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;                                                  {</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="keywordtype">int</span> max_states = 100; <span class="comment">// don&#39;t allow more det-states than this.</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 100; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = RandFst&lt;Arc&gt;();</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;FST before determinizing is:\n&quot;</span>;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    {</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;      FstPrinter&lt;Arc&gt; fstprinter(*fst, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;      fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    }</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    VectorFst&lt;Arc&gt; ofst;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keywordflow">try</span> {</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;      DeterminizeStar&lt;Fst&lt;Arc&gt; &gt;(*fst, &amp;ofst, kDelta, NULL, max_states);</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;      std::cout &lt;&lt; <span class="stringliteral">&quot;FST after determinizing is:\n&quot;</span>;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;      {</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        FstPrinter&lt;Arc&gt; fstprinter(ofst, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;      }</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;      assert(RandEquivalent(*fst, ofst, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length, max*/</span>));</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    } <span class="keywordflow">catch</span> (...) {</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;      std::cout &lt;&lt; <span class="stringliteral">&quot;Failed to determinize *this FST (probably not determinizable)\n&quot;</span>;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    }</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keyword">delete</span> fst;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  }</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa976407780444836102f2573eab368ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa976407780444836102f2573eab368ac">&#9670;&nbsp;</a></span>TestDeterminizeLattice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestDeterminizeLattice </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="determinize-lattice-test_8cc_source.html#l00074">74</a> of file <a class="el" href="determinize-lattice-test_8cc_source.html">determinize-lattice-test.cc</a>.</p>

<p class="reference">References <a class="el" href="rand-fst_8h_source.html#l00039">RandFstOptions::allow_empty</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="determinize-lattice_8h_source.html#l00100">DeterminizeLatticeOptions::max_mem</a>, <a class="el" href="rand-fst_8h_source.html#l00037">RandFstOptions::n_arcs</a>, <a class="el" href="rand-fst_8h_source.html#l00038">RandFstOptions::n_final</a>, <a class="el" href="rand-fst_8h_source.html#l00036">RandFstOptions::n_states</a>, <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>, and <a class="el" href="rand-fst_8h_source.html#l00041">RandFstOptions::weight_multiplier</a>.</p>
<div class="fragment"><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                                                  {</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keyword">typedef</span> int32 Int;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keyword">typedef</span> ArcTpl&lt;CompactLatticeWeightTpl&lt;Weight, Int&gt; &gt; CompactArc;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 100; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="structfst_1_1RandFstOptions.html">RandFstOptions</a> opts;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    opts.<a class="code" href="structfst_1_1RandFstOptions.html#ad251c3b522fa0013889f3bdf29c11077">n_states</a> = 4;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    opts.<a class="code" href="structfst_1_1RandFstOptions.html#a1e435d7ad4e032207539f36f71a21842">n_arcs</a> = 10;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    opts.<a class="code" href="structfst_1_1RandFstOptions.html#a8f68bd486909a870c1a53b3b18731641">n_final</a> = 2;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    opts.<a class="code" href="structfst_1_1RandFstOptions.html#a2e56d5a40e664bce60321ac1017387f9">allow_empty</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    opts.<a class="code" href="structfst_1_1RandFstOptions.html#acd760c1256526624ebdae26df5710f6b">weight_multiplier</a> = 0.5; <span class="comment">// impt for the randomly generated weights</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="comment">// to be exactly representable in float,</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="comment">// or this test fails because numerical differences can cause symmetry in</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="comment">// weights to be broken, which causes the wrong path to be chosen as far</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="comment">// as the string part is concerned.</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = RandFst&lt;Arc&gt;();</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;FST before lattice-determinizing is:\n&quot;</span>;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    {</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      FstPrinter&lt;Arc&gt; fstprinter(*fst, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    }</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    VectorFst&lt;Arc&gt; det_fst;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">try</span> {</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      <a class="code" href="structfst_1_1DeterminizeLatticeOptions.html">DeterminizeLatticeOptions</a> lat_opts;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      lat_opts.<a class="code" href="structfst_1_1DeterminizeLatticeOptions.html#a7b483d0949bb8cb9cfd932aa3b06485f">max_mem</a> = 100;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      <span class="keywordflow">if</span> (!DeterminizeLattice&lt;TropicalWeight, int32&gt;(*fst, &amp;det_fst, lat_opts, NULL))</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;could not determinize&quot;</span>);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      std::cout &lt;&lt; <span class="stringliteral">&quot;FST after lattice-determinizing is:\n&quot;</span>;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      {</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        FstPrinter&lt;Arc&gt; fstprinter(det_fst, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      }</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      assert(det_fst.Properties(kIDeterministic, <span class="keyword">true</span>) &amp; kIDeterministic);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <span class="comment">// OK, now determinize it a different way and check equivalence.</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      <span class="comment">// [note: it&#39;s not normal determinization, it&#39;s taking the best path</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      <span class="comment">// for any input-symbol sequence....</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      VectorFst&lt;CompactArc&gt; compact_fst, compact_det_fst;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      ConvertLattice&lt;Weight, Int&gt;(*fst, &amp;compact_fst, <span class="keyword">false</span>);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      std::cout &lt;&lt; <span class="stringliteral">&quot;Compact FST is:\n&quot;</span>;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        FstPrinter&lt;CompactArc&gt; fstprinter(compact_fst, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      }</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 2 == 1)</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        ConvertLattice&lt;Weight, Int&gt;(det_fst, &amp;compact_det_fst, <span class="keyword">false</span>);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keywordflow">if</span> (!DeterminizeLattice&lt;TropicalWeight, int32&gt;(*fst, &amp;compact_det_fst, lat_opts, NULL))</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;          <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;could not determinize&quot;</span>);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      std::cout &lt;&lt; <span class="stringliteral">&quot;Compact version of determinized FST is:\n&quot;</span>;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      {</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        FstPrinter&lt;CompactArc&gt; fstprinter(compact_det_fst, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      }</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      assert(RandEquivalent(compact_det_fst, compact_fst, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length, max*/</span>));</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    } <span class="keywordflow">catch</span> (...) {</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      std::cout &lt;&lt; <span class="stringliteral">&quot;Failed to lattice-determinize this FST (probably not determinizable)\n&quot;</span>;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    }</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keyword">delete</span> fst;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;}</div><div class="ttc" id="structfst_1_1RandFstOptions_html"><div class="ttname"><a href="structfst_1_1RandFstOptions.html">fst::RandFstOptions</a></div><div class="ttdef"><b>Definition:</b> <a href="rand-fst_8h_source.html#l00034">rand-fst.h:34</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="structfst_1_1DeterminizeLatticeOptions_html"><div class="ttname"><a href="structfst_1_1DeterminizeLatticeOptions.html">fst::DeterminizeLatticeOptions</a></div><div class="ttdef"><b>Definition:</b> <a href="determinize-lattice_8h_source.html#l00098">determinize-lattice.h:98</a></div></div>
<div class="ttc" id="structfst_1_1DeterminizeLatticeOptions_html_a7b483d0949bb8cb9cfd932aa3b06485f"><div class="ttname"><a href="structfst_1_1DeterminizeLatticeOptions.html#a7b483d0949bb8cb9cfd932aa3b06485f">fst::DeterminizeLatticeOptions::max_mem</a></div><div class="ttdeci">int max_mem</div><div class="ttdef"><b>Definition:</b> <a href="determinize-lattice_8h_source.html#l00100">determinize-lattice.h:100</a></div></div>
<div class="ttc" id="structfst_1_1RandFstOptions_html_acd760c1256526624ebdae26df5710f6b"><div class="ttname"><a href="structfst_1_1RandFstOptions.html#acd760c1256526624ebdae26df5710f6b">fst::RandFstOptions::weight_multiplier</a></div><div class="ttdeci">float weight_multiplier</div><div class="ttdef"><b>Definition:</b> <a href="rand-fst_8h_source.html#l00041">rand-fst.h:41</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="structfst_1_1RandFstOptions_html_a1e435d7ad4e032207539f36f71a21842"><div class="ttname"><a href="structfst_1_1RandFstOptions.html#a1e435d7ad4e032207539f36f71a21842">fst::RandFstOptions::n_arcs</a></div><div class="ttdeci">size_t n_arcs</div><div class="ttdef"><b>Definition:</b> <a href="rand-fst_8h_source.html#l00037">rand-fst.h:37</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="structfst_1_1RandFstOptions_html_a8f68bd486909a870c1a53b3b18731641"><div class="ttname"><a href="structfst_1_1RandFstOptions.html#a8f68bd486909a870c1a53b3b18731641">fst::RandFstOptions::n_final</a></div><div class="ttdeci">size_t n_final</div><div class="ttdef"><b>Definition:</b> <a href="rand-fst_8h_source.html#l00038">rand-fst.h:38</a></div></div>
<div class="ttc" id="structfst_1_1RandFstOptions_html_a2e56d5a40e664bce60321ac1017387f9"><div class="ttname"><a href="structfst_1_1RandFstOptions.html#a2e56d5a40e664bce60321ac1017387f9">fst::RandFstOptions::allow_empty</a></div><div class="ttdeci">bool allow_empty</div><div class="ttdef"><b>Definition:</b> <a href="rand-fst_8h_source.html#l00039">rand-fst.h:39</a></div></div>
<div class="ttc" id="structfst_1_1RandFstOptions_html_ad251c3b522fa0013889f3bdf29c11077"><div class="ttname"><a href="structfst_1_1RandFstOptions.html#ad251c3b522fa0013889f3bdf29c11077">fst::RandFstOptions::n_states</a></div><div class="ttdeci">size_t n_states</div><div class="ttdef"><b>Definition:</b> <a href="rand-fst_8h_source.html#l00036">rand-fst.h:36</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3c418012c98e559f4c096e93c6c5109d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c418012c98e559f4c096e93c6c5109d">&#9670;&nbsp;</a></span>TestDeterminizeLattice2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestDeterminizeLattice2 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="determinize-lattice-test_8cc_source.html#l00142">142</a> of file <a class="el" href="determinize-lattice-test_8cc_source.html">determinize-lattice-test.cc</a>.</p>

<p class="reference">References <a class="el" href="rand-fst_8h_source.html#l00040">RandFstOptions::acyclic</a>, and <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>.</p>
<div class="fragment"><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                                                   {</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <a class="code" href="structfst_1_1RandFstOptions.html">RandFstOptions</a> opts;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  opts.<a class="code" href="structfst_1_1RandFstOptions.html#aa5a7456f7e24b2444f56c9e9f2802f62">acyclic</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 100; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = RandFst&lt;Arc&gt;(opts);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;FST before lattice-determinizing is:\n&quot;</span>;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      FstPrinter&lt;Arc&gt; fstprinter(*fst, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    VectorFst&lt;Arc&gt; ofst;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    DeterminizeLattice&lt;TropicalWeight, int32&gt;(*fst, &amp;ofst);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;FST after lattice-determinizing is:\n&quot;</span>;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      FstPrinter&lt;Arc&gt; fstprinter(ofst, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    }</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keyword">delete</span> fst;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  }</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;}</div><div class="ttc" id="structfst_1_1RandFstOptions_html"><div class="ttname"><a href="structfst_1_1RandFstOptions.html">fst::RandFstOptions</a></div><div class="ttdef"><b>Definition:</b> <a href="rand-fst_8h_source.html#l00034">rand-fst.h:34</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="structfst_1_1RandFstOptions_html_aa5a7456f7e24b2444f56c9e9f2802f62"><div class="ttname"><a href="structfst_1_1RandFstOptions.html#aa5a7456f7e24b2444f56c9e9f2802f62">fst::RandFstOptions::acyclic</a></div><div class="ttdeci">bool acyclic</div><div class="ttdef"><b>Definition:</b> <a href="rand-fst_8h_source.html#l00040">rand-fst.h:40</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a520642da087cbad8f896919650f7fad5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a520642da087cbad8f896919650f7fad5">&#9670;&nbsp;</a></span>TestDeterminizeLatticePruned()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestDeterminizeLatticePruned </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="determinize-lattice-pruned-test_8cc_source.html#l00036">36</a> of file <a class="el" href="determinize-lattice-pruned-test_8cc_source.html">determinize-lattice-pruned-test.cc</a>.</p>

<p class="reference">References <a class="el" href="rand-fst_8h_source.html#l00040">RandFstOptions::acyclic</a>, <a class="el" href="rand-fst_8h_source.html#l00039">RandFstOptions::allow_empty</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="determinize-lattice-pruned_8h_source.html#l00119">DeterminizeLatticePrunedOptions::max_arcs</a>, <a class="el" href="determinize-lattice-pruned_8h_source.html#l00114">DeterminizeLatticePrunedOptions::max_mem</a>, <a class="el" href="determinize-lattice-pruned_8h_source.html#l00118">DeterminizeLatticePrunedOptions::max_states</a>, <a class="el" href="rand-fst_8h_source.html#l00037">RandFstOptions::n_arcs</a>, <a class="el" href="rand-fst_8h_source.html#l00038">RandFstOptions::n_final</a>, <a class="el" href="rand-fst_8h_source.html#l00036">RandFstOptions::n_states</a>, <a class="el" href="lattice-functions_8cc_source.html#l00229">kaldi::PruneLattice()</a>, <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>, and <a class="el" href="rand-fst_8h_source.html#l00041">RandFstOptions::weight_multiplier</a>.</p>
<div class="fragment"><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;                                                        {</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keyword">typedef</span> kaldi::int32 Int;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="keyword">typedef</span> ArcTpl&lt;CompactLatticeWeightTpl&lt;Weight, Int&gt; &gt; CompactArc;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 100; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <a class="code" href="structfst_1_1RandFstOptions.html">RandFstOptions</a> opts;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    opts.<a class="code" href="structfst_1_1RandFstOptions.html#ad251c3b522fa0013889f3bdf29c11077">n_states</a> = 4;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    opts.<a class="code" href="structfst_1_1RandFstOptions.html#a1e435d7ad4e032207539f36f71a21842">n_arcs</a> = 10;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    opts.<a class="code" href="structfst_1_1RandFstOptions.html#a8f68bd486909a870c1a53b3b18731641">n_final</a> = 2;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    opts.<a class="code" href="structfst_1_1RandFstOptions.html#a2e56d5a40e664bce60321ac1017387f9">allow_empty</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    opts.<a class="code" href="structfst_1_1RandFstOptions.html#acd760c1256526624ebdae26df5710f6b">weight_multiplier</a> = 0.5; <span class="comment">// impt for the randomly generated weights</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    opts.<a class="code" href="structfst_1_1RandFstOptions.html#aa5a7456f7e24b2444f56c9e9f2802f62">acyclic</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="comment">// to be exactly representable in float,</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="comment">// or this test fails because numerical differences can cause symmetry in</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="comment">// weights to be broken, which causes the wrong path to be chosen as far</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="comment">// as the string part is concerned.</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = RandPairFst&lt;Arc&gt;(opts);</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordtype">bool</span> sorted = TopSort(fst);</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(sorted);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    ILabelCompare&lt;Arc&gt; ilabel_comp;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 2 == 0)</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;      ArcSort(fst, ilabel_comp);</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;FST before lattice-determinizing is:\n&quot;</span>;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    {</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;      FstPrinter&lt;Arc&gt; fstprinter(*fst, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;      fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    }</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    VectorFst&lt;Arc&gt; det_fst;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">try</span> {</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      <a class="code" href="structfst_1_1DeterminizeLatticePrunedOptions.html">DeterminizeLatticePrunedOptions</a> lat_opts;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      lat_opts.<a class="code" href="structfst_1_1DeterminizeLatticePrunedOptions.html#a7b483d0949bb8cb9cfd932aa3b06485f">max_mem</a> = ((<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 2 == 0) ? 100 : 1000);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;      lat_opts.<a class="code" href="structfst_1_1DeterminizeLatticePrunedOptions.html#a97cadd29c76d6f53792ed729da9fa9ba">max_states</a> = ((<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 2 == 0) ? -1 : 20);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      lat_opts.<a class="code" href="structfst_1_1DeterminizeLatticePrunedOptions.html#aacea4ce9ef340f920cd708ea1cddb044">max_arcs</a> = ((<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 2 == 0) ? -1 : 30);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;      <span class="keywordtype">bool</span> ans = DeterminizeLatticePruned&lt;Weight&gt;(*fst, 10.0, &amp;det_fst, lat_opts);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      std::cout &lt;&lt; <span class="stringliteral">&quot;FST after lattice-determinizing is:\n&quot;</span>;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      {</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        FstPrinter&lt;Arc&gt; fstprinter(det_fst, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      }</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(det_fst.Properties(kIDeterministic, <span class="keyword">true</span>) &amp; kIDeterministic);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      <span class="comment">// OK, now determinize it a different way and check equivalence.</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      <span class="comment">// [note: it&#39;s not normal determinization, it&#39;s taking the best path</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      <span class="comment">// for any input-symbol sequence....</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      VectorFst&lt;Arc&gt; pruned_fst(*fst);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      <span class="keywordflow">if</span> (pruned_fst.NumStates() != 0)</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <a class="code" href="namespacekaldi.html#a206415e437a2e65abd8675ebe77c7c9b">kaldi::PruneLattice</a>(10.0, &amp;pruned_fst);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      VectorFst&lt;CompactArc&gt; compact_pruned_fst, compact_pruned_det_fst;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      ConvertLattice&lt;Weight, Int&gt;(pruned_fst, &amp;compact_pruned_fst, <span class="keyword">false</span>);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      std::cout &lt;&lt; <span class="stringliteral">&quot;Compact pruned FST is:\n&quot;</span>;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      {</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        FstPrinter&lt;CompactArc&gt; fstprinter(compact_pruned_fst, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      }</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      ConvertLattice&lt;Weight, Int&gt;(det_fst, &amp;compact_pruned_det_fst, <span class="keyword">false</span>);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      std::cout &lt;&lt; <span class="stringliteral">&quot;Compact version of determinized FST is:\n&quot;</span>;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      {</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        FstPrinter&lt;CompactArc&gt; fstprinter(compact_pruned_det_fst, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      }</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      <span class="keywordflow">if</span> (ans)</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(RandEquivalent(compact_pruned_det_fst, compact_pruned_fst, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length, max*/</span>));</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    } <span class="keywordflow">catch</span> (...) {</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      std::cout &lt;&lt; <span class="stringliteral">&quot;Failed to lattice-determinize this FST (probably not determinizable)\n&quot;</span>;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    }</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keyword">delete</span> fst;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  }</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;}</div><div class="ttc" id="structfst_1_1RandFstOptions_html"><div class="ttname"><a href="structfst_1_1RandFstOptions.html">fst::RandFstOptions</a></div><div class="ttdef"><b>Definition:</b> <a href="rand-fst_8h_source.html#l00034">rand-fst.h:34</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="structfst_1_1RandFstOptions_html_acd760c1256526624ebdae26df5710f6b"><div class="ttname"><a href="structfst_1_1RandFstOptions.html#acd760c1256526624ebdae26df5710f6b">fst::RandFstOptions::weight_multiplier</a></div><div class="ttdeci">float weight_multiplier</div><div class="ttdef"><b>Definition:</b> <a href="rand-fst_8h_source.html#l00041">rand-fst.h:41</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="structfst_1_1RandFstOptions_html_a1e435d7ad4e032207539f36f71a21842"><div class="ttname"><a href="structfst_1_1RandFstOptions.html#a1e435d7ad4e032207539f36f71a21842">fst::RandFstOptions::n_arcs</a></div><div class="ttdeci">size_t n_arcs</div><div class="ttdef"><b>Definition:</b> <a href="rand-fst_8h_source.html#l00037">rand-fst.h:37</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="structfst_1_1RandFstOptions_html_aa5a7456f7e24b2444f56c9e9f2802f62"><div class="ttname"><a href="structfst_1_1RandFstOptions.html#aa5a7456f7e24b2444f56c9e9f2802f62">fst::RandFstOptions::acyclic</a></div><div class="ttdeci">bool acyclic</div><div class="ttdef"><b>Definition:</b> <a href="rand-fst_8h_source.html#l00040">rand-fst.h:40</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="structfst_1_1DeterminizeLatticePrunedOptions_html_a7b483d0949bb8cb9cfd932aa3b06485f"><div class="ttname"><a href="structfst_1_1DeterminizeLatticePrunedOptions.html#a7b483d0949bb8cb9cfd932aa3b06485f">fst::DeterminizeLatticePrunedOptions::max_mem</a></div><div class="ttdeci">int max_mem</div><div class="ttdef"><b>Definition:</b> <a href="determinize-lattice-pruned_8h_source.html#l00114">determinize-lattice-pruned.h:114</a></div></div>
<div class="ttc" id="structfst_1_1RandFstOptions_html_a8f68bd486909a870c1a53b3b18731641"><div class="ttname"><a href="structfst_1_1RandFstOptions.html#a8f68bd486909a870c1a53b3b18731641">fst::RandFstOptions::n_final</a></div><div class="ttdeci">size_t n_final</div><div class="ttdef"><b>Definition:</b> <a href="rand-fst_8h_source.html#l00038">rand-fst.h:38</a></div></div>
<div class="ttc" id="namespacekaldi_html_a206415e437a2e65abd8675ebe77c7c9b"><div class="ttname"><a href="namespacekaldi.html#a206415e437a2e65abd8675ebe77c7c9b">kaldi::PruneLattice</a></div><div class="ttdeci">bool PruneLattice(BaseFloat beam, LatType *lat)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-functions_8cc_source.html#l00229">lattice-functions.cc:229</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="structfst_1_1RandFstOptions_html_a2e56d5a40e664bce60321ac1017387f9"><div class="ttname"><a href="structfst_1_1RandFstOptions.html#a2e56d5a40e664bce60321ac1017387f9">fst::RandFstOptions::allow_empty</a></div><div class="ttdeci">bool allow_empty</div><div class="ttdef"><b>Definition:</b> <a href="rand-fst_8h_source.html#l00039">rand-fst.h:39</a></div></div>
<div class="ttc" id="structfst_1_1DeterminizeLatticePrunedOptions_html"><div class="ttname"><a href="structfst_1_1DeterminizeLatticePrunedOptions.html">fst::DeterminizeLatticePrunedOptions</a></div><div class="ttdef"><b>Definition:</b> <a href="determinize-lattice-pruned_8h_source.html#l00112">determinize-lattice-pruned.h:112</a></div></div>
<div class="ttc" id="structfst_1_1DeterminizeLatticePrunedOptions_html_a97cadd29c76d6f53792ed729da9fa9ba"><div class="ttname"><a href="structfst_1_1DeterminizeLatticePrunedOptions.html#a97cadd29c76d6f53792ed729da9fa9ba">fst::DeterminizeLatticePrunedOptions::max_states</a></div><div class="ttdeci">int max_states</div><div class="ttdef"><b>Definition:</b> <a href="determinize-lattice-pruned_8h_source.html#l00118">determinize-lattice-pruned.h:118</a></div></div>
<div class="ttc" id="structfst_1_1DeterminizeLatticePrunedOptions_html_aacea4ce9ef340f920cd708ea1cddb044"><div class="ttname"><a href="structfst_1_1DeterminizeLatticePrunedOptions.html#aacea4ce9ef340f920cd708ea1cddb044">fst::DeterminizeLatticePrunedOptions::max_arcs</a></div><div class="ttdeci">int max_arcs</div><div class="ttdef"><b>Definition:</b> <a href="determinize-lattice-pruned_8h_source.html#l00119">determinize-lattice-pruned.h:119</a></div></div>
<div class="ttc" id="structfst_1_1RandFstOptions_html_ad251c3b522fa0013889f3bdf29c11077"><div class="ttname"><a href="structfst_1_1RandFstOptions.html#ad251c3b522fa0013889f3bdf29c11077">fst::RandFstOptions::n_states</a></div><div class="ttdeci">size_t n_states</div><div class="ttdef"><b>Definition:</b> <a href="rand-fst_8h_source.html#l00036">rand-fst.h:36</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acb86d6ce69d71affd54da9ff0d6940dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb86d6ce69d71affd54da9ff0d6940dc">&#9670;&nbsp;</a></span>TestDeterminizeLatticePruned2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestDeterminizeLatticePruned2 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="determinize-lattice-pruned-test_8cc_source.html#l00117">117</a> of file <a class="el" href="determinize-lattice-pruned-test_8cc_source.html">determinize-lattice-pruned-test.cc</a>.</p>

<p class="reference">References <a class="el" href="rand-fst_8h_source.html#l00040">RandFstOptions::acyclic</a>, and <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>.</p>
<div class="fragment"><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                                                         {</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <a class="code" href="structfst_1_1RandFstOptions.html">RandFstOptions</a> opts;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  opts.<a class="code" href="structfst_1_1RandFstOptions.html#aa5a7456f7e24b2444f56c9e9f2802f62">acyclic</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 100; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = RandPairFst&lt;Arc&gt;(opts);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;FST before lattice-determinizing is:\n&quot;</span>;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    {</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      FstPrinter&lt;Arc&gt; fstprinter(*fst, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    }</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    VectorFst&lt;Arc&gt; ofst;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    DeterminizeLatticePruned&lt;Weight&gt;(*fst, 10.0, &amp;ofst);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;FST after lattice-determinizing is:\n&quot;</span>;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    {</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      FstPrinter&lt;Arc&gt; fstprinter(ofst, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    }</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keyword">delete</span> fst;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  }</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;}</div><div class="ttc" id="structfst_1_1RandFstOptions_html"><div class="ttname"><a href="structfst_1_1RandFstOptions.html">fst::RandFstOptions</a></div><div class="ttdef"><b>Definition:</b> <a href="rand-fst_8h_source.html#l00034">rand-fst.h:34</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="structfst_1_1RandFstOptions_html_aa5a7456f7e24b2444f56c9e9f2802f62"><div class="ttname"><a href="structfst_1_1RandFstOptions.html#aa5a7456f7e24b2444f56c9e9f2802f62">fst::RandFstOptions::acyclic</a></div><div class="ttdeci">bool acyclic</div><div class="ttdef"><b>Definition:</b> <a href="rand-fst_8h_source.html#l00040">rand-fst.h:40</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8b5aea17ab28307f7a332647f2cae6c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b5aea17ab28307f7a332647f2cae6c6">&#9670;&nbsp;</a></span>TestDeterminizeStarInLog()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestDeterminizeStarInLog </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils-test_8cc_source.html#l00076">76</a> of file <a class="el" href="fstext-utils-test_8cc_source.html">fstext-utils-test.cc</a>.</p>

<p class="reference">References <a class="el" href="fstext-utils-inl_8h_source.html#l00054">HighestNumberedInputSymbol()</a>, and <a class="el" href="pre-determinize-inl_8h_source.html#l00317">PreDeterminize()</a>.</p>
<div class="fragment"><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                                                     {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = RandFst&lt;Arc&gt;();</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  VectorFst&lt;Arc&gt; fst_copy(fst);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> next_sym = 1 + <a class="code" href="namespacefst.html#ac359ee42978cf57f9c5dfdc50df8fe16">HighestNumberedInputSymbol</a>(*fst);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  vector&lt;typename Arc::Label&gt; syms;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <a class="code" href="namespacefst.html#aaf75c786b2e62e985ace7739c5e58e77">PreDeterminize</a>(fst, NULL, <span class="stringliteral">&quot;#&quot;</span>, next_sym, &amp;syms);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_aaf75c786b2e62e985ace7739c5e58e77"><div class="ttname"><a href="namespacefst.html#aaf75c786b2e62e985ace7739c5e58e77">fst::PreDeterminize</a></div><div class="ttdeci">void PreDeterminize(MutableFst&lt; Arc &gt; *fst, typename Arc::Label first_new_sym, vector&lt; Int &gt; *symsOut)</div><div class="ttdef"><b>Definition:</b> <a href="pre-determinize-inl_8h_source.html#l00317">pre-determinize-inl.h:317</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacefst_html_ac359ee42978cf57f9c5dfdc50df8fe16"><div class="ttname"><a href="namespacefst.html#ac359ee42978cf57f9c5dfdc50df8fe16">fst::HighestNumberedInputSymbol</a></div><div class="ttdeci">Arc::Label HighestNumberedInputSymbol(const Fst&lt; Arc &gt; &amp;fst)</div><div class="ttdoc">Returns the highest numbered input symbol id of the FST (or zero for an empty FST. </div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00054">fstext-utils-inl.h:54</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a60a97e0ac51c4372deb69441e42c79df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60a97e0ac51c4372deb69441e42c79df">&#9670;&nbsp;</a></span>TestEnsureEpsilonProperty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestEnsureEpsilonProperty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="epsilon-property-test_8cc_source.html#l00027">27</a> of file <a class="el" href="epsilon-property-test_8cc_source.html">epsilon-property-test.cc</a>.</p>

<p class="reference">References <a class="el" href="rand-fst_8h_source.html#l00040">RandFstOptions::acyclic</a>, <a class="el" href="epsilon-property-inl_8h_source.html#l00028">ComputeStateInfo()</a>, <a class="el" href="epsilon-property-inl_8h_source.html#l00049">EnsureEpsilonProperty()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="epsilon-property_8h_source.html#l00028">kStateHasEpsilonArcsEntering</a>, <a class="el" href="epsilon-property_8h_source.html#l00030">kStateHasEpsilonArcsLeaving</a>, <a class="el" href="epsilon-property_8h_source.html#l00029">kStateHasNonEpsilonArcsEntering</a>, <a class="el" href="epsilon-property_8h_source.html#l00031">kStateHasNonEpsilonArcsLeaving</a>, and <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>.</p>

<p class="reference">Referenced by <a class="el" href="epsilon-property-test_8cc_source.html#l00052">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;                                 {</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  </div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 10; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <a class="code" href="structfst_1_1RandFstOptions.html">RandFstOptions</a> opts;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    opts.<a class="code" href="structfst_1_1RandFstOptions.html#aa5a7456f7e24b2444f56c9e9f2802f62">acyclic</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    VectorFst&lt;LogArc&gt; *<a class="code" href="namespacefst.html">fst</a> = RandFst&lt;LogArc&gt;(opts);</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    VectorFst&lt;LogArc&gt; fst2(*fst); <span class="comment">// copy it...</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <a class="code" href="namespacefst.html#a4164ec8f0eed99fbb144c1e06bf622f4">EnsureEpsilonProperty</a>(&amp;fst2);</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    std::vector&lt;char&gt; info;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <a class="code" href="namespacefst.html#a0335ed4b018328470d0d4856837fbefb">ComputeStateInfo</a>(fst2, &amp;info);</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; info.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;      <span class="keywordtype">char</span> c = info[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;      assert(!((c &amp; <a class="code" href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a1947c0d03bf916c037b4f25cccc92ace">kStateHasEpsilonArcsEntering</a>) != 0 &amp;&amp;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;               (c &amp; <a class="code" href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a3048a708ccd7fc2d37561d3aeb544f63">kStateHasNonEpsilonArcsEntering</a>) != 0));</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;      assert(!((c &amp; <a class="code" href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a2d3c0fb5e5e5c747c645653b5ce863e7">kStateHasEpsilonArcsLeaving</a>) != 0 &amp;&amp;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;               (c &amp; <a class="code" href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a229ce10dbec4dcf7ca9736ee6f3e8467">kStateHasNonEpsilonArcsLeaving</a>) != 0));</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    }</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    assert(RandEquivalent(fst2, *fst, 5, 0.01, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>(), 10));    </div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keyword">delete</span> fst;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  }</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;}</div><div class="ttc" id="structfst_1_1RandFstOptions_html"><div class="ttname"><a href="structfst_1_1RandFstOptions.html">fst::RandFstOptions</a></div><div class="ttdef"><b>Definition:</b> <a href="rand-fst_8h_source.html#l00034">rand-fst.h:34</a></div></div>
<div class="ttc" id="namespacefst_html_a4164ec8f0eed99fbb144c1e06bf622f4"><div class="ttname"><a href="namespacefst.html#a4164ec8f0eed99fbb144c1e06bf622f4">fst::EnsureEpsilonProperty</a></div><div class="ttdeci">void EnsureEpsilonProperty(VectorFst&lt; Arc &gt; *fst)</div><div class="ttdoc">This function modifies the fst (while maintaining equivalence) in such a way that, after the modification, all states of the FST which have epsilon-arcs entering them, have no non-epsilon arcs entering them, and all states which have epsilon-arcs leaving them, have no non-epsilon arcs leaving them. </div><div class="ttdef"><b>Definition:</b> <a href="epsilon-property-inl_8h_source.html#l00049">epsilon-property-inl.h:49</a></div></div>
<div class="ttc" id="namespacefst_html_abed82baf7f470b522273a3e37c24c600a1947c0d03bf916c037b4f25cccc92ace"><div class="ttname"><a href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a1947c0d03bf916c037b4f25cccc92ace">fst::kStateHasEpsilonArcsEntering</a></div><div class="ttdef"><b>Definition:</b> <a href="epsilon-property_8h_source.html#l00028">epsilon-property.h:28</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a0335ed4b018328470d0d4856837fbefb"><div class="ttname"><a href="namespacefst.html#a0335ed4b018328470d0d4856837fbefb">fst::ComputeStateInfo</a></div><div class="ttdeci">void ComputeStateInfo(const VectorFst&lt; Arc &gt; &amp;fst, std::vector&lt; char &gt; *epsilon_info)</div><div class="ttdoc">This function will set epsilon_info to have size equal to the NumStates() of the FST, containing a logical-or of the enum values kStateHasEpsilonArcsEntering, kStateHasNonEpsilonArcsEntering, kStateHasEpsilonArcsLeaving, and kStateHasNonEpsilonArcsLeaving. </div><div class="ttdef"><b>Definition:</b> <a href="epsilon-property-inl_8h_source.html#l00028">epsilon-property-inl.h:28</a></div></div>
<div class="ttc" id="namespacefst_html_abed82baf7f470b522273a3e37c24c600a2d3c0fb5e5e5c747c645653b5ce863e7"><div class="ttname"><a href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a2d3c0fb5e5e5c747c645653b5ce863e7">fst::kStateHasEpsilonArcsLeaving</a></div><div class="ttdef"><b>Definition:</b> <a href="epsilon-property_8h_source.html#l00030">epsilon-property.h:30</a></div></div>
<div class="ttc" id="namespacefst_html_abed82baf7f470b522273a3e37c24c600a3048a708ccd7fc2d37561d3aeb544f63"><div class="ttname"><a href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a3048a708ccd7fc2d37561d3aeb544f63">fst::kStateHasNonEpsilonArcsEntering</a></div><div class="ttdef"><b>Definition:</b> <a href="epsilon-property_8h_source.html#l00029">epsilon-property.h:29</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="structfst_1_1RandFstOptions_html_aa5a7456f7e24b2444f56c9e9f2802f62"><div class="ttname"><a href="structfst_1_1RandFstOptions.html#aa5a7456f7e24b2444f56c9e9f2802f62">fst::RandFstOptions::acyclic</a></div><div class="ttdeci">bool acyclic</div><div class="ttdef"><b>Definition:</b> <a href="rand-fst_8h_source.html#l00040">rand-fst.h:40</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacefst_html_abed82baf7f470b522273a3e37c24c600a229ce10dbec4dcf7ca9736ee6f3e8467"><div class="ttname"><a href="namespacefst.html#abed82baf7f470b522273a3e37c24c600a229ce10dbec4dcf7ca9736ee6f3e8467">fst::kStateHasNonEpsilonArcsLeaving</a></div><div class="ttdef"><b>Definition:</b> <a href="epsilon-property_8h_source.html#l00031">epsilon-property.h:31</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9ad6f174a14946dd388b86ffaaeb8a5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ad6f174a14946dd388b86ffaaeb8a5e">&#9670;&nbsp;</a></span>TestEqualAlign()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestEqualAlign </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils-test_8cc_source.html#l00333">333</a> of file <a class="el" href="fstext-utils-test_8cc_source.html">fstext-utils-test.cc</a>.</p>

<p class="reference">References <a class="el" href="rand-fst_8h_source.html#l00039">RandFstOptions::allow_empty</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00803">EqualAlign()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00178">GetLinearSymbolSequence()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                      {</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    RandFstOptions opts;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    opts.allow_empty = <span class="keyword">false</span>;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = RandFst&lt;Arc&gt;();</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordtype">int</span> length = 10 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 20;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    VectorFst&lt;Arc&gt; fst_path;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacefst.html#a4fc98c1743a4bd467d655e9634636027">EqualAlign</a>(*fst, length, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>(), &amp;fst_path)) {</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      std::cout &lt;&lt; <span class="stringliteral">&quot;EqualAlign succeeded\n&quot;</span>;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      vector&lt;int32&gt; isymbol_seq, osymbol_seq;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> weight;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <a class="code" href="namespacefst.html#ae14d5a9815e596bfa4a455ce965c2697">GetLinearSymbolSequence</a>(fst_path, &amp;isymbol_seq, &amp;osymbol_seq, &amp;weight);</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      assert(isymbol_seq.size() == length);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      Invert(&amp;fst_path);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      VectorFst&lt;Arc&gt; fst_composed;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      Compose(fst_path, *fst, &amp;fst_composed);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      assert(fst_composed.Start() != kNoStateId);  <span class="comment">// make sure nonempty.</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      std::cout &lt;&lt; <span class="stringliteral">&quot;EqualAlign did not generate alignment\n&quot;</span>;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    }</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keyword">delete</span> fst;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  }</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a4fc98c1743a4bd467d655e9634636027"><div class="ttname"><a href="namespacefst.html#a4fc98c1743a4bd467d655e9634636027">fst::EqualAlign</a></div><div class="ttdeci">bool EqualAlign(const Fst&lt; Arc &gt; &amp;ifst, typename Arc::StateId length, int rand_seed, MutableFst&lt; Arc &gt; *ofst, int num_retries)</div><div class="ttdoc">EqualAlign is similar to RandGen, but it generates a sequence with exactly &quot;length&quot; input symbols...</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00803">fstext-utils-inl.h:803</a></div></div>
<div class="ttc" id="namespacefst_html_ae14d5a9815e596bfa4a455ce965c2697"><div class="ttname"><a href="namespacefst.html#ae14d5a9815e596bfa4a455ce965c2697">fst::GetLinearSymbolSequence</a></div><div class="ttdeci">bool GetLinearSymbolSequence(const Fst&lt; Arc &gt; &amp;fst, vector&lt; I &gt; *isymbols_out, vector&lt; I &gt; *osymbols_out, typename Arc::Weight *tot_weight_out)</div><div class="ttdoc">GetLinearSymbolSequence gets the symbol sequence from a linear FST. </div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00178">fstext-utils-inl.h:178</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a824142895ef709bee55df6cb6b99151d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a824142895ef709bee55df6cb6b99151d">&#9670;&nbsp;</a></span>TestFactor() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestFactor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trivial-factor-weight-test_8cc_source.html#l00031">31</a> of file <a class="el" href="trivial-factor-weight-test_8cc_source.html">trivial-factor-weight-test.cc</a>.</p>

<p class="reference">References <a class="el" href="determinize-star-inl_8h_source.html#l00625">DeterminizeStar()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="determinize-star-inl_8h_source.html#l00067">StringRepository&lt; Label, StringId &gt;::IdOfEmpty()</a>, <a class="el" href="determinize-star-inl_8h_source.html#l00069">StringRepository&lt; Label, StringId &gt;::IdOfLabel()</a>, <a class="el" href="determinize-star-inl_8h_source.html#l00079">StringRepository&lt; Label, StringId &gt;::IdOfSeq()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>, <a class="el" href="pre-determinize-inl_8h_source.html#l00317">PreDeterminize()</a>, <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>, <a class="el" href="determinize-star-inl_8h_source.html#l00098">StringRepository&lt; Label, StringId &gt;::RemovePrefix()</a>, <a class="el" href="determinize-star-inl_8h_source.html#l00089">StringRepository&lt; Label, StringId &gt;::SeqOfId()</a>, and <a class="el" href="determinize-star-test_8cc_source.html#l00447">TestStringRepository()</a>.</p>
<div class="fragment"><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;                                       {</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = <span class="keyword">new</span> VectorFst&lt;Arc&gt;();</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keywordtype">int</span> n_syms = 2 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5, n_states = 3 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 10, n_arcs = 5 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 30, n_final = 1 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()%3;  <span class="comment">// Up to 2 unique symbols.</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  cout &lt;&lt; <span class="stringliteral">&quot;Testing pre-determinize with &quot;</span>&lt;&lt;n_syms&lt;&lt;<span class="stringliteral">&quot; symbols, &quot;</span>&lt;&lt;n_states&lt;&lt;<span class="stringliteral">&quot; states and &quot;</span>&lt;&lt;n_arcs&lt;&lt;<span class="stringliteral">&quot; arcs and &quot;</span>&lt;&lt;n_final&lt;&lt;<span class="stringliteral">&quot; final states.\n&quot;</span>;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  SymbolTable *sptr = NULL;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  vector&lt;Label&gt; all_syms;  <span class="comment">// including epsilon.</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="comment">// Put symbols in the symbol table from 1..n_syms-1.</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)n_syms;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    all_syms.push_back(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="comment">// Create states.</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  vector&lt;StateId&gt; all_states;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)n_states;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    StateId this_state = fst-&gt;AddState();</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> == 0) fst-&gt;SetStart(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    all_states.push_back(this_state);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  }</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="comment">// Set final states.</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0;<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)n_final;<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    StateId <span class="keywordtype">id</span> = all_states[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_states];</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    Weight weight = (<a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>)(0.33*(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5) );</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    printf(<span class="stringliteral">&quot;calling SetFinal with %d and %f\n&quot;</span>, <span class="keywordtype">id</span>, weight.Value());</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    fst-&gt;SetFinal(<span class="keywordtype">id</span>, weight);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  }</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="comment">// Create arcs.</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)n_arcs;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> a;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    a.nextstate = all_states[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_states];</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    a.ilabel = all_syms[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_syms];</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    a.olabel = all_syms[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_syms];  <span class="comment">// same input+output vocab.</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    a.weight = (<a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>) (0.33*(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 2));</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    StateId start_state = all_states[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_states];</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    fst-&gt;AddArc(start_state, a);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  }</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing before trimming\n&quot;</span>;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  {</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(*fst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  }</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="comment">// Trim resulting FST.</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  Connect(fst);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing after trimming\n&quot;</span>;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(*fst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  }</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  vector&lt;Label&gt; extra_syms;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keywordflow">if</span> (fst-&gt;Start() != kNoStateId) {  <span class="comment">// &quot;Connect&quot; did not make it empty....</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <a class="code" href="namespacefst.html#aaf75c786b2e62e985ace7739c5e58e77">PreDeterminize</a>(fst, 1000, &amp;extra_syms);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  }</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing after predeterminization\n&quot;</span>;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  {</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(*fst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  }</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  {  <span class="comment">// Remove epsilon.  All default args.</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordtype">bool</span> connect = <span class="keyword">true</span>;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    Weight weight_threshold = Weight::Zero();</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    int64 nstate = -1;  <span class="comment">// Relates to pruning.</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordtype">double</span> delta = kDelta;  <span class="comment">// I think a small weight value.  Relates to some kind of pruning,</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment">// I guess.  But with no epsilon cycles, probably doensn&#39;t matter.</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    RmEpsilon(fst, connect,  weight_threshold, nstate, delta);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  }</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing after double-epsilon removal\n&quot;</span>;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  {</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(*fst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  }</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  VectorFst&lt;Arc&gt; ofst_star;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    printf(<span class="stringliteral">&quot;Converting to Gallic semiring&quot;</span>);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    VectorFst&lt;GallicArc&lt;Arc&gt; &gt; gallic_fst;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    VectorFst&lt;GallicArc&lt;Arc&gt; &gt; gallic_fst_noeps;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    VectorFst&lt;GallicArc&lt;Arc&gt; &gt; gallic_fst_det;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      printf(<span class="stringliteral">&quot;Determinizing with DeterminizeStar, converting to Gallic\n&quot;</span>);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      <a class="code" href="group__fst__extensions.html#gac6d4823e83f5353ae5b5ce569a7a29a3">DeterminizeStar</a>(*fst, &amp;gallic_fst);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    }</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    {</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      std::cout &lt;&lt;<span class="stringliteral">&quot; printing gallic FST\n&quot;</span>;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      FstPrinter&lt;GallicArc&lt;Arc&gt; &gt;  fstprinter(gallic_fst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    }</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="comment">// Map(ofst_star, &amp;gallic_fst, ToGallicMapper&lt;Arc, STRING_LEFT&gt;());</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    printf(<span class="stringliteral">&quot;Converting gallic back to regular\n&quot;</span>);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    TrivialFactorWeightFst&lt; GallicArc&lt;Arc, GALLIC_LEFT&gt;, GallicFactor&lt;<span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a>,</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a>, GALLIC_LEFT&gt; &gt; fwfst(gallic_fst);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    {</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      std::cout &lt;&lt;<span class="stringliteral">&quot; printing factor-weight FST\n&quot;</span>;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      FstPrinter&lt;GallicArc&lt;Arc&gt; &gt;  fstprinter(fwfst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    }</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    Map(fwfst, &amp;ofst_star, FromGallicMapper&lt;Arc, GALLIC_LEFT&gt;());</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    {</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      std::cout &lt;&lt;<span class="stringliteral">&quot; printing after converting back to regular FST\n&quot;</span>;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      FstPrinter&lt;Arc&gt; fstprinter(ofst_star, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    }</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    VectorFst&lt;GallicArc&lt;Arc&gt; &gt; new_gallic_fst;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    Map(ofst_star, &amp;new_gallic_fst, ToGallicMapper&lt;Arc, GALLIC_LEFT&gt;());</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    assert(RandEquivalent(gallic_fst, new_gallic_fst, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  }</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="keyword">delete</span> fst;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="classsize__t_html"><div class="ttname"><a href="classsize__t.html">size_t</a></div></div>
<div class="ttc" id="namespacefst_html_aaf75c786b2e62e985ace7739c5e58e77"><div class="ttname"><a href="namespacefst.html#aaf75c786b2e62e985ace7739c5e58e77">fst::PreDeterminize</a></div><div class="ttdeci">void PreDeterminize(MutableFst&lt; Arc &gt; *fst, typename Arc::Label first_new_sym, vector&lt; Int &gt; *symsOut)</div><div class="ttdef"><b>Definition:</b> <a href="pre-determinize-inl_8h_source.html#l00317">pre-determinize-inl.h:317</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__fst__extensions_html_gac6d4823e83f5353ae5b5ce569a7a29a3"><div class="ttname"><a href="group__fst__extensions.html#gac6d4823e83f5353ae5b5ce569a7a29a3">fst::DeterminizeStar</a></div><div class="ttdeci">bool DeterminizeStar(F &amp;ifst, MutableFst&lt; typename F::Arc &gt; *ofst, float delta, bool *debug_ptr, int max_states, bool allow_partial)</div><div class="ttdoc">This function implements the normal version of DeterminizeStar, in which the output strings are repre...</div><div class="ttdef"><b>Definition:</b> <a href="determinize-star-inl_8h_source.html#l00625">determinize-star-inl.h:625</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaaf608887e6b0291a339b9b2051ee4b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaaf608887e6b0291a339b9b2051ee4b3">&#9670;&nbsp;</a></span>TestFactor() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void fst::TestFactor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="factor-test_8cc_source.html#l00032">32</a> of file <a class="el" href="factor-test_8cc_source.html">factor-test.cc</a>.</p>

<p class="reference">References <a class="el" href="factor-inl_8h_source.html#l00250">CreateFactorFst()</a>, <a class="el" href="factor-inl_8h_source.html#l00163">ExpandInputSequences()</a>, <a class="el" href="factor-inl_8h_source.html#l00069">Factor()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00168">MapInputSymbols()</a>, <a class="el" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">rnnlm::n</a>, <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>, and <a class="el" href="kaldi-math_8h_source.html#l00151">kaldi::RandUniform()</a>.</p>
<div class="fragment"><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;                                             {</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  VectorFst&lt;Arc&gt; <a class="code" href="namespacefst.html">fst</a>;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="keywordtype">int</span> n_syms = 2 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5, n_arcs = 5 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 30, n_final = 1 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()%10;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  SymbolTable symtab(<span class="stringliteral">&quot;my-symbol-table&quot;</span>), *sptr = &amp;symtab;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  vector&lt;Label&gt; all_syms;  <span class="comment">// including epsilon.</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="comment">// Put symbols in the symbol table from 1..n_syms-1.</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)n_syms;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    std::stringstream ss;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> == 0) ss &lt;&lt; <span class="stringliteral">&quot;&lt;eps&gt;&quot;</span>;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keywordflow">else</span> ss&lt;&lt;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    Label cur_lab = sptr-&gt;AddSymbol(ss.str());</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    assert(cur_lab == (Label)i);</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    all_syms.push_back(cur_lab);</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  }</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  assert(all_syms[0] == 0);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  fst.AddState();</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="keywordtype">int</span> cur_num_states = 1;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n_arcs; i++) {</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    StateId src_state = <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % cur_num_states;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    StateId dst_state;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacekaldi.html#a0c4bcfc10bea5ed0d3e3cf6d74922121">kaldi::RandUniform</a>() &lt; 0.1) dst_state = <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % cur_num_states;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;      dst_state = cur_num_states++; fst.AddState();</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    }</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> arc;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacekaldi.html#a0c4bcfc10bea5ed0d3e3cf6d74922121">kaldi::RandUniform</a>() &lt; 0.5) arc.ilabel = all_syms[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()%all_syms.size()];</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">else</span> arc.ilabel = 0;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacekaldi.html#a0c4bcfc10bea5ed0d3e3cf6d74922121">kaldi::RandUniform</a>() &lt; 0.5) arc.olabel = all_syms[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()%all_syms.size()];</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">else</span> arc.olabel = 0;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    arc.weight = (<a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>) (0 + 0.1*(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5));</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    arc.nextstate = dst_state;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    fst.AddArc(src_state, arc);</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  }</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n_final; i++) {</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    fst.SetFinal(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % cur_num_states,  (Weight) (0 + 0.1*(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5)));</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  }</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacekaldi.html#a0c4bcfc10bea5ed0d3e3cf6d74922121">kaldi::RandUniform</a>() &lt; 0.8)   fst.SetStart(0);  <span class="comment">// usually leads to nicer examples.</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keywordflow">else</span> fst.SetStart(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % cur_num_states);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing before trimming\n&quot;</span>;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(fst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  }</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="comment">// Trim resulting FST.</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  Connect(&amp;fst);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing after trimming\n&quot;</span>;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(fst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  }</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="keywordflow">if</span> (fst.Start() == kNoStateId) <span class="keywordflow">return</span>;  <span class="comment">// &quot;Connect&quot; made it empty.</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  VectorFst&lt;Arc&gt; fst_pushed;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  Push&lt;Arc, REWEIGHT_TO_INITIAL&gt;(fst, &amp;fst_pushed, kPushLabels);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  VectorFst&lt;Arc&gt; fst_factored;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  vector&lt;vector&lt;typename Arc::Label&gt; &gt; symbols;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <a class="code" href="namespacefst.html#ab3abe8a6b622b82e751c44cbe46583ae">Factor</a>(fst, &amp;fst_factored, &amp;symbols);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="comment">// Check no epsilons in &quot;symbols&quot;.</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; symbols.size(); i++)</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    assert(symbols[i].size() == 0 || *(std::min(symbols[i].begin(), symbols[i].end())) &gt; 0);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  VectorFst&lt;Arc&gt; fst_factored_pushed;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  vector&lt;vector&lt;typename Arc::Label&gt; &gt; symbols_pushed;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <a class="code" href="namespacefst.html#ab3abe8a6b622b82e751c44cbe46583ae">Factor</a>(fst_pushed, &amp;fst_factored_pushed, &amp;symbols_pushed);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  std::cout &lt;&lt; <span class="stringliteral">&quot;Unfactored has &quot;</span>&lt;&lt;fst.NumStates()&lt;&lt;<span class="stringliteral">&quot; states, factored has &quot;</span>&lt;&lt;fst_factored.NumStates()&lt;&lt;<span class="stringliteral">&quot;, and pushed+factored has &quot;</span>&lt;&lt;fst_factored_pushed.NumStates()&lt;&lt;<span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  assert(fst_factored.NumStates() &lt;= fst.NumStates());</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="comment">//  assert(fst_factored_pushed.NumStates() &lt;= fst_factored.NumStates());  // pushing should only help. [ no, it doesn&#39;t]</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  assert(fst_factored_pushed.NumStates() &lt;= fst_pushed.NumStates());</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  VectorFst&lt;Arc&gt; fst_factored_copy(fst_factored);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  VectorFst&lt;Arc&gt; fst_factored_unfactored(fst_factored);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <a class="code" href="namespacefst.html#aa3c6893c42fe5672ac65c9588cf53e4c">ExpandInputSequences</a>(symbols, &amp;fst_factored_unfactored);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  VectorFst&lt;Arc&gt; factor_fst;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <a class="code" href="namespacefst.html#a6a070610f7a2b12584472be177c162c2">CreateFactorFst</a>(symbols, &amp;factor_fst);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  VectorFst&lt;Arc&gt; fst_factored_unfactored2;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  Compose(factor_fst, fst_factored, &amp;fst_factored_unfactored2);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <a class="code" href="namespacefst.html#aa3c6893c42fe5672ac65c9588cf53e4c">ExpandInputSequences</a>(symbols_pushed, &amp;fst_factored_pushed);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  assert(RandEquivalent(fst, fst_factored_unfactored, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  assert(RandEquivalent(fst, fst_factored_unfactored2, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  assert(RandEquivalent(fst, fst_factored_pushed, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  {  <span class="comment">// Have tested for equivalence; now do another test: that FactorFst actually finds all</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="comment">// the factors.  Do this by inserting factors using ExpandInputSequences and making sure it gets</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment">// rid of them all.</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    Label max_label = *(std::max_element(all_syms.begin(), all_syms.end()));</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    vector&lt;vector&lt;Label&gt; &gt; new_labels(max_label+1);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">for</span> (Label l = 1; l &lt; static_cast&lt;Label&gt;(new_labels.size()); l++) {</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">n</a> = <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">n</a>; i++) new_labels[l].push_back(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 100);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    }</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    VectorFst&lt;Arc&gt; fst_expanded(fst);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <a class="code" href="namespacefst.html#aa3c6893c42fe5672ac65c9588cf53e4c">ExpandInputSequences</a>(new_labels, &amp;fst_expanded);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    vector&lt;vector&lt;Label&gt; &gt; factors;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    VectorFst&lt;Arc&gt; fst_reduced;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <a class="code" href="namespacefst.html#ab3abe8a6b622b82e751c44cbe46583ae">Factor</a>(fst_expanded, &amp;fst_reduced, &amp;factors);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    assert(fst_reduced.NumStates() &lt;= fst.NumStates());  <span class="comment">// Checking that it found all the factors.</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  }</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  {  <span class="comment">// This block test MapInputSymbols [but relies on the correctness of Factor</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="comment">// and ExpandInputSequences to do so].</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    std::map&lt;Label, Label&gt; symbols_reverse_map;  <span class="comment">// from new-&gt;old.</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    symbols_reverse_map[0] = 0;  <span class="comment">// map eps to eps.</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">for</span> (Label i = 1; i &lt; static_cast&lt;Label&gt;(symbols.size()); i++) {</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      Label new_i;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <span class="keywordflow">do</span> {</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        new_i = <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % (symbols.size() + 20);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      } <span class="keywordflow">while</span> (symbols_reverse_map.count(new_i) == 1);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      symbols_reverse_map[new_i] = <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    }</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    vector&lt;vector&lt;Label&gt; &gt; symbols_new;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    vector&lt;Label&gt; symbol_map(symbols.size());  <span class="comment">// from old-&gt;new.</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keyword">typename</span> std::map&lt;Label, Label&gt;::iterator iter = symbols_reverse_map.begin();</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">for</span> (; iter != symbols_reverse_map.end(); iter++) {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      Label new_label = iter-&gt;first, old_label = iter-&gt;second;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <span class="keywordflow">if</span> (new_label &gt;= static_cast&lt;Label&gt;(symbols_new.size())) symbols_new.resize(new_label+1);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      symbols_new[new_label] = symbols[old_label];</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      symbol_map[old_label] = new_label;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    }</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="namespacefst.html#adf280c4ca1442b10be12d6006bd0c325">MapInputSymbols</a>(symbol_map, &amp;fst_factored_copy);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <a class="code" href="namespacefst.html#aa3c6893c42fe5672ac65c9588cf53e4c">ExpandInputSequences</a>(symbols_new, &amp;fst_factored_copy);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    assert(RandEquivalent(fst, fst_factored_copy,</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                          5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>,</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                          100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  }</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html_ab3abe8a6b622b82e751c44cbe46583ae"><div class="ttname"><a href="namespacefst.html#ab3abe8a6b622b82e751c44cbe46583ae">fst::Factor</a></div><div class="ttdeci">void Factor(const Fst&lt; Arc &gt; &amp;fst, MutableFst&lt; Arc &gt; *ofst, vector&lt; vector&lt; I &gt; &gt; *symbols_out)</div><div class="ttdoc">Factor identifies linear chains of states with an olabel (if any) only on the first arc of the chain...</div><div class="ttdef"><b>Definition:</b> <a href="factor-inl_8h_source.html#l00069">factor-inl.h:69</a></div></div>
<div class="ttc" id="namespacekaldi_html_a0c4bcfc10bea5ed0d3e3cf6d74922121"><div class="ttname"><a href="namespacekaldi.html#a0c4bcfc10bea5ed0d3e3cf6d74922121">kaldi::RandUniform</a></div><div class="ttdeci">float RandUniform(struct RandomState *state=NULL)</div><div class="ttdoc">Returns a random number strictly between 0 and 1. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00151">kaldi-math.h:151</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="classsize__t_html"><div class="ttname"><a href="classsize__t.html">size_t</a></div></div>
<div class="ttc" id="namespacernnlm_html_ab4871778d570f724a07823e0a2fb9884"><div class="ttname"><a href="namespacernnlm.html#ab4871778d570f724a07823e0a2fb9884">rnnlm::n</a></div><div class="ttdeci">struct rnnlm::@11::@12 n</div></div>
<div class="ttc" id="namespacefst_html_adf280c4ca1442b10be12d6006bd0c325"><div class="ttname"><a href="namespacefst.html#adf280c4ca1442b10be12d6006bd0c325">fst::MapInputSymbols</a></div><div class="ttdeci">void MapInputSymbols(const vector&lt; I &gt; &amp;symbol_mapping, MutableFst&lt; Arc &gt; *fst)</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00168">fstext-utils-inl.h:168</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacefst_html_a6a070610f7a2b12584472be177c162c2"><div class="ttname"><a href="namespacefst.html#a6a070610f7a2b12584472be177c162c2">fst::CreateFactorFst</a></div><div class="ttdeci">void CreateFactorFst(const vector&lt; vector&lt; I &gt; &gt; &amp;sequences, MutableFst&lt; Arc &gt; *fst)</div><div class="ttdoc">The function CreateFactorFst will create an FST that expands out the &quot;factors&quot; that are the indices o...</div><div class="ttdef"><b>Definition:</b> <a href="factor-inl_8h_source.html#l00250">factor-inl.h:250</a></div></div>
<div class="ttc" id="namespacefst_html_aa3c6893c42fe5672ac65c9588cf53e4c"><div class="ttname"><a href="namespacefst.html#aa3c6893c42fe5672ac65c9588cf53e4c">fst::ExpandInputSequences</a></div><div class="ttdeci">void ExpandInputSequences(const vector&lt; vector&lt; I &gt; &gt; &amp;sequences, MutableFst&lt; Arc &gt; *fst)</div><div class="ttdoc">ExpandInputSequences expands out the input symbols into sequences of input symbols. </div><div class="ttdef"><b>Definition:</b> <a href="factor-inl_8h_source.html#l00163">factor-inl.h:163</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aba78427c6cf2117076a6fe026658824f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba78427c6cf2117076a6fe026658824f">&#9670;&nbsp;</a></span>TestLatticeStringRepository()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestLatticeStringRepository </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="determinize-lattice-test_8cc_source.html#l00027">27</a> of file <a class="el" href="determinize-lattice-test_8cc_source.html">determinize-lattice-test.cc</a>.</p>

<p class="reference">References <a class="el" href="determinize-lattice-inl_8h_source.html#l00083">LatticeStringRepository&lt; IntType &gt;::CommonPrefix()</a>, <a class="el" href="determinize-lattice-inl_8h_source.html#l00149">LatticeStringRepository&lt; IntType &gt;::ConvertToVector()</a>, <a class="el" href="determinize-lattice-inl_8h_source.html#l00052">LatticeStringRepository&lt; IntType &gt;::EmptyString()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="determinize-lattice-inl_8h_source.html#l00132">LatticeStringRepository&lt; IntType &gt;::IsPrefixOf()</a>, <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>, <a class="el" href="determinize-lattice-inl_8h_source.html#l00096">LatticeStringRepository&lt; IntType &gt;::ReduceToCommonPrefix()</a>, and <a class="el" href="determinize-lattice-inl_8h_source.html#l00056">LatticeStringRepository&lt; IntType &gt;::Successor()</a>.</p>

<p class="reference">Referenced by <a class="el" href="determinize-lattice-test_8cc_source.html#l00166">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;                                   {</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  <span class="keyword">typedef</span> int32 IntType;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <a class="code" href="classfst_1_1LatticeStringRepository.html">LatticeStringRepository&lt;IntType&gt;</a> sr;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="structfst_1_1LatticeStringRepository_1_1Entry.html">LatticeStringRepository&lt;IntType&gt;::Entry</a> Entry;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 100; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="keywordtype">int</span> len = <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    vector&lt;IntType&gt; str(len), str2(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 4);</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="keyword">const</span> Entry *e = NULL;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; len; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;      str[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;      e = sr.<a class="code" href="classfst_1_1LatticeStringRepository.html#a1e1de1b6630bdad9e24eb309835d6f70">Successor</a>(e, str[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    }</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    sr.<a class="code" href="classfst_1_1LatticeStringRepository.html#a52c202018bc60341ec488399b4716e3d">ConvertToVector</a>(e, &amp;str2);</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    assert(str == str2);</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keywordtype">int</span> len2 = <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    str2.resize(len2);</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keyword">const</span> Entry *f = sr.<a class="code" href="classfst_1_1LatticeStringRepository.html#ab4468e543a4130652e672a3fbff609a3">EmptyString</a>(); <span class="comment">// NULL</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; len2; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;      str2[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;      f = sr.<a class="code" href="classfst_1_1LatticeStringRepository.html#a1e1de1b6630bdad9e24eb309835d6f70">Successor</a>(f, str2[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    }</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    vector&lt;IntType&gt; prefix, prefix2(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 10),</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        prefix3;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; len &amp;&amp; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; len2; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;      <span class="keywordflow">if</span> (str[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] == str2[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]) prefix.push_back(str[i]);</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">break</span>;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    }</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keyword">const</span> Entry *g = sr.<a class="code" href="classfst_1_1LatticeStringRepository.html#a06ee2012e378a9fbc5bc67145af56f3b">CommonPrefix</a>(e, f);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    sr.<a class="code" href="classfst_1_1LatticeStringRepository.html#a52c202018bc60341ec488399b4716e3d">ConvertToVector</a>(g, &amp;prefix2);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    sr.<a class="code" href="classfst_1_1LatticeStringRepository.html#a52c202018bc60341ec488399b4716e3d">ConvertToVector</a>(e, &amp;prefix3);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    sr.<a class="code" href="classfst_1_1LatticeStringRepository.html#a2e6d71262bc94e473ad5456e12603e78">ReduceToCommonPrefix</a>(f, &amp;prefix3);</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    assert(prefix == prefix2);</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    assert(prefix == prefix3);</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    assert(sr.<a class="code" href="classfst_1_1LatticeStringRepository.html#a12194dc14756dcdb021615cd010f39c2">IsPrefixOf</a>(g, e));</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    assert(sr.<a class="code" href="classfst_1_1LatticeStringRepository.html#a12194dc14756dcdb021615cd010f39c2">IsPrefixOf</a>(g, f));</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">if</span> (str.size() &gt; prefix.size())</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;      assert(!sr.<a class="code" href="classfst_1_1LatticeStringRepository.html#a12194dc14756dcdb021615cd010f39c2">IsPrefixOf</a>(e, g));</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  }</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;}</div><div class="ttc" id="classfst_1_1LatticeStringRepository_html_a06ee2012e378a9fbc5bc67145af56f3b"><div class="ttname"><a href="classfst_1_1LatticeStringRepository.html#a06ee2012e378a9fbc5bc67145af56f3b">fst::LatticeStringRepository::CommonPrefix</a></div><div class="ttdeci">const Entry * CommonPrefix(const Entry *a, const Entry *b)</div><div class="ttdef"><b>Definition:</b> <a href="determinize-lattice-inl_8h_source.html#l00083">determinize-lattice-inl.h:83</a></div></div>
<div class="ttc" id="classfst_1_1LatticeStringRepository_html"><div class="ttname"><a href="classfst_1_1LatticeStringRepository.html">fst::LatticeStringRepository</a></div><div class="ttdef"><b>Definition:</b> <a href="determinize-lattice-inl_8h_source.html#l00037">determinize-lattice-inl.h:37</a></div></div>
<div class="ttc" id="classfst_1_1LatticeStringRepository_html_a1e1de1b6630bdad9e24eb309835d6f70"><div class="ttname"><a href="classfst_1_1LatticeStringRepository.html#a1e1de1b6630bdad9e24eb309835d6f70">fst::LatticeStringRepository::Successor</a></div><div class="ttdeci">const Entry * Successor(const Entry *parent, IntType i)</div><div class="ttdef"><b>Definition:</b> <a href="determinize-lattice-inl_8h_source.html#l00056">determinize-lattice-inl.h:56</a></div></div>
<div class="ttc" id="classfst_1_1LatticeStringRepository_html_a52c202018bc60341ec488399b4716e3d"><div class="ttname"><a href="classfst_1_1LatticeStringRepository.html#a52c202018bc60341ec488399b4716e3d">fst::LatticeStringRepository::ConvertToVector</a></div><div class="ttdeci">void ConvertToVector(const Entry *entry, vector&lt; IntType &gt; *out) const</div><div class="ttdef"><b>Definition:</b> <a href="determinize-lattice-inl_8h_source.html#l00149">determinize-lattice-inl.h:149</a></div></div>
<div class="ttc" id="classfst_1_1LatticeStringRepository_html_ab4468e543a4130652e672a3fbff609a3"><div class="ttname"><a href="classfst_1_1LatticeStringRepository.html#ab4468e543a4130652e672a3fbff609a3">fst::LatticeStringRepository::EmptyString</a></div><div class="ttdeci">const Entry * EmptyString()</div><div class="ttdef"><b>Definition:</b> <a href="determinize-lattice-inl_8h_source.html#l00052">determinize-lattice-inl.h:52</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="structfst_1_1LatticeStringRepository_1_1Entry_html"><div class="ttname"><a href="structfst_1_1LatticeStringRepository_1_1Entry.html">fst::LatticeStringRepository::Entry</a></div><div class="ttdef"><b>Definition:</b> <a href="determinize-lattice-inl_8h_source.html#l00039">determinize-lattice-inl.h:39</a></div></div>
<div class="ttc" id="classfst_1_1LatticeStringRepository_html_a2e6d71262bc94e473ad5456e12603e78"><div class="ttname"><a href="classfst_1_1LatticeStringRepository.html#a2e6d71262bc94e473ad5456e12603e78">fst::LatticeStringRepository::ReduceToCommonPrefix</a></div><div class="ttdeci">void ReduceToCommonPrefix(const Entry *a, vector&lt; IntType &gt; *b)</div><div class="ttdef"><b>Definition:</b> <a href="determinize-lattice-inl_8h_source.html#l00096">determinize-lattice-inl.h:96</a></div></div>
<div class="ttc" id="classfst_1_1LatticeStringRepository_html_a12194dc14756dcdb021615cd010f39c2"><div class="ttname"><a href="classfst_1_1LatticeStringRepository.html#a12194dc14756dcdb021615cd010f39c2">fst::LatticeStringRepository::IsPrefixOf</a></div><div class="ttdeci">bool IsPrefixOf(const Entry *a, const Entry *b) const</div><div class="ttdef"><b>Definition:</b> <a href="determinize-lattice-inl_8h_source.html#l00132">determinize-lattice-inl.h:132</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2aae6c34ab901e1d36fefbf9ffc5d0a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2aae6c34ab901e1d36fefbf9ffc5d0a8">&#9670;&nbsp;</a></span>TestMakeLinearAcceptor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestMakeLinearAcceptor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils-test_8cc_source.html#l00029">29</a> of file <a class="el" href="fstext-utils-test_8cc_source.html">fstext-utils-test.cc</a>.</p>

<p class="reference">References <a class="el" href="fstext-utils-inl_8h_source.html#l00097">GetInputSymbols()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00178">GetLinearSymbolSequence()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00311">MakeLinearAcceptor()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00279">NbestAsFsts()</a>, <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>, and <a class="el" href="stl-utils_8h_source.html#l00039">kaldi::SortAndUniq()</a>.</p>
<div class="fragment"><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;                              {</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="keywordtype">int</span> len = <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 10;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  vector&lt;I&gt; vec;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  vector&lt;I&gt; vec_nozeros;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; len; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % len;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    vec.push_back(j);</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="keywordflow">if</span> (j != 0) vec_nozeros.push_back(j);</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  }</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  VectorFst&lt;Arc&gt; vfst;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <a class="code" href="namespacefst.html#af6c2fc5eefdb3342cce42b1c0cd6340a">MakeLinearAcceptor</a>(vec, &amp;vfst);</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  vector&lt;I&gt; vec2;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  vector&lt;I&gt; vec3;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  Weight w;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <a class="code" href="namespacefst.html#ae14d5a9815e596bfa4a455ce965c2697">GetLinearSymbolSequence</a>(vfst, &amp;vec2, &amp;vec3, &amp;w);</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  assert(w == Weight::One());</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  assert(vec_nozeros == vec2);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  assert(vec_nozeros == vec3);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="keywordflow">if</span> (vec2.size() != 0 || vec3.size() != 0) { <span class="comment">// This test might not work</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="comment">// for empty sequences...</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    {</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;      vector&lt;VectorFst&lt;Arc&gt; &gt; fstvec;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;      <a class="code" href="namespacefst.html#a42a4066a7a87381f4c3af10420cf46b8">NbestAsFsts</a>(vfst, 1, &amp;fstvec);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;      <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(fstvec.size() == 1);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;      assert(RandEquivalent(vfst, fstvec[0], 2<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>,</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                            <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    }</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  }</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="keywordtype">bool</span> include_eps = (<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 2 == 0);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="keywordflow">if</span> (!include_eps) vec = vec_nozeros;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <a class="code" href="namespacekaldi.html#a3dd7a9cc33032bfb870b4b6c053822db">kaldi::SortAndUniq</a>(&amp;vec);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  vector&lt;I&gt; vec4;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <a class="code" href="namespacefst.html#a497c657ffe831f50f0de2ce5c296beb6">GetInputSymbols</a>(vfst, include_eps, &amp;vec4);</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  assert(vec4 == vec);</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  vector&lt;I&gt; vec5;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <a class="code" href="namespacefst.html#a497c657ffe831f50f0de2ce5c296beb6">GetInputSymbols</a>(vfst, include_eps, &amp;vec5);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacefst_html_a42a4066a7a87381f4c3af10420cf46b8"><div class="ttname"><a href="namespacefst.html#a42a4066a7a87381f4c3af10420cf46b8">fst::NbestAsFsts</a></div><div class="ttdeci">void NbestAsFsts(const Fst&lt; Arc &gt; &amp;fst, size_t n, vector&lt; VectorFst&lt; Arc &gt; &gt; *fsts_out)</div><div class="ttdoc">Takes the n-shortest-paths (using ShortestPath), but outputs the result as a vector of up to n fsts...</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00279">fstext-utils-inl.h:279</a></div></div>
<div class="ttc" id="namespacefst_html_a497c657ffe831f50f0de2ce5c296beb6"><div class="ttname"><a href="namespacefst.html#a497c657ffe831f50f0de2ce5c296beb6">fst::GetInputSymbols</a></div><div class="ttdeci">void GetInputSymbols(const Fst&lt; Arc &gt; &amp;fst, bool include_eps, vector&lt; I &gt; *symbols)</div><div class="ttdoc">GetInputSymbols gets the list of symbols on the input of fst (including epsilon, if include_eps == tr...</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00097">fstext-utils-inl.h:97</a></div></div>
<div class="ttc" id="namespacekaldi_html_a3dd7a9cc33032bfb870b4b6c053822db"><div class="ttname"><a href="namespacekaldi.html#a3dd7a9cc33032bfb870b4b6c053822db">kaldi::SortAndUniq</a></div><div class="ttdeci">void SortAndUniq(std::vector&lt; T &gt; *vec)</div><div class="ttdoc">Sorts and uniq&amp;#39;s (removes duplicates) from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="stl-utils_8h_source.html#l00039">stl-utils.h:39</a></div></div>
<div class="ttc" id="namespacefst_html_af6c2fc5eefdb3342cce42b1c0cd6340a"><div class="ttname"><a href="namespacefst.html#af6c2fc5eefdb3342cce42b1c0cd6340a">fst::MakeLinearAcceptor</a></div><div class="ttdeci">void MakeLinearAcceptor(const vector&lt; I &gt; &amp;labels, MutableFst&lt; Arc &gt; *ofst)</div><div class="ttdoc">Creates unweighted linear acceptor from symbol sequence. </div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00311">fstext-utils-inl.h:311</a></div></div>
<div class="ttc" id="namespacefst_html_ae14d5a9815e596bfa4a455ce965c2697"><div class="ttname"><a href="namespacefst.html#ae14d5a9815e596bfa4a455ce965c2697">fst::GetLinearSymbolSequence</a></div><div class="ttdeci">bool GetLinearSymbolSequence(const Fst&lt; Arc &gt; &amp;fst, vector&lt; I &gt; *isymbols_out, vector&lt; I &gt; *osymbols_out, typename Arc::Weight *tot_weight_out)</div><div class="ttdoc">GetLinearSymbolSequence gets the symbol sequence from a linear FST. </div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00178">fstext-utils-inl.h:178</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae6595d247b3991fc5b4dac9ec45ad1a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6595d247b3991fc5b4dac9ec45ad1a5">&#9670;&nbsp;</a></span>TestMakeLoopFst()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestMakeLoopFst </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils-test_8cc_source.html#l00302">302</a> of file <a class="el" href="fstext-utils-test_8cc_source.html">fstext-utils-test.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00669">MakeLoopFst()</a>, <a class="el" href="fstext-utils-test_8cc_source.html#l00278">MakeLoopFstCompare()</a>, and <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                                            {</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="keywordtype">int</span> num_fsts = <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 10;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  vector&lt;const ExpandedFst&lt;Arc&gt;* &gt; fsts(num_fsts, (<span class="keyword">const</span> ExpandedFst&lt;Arc&gt;*)NULL);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; num_fsts; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 2 == 0) {  <span class="comment">// put an fst there.</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = RandFst&lt;Arc&gt;();</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      Project(fst, PROJECT_INPUT);  <span class="comment">// make input &amp; output labels the same.</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      fsts[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] = fst;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    } <span class="keywordflow">else</span> { <span class="comment">// this is to test that it works with the caching.</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      fsts[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] = fsts[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>/2];</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    }</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  VectorFst&lt;Arc&gt; *fst1 = <a class="code" href="namespacefst.html#a3b99f77992383006bda67038a91191de">MakeLoopFst</a>(fsts),</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      *fst2 = <a class="code" href="namespacefst.html#a799ce7ea4de106861f51d6821a88bf04">MakeLoopFstCompare</a>(fsts);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  assert(fst1-&gt;Properties(kOLabelSorted, kOLabelSorted) != 0);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  assert(RandEquivalent(*fst1, *fst2, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="keyword">delete</span> fst1;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keyword">delete</span> fst2;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  std::sort(fsts.begin(), fsts.end());</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  fsts.erase(std::unique(fsts.begin(), fsts.end()), fsts.end());</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (int)fsts.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keyword">delete</span> fsts[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a799ce7ea4de106861f51d6821a88bf04"><div class="ttname"><a href="namespacefst.html#a799ce7ea4de106861f51d6821a88bf04">fst::MakeLoopFstCompare</a></div><div class="ttdeci">VectorFst&lt; Arc &gt; * MakeLoopFstCompare(const vector&lt; const ExpandedFst&lt; Arc &gt; *&gt; &amp;fsts)</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-test_8cc_source.html#l00278">fstext-utils-test.cc:278</a></div></div>
<div class="ttc" id="namespacefst_html_a3b99f77992383006bda67038a91191de"><div class="ttname"><a href="namespacefst.html#a3b99f77992383006bda67038a91191de">fst::MakeLoopFst</a></div><div class="ttdeci">VectorFst&lt; Arc &gt; * MakeLoopFst(const vector&lt; const ExpandedFst&lt; Arc &gt; *&gt; &amp;fsts)</div><div class="ttdoc">MakeLoopFst creates an FST that has a state that is both initial and final (weight == Weight::One())...</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00669">fstext-utils-inl.h:669</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9d158f20467d8f3f9f852ba343e9af8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d158f20467d8f3f9f852ba343e9af8a">&#9670;&nbsp;</a></span>TestMakeSymbolsSame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestMakeSymbolsSame </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils-test_8cc_source.html#l00214">214</a> of file <a class="el" href="fstext-utils-test_8cc_source.html">fstext-utils-test.cc</a>.</p>

<p class="reference">References <a class="el" href="fstext-utils-inl_8h_source.html#l00497">FollowingInputSymbolsAreSame()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00610">MakeFollowingInputSymbolsSame()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00528">MakePrecedingInputSymbolsSame()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00460">PrecedingInputSymbolsAreSame()</a>, and <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                                                {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = RandFst&lt;Arc&gt;();</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="keywordtype">bool</span> foll = (<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 2 == 0);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="keywordtype">bool</span> is_symbol = (<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 2 == 0);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  VectorFst&lt;Arc&gt; fst2(*fst);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keywordflow">if</span> (foll) {</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <a class="code" href="namespacefst.html#aae7df766b7e70cce07586d03bbbb3da7">MakeFollowingInputSymbolsSame</a>(is_symbol, &amp;fst2);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    assert(<a class="code" href="namespacefst.html#af2dc0a68baac154b98e543310696c92c">FollowingInputSymbolsAreSame</a>(is_symbol, fst2));</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <a class="code" href="namespacefst.html#a2e9ae1bd1915d71003df02534ccb75ba">MakePrecedingInputSymbolsSame</a>(is_symbol, &amp;fst2);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    assert(<a class="code" href="namespacefst.html#ace144ccc7af6b1c4be3e4d932ff2325a">PrecedingInputSymbolsAreSame</a>(is_symbol, fst2));</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  }</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  assert(RandEquivalent(*fst, fst2, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keyword">delete</span> fst;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;}</div><div class="ttc" id="namespacefst_html_a2e9ae1bd1915d71003df02534ccb75ba"><div class="ttname"><a href="namespacefst.html#a2e9ae1bd1915d71003df02534ccb75ba">fst::MakePrecedingInputSymbolsSame</a></div><div class="ttdeci">void MakePrecedingInputSymbolsSame(bool start_is_epsilon, MutableFst&lt; Arc &gt; *fst)</div><div class="ttdoc">MakePrecedingInputSymbolsSame ensures that all arcs entering any given fst state have the same input ...</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00528">fstext-utils-inl.h:528</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_ace144ccc7af6b1c4be3e4d932ff2325a"><div class="ttname"><a href="namespacefst.html#ace144ccc7af6b1c4be3e4d932ff2325a">fst::PrecedingInputSymbolsAreSame</a></div><div class="ttdeci">bool PrecedingInputSymbolsAreSame(bool start_is_epsilon, const Fst&lt; Arc &gt; &amp;fst)</div><div class="ttdoc">Returns true if and only if the FST is such that the input symbols on arcs entering any given state a...</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00460">fstext-utils-inl.h:460</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacefst_html_af2dc0a68baac154b98e543310696c92c"><div class="ttname"><a href="namespacefst.html#af2dc0a68baac154b98e543310696c92c">fst::FollowingInputSymbolsAreSame</a></div><div class="ttdeci">bool FollowingInputSymbolsAreSame(bool end_is_epsilon, const Fst&lt; Arc &gt; &amp;fst)</div><div class="ttdoc">Returns true if and only if the FST is such that the input symbols on arcs exiting any given state al...</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00497">fstext-utils-inl.h:497</a></div></div>
<div class="ttc" id="namespacefst_html_aae7df766b7e70cce07586d03bbbb3da7"><div class="ttname"><a href="namespacefst.html#aae7df766b7e70cce07586d03bbbb3da7">fst::MakeFollowingInputSymbolsSame</a></div><div class="ttdeci">void MakeFollowingInputSymbolsSame(bool end_is_epsilon, MutableFst&lt; Arc &gt; *fst)</div><div class="ttdoc">MakeFollowingInputSymbolsSame ensures that all arcs exiting any given fst state have the same input s...</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00610">fstext-utils-inl.h:610</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5fbd45173abd899086592301f18f2522"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fbd45173abd899086592301f18f2522">&#9670;&nbsp;</a></span>TestMakeSymbolsSameClass()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestMakeSymbolsSameClass </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils-test_8cc_source.html#l00251">251</a> of file <a class="el" href="fstext-utils-test_8cc_source.html">fstext-utils-test.cc</a>.</p>

<p class="reference">References <a class="el" href="fstext-utils-inl_8h_source.html#l00504">FollowingInputSymbolsAreSameClass()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00616">MakeFollowingInputSymbolsSameClass()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00534">MakePrecedingInputSymbolsSameClass()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00466">PrecedingInputSymbolsAreSameClass()</a>, and <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                                                     {</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = RandFst&lt;Arc&gt;();</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordtype">bool</span> foll = (<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 2 == 0);</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keywordtype">bool</span> is_symbol = (<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 2 == 0);</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  VectorFst&lt;Arc&gt; fst2(*fst);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  TestFunctor&lt;Arc&gt; f;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="keywordflow">if</span> (foll) {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <a class="code" href="namespacefst.html#ad5e20d7135997de882b0a0e0ccdc1e99">MakeFollowingInputSymbolsSameClass</a>(is_symbol, &amp;fst2, f);</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    assert(<a class="code" href="namespacefst.html#ad06fa46b0810d248d45fa67dc07e4293">FollowingInputSymbolsAreSameClass</a>(is_symbol, fst2, f));</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <a class="code" href="namespacefst.html#a87c0ca5c61cd0edbda6ec7cd416e2c6a">MakePrecedingInputSymbolsSameClass</a>(is_symbol, &amp;fst2, f);</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    assert(<a class="code" href="namespacefst.html#a766eb5d44ddf7e0d45a4ddc85f632138">PrecedingInputSymbolsAreSameClass</a>(is_symbol, fst2, f));</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  }</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  assert(RandEquivalent(*fst, fst2, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="keyword">delete</span> fst;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacefst_html_a766eb5d44ddf7e0d45a4ddc85f632138"><div class="ttname"><a href="namespacefst.html#a766eb5d44ddf7e0d45a4ddc85f632138">fst::PrecedingInputSymbolsAreSameClass</a></div><div class="ttdeci">bool PrecedingInputSymbolsAreSameClass(bool start_is_epsilon, const Fst&lt; Arc &gt; &amp;fst, const F &amp;f)</div><div class="ttdoc">This is as PrecedingInputSymbolsAreSame, but with a functor f that maps labels to classes...</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00466">fstext-utils-inl.h:466</a></div></div>
<div class="ttc" id="namespacefst_html_a87c0ca5c61cd0edbda6ec7cd416e2c6a"><div class="ttname"><a href="namespacefst.html#a87c0ca5c61cd0edbda6ec7cd416e2c6a">fst::MakePrecedingInputSymbolsSameClass</a></div><div class="ttdeci">void MakePrecedingInputSymbolsSameClass(bool start_is_epsilon, MutableFst&lt; Arc &gt; *fst, const F &amp;f)</div><div class="ttdoc">As MakePrecedingInputSymbolsSame, but takes a functor object that maps labels to classes. </div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00534">fstext-utils-inl.h:534</a></div></div>
<div class="ttc" id="namespacefst_html_ad06fa46b0810d248d45fa67dc07e4293"><div class="ttname"><a href="namespacefst.html#ad06fa46b0810d248d45fa67dc07e4293">fst::FollowingInputSymbolsAreSameClass</a></div><div class="ttdeci">bool FollowingInputSymbolsAreSameClass(bool end_is_epsilon, const Fst&lt; Arc &gt; &amp;fst, const F &amp;f)</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00504">fstext-utils-inl.h:504</a></div></div>
<div class="ttc" id="namespacefst_html_ad5e20d7135997de882b0a0e0ccdc1e99"><div class="ttname"><a href="namespacefst.html#ad5e20d7135997de882b0a0e0ccdc1e99">fst::MakeFollowingInputSymbolsSameClass</a></div><div class="ttdeci">void MakeFollowingInputSymbolsSameClass(bool end_is_epsilon, MutableFst&lt; Arc &gt; *fst, const F &amp;f)</div><div class="ttdoc">As MakeFollowingInputSymbolsSame, but takes a functor object that maps labels to classes. </div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00616">fstext-utils-inl.h:616</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac66ab9ed105350a84d78ad204c61550a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac66ab9ed105350a84d78ad204c61550a">&#9670;&nbsp;</a></span>TestMinimize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestMinimize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="determinize-star-test_8cc_source.html#l00280">280</a> of file <a class="el" href="determinize-star-test_8cc_source.html">determinize-star-test.cc</a>.</p>

<p class="reference">References <a class="el" href="pre-determinize-inl_8h_source.html#l00651">DeleteISymbols()</a>, <a class="el" href="determinize-star-inl_8h_source.html#l00625">DeterminizeStar()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>, <a class="el" href="pre-determinize-inl_8h_source.html#l00317">PreDeterminize()</a>, and <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                                         {</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = <span class="keyword">new</span> VectorFst&lt;Arc&gt;();</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="keywordtype">int</span> n_syms = 2 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5, n_states = 3 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 10, n_arcs = 5 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 30, n_final = 1 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()%3;  <span class="comment">// Up to 2 unique symbols.</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  cout &lt;&lt; <span class="stringliteral">&quot;Testing pre-determinize with &quot;</span>&lt;&lt;n_syms&lt;&lt;<span class="stringliteral">&quot; symbols, &quot;</span>&lt;&lt;n_states&lt;&lt;<span class="stringliteral">&quot; states and &quot;</span>&lt;&lt;n_arcs&lt;&lt;<span class="stringliteral">&quot; arcs and &quot;</span>&lt;&lt;n_final&lt;&lt;<span class="stringliteral">&quot; final states.\n&quot;</span>;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  SymbolTable *sptr =NULL;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  vector&lt;Label&gt; all_syms;  <span class="comment">// including epsilon.</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="comment">// Put symbols in the symbol table from 1..n_syms-1.</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)n_syms;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    all_syms.push_back(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="comment">// Create states.</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  vector&lt;StateId&gt; all_states;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)n_states;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    StateId this_state = fst-&gt;AddState();</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> == 0) fst-&gt;SetStart(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    all_states.push_back(this_state);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  }</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="comment">// Set final states.</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0;<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)n_final;<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    StateId <span class="keywordtype">id</span> = all_states[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_states];</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    Weight weight = (<a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>)(0.33*(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5) );</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    printf(<span class="stringliteral">&quot;calling SetFinal with %d and %f\n&quot;</span>, <span class="keywordtype">id</span>, weight.Value());</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    fst-&gt;SetFinal(<span class="keywordtype">id</span>, weight);</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="comment">// Create arcs.</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)n_arcs;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> a;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    a.nextstate = all_states[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_states];</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    a.ilabel = all_syms[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_syms];</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    a.olabel = all_syms[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_syms];  <span class="comment">// same input+output vocab.</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    a.weight = (<a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>) (0.33*(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 2));</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    StateId start_state = all_states[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_states];</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    fst-&gt;AddArc(start_state, a);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  }</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing before trimming\n&quot;</span>;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  {</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(*fst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  }</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="comment">// Trim resulting FST.</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  Connect(fst);</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing after trimming\n&quot;</span>;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  {</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(*fst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  VectorFst&lt;Arc&gt; *fst_copy_orig = <span class="keyword">new</span> VectorFst&lt;Arc&gt;(*fst);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  vector&lt;Label&gt; extra_syms;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="keywordflow">if</span> (fst-&gt;Start() != kNoStateId) {  <span class="comment">// &quot;Connect&quot; did not make it empty....</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <a class="code" href="namespacefst.html#aaf75c786b2e62e985ace7739c5e58e77">PreDeterminize</a>(fst, 1000, &amp;extra_syms);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  }</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing after predeterminization\n&quot;</span>;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  {</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(*fst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  }</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  {  <span class="comment">// Remove epsilon.  All default args.</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keywordtype">bool</span> connect = <span class="keyword">true</span>;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    Weight weight_threshold = Weight::Zero();</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    int64 nstate = -1;  <span class="comment">// Relates to pruning.</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordtype">double</span> delta = kDelta;  <span class="comment">// I think a small weight value.  Relates to some kind of pruning,</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="comment">// I guess.  But with no epsilon cycles, probably doensn&#39;t matter.</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    RmEpsilon(fst, connect,  weight_threshold, nstate, delta);</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  }</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing after epsilon removal\n&quot;</span>;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(*fst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  }</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  VectorFst&lt;Arc&gt; ofst_orig;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  VectorFst&lt;Arc&gt; ofst_star;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  {</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    printf(<span class="stringliteral">&quot;Determinizing with baseline\n&quot;</span>);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    DeterminizeOptions&lt;Arc&gt; opts;  <span class="comment">// Default options.</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    Determinize(*fst, &amp;ofst_orig, opts);</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  }</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  {</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    std::cout &lt;&lt;<span class="stringliteral">&quot; printing after determinization [baseline]\n&quot;</span>;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(ofst_orig, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  }</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    printf(<span class="stringliteral">&quot;Determinizing with DeterminizeStar to Gallic semiring\n&quot;</span>);</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    VectorFst&lt;GallicArc&lt;Arc&gt; &gt; gallic_fst;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <a class="code" href="group__fst__extensions.html#gac6d4823e83f5353ae5b5ce569a7a29a3">DeterminizeStar</a>(*fst, &amp;gallic_fst);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    {</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      std::cout &lt;&lt;<span class="stringliteral">&quot; printing after determinization by DeterminizeStar [in gallic]\n&quot;</span>;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      FstPrinter&lt;GallicArc&lt; Arc&gt; &gt; fstprinter(gallic_fst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    }</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    printf(<span class="stringliteral">&quot;Pushing weights\n&quot;</span>);</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    Push(&amp;gallic_fst, REWEIGHT_TO_INITIAL, kDelta);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    {</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      std::cout &lt;&lt;<span class="stringliteral">&quot; printing after pushing weights [in gallic]\n&quot;</span>;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      FstPrinter&lt;GallicArc&lt; Arc&gt; &gt; fstprinter(gallic_fst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    }</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    printf(<span class="stringliteral">&quot;Minimizing [in Gallic]\n&quot;</span>);</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    Minimize(&amp;gallic_fst);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    {</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      std::cout &lt;&lt;<span class="stringliteral">&quot; printing after  minimization [in gallic]\n&quot;</span>;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      FstPrinter&lt;GallicArc&lt; Arc&gt; &gt; fstprinter(gallic_fst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    }</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    printf(<span class="stringliteral">&quot;Converting gallic back to regular [my approach]\n&quot;</span>);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    TrivialFactorWeightFst&lt; GallicArc&lt;Arc, GALLIC_LEFT&gt;, GallicFactor&lt;<span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a>,</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a>, GALLIC_LEFT&gt; &gt; fwfst(gallic_fst);</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    {</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      std::cout &lt;&lt;<span class="stringliteral">&quot; printing factor-weight FST\n&quot;</span>;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      FstPrinter&lt;GallicArc&lt; Arc&gt; &gt; fstprinter(fwfst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    }</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    Map(fwfst, &amp;ofst_star, FromGallicMapper&lt;Arc, GALLIC_LEFT&gt;());</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    {</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      std::cout &lt;&lt;<span class="stringliteral">&quot; printing after converting back to regular FST\n&quot;</span>;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      FstPrinter&lt;Arc&gt; fstprinter(ofst_star, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    }</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  }</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  assert(RandEquivalent(ofst_orig, ofst_star, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  int64 num_removed = <a class="code" href="namespacefst.html#ad573c7b2172714c534c18d58ec0dd93a">DeleteISymbols</a>(&amp;ofst_star, extra_syms);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing after removing &quot;</span>&lt;&lt;num_removed&lt;&lt;<span class="stringliteral">&quot; instances of extra symbols\n&quot;</span>;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  {</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(ofst_star, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  }</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; Checking equivalent to original FST.\n&quot;</span>;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="comment">// giving Rand() as a seed stops the random number generator from always being reset to</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="comment">// the same point each time, while maintaining determinism of the test.</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  assert(RandEquivalent(ofst_star, *fst_copy_orig, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="keyword">delete</span> fst;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="keyword">delete</span> fst_copy_orig;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="classsize__t_html"><div class="ttname"><a href="classsize__t.html">size_t</a></div></div>
<div class="ttc" id="namespacefst_html_aaf75c786b2e62e985ace7739c5e58e77"><div class="ttname"><a href="namespacefst.html#aaf75c786b2e62e985ace7739c5e58e77">fst::PreDeterminize</a></div><div class="ttdeci">void PreDeterminize(MutableFst&lt; Arc &gt; *fst, typename Arc::Label first_new_sym, vector&lt; Int &gt; *symsOut)</div><div class="ttdef"><b>Definition:</b> <a href="pre-determinize-inl_8h_source.html#l00317">pre-determinize-inl.h:317</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_ad573c7b2172714c534c18d58ec0dd93a"><div class="ttname"><a href="namespacefst.html#ad573c7b2172714c534c18d58ec0dd93a">fst::DeleteISymbols</a></div><div class="ttdeci">int64 DeleteISymbols(MutableFst&lt; Arc &gt; *fst, vector&lt; typename Arc::Label &gt; isyms)</div><div class="ttdef"><b>Definition:</b> <a href="pre-determinize-inl_8h_source.html#l00651">pre-determinize-inl.h:651</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__fst__extensions_html_gac6d4823e83f5353ae5b5ce569a7a29a3"><div class="ttname"><a href="group__fst__extensions.html#gac6d4823e83f5353ae5b5ce569a7a29a3">fst::DeterminizeStar</a></div><div class="ttdeci">bool DeterminizeStar(F &amp;ifst, MutableFst&lt; typename F::Arc &gt; *ofst, float delta, bool *debug_ptr, int max_states, bool allow_partial)</div><div class="ttdoc">This function implements the normal version of DeterminizeStar, in which the output strings are repre...</div><div class="ttdef"><b>Definition:</b> <a href="determinize-star-inl_8h_source.html#l00625">determinize-star-inl.h:625</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6e0f8a739801e3b1c8811f1f29730e8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e0f8a739801e3b1c8811f1f29730e8e">&#9670;&nbsp;</a></span>TestPreDeterminize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestPreDeterminize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="pre-determinize-test_8cc_source.html#l00030">30</a> of file <a class="el" href="pre-determinize-test_8cc_source.html">pre-determinize-test.cc</a>.</p>

<p class="reference">References <a class="el" href="pre-determinize-inl_8h_source.html#l00651">DeleteISymbols()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00054">HighestNumberedInputSymbol()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>, <a class="el" href="pre-determinize-inl_8h_source.html#l00317">PreDeterminize()</a>, and <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;                                               {</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = <span class="keyword">new</span> VectorFst&lt;Arc&gt;();</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <span class="keywordtype">int</span> n_syms = 2 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5, n_states = 3 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 10, n_arcs = 5 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 30, n_final = 1 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()%3;  <span class="comment">// Up to 2 unique symbols.</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  cout &lt;&lt; <span class="stringliteral">&quot;Testing pre-determinize with &quot;</span>&lt;&lt;n_syms&lt;&lt;<span class="stringliteral">&quot; symbols, &quot;</span>&lt;&lt;n_states&lt;&lt;<span class="stringliteral">&quot; states and &quot;</span>&lt;&lt;n_arcs&lt;&lt;<span class="stringliteral">&quot; arcs and &quot;</span>&lt;&lt;n_final&lt;&lt;<span class="stringliteral">&quot; final states.\n&quot;</span>;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  SymbolTable *sptr = NULL;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  vector&lt;Label&gt; all_syms;  <span class="comment">// including epsilon.</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="comment">// Put symbols in the symbol table from 1..n_syms-1.</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)n_syms;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    all_syms.push_back(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="comment">// Create states.</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  vector&lt;StateId&gt; all_states;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)n_states;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    StateId this_state = fst-&gt;AddState();</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> == 0) fst-&gt;SetStart(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    all_states.push_back(this_state);</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  }</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="comment">// Set final states.</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0;<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)n_final;<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    StateId <span class="keywordtype">id</span> = all_states[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_states];</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    Weight weight = (<a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>)(0.33*(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5) );</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    printf(<span class="stringliteral">&quot;calling SetFinal with %d and %f\n&quot;</span>, <span class="keywordtype">id</span>, weight.Value());</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    fst-&gt;SetFinal(<span class="keywordtype">id</span>, weight);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  }</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="comment">// Create arcs.</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)n_arcs;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> a;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    a.nextstate = all_states[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_states];</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    a.ilabel = all_syms[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_syms];</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    a.olabel = all_syms[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_syms];  <span class="comment">// same input+output vocab.</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    a.weight = (<a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>) (0.33*(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 2));</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    StateId start_state = all_states[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_states];</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    fst-&gt;AddArc(start_state, a);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  }</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing before trimming\n&quot;</span>;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  {</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(*fst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  }</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="comment">// Trim resulting FST.</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  Connect(fst);</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing after trimming\n&quot;</span>;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  {</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(*fst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  }</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  VectorFst&lt;Arc&gt; *fst_copy_orig = <span class="keyword">new</span> VectorFst&lt;Arc&gt;(*fst);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  vector&lt;Label&gt; extra_syms;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keywordflow">if</span> (fst-&gt;Start() != kNoStateId) {  <span class="comment">// &quot;Connect&quot; did not make it empty....</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> highest_sym = <a class="code" href="namespacefst.html#ac359ee42978cf57f9c5dfdc50df8fe16">HighestNumberedInputSymbol</a>(*fst);</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="namespacefst.html#aaf75c786b2e62e985ace7739c5e58e77">PreDeterminize</a>(fst, highest_sym+1, &amp;extra_syms);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  }</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing after predeterminization\n&quot;</span>;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  {</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(*fst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  }</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  {  <span class="comment">// Remove epsilon.  All default args.</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordtype">bool</span> connect = <span class="keyword">true</span>;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    Weight weight_threshold = Weight::Zero();</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    int64 nstate = -1;  <span class="comment">// Relates to pruning.</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordtype">double</span> delta = kDelta;  <span class="comment">// I think a small weight value.  Relates to some kind of pruning,</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">// I guess.  But with no epsilon cycles, probably doensn&#39;t matter.</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    RmEpsilon(fst, connect,  weight_threshold, nstate, delta);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing after epsilon removal\n&quot;</span>;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  {</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(*fst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  }</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  VectorFst&lt;Arc&gt; ofst;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  DeterminizeOptions&lt;Arc&gt; opts;  <span class="comment">// Default options.</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  Determinize(*fst, &amp;ofst, opts);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing after determinization\n&quot;</span>;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  {</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(ofst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  }</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  int64 num_removed = <a class="code" href="namespacefst.html#ad573c7b2172714c534c18d58ec0dd93a">DeleteISymbols</a>(&amp;ofst, extra_syms);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing after removing &quot;</span>&lt;&lt;num_removed&lt;&lt;<span class="stringliteral">&quot; instances of extra symbols\n&quot;</span>;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(ofst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  }</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; Checking equivalent to original FST.\n&quot;</span>;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="comment">// giving Rand() as a seed stops the random number generator from always being reset to</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="comment">// the same point each time, while maintaining determinism of the test.</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  assert(RandEquivalent(ofst, *fst_copy_orig, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keyword">delete</span> fst;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keyword">delete</span> fst_copy_orig;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="classsize__t_html"><div class="ttname"><a href="classsize__t.html">size_t</a></div></div>
<div class="ttc" id="namespacefst_html_aaf75c786b2e62e985ace7739c5e58e77"><div class="ttname"><a href="namespacefst.html#aaf75c786b2e62e985ace7739c5e58e77">fst::PreDeterminize</a></div><div class="ttdeci">void PreDeterminize(MutableFst&lt; Arc &gt; *fst, typename Arc::Label first_new_sym, vector&lt; Int &gt; *symsOut)</div><div class="ttdef"><b>Definition:</b> <a href="pre-determinize-inl_8h_source.html#l00317">pre-determinize-inl.h:317</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_ad573c7b2172714c534c18d58ec0dd93a"><div class="ttname"><a href="namespacefst.html#ad573c7b2172714c534c18d58ec0dd93a">fst::DeleteISymbols</a></div><div class="ttdeci">int64 DeleteISymbols(MutableFst&lt; Arc &gt; *fst, vector&lt; typename Arc::Label &gt; isyms)</div><div class="ttdef"><b>Definition:</b> <a href="pre-determinize-inl_8h_source.html#l00651">pre-determinize-inl.h:651</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacefst_html_ac359ee42978cf57f9c5dfdc50df8fe16"><div class="ttname"><a href="namespacefst.html#ac359ee42978cf57f9c5dfdc50df8fe16">fst::HighestNumberedInputSymbol</a></div><div class="ttdeci">Arc::Label HighestNumberedInputSymbol(const Fst&lt; Arc &gt; &amp;fst)</div><div class="ttdoc">Returns the highest numbered input symbol id of the FST (or zero for an empty FST. </div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00054">fstext-utils-inl.h:54</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3ccddbbd4041ecf41dda012b2c5fbd52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ccddbbd4041ecf41dda012b2c5fbd52">&#9670;&nbsp;</a></span>TestPruneSpecial()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void fst::TestPruneSpecial </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="prune-special-test_8cc_source.html#l00027">27</a> of file <a class="el" href="prune-special-test_8cc_source.html">prune-special-test.cc</a>.</p>

<p class="reference">References <a class="el" href="rand-fst_8h_source.html#l00040">RandFstOptions::acyclic</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, and <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>.</p>

<p class="reference">Referenced by <a class="el" href="prune-special-test_8cc_source.html#l00073">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;                               {</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <a class="code" href="structfst_1_1RandFstOptions.html">RandFstOptions</a> opts;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  opts.<a class="code" href="structfst_1_1RandFstOptions.html#aa5a7456f7e24b2444f56c9e9f2802f62">acyclic</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  VectorFst&lt;Arc&gt; *ifst = RandFst&lt;StdArc&gt;(opts);</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keywordtype">float</span> beam = 0.55;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  {</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(*ifst, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    std::cout &lt;&lt; endl;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  }</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="comment">// Do the special pruning.</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  VectorFst&lt;Arc&gt; ofst1;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  PruneSpecial&lt;StdArc&gt;(*ifst, &amp;ofst1, beam);</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  {</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(ofst1, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    std::cout &lt;&lt; endl;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  }</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="comment">// Do the normal pruning.</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  VectorFst&lt;Arc&gt; ofst2;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  Prune(*ifst, &amp;ofst2, beam);</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  {</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(ofst2, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    std::cout &lt;&lt; endl;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  }</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(RandEquivalent(ofst1, ofst2,</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                              5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>,</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                              100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keyword">delete</span> ifst;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="structfst_1_1RandFstOptions_html"><div class="ttname"><a href="structfst_1_1RandFstOptions.html">fst::RandFstOptions</a></div><div class="ttdef"><b>Definition:</b> <a href="rand-fst_8h_source.html#l00034">rand-fst.h:34</a></div></div>
<div class="ttc" id="namespacefst_html_a70478eb2428a9406e4692d19a7a3a97f"><div class="ttname"><a href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">fst::StdArc</a></div><div class="ttdeci">fst::StdArc StdArc</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00053">deterministic-fst-test.cc:53</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="structfst_1_1RandFstOptions_html_aa5a7456f7e24b2444f56c9e9f2802f62"><div class="ttname"><a href="structfst_1_1RandFstOptions.html#aa5a7456f7e24b2444f56c9e9f2802f62">fst::RandFstOptions::acyclic</a></div><div class="ttdeci">bool acyclic</div><div class="ttdef"><b>Definition:</b> <a href="rand-fst_8h_source.html#l00040">rand-fst.h:40</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a52acad2b8b4d9f27119fa9aa24f2be2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52acad2b8b4d9f27119fa9aa24f2be2c">&#9670;&nbsp;</a></span>TestPush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestPush </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="determinize-star-test_8cc_source.html#l00202">202</a> of file <a class="el" href="determinize-star-test_8cc_source.html">determinize-star-test.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>, <a class="el" href="pre-determinize-inl_8h_source.html#l00317">PreDeterminize()</a>, and <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                                     {</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = <span class="keyword">new</span> VectorFst&lt;Arc&gt;();</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="keywordtype">int</span> n_syms = 2 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5, n_states = 3 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 10, n_arcs = 5 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 30, n_final = 1 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()%3;  <span class="comment">// Up to 2 unique symbols.</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  cout &lt;&lt; <span class="stringliteral">&quot;Testing pre-determinize with &quot;</span>&lt;&lt;n_syms&lt;&lt;<span class="stringliteral">&quot; symbols, &quot;</span>&lt;&lt;n_states&lt;&lt;<span class="stringliteral">&quot; states and &quot;</span>&lt;&lt;n_arcs&lt;&lt;<span class="stringliteral">&quot; arcs and &quot;</span>&lt;&lt;n_final&lt;&lt;<span class="stringliteral">&quot; final states.\n&quot;</span>;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  SymbolTable *sptr = NULL;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  vector&lt;Label&gt; all_syms;  <span class="comment">// including epsilon.</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="comment">// Put symbols in the symbol table from 1..n_syms-1.</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)n_syms;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    all_syms.push_back(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="comment">// Create states.</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  vector&lt;StateId&gt; all_states;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)n_states;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    StateId this_state = fst-&gt;AddState();</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> == 0) fst-&gt;SetStart(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    all_states.push_back(this_state);</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  }</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="comment">// Set final states.</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0;<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)n_final;<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    StateId <span class="keywordtype">id</span> = all_states[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_states];</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    Weight weight = (<a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>)(0.33*(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5) );</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    printf(<span class="stringliteral">&quot;calling SetFinal with %d and %f\n&quot;</span>, <span class="keywordtype">id</span>, weight.Value());</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    fst-&gt;SetFinal(<span class="keywordtype">id</span>, weight);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  }</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="comment">// Create arcs.</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)n_arcs;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> a;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    a.nextstate = all_states[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_states];</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    a.ilabel = all_syms[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_syms];</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    a.olabel = all_syms[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_syms];  <span class="comment">// same input+output vocab.</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    a.weight = (<a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>) (0.33*(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 2));</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    StateId start_state = all_states[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_states];</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    fst-&gt;AddArc(start_state, a);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  }</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing before trimming\n&quot;</span>;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  {</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(*fst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="comment">// Trim resulting FST.</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  Connect(fst);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing after trimming\n&quot;</span>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  {</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(*fst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  }</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  VectorFst&lt;Arc&gt; *fst_copy_orig = <span class="keyword">new</span> VectorFst&lt;Arc&gt;(*fst);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  vector&lt;Label&gt; extra_syms;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="keywordflow">if</span> (fst-&gt;Start() != kNoStateId) {  <span class="comment">// &quot;Connect&quot; did not make it empty....</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <a class="code" href="namespacefst.html#aaf75c786b2e62e985ace7739c5e58e77">PreDeterminize</a>(fst, 1000, &amp;extra_syms);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  }</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  VectorFst&lt;Arc&gt; fst_pushed;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  std::cout &lt;&lt; <span class="stringliteral">&quot;Pushing FST\n&quot;</span>;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  Push&lt;Arc, REWEIGHT_TO_INITIAL&gt;(*fst, &amp;fst_pushed, kPushWeights|kPushLabels, kDelta);</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing after pushing\n&quot;</span>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  {</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(fst_pushed, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  }</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  assert(RandEquivalent(*fst, fst_pushed, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="keyword">delete</span> fst;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="keyword">delete</span> fst_copy_orig;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="classsize__t_html"><div class="ttname"><a href="classsize__t.html">size_t</a></div></div>
<div class="ttc" id="namespacefst_html_aaf75c786b2e62e985ace7739c5e58e77"><div class="ttname"><a href="namespacefst.html#aaf75c786b2e62e985ace7739c5e58e77">fst::PreDeterminize</a></div><div class="ttdeci">void PreDeterminize(MutableFst&lt; Arc &gt; *fst, typename Arc::Label first_new_sym, vector&lt; Int &gt; *symsOut)</div><div class="ttdef"><b>Definition:</b> <a href="pre-determinize-inl_8h_source.html#l00317">pre-determinize-inl.h:317</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad30f8a00c803d4a579a28faeca1a89d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad30f8a00c803d4a579a28faeca1a89d5">&#9670;&nbsp;</a></span>TestPushInLog()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestPushInLog </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils-test_8cc_source.html#l00179">179</a> of file <a class="el" href="fstext-utils-test_8cc_source.html">fstext-utils-test.cc</a>.</p>

<p class="reference">References <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                     {  <span class="comment">// also tests SafeDeterminizeMinimizeWrapper().</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="keyword">typedef</span>  <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="keyword">typedef</span>  <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keyword">typedef</span>  <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = RandFst&lt;Arc&gt;();</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  VectorFst&lt;Arc&gt; fst2(*fst);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  PushInLog&lt;REWEIGHT_TO_INITIAL&gt;(&amp;fst2, kPushLabels|kPushWeights, 0.01);  <span class="comment">// speed it up using large delta.</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  assert(RandEquivalent(*<a class="code" href="namespacefst.html">fst</a>, fst2, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="keyword">delete</span> <a class="code" href="namespacefst.html">fst</a>;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a70478eb2428a9406e4692d19a7a3a97f"><div class="ttname"><a href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">fst::StdArc</a></div><div class="ttdeci">fst::StdArc StdArc</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00053">deterministic-fst-test.cc:53</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2349d406044ec6e0c62b1be562240739"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2349d406044ec6e0c62b1be562240739">&#9670;&nbsp;</a></span>TestPushSpecial()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void fst::TestPushSpecial </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="push-special-test_8cc_source.html#l00031">31</a> of file <a class="el" href="push-special-test_8cc_source.html">push-special-test.cc</a>.</p>

<p class="reference">References <a class="el" href="fstext-utils-inl_8h_source.html#l01215">IsStochasticFstInLog()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00132">KALDI_LOG</a>, <a class="el" href="push-special_8cc_source.html#l00226">PushSpecial()</a>, and <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>.</p>

<p class="reference">Referenced by <a class="el" href="push-special-test_8cc_source.html#l00075">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;                              {</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = RandFst&lt;StdArc&gt;();</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  {</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(*fst, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  }</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  VectorFst&lt;Arc&gt; fst_copy(*fst);</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keywordtype">float</span> delta = kDelta;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <a class="code" href="namespacefst.html#aebe0ba379ba5033e6e26084d5b7ae59f">PushSpecial</a>(&amp;fst_copy, delta);</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  Weight min, max;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="keywordtype">float</span> delta_dontcare = 0.1;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <a class="code" href="namespacefst.html#a313777cb91faed78bc50fc629a349f66">IsStochasticFstInLog</a>(fst_copy, delta_dontcare, &amp;min, &amp;max);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="comment">// the per-state normalizers are allowed to deviate from the average by delta</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="comment">// up and down, so the difference from the min to max weight should be 2*delta</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="comment">// or less.  We give it a bit of wiggle room (-&gt;2.5) due to numerical roundoff.</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  {</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(fst_copy, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  }</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <a class="code" href="group__error__group.html#gaf8fb55454306b60c9c1e07a6ef9d341a">KALDI_LOG</a> &lt;&lt; <span class="stringliteral">&quot;Min value is &quot;</span> &lt;&lt; min.Value() &lt;&lt; <span class="stringliteral">&quot;, max value is &quot;</span> &lt;&lt; max.Value();</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="comment">// below, should be &lt;= delta but different pieces of code compute this in this</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="comment">// part vs. push-special, so the roundoff may be different.</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(std::abs(min.Value() - max.Value()) &lt;=  1.2 * delta);</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(RandEquivalent(*fst, fst_copy,</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                              5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="keyword">delete</span> fst;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a70478eb2428a9406e4692d19a7a3a97f"><div class="ttname"><a href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">fst::StdArc</a></div><div class="ttdeci">fst::StdArc StdArc</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00053">deterministic-fst-test.cc:53</a></div></div>
<div class="ttc" id="namespacefst_html_a313777cb91faed78bc50fc629a349f66"><div class="ttname"><a href="namespacefst.html#a313777cb91faed78bc50fc629a349f66">fst::IsStochasticFstInLog</a></div><div class="ttdeci">bool IsStochasticFstInLog(const Fst&lt; StdArc &gt; &amp;fst, float delta, StdArc::Weight *min_sum, StdArc::Weight *max_sum)</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l01215">fstext-utils-inl.h:1215</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="namespacefst_html_aebe0ba379ba5033e6e26084d5b7ae59f"><div class="ttname"><a href="namespacefst.html#aebe0ba379ba5033e6e26084d5b7ae59f">fst::PushSpecial</a></div><div class="ttdeci">void PushSpecial(VectorFst&lt; StdArc &gt; *fst, float delta)</div><div class="ttdef"><b>Definition:</b> <a href="push-special_8cc_source.html#l00226">push-special.cc:226</a></div></div>
<div class="ttc" id="group__error__group_html_gaf8fb55454306b60c9c1e07a6ef9d341a"><div class="ttname"><a href="group__error__group.html#gaf8fb55454306b60c9c1e07a6ef9d341a">KALDI_LOG</a></div><div class="ttdeci">#define KALDI_LOG</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00132">kaldi-error.h:132</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a449742baa0a94afb18a4bbf881c99c72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a449742baa0a94afb18a4bbf881c99c72">&#9670;&nbsp;</a></span>TestRemoveEpsLocal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void fst::TestRemoveEpsLocal </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="remove-eps-local-test_8cc_source.html#l00033">33</a> of file <a class="el" href="remove-eps-local-test_8cc_source.html">remove-eps-local-test.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>, <a class="el" href="kaldi-math_8h_source.html#l00151">kaldi::RandUniform()</a>, and <a class="el" href="remove-eps-local-inl_8h_source.html#l00309">RemoveEpsLocal()</a>.</p>
<div class="fragment"><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                                                     {</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  VectorFst&lt;Arc&gt; <a class="code" href="namespacefst.html">fst</a>;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="keywordtype">int</span> n_syms = 2 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5, n_arcs = 5 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 30, n_final = 1 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()%10;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  SymbolTable symtab(<span class="stringliteral">&quot;my-symbol-table&quot;</span>), *sptr = &amp;symtab;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  vector&lt;Label&gt; all_syms;  <span class="comment">// including epsilon.</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="comment">// Put symbols in the symbol table from 1..n_syms-1.</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)n_syms;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    std::stringstream ss;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> == 0) ss &lt;&lt; <span class="stringliteral">&quot;&lt;eps&gt;&quot;</span>;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordflow">else</span> ss&lt;&lt;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    Label cur_lab = sptr-&gt;AddSymbol(ss.str());</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    assert(cur_lab == (Label)i);</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    all_syms.push_back(cur_lab);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  }</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  assert(all_syms[0] == 0);</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  fst.AddState();</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="keywordtype">int</span> cur_num_states = 1;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n_arcs; i++) {</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    StateId src_state = <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % cur_num_states;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    StateId dst_state;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacekaldi.html#a0c4bcfc10bea5ed0d3e3cf6d74922121">kaldi::RandUniform</a>() &lt; 0.1) dst_state = <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % cur_num_states;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;      dst_state = cur_num_states++; fst.AddState();</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    }</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> arc;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacekaldi.html#a0c4bcfc10bea5ed0d3e3cf6d74922121">kaldi::RandUniform</a>() &lt; 0.3) arc.ilabel = all_syms[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()%all_syms.size()];</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">else</span> arc.ilabel = 0;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacekaldi.html#a0c4bcfc10bea5ed0d3e3cf6d74922121">kaldi::RandUniform</a>() &lt; 0.3) arc.olabel = all_syms[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()%all_syms.size()];</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordflow">else</span> arc.olabel = 0;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    arc.weight = (<a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>) (0 + 0.1*(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5));</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    arc.nextstate = dst_state;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    fst.AddArc(src_state, arc);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  }</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n_final; i++) {</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    fst.SetFinal(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % cur_num_states,  (Weight) (0 + 0.1*(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5)));</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  }</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacekaldi.html#a0c4bcfc10bea5ed0d3e3cf6d74922121">kaldi::RandUniform</a>() &lt; 0.8)   fst.SetStart(0);  <span class="comment">// usually leads to nicer examples.</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keywordflow">else</span> fst.SetStart(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % cur_num_states);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  Connect(&amp;fst);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordflow">if</span> (fst.Start() == kNoStateId) <span class="keywordflow">return</span>;  <span class="comment">// &quot;Connect&quot; made it empty.</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing after trimming\n&quot;</span>;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  {</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(fst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  }</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  VectorFst&lt;Arc&gt; fst_copy1(fst);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <a class="code" href="namespacefst.html#aa21bb5fdd25868b9fd813a15f37aef8e">RemoveEpsLocal</a>(&amp;fst_copy1);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  {</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;copy1 = \n&quot;</span>;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(fst_copy1, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  }</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keywordtype">int</span> num_states_0 = fst.NumStates();</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordtype">int</span> num_states_1 = fst_copy1.NumStates();</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  std::cout &lt;&lt; <span class="stringliteral">&quot;Number of states 0 = &quot;</span>&lt;&lt;num_states_0&lt;&lt;<span class="stringliteral">&quot;, 1 = &quot;</span>&lt;&lt;num_states_1&lt;&lt;<span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  assert(RandEquivalent(fst, fst_copy1, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacekaldi_html_a0c4bcfc10bea5ed0d3e3cf6d74922121"><div class="ttname"><a href="namespacekaldi.html#a0c4bcfc10bea5ed0d3e3cf6d74922121">kaldi::RandUniform</a></div><div class="ttdeci">float RandUniform(struct RandomState *state=NULL)</div><div class="ttdoc">Returns a random number strictly between 0 and 1. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00151">kaldi-math.h:151</a></div></div>
<div class="ttc" id="namespacefst_html_aa21bb5fdd25868b9fd813a15f37aef8e"><div class="ttname"><a href="namespacefst.html#aa21bb5fdd25868b9fd813a15f37aef8e">fst::RemoveEpsLocal</a></div><div class="ttdeci">void RemoveEpsLocal(MutableFst&lt; Arc &gt; *fst)</div><div class="ttdoc">RemoveEpsLocal remove some (but not necessarily all) epsilons in an FST, using an algorithm that is g...</div><div class="ttdef"><b>Definition:</b> <a href="remove-eps-local-inl_8h_source.html#l00309">remove-eps-local-inl.h:309</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="classsize__t_html"><div class="ttname"><a href="classsize__t.html">size_t</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a583edbd3986c1e0ad24f38abf6532a84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a583edbd3986c1e0ad24f38abf6532a84">&#9670;&nbsp;</a></span>TestRemoveEpsLocalSpecial()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void fst::TestRemoveEpsLocalSpecial </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="remove-eps-local-test_8cc_source.html#l00113">113</a> of file <a class="el" href="remove-eps-local-test_8cc_source.html">remove-eps-local-test.cc</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00390">ApproxEqual()</a>, <a class="el" href="lattice-weight_8h_source.html#l00371">Divide()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l01173">IsStochasticFst()</a>, <a class="el" href="lattice-weight_8h_source.html#l00312">Plus()</a>, <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>, and <a class="el" href="remove-eps-local-inl_8h_source.html#l00314">RemoveEpsLocalSpecial()</a>.</p>

<p class="reference">Referenced by <a class="el" href="remove-eps-local-test_8cc_source.html#l00172">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                                        {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="comment">// test that RemoveEpsLocalSpecial preserves equivalence in tropical while</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="comment">// maintaining stochasticity in log.</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keyword">typedef</span> VectorFst&lt;LogArc&gt; Fst;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">LogArc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">LogArc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="keyword">typedef</span> LogArc <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  VectorFst&lt;LogArc&gt; *logfst = RandFst&lt;LogArc&gt;();</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  { <span class="comment">// Make the FST stochastic.</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">for</span> (StateId s = 0; s &lt; logfst-&gt;NumStates(); s++) {</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      Weight w = logfst-&gt;Final(s);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <span class="keywordflow">for</span> (ArcIterator&lt;Fst&gt; aiter(*logfst, s); !aiter.Done(); aiter.Next()) {</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        w = <a class="code" href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">Plus</a>(w, aiter.Value().weight);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      }</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      <span class="keywordflow">if</span> (w != Weight::Zero()) {</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        logfst-&gt;SetFinal(s, <a class="code" href="namespacefst.html#a694bc33e16bfb9d7a1639f8488508d20">Divide</a>(logfst-&gt;Final(s), w, DIVIDE_ANY));</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="keywordflow">for</span> (MutableArcIterator&lt;Fst&gt; aiter(logfst, s); !aiter.Done(); aiter.Next()) {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;          Arc a = aiter.Value();</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;          a.weight = <a class="code" href="namespacefst.html#a694bc33e16bfb9d7a1639f8488508d20">Divide</a>(a.weight, w, DIVIDE_ANY);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;          aiter.SetValue(a);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        }</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      }</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    }</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="preprocessor">#ifndef _MSC_VER</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  assert(<a class="code" href="namespacefst.html#a05555697346e1b408792565dde384b77">IsStochasticFst</a>(*logfst, kDelta*10));</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;logfst = \n&quot;</span>;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    FstPrinter&lt;LogArc&gt; fstprinter(*logfst, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  }</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  VectorFst&lt;StdArc&gt; <a class="code" href="namespacefst.html">fst</a>;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  Cast(*logfst, &amp;fst);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  VectorFst&lt;StdArc&gt; fst_copy(fst);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <a class="code" href="namespacefst.html#aae64b4835d6f9be3bcf646e644542ef8">RemoveEpsLocalSpecial</a>(&amp;fst);  <span class="comment">// removes eps in std-arc but keep stochastic in log-arc</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="comment">// make sure equivalent.</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  assert(RandEquivalent(fst, fst_copy, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  VectorFst&lt;LogArc&gt; logfst2;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  Cast(fst, &amp;logfst2);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  {</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;logfst2 = \n&quot;</span>;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    FstPrinter&lt;LogArc&gt; fstprinter(logfst2, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  }</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">ApproxEqual</a>(ShortestDistance(*logfst), ShortestDistance(logfst2))) {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="comment">// make sure we preserved stochasticity in cases where doing so was</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="comment">// possible... if the log-semiring total weight changed, then it is</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="comment">// not possible so don&#39;t assert this.</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    assert(<a class="code" href="namespacefst.html#a05555697346e1b408792565dde384b77">IsStochasticFst</a>(logfst2, kDelta*10));</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  }</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keyword">delete</span> logfst;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html_a694bc33e16bfb9d7a1639f8488508d20"><div class="ttname"><a href="namespacefst.html#a694bc33e16bfb9d7a1639f8488508d20">fst::Divide</a></div><div class="ttdeci">LatticeWeightTpl&lt; FloatType &gt; Divide(const LatticeWeightTpl&lt; FloatType &gt; &amp;w1, const LatticeWeightTpl&lt; FloatType &gt; &amp;w2, DivideType typ=DIVIDE_ANY)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00371">lattice-weight.h:371</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_afbb3ae5b68808cb433cc710a7052c4c4"><div class="ttname"><a href="namespacefst.html#afbb3ae5b68808cb433cc710a7052c4c4">fst::Plus</a></div><div class="ttdeci">LatticeWeightTpl&lt; FloatType &gt; Plus(const LatticeWeightTpl&lt; FloatType &gt; &amp;w1, const LatticeWeightTpl&lt; FloatType &gt; &amp;w2)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00312">lattice-weight.h:312</a></div></div>
<div class="ttc" id="namespacefst_html_aae64b4835d6f9be3bcf646e644542ef8"><div class="ttname"><a href="namespacefst.html#aae64b4835d6f9be3bcf646e644542ef8">fst::RemoveEpsLocalSpecial</a></div><div class="ttdeci">void RemoveEpsLocalSpecial(MutableFst&lt; StdArc &gt; *fst)</div><div class="ttdoc">As RemoveEpsLocal but takes care to preserve stochasticity when cast to LogArc. </div><div class="ttdef"><b>Definition:</b> <a href="remove-eps-local-inl_8h_source.html#l00314">remove-eps-local-inl.h:314</a></div></div>
<div class="ttc" id="namespacefst_html_a05555697346e1b408792565dde384b77"><div class="ttname"><a href="namespacefst.html#a05555697346e1b408792565dde384b77">fst::IsStochasticFst</a></div><div class="ttdeci">bool IsStochasticFst(const Fst&lt; LogArc &gt; &amp;fst, float delta, LogArc::Weight *min_sum, LogArc::Weight *max_sum)</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l01173">fstext-utils-inl.h:1173</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacekaldi_html_a99dcbb9fdaa6c980ba67941d45adf017"><div class="ttname"><a href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">kaldi::ApproxEqual</a></div><div class="ttdeci">static bool ApproxEqual(float a, float b, float relative_tolerance=0.001)</div><div class="ttdoc">return abs(a - b) &lt;= relative_tolerance * (abs(a)+abs(b)). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00264">kaldi-math.h:264</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a13814f452b825aa9f51ae8050af77971"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13814f452b825aa9f51ae8050af77971">&#9670;&nbsp;</a></span>TestRemoveUselessArcs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestRemoveUselessArcs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils-test_8cc_source.html#l00367">367</a> of file <a class="el" href="fstext-utils-test_8cc_source.html">fstext-utils-test.cc</a>.</p>

<p class="reference">References <a class="el" href="rand-fst_8h_source.html#l00039">RandFstOptions::allow_empty</a>, <a class="el" href="lattice-weight_8h_source.html#l00390">ApproxEqual()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="fstext-utils-inl_8h_source.html#l00950">RemoveUselessArcs()</a>.</p>
<div class="fragment"><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                             {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    RandFstOptions opts;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    opts.allow_empty = <span class="keyword">false</span>;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = RandFst&lt;Arc&gt;();</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="comment">// Print(*fst, &quot;[testremoveuselessarcs]:fst:&quot;);</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    UniformArcSelector&lt;Arc&gt; selector;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    RandGenOptions&lt;UniformArcSelector&lt;Arc&gt; &gt; randgen_opts(selector);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    VectorFst&lt;Arc&gt; fst_path;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    RandGen(*fst, &amp;fst_path, randgen_opts);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    Project(&amp;fst_path, PROJECT_INPUT);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="comment">// Print(fst_path, &quot;[testremoveuselessarcs]:fstpath:&quot;);</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    VectorFst&lt;Arc&gt; fst_nouseless(*fst);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <a class="code" href="namespacefst.html#adfb3de4d04cbaf233f99b259362eeba2">RemoveUselessArcs</a>(&amp;fst_nouseless);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="comment">// Print(fst_nouseless, &quot;[testremoveuselessarcs]:fst_nouseless:&quot;);</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    VectorFst&lt;Arc&gt; orig_composed,</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        nouseless_composed;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    Compose(fst_path, *fst, &amp;orig_composed);</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    Compose(fst_path, fst_nouseless, &amp;nouseless_composed);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="comment">// Print(orig_composed, &quot;[testremoveuselessarcs]:orig_composed&quot;);</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="comment">// Print(nouseless_composed, &quot;[testremoveuselessarcs]:nouseless_composed&quot;);</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    VectorFst&lt;Arc&gt; orig_bestpath,</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        nouseless_bestpath;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    ShortestPath(orig_composed, &amp;orig_bestpath);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    ShortestPath(nouseless_composed, &amp;nouseless_bestpath);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="comment">// Print(orig_bestpath, &quot;[testremoveuselessarcs]:orig_bestpath&quot;);</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="comment">// Print(nouseless_bestpath, &quot;[testremoveuselessarcs]:nouseless_bestpath&quot;);</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> worig, wnouseless;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    GetLinearSymbolSequence&lt;Arc, int&gt;(orig_bestpath, NULL, NULL, &amp;worig);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    GetLinearSymbolSequence&lt;Arc, int&gt;(nouseless_bestpath, NULL, NULL, &amp;wnouseless);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    assert(<a class="code" href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">ApproxEqual</a>(worig, wnouseless, kDelta));</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="comment">// assert(RandEquivalent(orig_bestpath, nouseless_bestpath, 5/*paths*/, 0.01/*delta*/, Rand()/*seed*/, 100/*path length-- max?*/));</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keyword">delete</span> fst;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  }</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_adfb3de4d04cbaf233f99b259362eeba2"><div class="ttname"><a href="namespacefst.html#adfb3de4d04cbaf233f99b259362eeba2">fst::RemoveUselessArcs</a></div><div class="ttdeci">void RemoveUselessArcs(MutableFst&lt; Arc &gt; *fst)</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00950">fstext-utils-inl.h:950</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacekaldi_html_a99dcbb9fdaa6c980ba67941d45adf017"><div class="ttname"><a href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">kaldi::ApproxEqual</a></div><div class="ttdeci">static bool ApproxEqual(float a, float b, float relative_tolerance=0.001)</div><div class="ttdoc">return abs(a - b) &lt;= relative_tolerance * (abs(a)+abs(b)). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00264">kaldi-math.h:264</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a280ad72c50c6a6ceaa3159ca6bae9894"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a280ad72c50c6a6ceaa3159ca6bae9894">&#9670;&nbsp;</a></span>TestSafeDeterminizeWrapper()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestSafeDeterminizeWrapper </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fstext-utils-test_8cc_source.html#l00087">87</a> of file <a class="el" href="fstext-utils-test_8cc_source.html">fstext-utils-test.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>, <a class="el" href="kaldi-error_8h_source.html#l00132">KALDI_LOG</a>, <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00357">SafeDeterminizeMinimizeWrapper()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00408">SafeDeterminizeMinimizeWrapperInLog()</a>, and <a class="el" href="fstext-utils-inl_8h_source.html#l00345">SafeDeterminizeWrapper()</a>.</p>
<div class="fragment"><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                                                       {  <span class="comment">// also tests SafeDeterminizeMinimizeWrapper().</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = <span class="keyword">new</span> VectorFst&lt;Arc&gt;();</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="keywordtype">int</span> n_syms = 2 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5, n_states = 3 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 10, n_arcs = 5 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 30, n_final = 1 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()%3;  <span class="comment">// Up to 2 unique symbols.</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  cout &lt;&lt; <span class="stringliteral">&quot;Testing pre-determinize with &quot;</span>&lt;&lt;n_syms&lt;&lt;<span class="stringliteral">&quot; symbols, &quot;</span>&lt;&lt;n_states&lt;&lt;<span class="stringliteral">&quot; states and &quot;</span>&lt;&lt;n_arcs&lt;&lt;<span class="stringliteral">&quot; arcs and &quot;</span>&lt;&lt;n_final&lt;&lt;<span class="stringliteral">&quot; final states.\n&quot;</span>;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  SymbolTable *sptr = <span class="keyword">new</span> SymbolTable(<span class="stringliteral">&quot;my-symbol-table&quot;</span>);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  sptr-&gt;AddSymbol(<span class="stringliteral">&quot;&lt;eps&gt;&quot;</span>);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keyword">delete</span> sptr;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  sptr = <span class="keyword">new</span> SymbolTable(<span class="stringliteral">&quot;my-symbol-table&quot;</span>);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  vector&lt;Label&gt; all_syms;  <span class="comment">// including epsilon.</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">// Put symbols in the symbol table from 1..n_syms-1.</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)n_syms;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    std::stringstream ss;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> == 0) ss &lt;&lt; <span class="stringliteral">&quot;&lt;eps&gt;&quot;</span>;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">else</span> ss&lt;&lt;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    Label cur_lab = sptr-&gt;AddSymbol(ss.str());</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    assert(cur_lab == (Label)i);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    all_syms.push_back(cur_lab);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  }</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  assert(all_syms[0] == 0);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="comment">// Create states.</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  vector&lt;StateId&gt; all_states;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0;i &lt; (<a class="code" href="classsize__t.html">size_t</a>)n_states;i++) {</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    StateId this_state = fst-&gt;AddState();</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">if</span> (i == 0) fst-&gt;SetStart(i);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    all_states.push_back(this_state);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  }</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="comment">// Set final states.</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0;<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; (<a class="code" href="classsize__t.html">size_t</a>)n_final;<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    StateId <span class="keywordtype">id</span> = all_states[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_states];</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    Weight weight = (<a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>)(0.33*(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5) );</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    printf(<span class="stringliteral">&quot;calling SetFinal with %d and %f\n&quot;</span>, <span class="keywordtype">id</span>, weight.Value());</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    fst-&gt;SetFinal(<span class="keywordtype">id</span>, weight);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  }</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="comment">// Create arcs.</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0;i &lt; (<a class="code" href="classsize__t.html">size_t</a>)n_arcs;i++) {</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a> a;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    a.nextstate = all_states[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_states];</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    a.ilabel = all_syms[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_syms];</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    a.olabel = all_syms[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_syms];  <span class="comment">// same input+output vocab.</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    a.weight = (<a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>) (0.33*(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 2));</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    StateId start_state = all_states[<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % n_states];</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    fst-&gt;AddArc(start_state, a);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  }</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing before trimming\n&quot;</span>;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(*fst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  }</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="comment">// Trim resulting FST.</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  Connect(fst);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; printing after trimming\n&quot;</span>;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  {</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(*fst, sptr, sptr, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  }</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  VectorFst&lt;Arc&gt; *fst_copy_orig = <span class="keyword">new</span> VectorFst&lt;Arc&gt;(*fst);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  VectorFst&lt;Arc&gt; *fst_det = <span class="keyword">new</span> VectorFst&lt;Arc&gt;;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  vector&lt;Label&gt; extra_syms;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="keywordflow">if</span> (fst-&gt;Start() != kNoStateId) {  <span class="comment">// &quot;Connect&quot; did not make it empty....</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 2 == 0)</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      <a class="code" href="namespacefst.html#a603f9590e0369ac80054f72e18fc3ab0">SafeDeterminizeWrapper</a>(fst_copy_orig, fst_det);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 2 == 0)</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <a class="code" href="namespacefst.html#ae8879829362d7a0f0117247ded14e19f">SafeDeterminizeMinimizeWrapper</a>(fst_copy_orig, fst_det);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <a class="code" href="namespacefst.html#aa3220461ade577911b4400996626a4f0">SafeDeterminizeMinimizeWrapperInLog</a>(fst_copy_orig, fst_det);</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    }</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="comment">// no because does shortest-dist on weights even if not pushing on them.</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="comment">// PushInLog&lt;REWEIGHT_TO_INITIAL&gt;(fst_det, kPushLabels);  // will always succeed.</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="group__error__group.html#gaf8fb55454306b60c9c1e07a6ef9d341a">KALDI_LOG</a> &lt;&lt; <span class="stringliteral">&quot;Num states [orig]: &quot;</span> &lt;&lt; fst-&gt;NumStates() &lt;&lt; <span class="stringliteral">&quot;[det]&quot;</span> &lt;&lt; fst_det-&gt;NumStates();</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    assert(RandEquivalent(*fst, *fst_det, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>));</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  }</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="keyword">delete</span> fst;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="keyword">delete</span> fst_copy_orig;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="keyword">delete</span> fst_det;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="keyword">delete</span> sptr;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="classsize__t_html"><div class="ttname"><a href="classsize__t.html">size_t</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacefst_html_a603f9590e0369ac80054f72e18fc3ab0"><div class="ttname"><a href="namespacefst.html#a603f9590e0369ac80054f72e18fc3ab0">fst::SafeDeterminizeWrapper</a></div><div class="ttdeci">void SafeDeterminizeWrapper(MutableFst&lt; Arc &gt; *ifst, MutableFst&lt; Arc &gt; *ofst, float delta)</div><div class="ttdoc">Does PreDeterminize and DeterminizeStar and then removes the disambiguation symbols. </div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00345">fstext-utils-inl.h:345</a></div></div>
<div class="ttc" id="namespacefst_html_aa3220461ade577911b4400996626a4f0"><div class="ttname"><a href="namespacefst.html#aa3220461ade577911b4400996626a4f0">fst::SafeDeterminizeMinimizeWrapperInLog</a></div><div class="ttdeci">void SafeDeterminizeMinimizeWrapperInLog(VectorFst&lt; StdArc &gt; *ifst, VectorFst&lt; StdArc &gt; *ofst, float delta)</div><div class="ttdoc">SafeDeterminizeMinimizeWapperInLog is as SafeDeterminizeMinimizeWrapper except it first casts tothe l...</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00408">fstext-utils-inl.h:408</a></div></div>
<div class="ttc" id="namespacefst_html_ae8879829362d7a0f0117247ded14e19f"><div class="ttname"><a href="namespacefst.html#ae8879829362d7a0f0117247ded14e19f">fst::SafeDeterminizeMinimizeWrapper</a></div><div class="ttdeci">void SafeDeterminizeMinimizeWrapper(MutableFst&lt; Arc &gt; *ifst, VectorFst&lt; Arc &gt; *ofst, float delta)</div><div class="ttdoc">SafeDeterminizeMinimizeWapper is as SafeDeterminizeWrapper except that it also minimizes (encoded min...</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00357">fstext-utils-inl.h:357</a></div></div>
<div class="ttc" id="group__error__group_html_gaf8fb55454306b60c9c1e07a6ef9d341a"><div class="ttname"><a href="group__error__group.html#gaf8fb55454306b60c9c1e07a6ef9d341a">KALDI_LOG</a></div><div class="ttdeci">#define KALDI_LOG</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00132">kaldi-error.h:132</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aba6757ca2fbc1695f46ee013c77424b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba6757ca2fbc1695f46ee013c77424b3">&#9670;&nbsp;</a></span>TestScalePair()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestScalePair </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>invert</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-utils-test_8cc_source.html#l00234">234</a> of file <a class="el" href="lattice-utils-test_8cc_source.html">lattice-utils-test.cc</a>.</p>

<p class="reference">References <a class="el" href="lattice-utils_8h_source.html#l00130">DefaultLatticeScale()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>, and <a class="el" href="lattice-utils-inl_8h_source.html#l00197">ScaleLattice()</a>.</p>
<div class="fragment"><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                                                                  {</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  vector&lt;vector&lt;double&gt; &gt; scale1 = <a class="code" href="namespacefst.html#a295c809e48d355794a9489f0aa35f4bb">DefaultLatticeScale</a>(),</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      scale2 = <a class="code" href="namespacefst.html#a295c809e48d355794a9489f0aa35f4bb">DefaultLatticeScale</a>();</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="comment">// important that all these numbers exactly representable as floats..</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="comment">// exact floating-point comparisons are used in LatticeWeight, and</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="comment">// this exactness is being tested here.. this test will fail for</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="comment">// other types of number.</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 4 == 0) {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    scale1[0][0] = 2.0;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    scale2[0][0] = 0.5;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    scale1[1][1] = 4.0;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    scale2[1][1] = 0.25;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 3 == 0) {</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="comment">// use that [1 0.25; 0 1] [ 1 -0.25; 0 1] is the unit matrix.</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    scale1[0][1] = 0.25;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    scale2[0][1] = -0.25;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 2 == 0) {</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    scale1[1][0] = 0.25;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    scale2[1][0] = -0.25;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  }</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="keyword">typedef</span> ArcTpl&lt;Weight&gt; <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keyword">typedef</span> ArcTpl&lt;CompactLatticeWeightTpl&lt;Weight, Int&gt; &gt; CompactArc;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 2; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = RandPairFst&lt;Arc&gt;();</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="comment">/*std::cout &lt;&lt; &quot;FST before converting to compact-arc is:\n&quot;;</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">    {</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">      FstPrinter&lt;Arc&gt; fstprinter(*fst, NULL, NULL, NULL, false, true);</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">      fstprinter.Print(&amp;std::cout, &quot;standard output&quot;);</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">      }*/</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    VectorFst&lt;CompactArc&gt; ofst;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    ConvertLattice&lt;Weight, Int&gt;(*fst, &amp;ofst, invert);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <a class="code" href="namespacefst.html#a43c0c2263cc58499e55a8e00176c3dc4">ScaleLattice</a>(scale1, &amp;ofst);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="comment">/*std::cout &lt;&lt; &quot;FST after converting and scaling is:\n&quot;;</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">    {</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">      FstPrinter&lt;CompactArc&gt; fstprinter(ofst, NULL, NULL, NULL, false, true);</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">      fstprinter.Print(&amp;std::cout, &quot;standard output&quot;);</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">      }*/</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    VectorFst&lt;Arc&gt; origfst;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    ConvertLattice&lt;Weight, Int&gt;(ofst, &amp;origfst, invert);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="namespacefst.html#a43c0c2263cc58499e55a8e00176c3dc4">ScaleLattice</a>(scale2, &amp;origfst);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">/*std::cout &lt;&lt; &quot;FST after back conversion and scaling is:\n&quot;;</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">    {</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">      FstPrinter&lt;Arc&gt; fstprinter(origfst, NULL, NULL, NULL, false, true);</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">      fstprinter.Print(&amp;std::cout, &quot;standard output&quot;);</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">      }*/</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">// If RandEquivalent doesn&#39;t work, it could be due to a nasty issue related to the use</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">// of exact floating-point comparisons in the Plus function of LatticeWeight.</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">if</span> (!RandEquivalent(*fst, origfst, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>)) {</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      std::cerr &lt;&lt; <span class="stringliteral">&quot;Warn, randequivalent returned false.  Checking equivalence another way.\n&quot;</span>;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      assert(Equal(*fst, origfst));</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    }</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keyword">delete</span> fst;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  }</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a295c809e48d355794a9489f0aa35f4bb"><div class="ttname"><a href="namespacefst.html#a295c809e48d355794a9489f0aa35f4bb">fst::DefaultLatticeScale</a></div><div class="ttdeci">vector&lt; vector&lt; double &gt; &gt; DefaultLatticeScale()</div><div class="ttdoc">Returns a default 2x2 matrix scaling factor for LatticeWeight. </div><div class="ttdef"><b>Definition:</b> <a href="lattice-utils_8h_source.html#l00130">lattice-utils.h:130</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacefst_html_a43c0c2263cc58499e55a8e00176c3dc4"><div class="ttname"><a href="namespacefst.html#a43c0c2263cc58499e55a8e00176c3dc4">fst::ScaleLattice</a></div><div class="ttdeci">void ScaleLattice(const vector&lt; vector&lt; ScaleFloat &gt; &gt; &amp;scale, MutableFst&lt; ArcTpl&lt; Weight &gt; &gt; *fst)</div><div class="ttdoc">Scales the pairs of weights in LatticeWeight or CompactLatticeWeight by viewing the pair (a...</div><div class="ttdef"><b>Definition:</b> <a href="lattice-utils-inl_8h_source.html#l00197">lattice-utils-inl.h:197</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa4f2152f15d868e99055746a5c2b90ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4f2152f15d868e99055746a5c2b90ae">&#9670;&nbsp;</a></span>TestShortestPath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestShortestPath </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-utils-test_8cc_source.html#l00060">60</a> of file <a class="el" href="lattice-utils-test_8cc_source.html">lattice-utils-test.cc</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00390">ApproxEqual()</a>, and <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>.</p>
<div class="fragment"><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                                                          {</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> p = 0; p &lt; 10; p++) {</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keyword">typedef</span> ArcTpl&lt;Weight&gt; <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keyword">typedef</span> ArcTpl&lt;CompactLatticeWeightTpl&lt;Weight, Int&gt; &gt; CompactArc;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 5; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;      VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = RandPairFst&lt;Arc&gt;();</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;      std::cout &lt;&lt; <span class="stringliteral">&quot;Testing shortest path\n&quot;</span>;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;      std::cout &lt;&lt; <span class="stringliteral">&quot;FST before converting to compact-arc is:\n&quot;</span>;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;      {</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        FstPrinter&lt;Arc&gt; fstprinter(*fst, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      }</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;      VectorFst&lt;CompactArc&gt; cfst;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      ConvertLattice&lt;Weight, Int&gt;(*fst, &amp;cfst, <span class="keyword">false</span>); <span class="comment">// invert == false</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        VectorFst&lt;Arc&gt; nbest_fst_1;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        ShortestPath(*fst, &amp;nbest_fst_1, 1);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        VectorFst&lt;Arc&gt; nbest_fst_2;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        ShortestPath(*fst, &amp;nbest_fst_2, 3);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        VectorFst&lt;Arc&gt; nbest_fst_1b;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        ShortestPath(nbest_fst_2, &amp;nbest_fst_1b, 1);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        assert(<a class="code" href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">ApproxEqual</a>(ShortestDistance(nbest_fst_1),</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                           ShortestDistance(nbest_fst_1b)));</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="comment">// since semiring is idempotent, this should succeed too.</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        assert(<a class="code" href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">ApproxEqual</a>(ShortestDistance(*fst),</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                           ShortestDistance(nbest_fst_1b)));</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      }</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      {</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        VectorFst&lt;CompactArc&gt; nbest_fst_1;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        ShortestPath(cfst, &amp;nbest_fst_1, 1);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        VectorFst&lt;CompactArc&gt; nbest_fst_2;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        ShortestPath(cfst, &amp;nbest_fst_2, 3);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        VectorFst&lt;CompactArc&gt; nbest_fst_1b;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        ShortestPath(nbest_fst_2, &amp;nbest_fst_1b, 1);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        assert(<a class="code" href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">ApproxEqual</a>(ShortestDistance(nbest_fst_1),</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                           ShortestDistance(nbest_fst_1b)));</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="comment">// since semiring is idempotent, this should succeed too.</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        assert(<a class="code" href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">ApproxEqual</a>(ShortestDistance(cfst),</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                           ShortestDistance(nbest_fst_1b)));</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      }</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      <span class="keyword">delete</span> fst;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    }</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  }</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacekaldi_html_a99dcbb9fdaa6c980ba67941d45adf017"><div class="ttname"><a href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">kaldi::ApproxEqual</a></div><div class="ttdeci">static bool ApproxEqual(float a, float b, float relative_tolerance=0.001)</div><div class="ttdoc">return abs(a - b) &lt;= relative_tolerance * (abs(a)+abs(b)). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00264">kaldi-math.h:264</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af0c7b9ff84c7149049e9b0bb67ee26d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0c7b9ff84c7149049e9b0bb67ee26d4">&#9670;&nbsp;</a></span>TestStringRepository()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TestStringRepository </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="determinize-star-test_8cc_source.html#l00447">447</a> of file <a class="el" href="determinize-star-test_8cc_source.html">determinize-star-test.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="determinize-star-inl_8h_source.html#l00067">StringRepository&lt; Label, StringId &gt;::IdOfEmpty()</a>, <a class="el" href="determinize-star-inl_8h_source.html#l00069">StringRepository&lt; Label, StringId &gt;::IdOfLabel()</a>, <a class="el" href="determinize-star-inl_8h_source.html#l00079">StringRepository&lt; Label, StringId &gt;::IdOfSeq()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>, <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>, <a class="el" href="determinize-star-inl_8h_source.html#l00098">StringRepository&lt; Label, StringId &gt;::RemovePrefix()</a>, and <a class="el" href="determinize-star-inl_8h_source.html#l00089">StringRepository&lt; Label, StringId &gt;::SeqOfId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="trivial-factor-weight-test_8cc_source.html#l00031">TestFactor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                                                               {</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  StringRepository&lt;Label, inttype&gt; sr;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="keywordtype">int</span> N = 100;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">sizeof</span>(inttype) == 1) N = 64;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  vector&lt;vector&lt;Label&gt; &gt; strings(N);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  vector&lt;inttype&gt; ids(N);</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; N;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="keywordtype">size_t</span> len = <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 4;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    vector&lt;Label&gt; vec;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0;<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; len;<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++) vec.push_back( (<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()%10) + 150*(<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()%2));  <span class="comment">// make it have reasonable range.</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 500 &amp;&amp; vec.size() == 0) ids[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] = sr.IdOfEmpty();</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 500 &amp;&amp; vec.size() == 1) ids[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] = sr.IdOfLabel(vec[0]);</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">else</span> ids[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] = sr.IdOfSeq(vec);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    strings[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] = vec;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  }</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; N;<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    vector&lt;Label&gt; tmpv;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    tmpv.push_back(10);  <span class="comment">// just put in garbage.</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    sr.SeqOfId(ids[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>], &amp;tmpv);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    assert(tmpv == strings[i]);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    assert(sr.IdOfSeq(strings[i]) == ids[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">if</span> (strings[i].size() == 0) assert(ids[i] == sr.IdOfEmpty());</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordflow">if</span> (strings[i].size() == 1) assert(ids[i] == sr.IdOfLabel(strings[i][0]));</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">sizeof</span>(inttype) != 1) {</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <span class="keywordtype">size_t</span> prefix_len = <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % (strings[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].size() + 1);</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      inttype s2 = sr.RemovePrefix(ids[i], prefix_len);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      vector&lt;Label&gt; vec2;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      sr.SeqOfId(s2, &amp;vec2);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0;<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; strings[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].size()-prefix_len;<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        assert(vec2[<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>] == strings[i][<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>+prefix_len]);</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      }</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    }</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  }</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;}</div><div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad03ee5dac5fe7e79c63d7ded81c5b293"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad03ee5dac5fe7e79c63d7ded81c5b293">&#9670;&nbsp;</a></span>TestTableMatcher()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestTableMatcher </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>connect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>left</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="table-matcher-test_8cc_source.html#l00028">28</a> of file <a class="el" href="table-matcher-test_8cc_source.html">table-matcher-test.cc</a>.</p>

<p class="reference">References <a class="el" href="table-matcher_8h_source.html#l00301">TableComposeOptions::connect</a>, <a class="el" href="table-matcher_8h_source.html#l00044">TableMatcherOptions::min_table_size</a>, <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>, <a class="el" href="table-matcher_8h_source.html#l00303">TableComposeOptions::table_match_type</a>, <a class="el" href="table-matcher_8h_source.html#l00043">TableMatcherOptions::table_ratio</a>, and <a class="el" href="table-matcher_8h_source.html#l00315">TableCompose()</a>.</p>
<div class="fragment"><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;                                                                    {</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  VectorFst&lt;Arc&gt; *fst1 = RandFst&lt;Arc&gt;();</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  VectorFst&lt;Arc&gt; *fst2 = RandFst&lt;Arc&gt;();</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  ILabelCompare&lt;Arc&gt; ilabel_comp;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  OLabelCompare&lt;Arc&gt; olabel_comp;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <a class="code" href="structfst_1_1TableComposeOptions.html">TableComposeOptions</a> opts;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="keywordflow">if</span> (left) opts.<a class="code" href="structfst_1_1TableComposeOptions.html#a53836791e3f8f071628f320328e308c1">table_match_type</a> = MATCH_OUTPUT;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="keywordflow">else</span> opts.<a class="code" href="structfst_1_1TableComposeOptions.html#a53836791e3f8f071628f320328e308c1">table_match_type</a> = MATCH_INPUT;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  opts.<a class="code" href="structfst_1_1TableMatcherOptions.html#a19edc3f1d336fd6fc95b6fe99bd089ee">min_table_size</a> = 1 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  opts.<a class="code" href="structfst_1_1TableMatcherOptions.html#a49da19ce2000215836b8cb5f14c3a22b">table_ratio</a> = 0.25 * (<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5);</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  opts.<a class="code" href="structfst_1_1TableComposeOptions.html#af4e68d5926444b7651a9095ee0b26e48">connect</a> = connect;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  ArcSort(fst1, olabel_comp);</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  ArcSort(fst2, ilabel_comp);</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  VectorFst&lt;Arc&gt; composed;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <a class="code" href="namespacefst.html#aa4121807cfc94de5efb2420716093ca6">TableCompose</a>(*fst1, *fst2, &amp;composed, opts);</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="keywordflow">if</span> (!connect) Connect(&amp;composed);</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  VectorFst&lt;Arc&gt; composed_baseline;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  Compose(*fst1, *fst2, &amp;composed_baseline);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  std::cout &lt;&lt; <span class="stringliteral">&quot;Connect = &quot;</span>&lt;&lt; (connect?<span class="stringliteral">&quot;True\n&quot;</span>:<span class="stringliteral">&quot;False\n&quot;</span>);</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot;Table-Composed FST\n&quot;</span>;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  {</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(composed, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  }</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  std::cout &lt;&lt;<span class="stringliteral">&quot; Baseline-Composed FST\n&quot;</span>;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  {</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    FstPrinter&lt;Arc&gt; fstprinter(composed_baseline, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  }</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keywordflow">if</span> ( !RandEquivalent(composed, composed_baseline, 3<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 20<span class="comment">/*path length-- max?*/</span>)) {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    VectorFst&lt;Arc&gt; diff1;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    Difference(composed, composed_baseline, &amp;diff1);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    std::cout &lt;&lt;<span class="stringliteral">&quot; Diff1 (composed - baseline) \n&quot;</span>;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      FstPrinter&lt;Arc&gt; fstprinter(diff1, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    }</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    VectorFst&lt;Arc&gt; diff2;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    Difference(composed_baseline, composed, &amp;diff2);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    std::cout &lt;&lt;<span class="stringliteral">&quot; Diff2 (baseline - composed) \n&quot;</span>;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    {</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      FstPrinter&lt;Arc&gt; fstprinter(diff2, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    }</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    assert(0);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  }</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keyword">delete</span> fst1;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="keyword">delete</span> fst2;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html_aa4121807cfc94de5efb2420716093ca6"><div class="ttname"><a href="namespacefst.html#aa4121807cfc94de5efb2420716093ca6">fst::TableCompose</a></div><div class="ttdeci">void TableCompose(const Fst&lt; Arc &gt; &amp;ifst1, const Fst&lt; Arc &gt; &amp;ifst2, MutableFst&lt; Arc &gt; *ofst, const TableComposeOptions &amp;opts=TableComposeOptions())</div><div class="ttdef"><b>Definition:</b> <a href="table-matcher_8h_source.html#l00315">table-matcher.h:315</a></div></div>
<div class="ttc" id="structfst_1_1TableComposeOptions_html"><div class="ttname"><a href="structfst_1_1TableComposeOptions.html">fst::TableComposeOptions</a></div><div class="ttdef"><b>Definition:</b> <a href="table-matcher_8h_source.html#l00300">table-matcher.h:300</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="structfst_1_1TableComposeOptions_html_a53836791e3f8f071628f320328e308c1"><div class="ttname"><a href="structfst_1_1TableComposeOptions.html#a53836791e3f8f071628f320328e308c1">fst::TableComposeOptions::table_match_type</a></div><div class="ttdeci">MatchType table_match_type</div><div class="ttdef"><b>Definition:</b> <a href="table-matcher_8h_source.html#l00303">table-matcher.h:303</a></div></div>
<div class="ttc" id="structfst_1_1TableMatcherOptions_html_a19edc3f1d336fd6fc95b6fe99bd089ee"><div class="ttname"><a href="structfst_1_1TableMatcherOptions.html#a19edc3f1d336fd6fc95b6fe99bd089ee">fst::TableMatcherOptions::min_table_size</a></div><div class="ttdeci">int min_table_size</div><div class="ttdef"><b>Definition:</b> <a href="table-matcher_8h_source.html#l00044">table-matcher.h:44</a></div></div>
<div class="ttc" id="structfst_1_1TableMatcherOptions_html_a49da19ce2000215836b8cb5f14c3a22b"><div class="ttname"><a href="structfst_1_1TableMatcherOptions.html#a49da19ce2000215836b8cb5f14c3a22b">fst::TableMatcherOptions::table_ratio</a></div><div class="ttdeci">float table_ratio</div><div class="ttdef"><b>Definition:</b> <a href="table-matcher_8h_source.html#l00043">table-matcher.h:43</a></div></div>
<div class="ttc" id="structfst_1_1TableComposeOptions_html_af4e68d5926444b7651a9095ee0b26e48"><div class="ttname"><a href="structfst_1_1TableComposeOptions.html#af4e68d5926444b7651a9095ee0b26e48">fst::TableComposeOptions::connect</a></div><div class="ttdeci">bool connect</div><div class="ttdef"><b>Definition:</b> <a href="table-matcher_8h_source.html#l00301">table-matcher.h:301</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac0ba3411c7524cd9232d939597c23e87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0ba3411c7524cd9232d939597c23e87">&#9670;&nbsp;</a></span>TestTableMatcherCacheLeft()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestTableMatcherCacheLeft </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>connect</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="table-matcher-test_8cc_source.html#l00104">104</a> of file <a class="el" href="table-matcher-test_8cc_source.html">table-matcher-test.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>, <a class="el" href="table-matcher_8h_source.html#l00303">TableComposeOptions::table_match_type</a>, and <a class="el" href="table-matcher_8h_source.html#l00315">TableCompose()</a>.</p>
<div class="fragment"><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                                                                  {</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  VectorFst&lt;Arc&gt; *fst1 = RandFst&lt;Arc&gt;();</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <a class="code" href="structfst_1_1TableComposeOptions.html">TableComposeOptions</a> opts;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  opts.<a class="code" href="structfst_1_1TableComposeOptions.html#a53836791e3f8f071628f320328e308c1">table_match_type</a> = MATCH_OUTPUT;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  opts.min_table_size = 1 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  opts.table_ratio = 0.25 * (<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  opts.connect = connect;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <a class="code" href="structfst_1_1TableComposeCache.html">TableComposeCache&lt;Fst&lt;Arc&gt;</a> &gt; cache(opts);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    VectorFst&lt;Arc&gt; *fst2 = RandFst&lt;Arc&gt;();</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    ILabelCompare&lt;Arc&gt; ilabel_comp;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    OLabelCompare&lt;Arc&gt; olabel_comp;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    ArcSort(fst1, olabel_comp);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    ArcSort(fst2, ilabel_comp);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    VectorFst&lt;Arc&gt; composed;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="namespacefst.html#aa4121807cfc94de5efb2420716093ca6">TableCompose</a>(*fst1, *fst2, &amp;composed, &amp;cache);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">if</span> (!connect) Connect(&amp;composed);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    VectorFst&lt;Arc&gt; composed_baseline;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    Compose(*fst1, *fst2, &amp;composed_baseline);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;Connect = &quot;</span>&lt;&lt; (connect?<span class="stringliteral">&quot;True\n&quot;</span>:<span class="stringliteral">&quot;False\n&quot;</span>);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">if</span> ( !RandEquivalent(composed, composed_baseline, 3<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 100<span class="comment">/*path length-- max?*/</span>)) {</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      VectorFst&lt;Arc&gt; diff1;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      Difference(composed, composed_baseline, &amp;diff1);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      std::cout &lt;&lt;<span class="stringliteral">&quot; Diff1 (composed - baseline) \n&quot;</span>;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        FstPrinter&lt;Arc&gt; fstprinter(diff1, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      }</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      VectorFst&lt;Arc&gt; diff2;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      Difference(composed_baseline, composed, &amp;diff2);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      std::cout &lt;&lt;<span class="stringliteral">&quot; Diff2 (baseline - composed) \n&quot;</span>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      {</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        FstPrinter&lt;Arc&gt; fstprinter(diff2, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      }</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      assert(0);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    }</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keyword">delete</span> fst2;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  }</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="keyword">delete</span> fst1;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html_aa4121807cfc94de5efb2420716093ca6"><div class="ttname"><a href="namespacefst.html#aa4121807cfc94de5efb2420716093ca6">fst::TableCompose</a></div><div class="ttdeci">void TableCompose(const Fst&lt; Arc &gt; &amp;ifst1, const Fst&lt; Arc &gt; &amp;ifst2, MutableFst&lt; Arc &gt; *ofst, const TableComposeOptions &amp;opts=TableComposeOptions())</div><div class="ttdef"><b>Definition:</b> <a href="table-matcher_8h_source.html#l00315">table-matcher.h:315</a></div></div>
<div class="ttc" id="structfst_1_1TableComposeOptions_html"><div class="ttname"><a href="structfst_1_1TableComposeOptions.html">fst::TableComposeOptions</a></div><div class="ttdef"><b>Definition:</b> <a href="table-matcher_8h_source.html#l00300">table-matcher.h:300</a></div></div>
<div class="ttc" id="structfst_1_1TableComposeCache_html"><div class="ttname"><a href="structfst_1_1TableComposeCache.html">fst::TableComposeCache</a></div><div class="ttdoc">TableComposeCache lets us do multiple compositions while caching the same matcher. </div><div class="ttdef"><b>Definition:</b> <a href="table-matcher_8h_source.html#l00340">table-matcher.h:340</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="structfst_1_1TableComposeOptions_html_a53836791e3f8f071628f320328e308c1"><div class="ttname"><a href="structfst_1_1TableComposeOptions.html#a53836791e3f8f071628f320328e308c1">fst::TableComposeOptions::table_match_type</a></div><div class="ttdeci">MatchType table_match_type</div><div class="ttdef"><b>Definition:</b> <a href="table-matcher_8h_source.html#l00303">table-matcher.h:303</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae69f1ed37a40f8a2fa5f514dfce6126d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae69f1ed37a40f8a2fa5f514dfce6126d">&#9670;&nbsp;</a></span>TestTableMatcherCacheRight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fst::TestTableMatcherCacheRight </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>connect</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="table-matcher-test_8cc_source.html#l00173">173</a> of file <a class="el" href="table-matcher-test_8cc_source.html">table-matcher-test.cc</a>.</p>

<p class="reference">References <a class="el" href="table-matcher_8h_source.html#l00301">TableComposeOptions::connect</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="table-matcher_8h_source.html#l00044">TableMatcherOptions::min_table_size</a>, <a class="el" href="kaldi-math_8cc_source.html#l00044">kaldi::Rand()</a>, <a class="el" href="table-matcher_8h_source.html#l00303">TableComposeOptions::table_match_type</a>, <a class="el" href="table-matcher_8h_source.html#l00043">TableMatcherOptions::table_ratio</a>, and <a class="el" href="table-matcher_8h_source.html#l00315">TableCompose()</a>.</p>
<div class="fragment"><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                                                                   {</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Label</a>;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a>;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a>;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  VectorFst&lt;Arc&gt; *fst2 = RandFst&lt;Arc&gt;();</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  ILabelCompare&lt;Arc&gt; ilabel_comp;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  ArcSort(fst2, ilabel_comp);</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <a class="code" href="structfst_1_1TableComposeOptions.html">TableComposeOptions</a> opts;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  opts.<a class="code" href="structfst_1_1TableComposeOptions.html#a53836791e3f8f071628f320328e308c1">table_match_type</a> = MATCH_INPUT;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  opts.<a class="code" href="structfst_1_1TableMatcherOptions.html#a19edc3f1d336fd6fc95b6fe99bd089ee">min_table_size</a> = 1 + <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  opts.<a class="code" href="structfst_1_1TableMatcherOptions.html#a49da19ce2000215836b8cb5f14c3a22b">table_ratio</a> = 0.25 * (<a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>() % 5);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  opts.<a class="code" href="structfst_1_1TableComposeOptions.html#af4e68d5926444b7651a9095ee0b26e48">connect</a> = connect;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <a class="code" href="structfst_1_1TableComposeCache.html">TableComposeCache&lt;Fst&lt;Arc&gt;</a> &gt; cache(opts);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 2; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    VectorFst&lt;Arc&gt; *fst1 = RandFst&lt;Arc&gt;();</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    OLabelCompare&lt;Arc&gt; olabel_comp;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    ArcSort(fst1, olabel_comp);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    VectorFst&lt;Arc&gt; composed;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <a class="code" href="namespacefst.html#aa4121807cfc94de5efb2420716093ca6">TableCompose</a>(*fst1, *fst2, &amp;composed, &amp;cache);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">if</span> (!connect) Connect(&amp;composed);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    VectorFst&lt;Arc&gt; composed_baseline;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    Compose(*fst1, *fst2, &amp;composed_baseline);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;Connect = &quot;</span>&lt;&lt; (connect?<span class="stringliteral">&quot;True\n&quot;</span>:<span class="stringliteral">&quot;False\n&quot;</span>);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">if</span> ( !RandEquivalent(composed, composed_baseline, 5<span class="comment">/*paths*/</span>, 0.01<span class="comment">/*delta*/</span>, <a class="code" href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a>()<span class="comment">/*seed*/</span>, 20<span class="comment">/*path length-- max?*/</span>)) {</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      VectorFst&lt;Arc&gt; diff1;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      Difference(composed, composed_baseline, &amp;diff1);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      std::cout &lt;&lt;<span class="stringliteral">&quot; Diff1 (composed - baseline) \n&quot;</span>;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      {</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        FstPrinter&lt;Arc&gt; fstprinter(diff1, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      }</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      VectorFst&lt;Arc&gt; diff2;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      Difference(composed_baseline, composed, &amp;diff2);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      std::cout &lt;&lt;<span class="stringliteral">&quot; Diff2 (baseline - composed) \n&quot;</span>;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        FstPrinter&lt;Arc&gt; fstprinter(diff2, NULL, NULL, NULL, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        fstprinter.Print(&amp;std::cout, <span class="stringliteral">&quot;standard output&quot;</span>);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      }</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      assert(0);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    }</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keyword">delete</span> fst1;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  }</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keyword">delete</span> fst2;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacefst_html_aa4121807cfc94de5efb2420716093ca6"><div class="ttname"><a href="namespacefst.html#aa4121807cfc94de5efb2420716093ca6">fst::TableCompose</a></div><div class="ttdeci">void TableCompose(const Fst&lt; Arc &gt; &amp;ifst1, const Fst&lt; Arc &gt; &amp;ifst2, MutableFst&lt; Arc &gt; *ofst, const TableComposeOptions &amp;opts=TableComposeOptions())</div><div class="ttdef"><b>Definition:</b> <a href="table-matcher_8h_source.html#l00315">table-matcher.h:315</a></div></div>
<div class="ttc" id="structfst_1_1TableComposeOptions_html"><div class="ttname"><a href="structfst_1_1TableComposeOptions.html">fst::TableComposeOptions</a></div><div class="ttdef"><b>Definition:</b> <a href="table-matcher_8h_source.html#l00300">table-matcher.h:300</a></div></div>
<div class="ttc" id="structfst_1_1TableComposeCache_html"><div class="ttname"><a href="structfst_1_1TableComposeCache.html">fst::TableComposeCache</a></div><div class="ttdoc">TableComposeCache lets us do multiple compositions while caching the same matcher. </div><div class="ttdef"><b>Definition:</b> <a href="table-matcher_8h_source.html#l00340">table-matcher.h:340</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="namespacekaldi_html_a70777edd81d4056098f79b9cd3bffb8b"><div class="ttname"><a href="namespacekaldi.html#a70777edd81d4056098f79b9cd3bffb8b">kaldi::Rand</a></div><div class="ttdeci">int Rand(struct RandomState *state)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00044">kaldi-math.cc:44</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="structfst_1_1TableComposeOptions_html_a53836791e3f8f071628f320328e308c1"><div class="ttname"><a href="structfst_1_1TableComposeOptions.html#a53836791e3f8f071628f320328e308c1">fst::TableComposeOptions::table_match_type</a></div><div class="ttdeci">MatchType table_match_type</div><div class="ttdef"><b>Definition:</b> <a href="table-matcher_8h_source.html#l00303">table-matcher.h:303</a></div></div>
<div class="ttc" id="structfst_1_1TableMatcherOptions_html_a19edc3f1d336fd6fc95b6fe99bd089ee"><div class="ttname"><a href="structfst_1_1TableMatcherOptions.html#a19edc3f1d336fd6fc95b6fe99bd089ee">fst::TableMatcherOptions::min_table_size</a></div><div class="ttdeci">int min_table_size</div><div class="ttdef"><b>Definition:</b> <a href="table-matcher_8h_source.html#l00044">table-matcher.h:44</a></div></div>
<div class="ttc" id="structfst_1_1TableMatcherOptions_html_a49da19ce2000215836b8cb5f14c3a22b"><div class="ttname"><a href="structfst_1_1TableMatcherOptions.html#a49da19ce2000215836b8cb5f14c3a22b">fst::TableMatcherOptions::table_ratio</a></div><div class="ttdeci">float table_ratio</div><div class="ttdef"><b>Definition:</b> <a href="table-matcher_8h_source.html#l00043">table-matcher.h:43</a></div></div>
<div class="ttc" id="structfst_1_1TableComposeOptions_html_af4e68d5926444b7651a9095ee0b26e48"><div class="ttname"><a href="structfst_1_1TableComposeOptions.html#af4e68d5926444b7651a9095ee0b26e48">fst::TableComposeOptions::connect</a></div><div class="ttdeci">bool connect</div><div class="ttdef"><b>Definition:</b> <a href="table-matcher_8h_source.html#l00301">table-matcher.h:301</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af5e7654cb24a10903d4df955be7ee82c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5e7654cb24a10903d4df955be7ee82c">&#9670;&nbsp;</a></span>Times() <span class="overload">[1/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt;T&gt; fst::Times </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>w1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>w2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arctic-weight_8h_source.html#l00103">103</a> of file <a class="el" href="arctic-weight_8h_source.html">arctic-weight.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                                                                {</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  T f1 = w1.Value(), f2 = w2.Value();</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keywordflow">if</span> (f1 == -numeric_limits&lt;T&gt;::infinity())</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">return</span> w1;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (f2 == -numeric_limits&lt;T&gt;::infinity())</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">return</span> w2;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">return</span> ArcticWeightTpl&lt;T&gt;(f1 + f2);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="aa1062db1a532f89db640fb251f52f3f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1062db1a532f89db640fb251f52f3f8">&#9670;&nbsp;</a></span>Times() <span class="overload">[2/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt;<a class="el" href="classfloat.html">float</a>&gt; fst::Times </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; <a class="el" href="classfloat.html">float</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>w1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; <a class="el" href="classfloat.html">float</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>w2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arctic-weight_8h_source.html#l00114">114</a> of file <a class="el" href="arctic-weight_8h_source.html">arctic-weight.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                                                                        {</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keywordflow">return</span> Times&lt;float&gt;(w1, w2);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a05ba4b46b421548b3af8fc08bb328cd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05ba4b46b421548b3af8fc08bb328cd0">&#9670;&nbsp;</a></span>Times() <span class="overload">[3/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt;double&gt; fst::Times </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>w1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfst_1_1ArcticWeightTpl.html">ArcticWeightTpl</a>&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>w2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arctic-weight_8h_source.html#l00119">119</a> of file <a class="el" href="arctic-weight_8h_source.html">arctic-weight.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                                                                          {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordflow">return</span> Times&lt;double&gt;(w1, w2);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a0807071c6ceb397bc35281fce74ff8a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0807071c6ceb397bc35281fce74ff8a7">&#9670;&nbsp;</a></span>Times() <span class="overload">[4/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt;FloatType&gt; fst::Times </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfst_1_1LatticeWeightTpl.html">LatticeWeightTpl</a>&lt; FloatType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight_8h_source.html#l00363">363</a> of file <a class="el" href="lattice-weight_8h_source.html">lattice-weight.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00052">LatticeWeightTpl&lt; FloatType &gt;::Value1()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00054">LatticeWeightTpl&lt; FloatType &gt;::Value2()</a>.</p>

<p class="reference">Referenced by <a class="el" href="hmm-utils_8cc_source.html#l00555">kaldi::AddSelfLoopsNoReorder()</a>, <a class="el" href="hmm-utils_8cc_source.html#l00472">kaldi::AddSelfLoopsReorder()</a>, <a class="el" href="hmm-utils_8cc_source.html#l01088">kaldi::AddTransitionProbs()</a>, <a class="el" href="word-align-lattice_8cc_source.html#l00040">LatticeWordAligner::ComputationState::Advance()</a>, <a class="el" href="phone-align-lattice_8cc_source.html#l00042">LatticePhoneAligner::ComputationState::Advance()</a>, <a class="el" href="word-align-lattice-lexicon_8cc_source.html#l00573">LatticeLexiconWordAligner::ComputationState::Advance()</a>, <a class="el" href="remove-eps-local-inl_8h_source.html#l00073">RemoveEpsLocalClass&lt; Arc, ReweightPlus &gt;::CanCombineArcs()</a>, <a class="el" href="remove-eps-local-inl_8h_source.html#l00083">RemoveEpsLocalClass&lt; Arc, ReweightPlus &gt;::CanCombineFinal()</a>, <a class="el" href="lattice-weight-test_8cc_source.html#l00124">CompactLatticeWeightTest()</a>, <a class="el" href="deterministic-fst-inl_8h_source.html#l00318">ComposeDeterministicOnDemand()</a>, <a class="el" href="deterministic-fst-inl_8h_source.html#l00408">ComposeDeterministicOnDemandInverse()</a>, <a class="el" href="lattice-weight_8h_source.html#l00839">ConvertLatticeWeight()</a>, <a class="el" href="prune-special-inl_8h_source.html#l00077">PruneSpecialClass&lt; Arc &gt;::Done()</a>, <a class="el" href="determinize-lattice-pruned_8cc_source.html#l00633">LatticeDeterminizerPruned&lt; Weight, IntType &gt;::EpsilonClosure()</a>, <a class="el" href="determinize-lattice-inl_8h_source.html#l00762">LatticeDeterminizer&lt; Weight, IntType &gt;::EpsilonClosure()</a>, <a class="el" href="determinize-star-inl_8h_source.html#l00816">DeterminizerStar&lt; F &gt;::EpsilonClosure::ExpandOneElement()</a>, <a class="el" href="factor-inl_8h_source.html#l00069">Factor()</a>, <a class="el" href="deterministic-fst-inl_8h_source.html#l00048">BackoffDeterministicOnDemandFst&lt; Arc &gt;::Final()</a>, <a class="el" href="deterministic-fst-inl_8h_source.html#l00153">ComposeDeterministicOnDemandFst&lt; Arc &gt;::Final()</a>, <a class="el" href="grammar-fst_8cc_source.html#l00689">GrammarFstPreparer::FixArcsToFinalStates()</a>, <a class="el" href="kws-search_8cc_source.html#l00090">kaldi::GenerateActivePaths()</a>, <a class="el" href="deterministic-fst-inl_8h_source.html#l00068">BackoffDeterministicOnDemandFst&lt; Arc &gt;::GetArc()</a>, <a class="el" href="deterministic-fst-inl_8h_source.html#l00160">ComposeDeterministicOnDemandFst&lt; Arc &gt;::GetArc()</a>, <a class="el" href="biglm-faster-decoder_8h_source.html#l00115">BiglmFasterDecoder::GetBestPath()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00178">GetLinearSymbolSequence()</a>, <a class="el" href="lattice-weight-test_8cc_source.html#l00062">LatticeWeightTest()</a>, <a class="el" href="lattice-best-path_8cc_source.html#l00027">main()</a>, <a class="el" href="push-special_8cc_source.html#l00188">PushSpecialClass::ModifyFst()</a>, <a class="el" href="fstrmsymbols_8cc_source.html#l00058">PenalizeArcsWithSomeInputSymbols()</a>, <a class="el" href="generate-proxy-keywords_8cc_source.html#l00029">PrintProxyFstPath()</a>, <a class="el" href="lattice-biglm-faster-decoder_8h_source.html#l00687">LatticeBiglmFasterDecoder::ProcessEmitting()</a>, <a class="el" href="determinize-star-inl_8h_source.html#l00435">DeterminizerStar&lt; F &gt;::ProcessFinal()</a>, <a class="el" href="determinize-lattice-pruned_8cc_source.html#l00733">LatticeDeterminizerPruned&lt; Weight, IntType &gt;::ProcessFinal()</a>, <a class="el" href="determinize-lattice-inl_8h_source.html#l00852">LatticeDeterminizer&lt; Weight, IntType &gt;::ProcessFinal()</a>, <a class="el" href="prune-special-inl_8h_source.html#l00092">PruneSpecialClass&lt; Arc &gt;::ProcessState()</a>, <a class="el" href="compose-lattice-pruned_8cc_source.html#l00753">PrunedCompactLatticeComposer::ProcessTransition()</a>, <a class="el" href="determinize-lattice-pruned_8cc_source.html#l00846">LatticeDeterminizerPruned&lt; Weight, IntType &gt;::ProcessTransition()</a>, <a class="el" href="determinize-lattice-inl_8h_source.html#l00962">LatticeDeterminizer&lt; Weight, IntType &gt;::ProcessTransition()</a>, <a class="el" href="determinize-star-inl_8h_source.html#l00501">DeterminizerStar&lt; F &gt;::ProcessTransitions()</a>, <a class="el" href="determinize-lattice-pruned_8cc_source.html#l00902">LatticeDeterminizerPruned&lt; Weight, IntType &gt;::ProcessTransitions()</a>, <a class="el" href="determinize-lattice-inl_8h_source.html#l01018">LatticeDeterminizer&lt; Weight, IntType &gt;::ProcessTransitions()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l01051">PropagateFinalInternal()</a>, <a class="el" href="biglm-faster-decoder_8h_source.html#l00316">BiglmFasterDecoder::PropagateLm()</a>, <a class="el" href="lattice-biglm-faster-decoder_8h_source.html#l00663">LatticeBiglmFasterDecoder::PropagateLm()</a>, <a class="el" href="push-lattice_8cc_source.html#l00217">PushCompactLatticeWeights()</a>, <a class="el" href="biglm-faster-decoder_8h_source.html#l00101">BiglmFasterDecoder::ReachedFinal()</a>, <a class="el" href="remove-eps-local-inl_8h_source.html#l00139">RemoveEpsLocalClass&lt; Arc, ReweightPlus &gt;::Reweight()</a>, <a class="el" href="lattice-weight_8h_source.html#l00672">Times()</a>, <a class="el" href="biglm-faster-decoder_8h_source.html#l00204">BiglmFasterDecoder::Token::Token()</a>, and <a class="el" href="deterministic-fst-test_8cc_source.html#l00117">WalkSinglePath()</a>.</p>
<div class="fragment"><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                                                                                {</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="keywordflow">return</span> LatticeWeightTpl&lt;FloatType&gt;(w1.Value1()+w2.Value1(), w1.Value2()+w2.Value2());</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a7512896457d14cac2dc2804d7200162a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7512896457d14cac2dc2804d7200162a">&#9670;&nbsp;</a></span>Times() <span class="overload">[5/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt;WeightType, IntType&gt; fst::Times </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfst_1_1CompactLatticeWeightTpl.html">CompactLatticeWeightTpl</a>&lt; WeightType, IntType &gt; &amp;&#160;</td>
          <td class="paramname"><em>w2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-weight_8h_source.html#l00672">672</a> of file <a class="el" href="lattice-weight_8h_source.html">lattice-weight.h</a>.</p>

<p class="reference">References <a class="el" href="lattice-weight_8h_source.html#l00450">CompactLatticeWeightTpl&lt; WeightType, IntType &gt;::String()</a>, <a class="el" href="lattice-weight_8h_source.html#l00363">Times()</a>, <a class="el" href="lattice-weight_8h_source.html#l00448">CompactLatticeWeightTpl&lt; WeightType, IntType &gt;::Weight()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00456">CompactLatticeWeightTpl&lt; WeightType, IntType &gt;::Zero()</a>.</p>
<div class="fragment"><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                                                            {</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  WeightType w = <a class="code" href="namespacefst.html#a7512896457d14cac2dc2804d7200162a">Times</a>(w1.Weight(), w2.Weight());</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="keywordflow">if</span> (w == WeightType::Zero()) {</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="keywordflow">return</span> CompactLatticeWeightTpl&lt;WeightType, IntType&gt;::Zero();</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="comment">// special case to ensure zero is unique</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    vector&lt;IntType&gt; v;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    v.resize(w1.String().size() + w2.String().size());</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keyword">typename</span> vector&lt;IntType&gt;::iterator iter = v.begin();</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    iter = std::copy(w1.String().begin(), w1.String().end(), iter); <span class="comment">// returns end of first range.</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    std::copy(w2.String().begin(), w2.String().end(), iter);</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keywordflow">return</span> CompactLatticeWeightTpl&lt;WeightType, IntType&gt;(w, v);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  }</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;}</div><div class="ttc" id="namespacefst_html_a7512896457d14cac2dc2804d7200162a"><div class="ttname"><a href="namespacefst.html#a7512896457d14cac2dc2804d7200162a">fst::Times</a></div><div class="ttdeci">CompactLatticeWeightTpl&lt; WeightType, IntType &gt; Times(const CompactLatticeWeightTpl&lt; WeightType, IntType &gt; &amp;w1, const CompactLatticeWeightTpl&lt; WeightType, IntType &gt; &amp;w2)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00672">lattice-weight.h:672</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a323c3df81cbbe8508ef1609aaa2ba7d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a323c3df81cbbe8508ef1609aaa2ba7d3">&#9670;&nbsp;</a></span>WalkSinglePath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> fst::WalkSinglePath </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">StdVectorFst</a> *&#160;</td>
          <td class="paramname"><em>ifst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfst_1_1DeterministicOnDemandFst.html">DeterministicOnDemandFst</a>&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; *&#160;</td>
          <td class="paramname"><em>dfst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="deterministic-fst-test_8cc_source.html#l00117">117</a> of file <a class="el" href="deterministic-fst-test_8cc_source.html">deterministic-fst-test.cc</a>.</p>

<p class="reference">References <a class="el" href="classfst_1_1DeterministicOnDemandFst.html#a821d4cbaa38c2099420d32e2ebfd8cb5">DeterministicOnDemandFst&lt; Arc &gt;::Final()</a>, <a class="el" href="classfst_1_1DeterministicOnDemandFst.html#ab4a21e2db44efc216527770583f17405">DeterministicOnDemandFst&lt; Arc &gt;::GetArc()</a>, <a class="el" href="kaldi-error_8h_source.html#l00132">KALDI_LOG</a>, <a class="el" href="classfst_1_1DeterministicOnDemandFst.html#a1949a5aafed40388f38cb05bdf94db1b">DeterministicOnDemandFst&lt; Arc &gt;::Start()</a>, and <a class="el" href="lattice-weight_8h_source.html#l00363">Times()</a>.</p>

<p class="reference">Referenced by <a class="el" href="deterministic-fst-test_8cc_source.html#l00180">TestCompose()</a>.</p>
<div class="fragment"><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                                                                                  {</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <a class="code" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> oarc; <span class="comment">// =  new StdArc();</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a> isrc=ifst-&gt;Start();</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">StateId</a> dsrc=dfst-&gt;<a class="code" href="classfst_1_1DeterministicOnDemandFst.html#a1949a5aafed40388f38cb05bdf94db1b">Start</a>();</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> totalCost = Weight::One();</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  </div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="keywordflow">while</span> (ifst-&gt;Final(isrc) == Weight::Zero()) { <span class="comment">// while not final</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    fst::ArcIterator&lt;StdVectorFst&gt; aiter(*ifst, isrc);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keyword">const</span> <a class="code" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &amp;iarc = aiter.Value();</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordflow">if</span> (dfst-&gt;<a class="code" href="classfst_1_1DeterministicOnDemandFst.html#ab4a21e2db44efc216527770583f17405">GetArc</a>(dsrc, iarc.olabel, &amp;oarc)) {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Weight</a> cost = <a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(iarc.weight, oarc.weight);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      <span class="comment">// cout &lt;&lt; &quot;  Matched label &quot;&lt;&lt;iarc.olabel&lt;&lt;&quot; at summed cost &quot;&lt;&lt;cost&lt;&lt;endl;      </span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      totalCost = <a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(totalCost, cost);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      cout &lt;&lt; <span class="stringliteral">&quot;  Can&#39;t match arc [&quot;</span>&lt;&lt;iarc.ilabel&lt;&lt;<span class="stringliteral">&quot;,&quot;</span>&lt;&lt;iarc.olabel&lt;&lt;<span class="stringliteral">&quot;,&quot;</span>&lt;&lt;iarc.weight&lt;&lt;<span class="stringliteral">&quot;] from &quot;</span>&lt;&lt;isrc&lt;&lt;endl;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      exit(1);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    }</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    isrc = iarc.nextstate;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="group__error__group.html#gaf8fb55454306b60c9c1e07a6ef9d341a">KALDI_LOG</a> &lt;&lt; <span class="stringliteral">&quot;Setting dsrc = &quot;</span> &lt;&lt; oarc.nextstate;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    dsrc = oarc.nextstate;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  totalCost = <a class="code" href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">Times</a>(totalCost, dfst-&gt;<a class="code" href="classfst_1_1DeterministicOnDemandFst.html#a821d4cbaa38c2099420d32e2ebfd8cb5">Final</a>(dsrc));</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                    </div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  cout &lt;&lt; <span class="stringliteral">&quot;  Total cost: &quot;</span> &lt;&lt; totalCost &lt;&lt; endl;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordflow">return</span> totalCost;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="classfst_1_1DeterministicOnDemandFst_html_ab4a21e2db44efc216527770583f17405"><div class="ttname"><a href="classfst_1_1DeterministicOnDemandFst.html#ab4a21e2db44efc216527770583f17405">fst::DeterministicOnDemandFst::GetArc</a></div><div class="ttdeci">virtual bool GetArc(StateId s, Label ilabel, Arc *oarc)=0</div><div class="ttdoc">Note: ilabel must not be epsilon. </div></div>
<div class="ttc" id="classfst_1_1DeterministicOnDemandFst_html_a821d4cbaa38c2099420d32e2ebfd8cb5"><div class="ttname"><a href="classfst_1_1DeterministicOnDemandFst.html#a821d4cbaa38c2099420d32e2ebfd8cb5">fst::DeterministicOnDemandFst::Final</a></div><div class="ttdeci">virtual Weight Final(StateId s)=0</div></div>
<div class="ttc" id="namespacefst_html_a70478eb2428a9406e4692d19a7a3a97f"><div class="ttname"><a href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">fst::StdArc</a></div><div class="ttdeci">fst::StdArc StdArc</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00053">deterministic-fst-test.cc:53</a></div></div>
<div class="ttc" id="classfst_1_1DeterministicOnDemandFst_html_a1949a5aafed40388f38cb05bdf94db1b"><div class="ttname"><a href="classfst_1_1DeterministicOnDemandFst.html#a1949a5aafed40388f38cb05bdf94db1b">fst::DeterministicOnDemandFst::Start</a></div><div class="ttdeci">virtual StateId Start()=0</div></div>
<div class="ttc" id="namespacefst_html_a0807071c6ceb397bc35281fce74ff8a7"><div class="ttname"><a href="namespacefst.html#a0807071c6ceb397bc35281fce74ff8a7">fst::Times</a></div><div class="ttdeci">LatticeWeightTpl&lt; FloatType &gt; Times(const LatticeWeightTpl&lt; FloatType &gt; &amp;w1, const LatticeWeightTpl&lt; FloatType &gt; &amp;w2)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00363">lattice-weight.h:363</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="group__error__group_html_gaf8fb55454306b60c9c1e07a6ef9d341a"><div class="ttname"><a href="group__error__group.html#gaf8fb55454306b60c9c1e07a6ef9d341a">KALDI_LOG</a></div><div class="ttdeci">#define KALDI_LOG</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00132">kaldi-error.h:132</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af4d1d7b428370986d1a8d122b83eebff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4d1d7b428370986d1a8d122b83eebff">&#9670;&nbsp;</a></span>WriteFstKaldi() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WriteFstKaldi </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>os</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>binary</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const VectorFst&lt; Arc &gt; &amp;&#160;</td>
          <td class="paramname"><em>t</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="kaldi-fst-io-inl_8h_source.html#l00031">31</a> of file <a class="el" href="kaldi-fst-io-inl_8h_source.html">kaldi-fst-io-inl.h</a>.</p>

<p class="reference">References <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>.</p>

<p class="reference">Referenced by <a class="el" href="fstaddselfloops_8cc_source.html#l00036">main()</a>, and <a class="el" href="kaldi-fst-io-inl_8h_source.html#l00170">VectorFstTplHolder&lt; Arc &gt;::Write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;                                            {</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <span class="keywordtype">bool</span> ok;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="keywordflow">if</span> (binary) {</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="comment">// Binary-mode writing.</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    ok = t.Write(os, FstWriteOptions());</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="comment">// Text-mode output.  Note: we expect that t.InputSymbols() and</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="comment">// t.OutputSymbols() would always return NULL.  The corresponding input</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="comment">// routine would not work if the FST actually had symbols attached.  Write a</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="comment">// newline to start the FST; in a table, the first line of the FST will</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="comment">// appear on its own line.</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    os &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keywordtype">bool</span> acceptor = <span class="keyword">false</span>, write_one = <span class="keyword">false</span>;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    FstPrinter&lt;Arc&gt; printer(t, t.InputSymbols(), t.OutputSymbols(),</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                            NULL, acceptor, write_one, <span class="stringliteral">&quot;\t&quot;</span>);</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    printer.Print(&amp;os, <span class="stringliteral">&quot;&lt;unknown&gt;&quot;</span>);</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordflow">if</span> (os.fail())</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;      <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Stream failure detected writing FST to stream&quot;</span>;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="comment">// Write another newline as a terminating character.  The read routine will</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="comment">// detect this [this is a Kaldi mechanism, not something in the original</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="comment">// OpenFst code].</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    os &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    ok = os.good();</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  }</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="keywordflow">if</span> (!ok) {</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Error writing FST to stream&quot;</span>;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  }</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;}</div><div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a19221711656d7f96c97c442c5b1e3631"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19221711656d7f96c97c442c5b1e3631">&#9670;&nbsp;</a></span>WriteFstKaldi() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WriteFstKaldi </td>
          <td>(</td>
          <td class="paramtype">const VectorFst&lt; <a class="el" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">StdArc</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>wxfilename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="kaldi-fst-io_8cc_source.html#l00115">115</a> of file <a class="el" href="kaldi-fst-io_8cc_source.html">kaldi-fst-io.cc</a>.</p>

<p class="reference">References <a class="el" href="kaldi-io_8cc_source.html#l00073">kaldi::PrintableWxfilename()</a>, and <a class="el" href="kaldi-io_8cc_source.html#l00701">Output::Stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                                         {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="keywordflow">if</span> (wxfilename == <span class="stringliteral">&quot;&quot;</span>) wxfilename = <span class="stringliteral">&quot;-&quot;</span>; <span class="comment">// interpret &quot;&quot; as stdout,</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="comment">// for compatibility with OpenFst conventions.</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="keywordtype">bool</span> write_binary = <span class="keyword">true</span>, write_header = <span class="keyword">false</span>;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <a class="code" href="classkaldi_1_1Output.html">kaldi::Output</a> ko(wxfilename, write_binary, write_header);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  FstWriteOptions wopts(<a class="code" href="group__io__group.html#ga49ea634f41f64ac49eaeaf2a1042df02">kaldi::PrintableWxfilename</a>(wxfilename));</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <a class="code" href="namespacefst.html">fst</a>.Write(ko.Stream(), wopts);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;}</div><div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="group__io__group_html_ga49ea634f41f64ac49eaeaf2a1042df02"><div class="ttname"><a href="group__io__group.html#ga49ea634f41f64ac49eaeaf2a1042df02">kaldi::PrintableWxfilename</a></div><div class="ttdeci">std::string PrintableWxfilename(std::string wxfilename)</div><div class="ttdoc">PrintableWxfilename turns the filename into a more human-readable form for error reporting, i.e. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-io_8cc_source.html#l00073">kaldi-io.cc:73</a></div></div>
<div class="ttc" id="classkaldi_1_1Output_html"><div class="ttname"><a href="classkaldi_1_1Output.html">kaldi::Output</a></div><div class="ttdef"><b>Definition:</b> <a href="kaldi-io_8h_source.html#l00124">kaldi-io.h:124</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a34bd956ade7a51e8051267bf5c2519cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34bd956ade7a51e8051267bf5c2519cb">&#9670;&nbsp;</a></span>WriteILabelInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WriteILabelInfo </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>os</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>binary</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vector&lt; vector&lt; int32 &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Utility function for writing ilabel-info vectors to disk. </p>

<p class="definition">Definition at line <a class="el" href="context-fst_8cc_source.html#l00324">324</a> of file <a class="el" href="context-fst_8cc_source.html">context-fst.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="io-funcs-inl_8h_source.html#l00034">kaldi::WriteBasicType()</a>, and <a class="el" href="io-funcs-inl_8h_source.html#l00198">kaldi::WriteIntegerVector()</a>.</p>

<p class="reference">Referenced by <a class="el" href="make-ilabel-transducer_8cc_source.html#l00029">main()</a>, and <a class="el" href="context-fst-test_8cc_source.html#l00157">TestContextFst()</a>.</p>
<div class="fragment"><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                                                         {</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  int32 size = info.size();</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga108506a9aabafd9006926aa1b47617da">kaldi::WriteBasicType</a>(os, binary, size);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; size; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <a class="code" href="group__io__funcs__basic.html#ga99e4557f845a9c1e3202ab136226a980">kaldi::WriteIntegerVector</a>(os, binary, info[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  }</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;}</div><div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__io__funcs__basic_html_ga99e4557f845a9c1e3202ab136226a980"><div class="ttname"><a href="group__io__funcs__basic.html#ga99e4557f845a9c1e3202ab136226a980">kaldi::WriteIntegerVector</a></div><div class="ttdeci">void WriteIntegerVector(std::ostream &amp;os, bool binary, const std::vector&lt; T &gt; &amp;v)</div><div class="ttdoc">Function for writing STL vectors of integer types. </div><div class="ttdef"><b>Definition:</b> <a href="io-funcs-inl_8h_source.html#l00198">io-funcs-inl.h:198</a></div></div>
<div class="ttc" id="group__io__funcs__basic_html_ga108506a9aabafd9006926aa1b47617da"><div class="ttname"><a href="group__io__funcs__basic.html#ga108506a9aabafd9006926aa1b47617da">kaldi::WriteBasicType</a></div><div class="ttdeci">void WriteBasicType(std::ostream &amp;os, bool binary, T t)</div><div class="ttdoc">WriteBasicType is the name of the write function for bool, integer types, and floating-point types...</div><div class="ttdef"><b>Definition:</b> <a href="io-funcs-inl_8h_source.html#l00034">io-funcs-inl.h:34</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefst.html">fst</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
